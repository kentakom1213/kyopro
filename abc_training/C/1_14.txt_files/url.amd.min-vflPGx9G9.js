define(["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/preview_archive/constants","typescript/libraries/file-viewer/src/preview_archive/utils"],(function(e,r,t,i,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.middleware=void 0,r.middleware=function(e){return({dispatch:r})=>n=>u=>{if(u.type===t.Action.UpdateArchiveFileCurrentPath)u.payload.fromUrlChanged||e.setQueryStringParameter(i.ArchiveSubpathQueryStringKey,a.archiveCurrentPathToQueryStringValue(u.payload.currentPath));else{if(u.type===t.Action.SetupArchiveFileCurrentPath){const c=(function(e,r,n){return(u,c)=>{u===i.ArchiveSubpathQueryStringKey&&n(t.updateArchiveFileCurrentPath({currentPath:a.queryStringValueToArchiveCurrentPath(c),fileViewerId:e,previewKey:r,fromUrlChanged:!0}))}})(u.payload.fileViewerId,u.payload.previewKey,r);e.onQueryStringParameterChange(i.ArchiveSubpathQueryStringKey,c);const p=e.getQueryStringParameter(i.ArchiveSubpathQueryStringKey);return n(t.updateArchiveFileCurrentPath({currentPath:a.queryStringValueToArchiveCurrentPath(p),fileViewerId:u.payload.fileViewerId,previewKey:u.payload.previewKey}))}u.type===t.Action.OpenFileURL?e.openFile(u.payload.fqPath):u.type===t.Action.CloseViewer?e.setQueryStringParameter(i.ArchiveSubpathQueryStringKey,null):u.type===t.Action.Redirect&&e.redirect(u.payload.href,u.payload.newTab)}return n(u)}}}));
//# sourceMappingURL=url.amd.min.js-vflhSimMe.map
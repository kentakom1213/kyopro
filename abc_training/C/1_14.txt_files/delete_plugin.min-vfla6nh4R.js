define(["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","modules/core/i18n","modules/clean/react/action_bar/file_actions/portable/utils","modules/clean/react/action_bar/file_actions/portable/delete/delete","modules/clean/react/action_bar/file_actions/portable/delete/snackbars","modules/clean/file_store/utils","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/clean/react/action_bar/action_bar_strings"],(function(e,t,i,o,n,a,l,s,c,r,_,d,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeDeleteActionLoader=t.DELETE_ACTION_PLUGIN_ID=void 0,o=i.__importDefault(o),t.DELETE_ACTION_PLUGIN_ID="DELETE_ACTION",t.makeDeleteActionLoader=(e,t,i)=>()=>Promise.resolve(class{constructor(e){this.lifecycle={previewWillInitialize:()=>{this.actionDefinitions.alwaysInOverflow=[this.actionToDisplay()]}},this.actionDefinitions={alwaysInOverflow:[this.actionToDisplay()]},this.context=e}actionToDisplay(){const{file:t}=e();if(_.isSharedFile(t)||d.isPnmLinkNodeSelected(t)||!d.isLiveFile(t))return[];const i=this.deleteDefinition();return i?[i]:[]}deleteDefinition(){const{file:_}=e();if("fq_path"in _)return s.makePluginActionDefinition({label:l.intl.formatMessage(f.DELETE_ACTION_STRING),icon:o.default.createElement(a.UIIcon,{src:n.DeleteLine}),disabled:_.read_only?{disabled:!0,tooltipMessage:l.intl.formatMessage(f.ACTION_DISABLED_STRING)}:{disabled:!1},action:()=>{const e={fq_path:_.fq_path,is_dir:_.is_dir};this.context.logUserAction({action:"delete",context:"overflow_menu"}),c.portableDelete({user:t,filesPath:[e],fq_path:_.fq_path},{onNetworkRequest:()=>r.deleteSnackBarInProgress(d.PREVIEWS_SNACKBAR_ID),onSuccess:()=>{r.deleteCompleteSnackBar(d.PREVIEWS_SNACKBAR_ID),i&&i(_)},onError:e=>r.deleteFailedSnackBar(e,d.PREVIEWS_SNACKBAR_ID)})}})}})}));
//# sourceMappingURL=delete_plugin.min.js-vflf6wihL.map
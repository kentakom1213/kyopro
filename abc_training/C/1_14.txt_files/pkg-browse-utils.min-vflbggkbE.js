define("dropbox/proto/js_init_data/browse_web/browse_web",["require","exports","tslib","protobufjs/minimal","dropbox/proto/js_init_data/login_form/login_form"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.browse_web=void 0;const l=(o=i.__importStar(o)).Reader,a=o.Writer,s=o.util,n=o.roots.default||(o.roots.default={});var r;t.default=n,t.browse_web=n.browse_web=((r=n.browse_web||{}).BrowseExperiments=(function(e){function e(e){if(e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.goldenGateRaclsEnabled=!1,e.prototype.folderHistoryRollbacks=!1,e.prototype.lifeVault=!1,e.prototype.plusPlusEnabled=!1,e.prototype.browseWebHqlPilot=!1,e.prototype.browseColumnHeaderImprovements=!1,e.prototype.spacesFssModalVariant="",e.prototype.splitTmfTsd=!1,e.prototype.browseRowPerformance=!1,e.prototype.browseBoostSharing="",e.prototype.suggestedFoldersIndividual="",e.prototype.manualTagging="",e.prototype.suggestedFoldersPro="",e.prototype.coreO21nInFolderActivationM1="",e.prototype.browseCommitTokenBatch=!1,e.prototype.flowsAutomatedFolderUi=!1,e.prototype.flowsAutoTagUi=!1,e.prototype.browseContentSuggestionsVariant="",e.prototype.autoTagAwareness=!1,e.prototype.teamSpaceTsdAccessVisibility="",e.prototype.coreO21nLeverageEmptyStates="",e.prototype.isTransferEnabled=!1,e.prototype.multiObjectSharingRedesignExp="",e.prototype.coreO21nInFolderActivationM2="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.goldenGateRaclsEnabled&&Object.hasOwnProperty.call(e,"goldenGateRaclsEnabled")&&t.uint32(8).bool(e.goldenGateRaclsEnabled),null!=e.folderHistoryRollbacks&&Object.hasOwnProperty.call(e,"folderHistoryRollbacks")&&t.uint32(24).bool(e.folderHistoryRollbacks),null!=e.lifeVault&&Object.hasOwnProperty.call(e,"lifeVault")&&t.uint32(72).bool(e.lifeVault),null!=e.plusPlusEnabled&&Object.hasOwnProperty.call(e,"plusPlusEnabled")&&t.uint32(112).bool(e.plusPlusEnabled),null!=e.browseWebHqlPilot&&Object.hasOwnProperty.call(e,"browseWebHqlPilot")&&t.uint32(120).bool(e.browseWebHqlPilot),null!=e.browseColumnHeaderImprovements&&Object.hasOwnProperty.call(e,"browseColumnHeaderImprovements")&&t.uint32(176).bool(e.browseColumnHeaderImprovements),null!=e.spacesFssModalVariant&&Object.hasOwnProperty.call(e,"spacesFssModalVariant")&&t.uint32(226).string(e.spacesFssModalVariant),null!=e.splitTmfTsd&&Object.hasOwnProperty.call(e,"splitTmfTsd")&&t.uint32(240).bool(e.splitTmfTsd),null!=e.browseRowPerformance&&Object.hasOwnProperty.call(e,"browseRowPerformance")&&t.uint32(288).bool(e.browseRowPerformance),null!=e.browseBoostSharing&&Object.hasOwnProperty.call(e,"browseBoostSharing")&&t.uint32(298).string(e.browseBoostSharing),null!=e.suggestedFoldersIndividual&&Object.hasOwnProperty.call(e,"suggestedFoldersIndividual")&&t.uint32(322).string(e.suggestedFoldersIndividual),null!=e.manualTagging&&Object.hasOwnProperty.call(e,"manualTagging")&&t.uint32(330).string(e.manualTagging),null!=e.suggestedFoldersPro&&Object.hasOwnProperty.call(e,"suggestedFoldersPro")&&t.uint32(346).string(e.suggestedFoldersPro),null!=e.coreO21nInFolderActivationM1&&Object.hasOwnProperty.call(e,"coreO21nInFolderActivationM1")&&t.uint32(354).string(e.coreO21nInFolderActivationM1),null!=e.browseCommitTokenBatch&&Object.hasOwnProperty.call(e,"browseCommitTokenBatch")&&t.uint32(360).bool(e.browseCommitTokenBatch),null!=e.flowsAutomatedFolderUi&&Object.hasOwnProperty.call(e,"flowsAutomatedFolderUi")&&t.uint32(368).bool(e.flowsAutomatedFolderUi),null!=e.flowsAutoTagUi&&Object.hasOwnProperty.call(e,"flowsAutoTagUi")&&t.uint32(376).bool(e.flowsAutoTagUi),null!=e.browseContentSuggestionsVariant&&Object.hasOwnProperty.call(e,"browseContentSuggestionsVariant")&&t.uint32(386).string(e.browseContentSuggestionsVariant),null!=e.autoTagAwareness&&Object.hasOwnProperty.call(e,"autoTagAwareness")&&t.uint32(392).bool(e.autoTagAwareness),null!=e.teamSpaceTsdAccessVisibility&&Object.hasOwnProperty.call(e,"teamSpaceTsdAccessVisibility")&&t.uint32(402).string(e.teamSpaceTsdAccessVisibility),null!=e.coreO21nLeverageEmptyStates&&Object.hasOwnProperty.call(e,"coreO21nLeverageEmptyStates")&&t.uint32(410).string(e.coreO21nLeverageEmptyStates),null!=e.isTransferEnabled&&Object.hasOwnProperty.call(e,"isTransferEnabled")&&t.uint32(416).bool(e.isTransferEnabled),null!=e.multiObjectSharingRedesignExp&&Object.hasOwnProperty.call(e,"multiObjectSharingRedesignExp")&&t.uint32(426).string(e.multiObjectSharingRedesignExp),null!=e.coreO21nInFolderActivationM2&&Object.hasOwnProperty.call(e,"coreO21nInFolderActivationM2")&&t.uint32(434).string(e.coreO21nInFolderActivationM2),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let i=void 0===t?e.len:e.pos+t,o=new n.browse_web.BrowseExperiments;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:o.goldenGateRaclsEnabled=e.bool();break;case 3:o.folderHistoryRollbacks=e.bool();break;case 9:o.lifeVault=e.bool();break;case 14:o.plusPlusEnabled=e.bool();break;case 15:o.browseWebHqlPilot=e.bool();break;case 22:o.browseColumnHeaderImprovements=e.bool();break;case 28:o.spacesFssModalVariant=e.string();break;case 30:o.splitTmfTsd=e.bool();break;case 36:o.browseRowPerformance=e.bool();break;case 37:o.browseBoostSharing=e.string();break;case 40:o.suggestedFoldersIndividual=e.string();break;case 41:o.manualTagging=e.string();break;case 43:o.suggestedFoldersPro=e.string();break;case 44:o.coreO21nInFolderActivationM1=e.string();break;case 45:o.browseCommitTokenBatch=e.bool();break;case 46:o.flowsAutomatedFolderUi=e.bool();break;case 47:o.flowsAutoTagUi=e.bool();break;case 48:o.browseContentSuggestionsVariant=e.string();break;case 49:o.autoTagAwareness=e.bool();break;case 50:o.teamSpaceTsdAccessVisibility=e.string();break;case 51:o.coreO21nLeverageEmptyStates=e.string();break;case 52:o.isTransferEnabled=e.bool();break;case 53:o.multiObjectSharingRedesignExp=e.string();break;case 54:o.coreO21nInFolderActivationM2=e.string();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/browse_web.BrowseExperiments"},e})(r.BrowseExperiments||{}),r.BrowseWebPageProps=(function(e){function e(e){if(this.selectFqPaths=[],e)for(let t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.autoTeamGroupId="",e.prototype.emailJustVerified=!1,e.prototype.emailJustVerifiedAndChanged=!1,e.prototype.fromSclSyncModal=!1,e.prototype.initFqPath="",e.prototype.nsId=0,e.prototype.nsPath="",e.prototype.openPreview=!1,e.prototype.selectFqPaths=s.emptyArray,e.prototype.sendVerificationEmail=!1,e.prototype.shareLink=!1,e.prototype.sharePrefillEmail="",e.prototype.shouldShowDeletedFiles=!1,e.prototype.shouldShowUnsyncNotification=!1,e.prototype.shouldOpenExtensionsEduModal="",e.prototype.shouldOpenAppRecommendationsModal=!1,e.prototype.shouldOpenUploadModal=!1,e.prototype.showShareModal=!1,e.prototype.showShareSuccessSnackbar=!1,e.prototype.userId=0,e.prototype.userVersionHistoryLength=0,e.prototype.browseExperiments=null,e.prototype.webTimingLoggerServerContext="",e.prototype.showPlusPlusSetupModal=!1,e.prototype.isSmbPersonalization=!1,e.prototype.hasLinkedMobile=!1,e.prototype.encryptionOptions=null,e.prototype.fromCtl=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.autoTeamGroupId&&Object.hasOwnProperty.call(e,"autoTeamGroupId")&&t.uint32(10).string(e.autoTeamGroupId),null!=e.emailJustVerified&&Object.hasOwnProperty.call(e,"emailJustVerified")&&t.uint32(16).bool(e.emailJustVerified),null!=e.emailJustVerifiedAndChanged&&Object.hasOwnProperty.call(e,"emailJustVerifiedAndChanged")&&t.uint32(24).bool(e.emailJustVerifiedAndChanged),null!=e.fromSclSyncModal&&Object.hasOwnProperty.call(e,"fromSclSyncModal")&&t.uint32(32).bool(e.fromSclSyncModal),null!=e.initFqPath&&Object.hasOwnProperty.call(e,"initFqPath")&&t.uint32(42).string(e.initFqPath),null!=e.nsId&&Object.hasOwnProperty.call(e,"nsId")&&t.uint32(48).int64(e.nsId),null!=e.nsPath&&Object.hasOwnProperty.call(e,"nsPath")&&t.uint32(58).string(e.nsPath),null!=e.openPreview&&Object.hasOwnProperty.call(e,"openPreview")&&t.uint32(64).bool(e.openPreview),null!=e.selectFqPaths&&e.selectFqPaths.length)for(let i=0;i<e.selectFqPaths.length;++i)t.uint32(74).string(e.selectFqPaths[i]);return null!=e.sendVerificationEmail&&Object.hasOwnProperty.call(e,"sendVerificationEmail")&&t.uint32(80).bool(e.sendVerificationEmail),null!=e.shareLink&&Object.hasOwnProperty.call(e,"shareLink")&&t.uint32(88).bool(e.shareLink),null!=e.sharePrefillEmail&&Object.hasOwnProperty.call(e,"sharePrefillEmail")&&t.uint32(98).string(e.sharePrefillEmail),null!=e.shouldShowDeletedFiles&&Object.hasOwnProperty.call(e,"shouldShowDeletedFiles")&&t.uint32(104).bool(e.shouldShowDeletedFiles),null!=e.shouldShowUnsyncNotification&&Object.hasOwnProperty.call(e,"shouldShowUnsyncNotification")&&t.uint32(112).bool(e.shouldShowUnsyncNotification),null!=e.shouldOpenExtensionsEduModal&&Object.hasOwnProperty.call(e,"shouldOpenExtensionsEduModal")&&t.uint32(122).string(e.shouldOpenExtensionsEduModal),null!=e.shouldOpenAppRecommendationsModal&&Object.hasOwnProperty.call(e,"shouldOpenAppRecommendationsModal")&&t.uint32(128).bool(e.shouldOpenAppRecommendationsModal),null!=e.shouldOpenUploadModal&&Object.hasOwnProperty.call(e,"shouldOpenUploadModal")&&t.uint32(136).bool(e.shouldOpenUploadModal),null!=e.showShareModal&&Object.hasOwnProperty.call(e,"showShareModal")&&t.uint32(144).bool(e.showShareModal),null!=e.showShareSuccessSnackbar&&Object.hasOwnProperty.call(e,"showShareSuccessSnackbar")&&t.uint32(152).bool(e.showShareSuccessSnackbar),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(176).int64(e.userId),null!=e.userVersionHistoryLength&&Object.hasOwnProperty.call(e,"userVersionHistoryLength")&&t.uint32(184).int32(e.userVersionHistoryLength),null!=e.browseExperiments&&Object.hasOwnProperty.call(e,"browseExperiments")&&n.browse_web.BrowseExperiments.encode(e.browseExperiments,t.uint32(194).fork()).ldelim(),null!=e.webTimingLoggerServerContext&&Object.hasOwnProperty.call(e,"webTimingLoggerServerContext")&&t.uint32(210).string(e.webTimingLoggerServerContext),null!=e.showPlusPlusSetupModal&&Object.hasOwnProperty.call(e,"showPlusPlusSetupModal")&&t.uint32(216).bool(e.showPlusPlusSetupModal),null!=e.isSmbPersonalization&&Object.hasOwnProperty.call(e,"isSmbPersonalization")&&t.uint32(224).bool(e.isSmbPersonalization),null!=e.hasLinkedMobile&&Object.hasOwnProperty.call(e,"hasLinkedMobile")&&t.uint32(232).bool(e.hasLinkedMobile),null!=e.encryptionOptions&&Object.hasOwnProperty.call(e,"encryptionOptions")&&n.login_form.EncryptionOptions.encode(e.encryptionOptions,t.uint32(242).fork()).ldelim(),null!=e.fromCtl&&Object.hasOwnProperty.call(e,"fromCtl")&&t.uint32(248).bool(e.fromCtl),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let i=void 0===t?e.len:e.pos+t,o=new n.browse_web.BrowseWebPageProps;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 1:o.autoTeamGroupId=e.string();break;case 2:o.emailJustVerified=e.bool();break;case 3:o.emailJustVerifiedAndChanged=e.bool();break;case 4:o.fromSclSyncModal=e.bool();break;case 5:o.initFqPath=e.string();break;case 6:o.nsId=e.int64();break;case 7:o.nsPath=e.string();break;case 8:o.openPreview=e.bool();break;case 9:o.selectFqPaths&&o.selectFqPaths.length||(o.selectFqPaths=[]),o.selectFqPaths.push(e.string());break;case 10:o.sendVerificationEmail=e.bool();break;case 11:o.shareLink=e.bool();break;case 12:o.sharePrefillEmail=e.string();break;case 13:o.shouldShowDeletedFiles=e.bool();break;case 14:o.shouldShowUnsyncNotification=e.bool();break;case 15:o.shouldOpenExtensionsEduModal=e.string();break;case 16:o.shouldOpenAppRecommendationsModal=e.bool();break;case 17:o.shouldOpenUploadModal=e.bool();break;case 18:o.showShareModal=e.bool();break;case 19:o.showShareSuccessSnackbar=e.bool();break;case 22:o.userId=e.int64();break;case 23:o.userVersionHistoryLength=e.int32();break;case 24:o.browseExperiments=n.browse_web.BrowseExperiments.decode(e,e.uint32());break;case 26:o.webTimingLoggerServerContext=e.string();break;case 27:o.showPlusPlusSetupModal=e.bool();break;case 28:o.isSmbPersonalization=e.bool();break;case 29:o.hasLinkedMobile=e.bool();break;case 30:o.encryptionOptions=n.login_form.EncryptionOptions.decode(e,e.uint32());break;case 31:o.fromCtl=e.bool();break;default:e.skipType(7&t)}}return o},e.getTypeUrl=function(){return"type.googleapis.com/browse_web.BrowseWebPageProps"},e})(r.BrowseWebPageProps||{}),r)})),define("modules/clean/photos/thumbnail_url_util",["require","exports","tslib","lodash","modules/constants/python","modules/core/assert","modules/core/uri"],(function(e,t,i,o,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullSizeUrl=t.thumbnailUrlForSize=t.ThumbnailSizeMode=void 0,o=i.__importStar(o),l=i.__importStar(l),t.ThumbnailSizeMode=l.THUMBNAIL_SIZE_MODE;const n=l.THUMBNAIL_SIZES;t.thumbnailUrlForSize=function(e,i,l,r){a.assert(null!=i==(null!=l),"Width and height must both be specified or neither");const d={};if(null==i)a.assert(r===t.ThumbnailSizeMode.ORIGINAL||null===r,"You must supply width and height");else{const e=`${i}x${l}`;a.assert(n.indexOf(e)>-1,`Invalid thumbnail size (${e})`),d.size=e}return null!=r&&(a.assert(o.values(t.ThumbnailSizeMode).indexOf(r)>-1,`Invalid thumbnail size mode (${r})`),d.size_mode=r.toString()),s.URI.parse(e).updateQuery(d).toString()},t.fullSizeUrl=function(e){return s.URI.parse(e).updateQuery({size_mode:t.ThumbnailSizeMode.ORIGINAL.toString(),fv_content:"true"}).toString()}})),define("modules/clean/react/browse/browse_right_rail/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BROWSE_BLADE=void 0,t.DEFAULT_BROWSE_BLADE="info"})),define("modules/clean/react/browse/data/helpers",["require","exports","tslib","lodash","modules/clean/filepath/filepath","modules/clean/react/snackbar","modules/core/i18n"],(function(e,t,i,o,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBackupFolder=t.getPathForNewMountPoint=t.getMountPointUpdateForCurrentPath=t.showUserNotificationForPathChange=void 0,o=i.__importStar(o),l=i.__importStar(l),t.showUserNotificationForPathChange=(e,t)=>{switch(null!=t.change_type?t.change_type.toLowerCase():null){case"moved":a.Snackbar.complete(s.intl.formatMessage({id:"dte+6z",defaultMessage:"This folder has been moved"}),"browse-notification");break;case"renamed":a.Snackbar.complete(s.intl.formatMessage({id:"y/ubfn",defaultMessage:"This folder has been renamed to “{folder_name}”"},{folder_name:i(t.change_to_fq_path)}),"browse-notification");break;case"deleted":a.Snackbar.fail(s.intl.formatMessage({id:"MK7bBv",defaultMessage:"The folder “{folder_name}” has been deleted"},{folder_name:i(t.old_fq_path)}),"browse-notification")}function i(e){return o.escape(l.filename(e))}},t.getMountPointUpdateForCurrentPath=(e,t,i)=>{const l=e=>t===e;let a,s;return i&&i.find(l)?(s=i.find(l)||null,a=e[i.findKey(l)]||null):(s=null,a=o.find(e,l)||null),[s,a]},t.getPathForNewMountPoint=(e,t,i)=>e&&!t?i:e&&t?l.paths_are_equal(e,t)?null:t:!e&&t?i:null,t.isBackupFolder=e=>{var t;return["folder_se_mac_32","folder_se_win_32","folder_se_generic_32","external_drive_32"].includes(null!==(t=null==e?void 0:e.icon)&&void 0!==t?t:"")}})),define("modules/clean/react/browse/data/types",["require","exports","tslib","immutable","dropbox/proto/js_init_data/browse_web/browse_web","modules/clean/react/browse/models","modules/clean/react/files_view/types","modules/clean/react/selection","modules/clean/react/browse/browse_right_rail/types","modules/clean/react/flows/types"],(function(e,t,i,o,l,a,s,n,r,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultBrowseState=t.ActionTypes=void 0,o=i.__importStar(o),(function(e){e.APP_INIT="BROWSE/APP_INIT",e.PUSH_BOLT_IGNORE="BROWSE/PUSH_BOLT_IGNORE",e.POP_BOLT_IGNORE="BROWSE/POP_BOLT_IGNORE",e.SELECT_FILES_BY_FQ_PATH="BROWSE/SELECT_FILES_BY_FQ_PATH",e.SHOW_TIMELINE="BROWSE/SHOW_TIMELINE",e.HIDE_TIMELINE="BROWSE/HIDE_TIMELINE",e.SHOW_FOLDER_HISTORY_PANEL="BROWSE/SHOW_FOLDER_HISTORY_PANEL",e.HIDE_FOLDER_HISTORY_PANEL="BROWSE/HIDE_FOLDER_HISTORY_PANEL",e.SET_IS_REWIND_ENABLED="BROWSE/SET_IS_REWIND_ENABLED",e.SET_BROWSE_POST_TTI_EXPERIMENTS="BROWSE/SET_BROWSE_POST_TTI_EXPERIMENTS",e.SET_BROWSE_POST_TTI_DATA="BROWSE/SET_BROWSE_POST_TTI_DATA",e.SET_CAN_DISPLAY_FOLDER_SIZES="BROWSE/SET_CAN_DISPLAY_FOLDER_SIZES",e.SET_CLIPBOARD_FILES="BROWSE/SET_CLIPBOARD_FILES",e.SET_CONTEXT="BROWSE/SET_CONTEXT",e.SET_CURRENT_FOLDER_INFO="BROWSE/SET_CURRENT_FOLDER_INFO",e.SET_FILE_HAS_AUTOMATED_RULE_MAP="BROWSE/SET_FILE_HAS_AUTOMATED_RULE_MAP",e.SET_FILE_JUMP_FILTER="BROWSE/SET_FILE_JUMP_FILTER",e.SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE="BROWSE/SET_FILE_PATHS_TO_SELECT_ON_NEXT_UPDATE",e.SET_FILE_RENAME="BROWSE/SET_FILE_RENAME",e.SET_FOLDER_SIZES="BROWSE/SET_FOLDER_SIZES",e.SET_LOADING_STATE="BROWSE/SET_LOADING_STATE",e.SET_MOUNT_POINTS="BROWSE/SET_MOUNT_POINTS",e.SET_NEW_FOLDER_CREATION_STATE="BROWSE/SET_NEW_FOLDER_CREATION_STATE",e.SET_PAGINATED_TOTAL_NUM_FILES="BROWSE/SET_PAGINATED_TOTAL_NUM_FILES",e.SET_PATH="BROWSE/SET_PATH",e.SET_SELECTION="BROWSE/SET_SELECTION",e.SET_SHOULD_SHOW_DELETED_FILES="BROWSE/SET_SHOULD_SHOW_DELETED_FILES",e.SET_SORT_ORDER="BROWSE/SET_SORT_ORDER",e.SET_UNSORTED_FILES="BROWSE/SET_UNSORTED_FILES",e.SET_IS_FILE_VIEWER_SHOWN="BROWSE/IS_FILE_VIEWER_SHOWN",e.SET_IS_SEARCH_MODE="BROWSE/SET_IS_SEARCH_MODE",e.REQUEST_FOLDER_SIZES="BROWSE/REQUEST_FOLDER_SIZES",e.SET_FOLDER_SIZES_PENDING="BROWSE/SET_FOLDER_SIZES_PENDING",e.COMPLETE_FOLDER_SIZES="BROWSE/COMPLETE_FOLDER_SIZES",e.SET_ARE_POST_TTI_MODULES_LOADED="BROWSE/SET_ARE_POST_TTI_MODULES_LOADED",e.SET_VIEW_SCOPE="BROWSE/SET_VIEW_SCOPE",e.SET_HIDE_FILES_AND_SIDEBAR="BROWSE/SET_HIDE_FILES_AND_SIDEBAR",e.SET_IS_CREATING_SHARED_LINK="BROWSE/SET_IS_CREATING_SHARED_LINK",e.SET_RIGHTRAIL_IS_COLLAPSED="BROWSE/SET_RIGHTRAIL_COLLAPSED",e.SET_EXPANDED_BLADE="BROWSE/SET_EXPANDED_BLADE",e.SET_HAS_USER_UPLOADED_FILES="BROWSE/SET_HAS_USER_UPLOADED_FILES",e.SET_OVERFLOW_MENU_OPEN_REQUEST="BROWSE/SET_OVERFLOW_MENU_OPEN_REQUEST",e.SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST="BROWSE/SET_INLINE_OVERFLOW_MENU_OPEN_REQUEST",e.SET_OVERFLOW_MENU_COORDINATES="BROWSE/SET_OVERFLOW_MENU_COORDINATES",e.SET_OVERFLOW_MENU_CLOSE_REQUEST="BROWSE/SET_OVERFLOW_MENU_CLOSE_REQUEST",e.SET_FOLDER_MEMBER_COUNTS="BROWSE/SET_FOLDER_MEMBER_COUNTS",e.TOGGLE_SPACES_ENTRY_POINT="BROWSE/TOGGLE_SPACES_ENTRY_POINT",e.SET_CREATE_MENU_OPEN_REQUEST="BROWSE/SET_CREATE_MENU_OPEN_REQUEST",e.HANDLE_APP_CLEANUP="BROWSE/HANDLE_APP_CLEANUP",e.SHOW_PERSONALIZATION_SUGGESTED_FOLDERS="BROWSE/SHOW_PERSONALIZATION_SUGGESTED_FOLDERS",e.SHOW_ONBOARDING_CHECKLIST_SHARE_BUTTON_TOOLTIP="BROWSE/SHOW_ONBOARDING_CHECKLIST_SHARE_BUTTON_TOOLTIP",e.SET_BACKUP_FOLDERS="BROWSE/SET_BACKUP_FOLDERS"})(t.ActionTypes||(t.ActionTypes={})),t.defaultBrowseState={boltIgnore:{added:new Set,moved:new Set,removed:new Set},canDisplayFolderSizes:!1,clipboard:{files:[]},context:new a.BrowseContext,isRewindButtonEnabled:!1,experiments:l.browse_web.BrowseExperiments.create(),browsePostTTIExperiments:{},browsePostTTIExperimentsOverrides:{},fileJumpFilter:"",filePathsToSelectOnNextUpdate:o.Set(),folderSizes:o.Map(),isRewindVisible:!1,isFolderHistoryVisible:!1,clickRewindTimestamp:void 0,clickFolderHistoryTimestamp:void 0,loadingState:s.LoadingState.LOADING_FIRST_PAGE,mountPoints:null,newFolderCreationState:s.NewFolderCreationState.CREATE_FOLDER_INACTIVE,paginatedTotalNumFiles:0,path:"",selection:n.createSelection(),shouldShowDeletedFiles:!1,user:null,unsortedFiles:o.Map(),viewer:null,currentFolderSizesQuery:o.Set(),isQueryingFolderSizes:!1,isSearchMode:!1,hasLinkedMobile:!1,autoTeamGroupId:"",browsePostTTIData:{isOverFreeQuota:!1,hasExcludedNsIds:!1,uploaderPostTTIExperiments:{},preferredEditors:{},mobileWebInvites:!1,firstTaskProps:{is_eligible_team:!1,is_subtitle:!1,member_info:{tiered_admin:!1,users:[],evh_max_days:0,team_available_roles:[]},needs_pairing_token:!1,seen_desktop_tooltip:!1},familyMemberCount:0},arePostTTIModulesLoaded:!1,shouldHideFilesAndSidebar:!1,isCreatingSharedLinkMap:o.Map(),isRightRailCollapsed:!1,fileHasAutomatedRuleMap:d.FlowsMap({}),expandedBlade:r.DEFAULT_BROWSE_BLADE,folderMemberCounts:0,isSpacesEntryPointEnabled:!0,backupFolders:null}})),define("modules/clean/react/browse/sort_helpers",["require","exports"],(function(e,t){"use strict";function i(e,t,i){const o="=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let l=0;l<Math.max(e.length,t.length);l++){const a=e.charAt(l),s=t.charAt(l);if(!a)return-i;if(!s)return i;const n=o.indexOf(a),r=o.indexOf(s);if(n<r)return-i;if(r<n)return i}return 0}Object.defineProperty(t,"__esModule",{value:!0}),t.compare=void 0,t.compare=function(e,t,o,l){if(Array.isArray(e)&&Array.isArray(t)){for(let l=0;l<Math.max(e.length,t.length);l++){const a=e[l],s=t[l];if(null==a)return-o;if(null==s)return o;if("number"==typeof a&&"string"==typeof s)return-o;if("number"==typeof s&&"string"==typeof a)return o;if("string"==typeof a&&"string"==typeof s){const e=i(a,s,o);if(0!==e)return e}else{if(a<s)return-o;if(s<a)return o}}return 0}return e===t?0:l&&"string"==typeof e&&"string"==typeof t?l(e,t)<0?-o:o:e<t?-o:o}})),define("modules/clean/react/browse/util",["require","exports","tslib","modules/clean/filepath/filepath","modules/clean/react/browse/models","modules/clean/react/browse/sort_helpers","modules/clean/browse_uri_interface","modules/clean/react/files_view/sort_types","modules/core/exception","modules/core/i18n"],(function(e,t,i,o,l,a,s,n,r,d){"use strict";function c(e,t){return{isFolder:e.is_dir,value:t,isAlwaysFirst:u(e)}}function u(e){return l.File.isTeamMemberFolder(e)||l.File.isFamilySharedFolder(e)}function g(e,t){return e&&t?0:e?-1:t?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getUrlForBackupPath=t.sortFiles=t.getSelectedFilesText=void 0,o=i.__importStar(o),t.getSelectedFilesText=function(e,t){const i=e.count(),o=d.intl.formatMessage({id:"v+fiz1",defaultMessage:"You only have partial access"});return i>0?1!==i||l.File.canViewFileMembers(e.first(),t)?d.intl.formatMessage({id:"cruh0p",defaultMessage:"{count, plural, one{{count} item selected} other{{count} items selected}}"},{count:i}):l.File.isNoAccessSharedFolder(e.first())?d.intl.formatMessage({id:"5Uq4ka",defaultMessage:"You don’t have access to this folder"}):o:t&&!t.canViewContainingNSMembers?o:""},t.sortFiles=function(e,{sortField:t,sortDirection:i},o){const s=(function(e,t){switch(e){case n.SortField.FILENAME:case n.SortField.SHARED_WITH:case n.SortField.TAGS:return e=>c(e,l.File.getFilename(e));case n.SortField.MODIFIED:return e=>c(e,e.ts);case n.SortField.CATEGORY:return e=>c(e,l.File.getCategoryDescription(e));case n.SortField.EXTENSION:return e=>c(e,l.File.getExtension(e));case n.SortField.SIZE:return e=>c(e,e.is_dir&&(null==t?void 0:t.has(e.fq_path))?t.get(e.fq_path).size:e.bytes);default:return}})(t,o),u=(function(e,t){const i=d.case_insensitive_comparator(!0),o=t===n.SortDirection.ASCENDING?1:-1;switch(e){case n.SortField.FILENAME:case n.SortField.SHARED_WITH:case n.SortField.SIZE:case n.SortField.TAGS:return(function(e,t){return function({isFolder:i,value:o,isAlwaysFirst:l},{isFolder:s,value:n,isAlwaysFirst:r}){const d=g(l,r);return 0!==d?d:(o||(o=1/0*e),n||(n=1/0*e),i&&s?a.compare(o,n,e,t):i?-e:s?e:a.compare(o,n,e,t))}})(o,i);case n.SortField.MODIFIED:case n.SortField.CATEGORY:case n.SortField.EXTENSION:return(function(e,t){return function({isFolder:i,value:o,isAlwaysFirst:l},{isFolder:s,value:n,isAlwaysFirst:r}){const d=g(l,r);return 0!==d?d:i&&s?a.compare(o,n,e,t):i?1:s?-1:""===o?1:""===n?-1:a.compare(o,n,e,t)}})(o,i);default:return}})(t,i);return s&&u?e.sortBy(s,u):(r.reportException({err:new Error("sortFiles was called with an unsupported sort field"),tags:["browse_sort_invalid_field"],severity:r.SEVERITY.CRITICAL,exc_extra:{sort_field:t}}),e)},t.getUrlForBackupPath=(e,t,i)=>e===o.parent_dir(i)?"/backup":s.browse_uri_for_fq_path(t,e).toString()})),define("modules/clean/react/files_view/constants",["require","exports","tslib","react","modules/clean/react/files_view/types","modules/clean/react/files_view/sort_types","modules/clean/react/files_view/view_type","modules/core/i18n"],(function(e,t,i,o,l,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultViewTypes=t.IMAGE_THUMBNAIL_EXTENSIONS=t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=t.VIEW_TYPE_SCOPE_TEXT_SEARCH=t.VIEW_TYPE_GLOBAL_SCOPE=t.VIEW_TYPE_COOKIE_NAME=t.OverflowMenuConstants=t.CulledListConstants=t.ViewTypeGridSizes=t.ViewTypeThumbnailSizes=t.AllSortDirections=t.AllLoadingStates=t.SortIsFilename=t.AllSortFields=t.AllDropTargetHighlightModes=t.AllViewTypes=t.AllRenameStates=t.AllNewFolderCreationStates=t.FilesViewTileGridConstants=t.SEARCH_LIST_VIEW_COLUMNS_DELETED=t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=t.SEARCH_LIST_VIEW_COLUMNS=t.GRID_VIEW_COLUMNS=t.LIST_VIEW_COLUMNS=t.SharedWithLabel=t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=t.GRID_VIEW_COLUMN_FLEX=t.COLUMN_MAX_WIDTHS=t.COLUMN_MIN_WIDTHS=t.COLUMN_DEFAULT_WIDTHS=t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX=t.FILE_NAME_CELL_SEARCH_FLEX_BASIS=t.LIST_VIEW_COLUMN_FLEX=t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=t.CHECKBOX_CELL_FLEX_RIGHT_RAIL=t.CHECKBOX_CELL_FLEX=t.COMPACT_COLUMN_HEADER_HEIGHT=t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.MEDIA_INFO_ITEM_HEIGHT=t.TAGS_HEIGHT=t.MEDIA_CELL_ICON_WIDTH=t.SNIPPET_HORIZONTAL_PADDING=t.SNIPPET_HEIGHT_PER_ROW=t.ROW_SNIPPET_VERTICAL_MARGIN=t.ROW_VERTICAL_PADDING=t.ROW_SUBTITLE_HEIGHT=t.ROW_TITLE_HEIGHT=t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=t.DEFAULT_ROW_HEIGHT_DENSE=t.DEFAULT_ROW_HEIGHT=t.DEFAULT_COLUMN_HEADER_HEIGHT=void 0,o=i.__importDefault(o);const r=n.intl.formatMessage({id:"P+XAua",defaultMessage:"Name"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.DEFAULT_ROW_HEIGHT_CONDENSED_LIST=40,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.TAGS_HEIGHT=22,t.MEDIA_INFO_ITEM_HEIGHT=16,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.CHECKBOX_CELL_FLEX="0 0 36px",t.CHECKBOX_CELL_FLEX_RIGHT_RAIL="0 0 44px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_SEARCH_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,`1 1 ${t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[3]}%`,"0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,`1 1 ${t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[2]}%`,"0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,`1 1 ${t.FILE_NAME_CELL_SEARCH_FLEX_BASIS[1]}%`]},t.COLUMN_DEFAULT_WIDTHS={FILENAME:300,MODIFIED:160,CATEGORY:160,EXTENSION:160,SIZE:130,SHARED_WITH:160,SYNC_SETTING:160,FILE_COUNTS:160,RELEVANCE:160,LOCKED_FILES:160,POLICY:160,TAGS:160},t.COLUMN_MIN_WIDTHS={FILENAME:200,MODIFIED:140,CATEGORY:120,EXTENSION:160,SIZE:120,SHARED_WITH:120,SYNC_SETTING:120,FILE_COUNTS:120,RELEVANCE:150,LOCKED_FILES:120,POLICY:120,TAGS:120},t.COLUMN_MAX_WIDTHS={FILENAME:1200,MODIFIED:200,CATEGORY:300,EXTENSION:300,SIZE:200,SHARED_WITH:300,SYNC_SETTING:300,FILE_COUNTS:300,RELEVANCE:300,LOCKED_FILES:300,POLICY:300,TAGS:300},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.GRID_VIEW_COLUMN_FLEX_RIGHT_RAIL=[t.CHECKBOX_CELL_FLEX_RIGHT_RAIL,"1 1"],t.SharedWithLabel=()=>o.default.createElement(o.default.Fragment,null,n.intl.formatMessage({id:"kGg5/N",defaultMessage:"Who can access"})),t.LIST_VIEW_COLUMNS=[{sortField:a.SortField.FILENAME,label:r,popoverTriggerLabel:r,isLocked:!0},{sortField:a.SortField.MODIFIED,label:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified"},{sortField:a.SortField.SHARED_WITH,label:o.default.createElement(t.SharedWithLabel,null),popoverTriggerLabel:n.intl.formatMessage({id:"HLRJwR",defaultMessage:"Members"}),loggingLabel:"Members",isSortOrderOptionDisabled:!0},{sortField:a.SortField.CATEGORY,label:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),loggingLabel:"Type"},{sortField:a.SortField.EXTENSION,label:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),loggingLabel:"Extension"},{sortField:a.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size"},{sortField:a.SortField.TAGS,label:n.intl.formatMessage({id:"hI7tD7",defaultMessage:"Tags"}),popoverTriggerLabel:n.intl.formatMessage({id:"hI7tD7",defaultMessage:"Tags"}),isSortOrderOptionDisabled:!0,loggingLabel:"Tags"}],t.GRID_VIEW_COLUMNS=[{sortField:a.SortField.FILENAME,label:r,popoverTriggerLabel:r},{sortField:a.SortField.MODIFIED,label:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified"},{sortField:a.SortField.CATEGORY,label:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),popoverTriggerLabel:n.intl.formatMessage({id:"Pet0Vl",defaultMessage:"Type"}),loggingLabel:"Type"},{sortField:a.SortField.EXTENSION,label:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),popoverTriggerLabel:n.intl.formatMessage({id:"ZZCH08",defaultMessage:"Extension"}),loggingLabel:"Extension"},{sortField:a.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size"}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:a.SortField.FILENAME,label:r,popoverTriggerLabel:r,isLocked:!0,isSortDisabled:!0},{sortField:a.SortField.MODIFIED,label:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"GaUyyL",defaultMessage:"Modified"}),loggingLabel:"Modified",isLocked:!0,isSortDisabled:!0},{sortField:a.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:a.SortField.FILENAME,label:r,popoverTriggerLabel:r,isLocked:!0,isSortDisabled:!0},{sortField:a.SortField.RELEVANCE,label:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),loggingLabel:"Relevance",isLocked:!1,isSortDisabled:!1},{sortField:a.SortField.SIZE,label:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),popoverTriggerLabel:n.intl.formatMessage({id:"txUjQq",defaultMessage:"Size"}),loggingLabel:"Size",isLocked:!0,isSortDisabled:!0},{sortField:a.SortField.MODIFIED,label:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:a.SortField.RELEVANCE,label:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),popoverTriggerLabel:n.intl.formatMessage({id:"3LcPUk",defaultMessage:"Relevance"}),loggingLabel:"Relevance",isLocked:!1,isSortDisabled:!1},{sortField:a.SortField.MODIFIED,label:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),popoverTriggerLabel:n.intl.formatMessage({id:"QqPUpX",defaultMessage:"Last modified"}),loggingLabel:"Last modified",isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:a.SortField.FILENAME,label:r,popoverTriggerLabel:r,isLocked:!0,isSortDisabled:!0},{sortField:a.SortField.MODIFIED,label:n.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),popoverTriggerLabel:n.intl.formatMessage({id:"RBvabN",defaultMessage:"Deleted"}),loggingLabel:"Deleted",isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[l.NewFolderCreationState.CREATE_FOLDER_INACTIVE,l.NewFolderCreationState.PENDING_INPUT,l.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[l.RenameState.PENDING_INPUT,l.RenameState.SAVING_INPUT],t.AllViewTypes=[s.ViewType.Grid,s.ViewType.LargeGrid,s.ViewType.List,s.ViewType.CondensedList,s.ViewType.SmallGrid],t.AllDropTargetHighlightModes=[l.DropTargetHighlightMode.NONE,l.DropTargetHighlightMode.ALL_FOLDERS,l.DropTargetHighlightMode.NONSHARED_FOLDERS,l.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[a.SortField.FILENAME,a.SortField.MODIFIED,a.SortField.CATEGORY,a.SortField.EXTENSION,a.SortField.SIZE,a.SortField.SHARED_WITH,a.SortField.SYNC_SETTING,a.SortField.FILE_COUNTS,a.SortField.TAGS],t.SortIsFilename=[a.SortField.FILENAME,a.SortField.CATEGORY,a.SortField.EXTENSION,a.SortField.SHARED_WITH,a.SortField.SYNC_SETTING],t.AllLoadingStates=[l.LoadingState.LOADED,l.LoadingState.LOADING_FIRST_PAGE,l.LoadingState.LOADING_REMAINING_PAGES,l.LoadingState.LOAD_ERROR],t.AllSortDirections=[a.SortDirection.ASCENDING,a.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes={[s.ViewType.Grid]:256,[s.ViewType.LargeGrid]:512,[s.ViewType.List]:32,[s.ViewType.SmallGrid]:128},t.ViewTypeGridSizes={[s.ViewType.Grid]:160,[s.ViewType.LargeGrid]:480,[s.ViewType.List]:0,[s.ViewType.SmallGrid]:80},t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_TEXT_SEARCH=":search/text",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["3fr","arw","bmp","cr2","crw","dcr","dcs","dng","erf","gif","heic","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","kdc","mef","mos","mrw","nef","nrw","orf","pef","png","ppm","psd","r3d","raf","rw2","rwl","sr2","svg","svgz","tga","tif","tiff","wbmp","web","webp","x3f","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes={[t.VIEW_TYPE_GLOBAL_SCOPE]:s.ViewType.List,[t.VIEW_TYPE_SCOPE_TEXT_SEARCH]:s.ViewType.List,[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]:s.ViewType.LargeGrid}})),define("modules/clean/react/files_view/contexts/callback_context",["require","exports","tslib","react"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewCallbackContextProvider=t.FilesViewCallbackContext=void 0,o=i.__importStar(o),t.FilesViewCallbackContext=o.createContext(void 0),t.FilesViewCallbackContextProvider=({props:{onDelete:e,onShowRename:i,onNewFolderSubmit:l,onNewFolderCancel:a,onRenameSubmit:s,onRenameCancel:n,onSetClipboard:r,onPasteFromClipboard:d,onSwitchViewType:c,onColumnsChanged:u,onCanDisplayFolderSizesChanged:g,onAddFileJumpKeyCode:h,onResetFileJump:p,onShowShare:m,onPresentInZoom:_,onLocationLinkClick:f,onNavigateToFileOrFolder:T,onNavigateToParentFolder:E,onOpenFileSharedWithMe:S,onOpenPaper:b,onSelectionChange:w,onSortChange:I,onStarClick:O,onComponentTTI:F,onFocusSearchBar:L},children:y})=>{const M=o.useMemo(()=>({onDelete:e,onShowRename:i,onNewFolderSubmit:l,onNewFolderCancel:a,onRenameSubmit:s,onRenameCancel:n,onSetClipboard:r,onPasteFromClipboard:d,onSwitchViewType:c,onColumnsChanged:u,onCanDisplayFolderSizesChanged:g,onAddFileJumpKeyCode:h,onResetFileJump:p,onShowShare:m,onPresentInZoom:_,onLocationLinkClick:f,onNavigateToFileOrFolder:T,onNavigateToParentFolder:E,onOpenFileSharedWithMe:S,onOpenPaper:b,onSelectionChange:w,onSortChange:I,onStarClick:O,onComponentTTI:F,onFocusSearchBar:L}),[e,i,l,a,s,n,r,d,c,u,g,h,p,m,_,f,T,E,S,b,w,I,O,F,L]);return o.createElement(t.FilesViewCallbackContext.Provider,{value:M},y)},t.FilesViewCallbackContextProvider.displayName="FilesViewCallbackContextProvider"})),define("modules/clean/react/files_view/contexts/file_thumb_store",["require","exports","tslib","react","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/react/files_view/view_type","modules/clean/react/browse/models","modules/clean/react/files_view/files_view_hooks","modules/clean/react/icon/file_folder_icon","modules/clean/react/files_view/constants"],(function(e,t,i,o,l,a,s,n,r,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withThumbStore=t.ThumbStoreContext=t.ThumbStoreProvider=void 0,o=i.__importDefault(o),t.ThumbStoreProvider=({shouldPrewarm:e,path:i,children:u,items:g})=>{const h=r.useIsPostTTI(),p=o.default.useMemo(()=>h?new a.GenericThumbStore:new l.BufferedThumbStore,[i]);return o.default.useEffect(()=>{if(!e)return;const t=[];return null==g||g.slice(0,100).forEach(e=>{if(e instanceof n.File||e instanceof n.FileSharedWithMe){const i=d.getThumbnailUrlForItem(e.thumbnail_url_tmpl,c.ViewTypeThumbnailSizes[s.ViewType.Grid]);if(i){const e=p.bind_url(i,{onSuccess:()=>{}});e&&t.push(e)}}}),()=>t.forEach(e=>p.unbind_url(e))},[i,g,p,e]),o.default.createElement(t.ThumbStoreContext.Provider,{value:p},u)},t.ThumbStoreProvider.displayName="ThumbStoreProvider",t.ThumbStoreContext=o.default.createContext(new a.GenericThumbStore),t.withThumbStore=e=>i=>o.default.createElement(t.ThumbStoreContext.Consumer,null,t=>o.default.createElement(e,Object.assign({},i,{thumbStore:t})))})),define("modules/clean/react/files_view/drag_drop/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/files_view/util","modules/clean/react/browse/data/helpers"],(function(e,t,i,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFileDragEnterItem=t.cleanupExternalDragHandler=t.setupExternalDragHandler=void 0;const a=new o.ScopedEventHandlers(document);t.setupExternalDragHandler=function(e,t,i,o,l,s,n){a.add(e,"dragenter",e=>{(t()||i())&&!e.target.closest(l)&&s()&&(n(null),o())})},t.cleanupExternalDragHandler=function(e){a.remove(e,"dragenter")},t.onFileDragEnterItem=function(e,t,o,a,s,n,r,d){if(!t&&!o)return;if(e.is_dir&&!(a&&o)&&!l.isBackupFolder(e)){if(s)return;const t=n.isCurrentPathWriteable()&&!i.File.isReadOnlySharedFolder(e);r(e),d({path:e.fq_path,hasPermissionToUploadToFolder:t,isMovingIntoVault:Boolean(e.is_in_vault_folder)})}else r(null),d()}})),define("modules/clean/react/files_view/drag_drop/drag_to_select",["require","exports","tslib","react","modules/clean/react/components/css","modules/clean/react/files_view/types","modules/clean/react/selectable_list","lodash"],(function(e,t,i,o,l,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragToSelectController=t.shouldMouseDownInitiateDragToSelect=t.isItemInSelectArea=void 0,o=i.__importDefault(o),t.isItemInSelectArea=(e,t)=>!(e.top+e.height<t.top||e.top>t.top+t.height||e.left+e.width<t.left||e.left>t.left+t.width),t.shouldMouseDownInitiateDragToSelect=(e,i,o,l)=>!d(e)&&(e.target===e.currentTarget||(null==o||!o.selected||!o.selected.some(e=>l[e]&&t.isItemInSelectArea(l[e],Object.assign(Object.assign({},i),{height:0,width:0})))));const r=n.throttle((function(e,i,o,l,n){Object.keys(e).forEach(r=>{t.isItemInSelectArea(e[r],i)?(null==n?void 0:n.selected.has(r))||o(r,s.SelectOptions.DEFAULT,a.FilesViewActionSource.DRAG_TO_SELECT):(null==n?void 0:n.selected.has(r))&&l(r,!1,a.FilesViewActionSource.DRAG_TO_SELECT)})}),25),d=e=>{let t=e.target;for(;t instanceof Node&&t!==e.currentTarget;){if(!0===t.draggable)return!0;t=t.parentElement}return!1};t.DragToSelectController=l.requireCssWithComponent(e=>{const[i,l]=o.default.useState(!1),[s,d]=o.default.useState(!1),[c,u]=o.default.useState(0),g=o.default.useRef(null),h=o.default.useRef({}),[p,m]=o.default.useState({top:0,left:0}),[_,f]=o.default.useState({top:0,left:0,width:0,height:0});o.default.useEffect(()=>{const e=n.throttle(T,8);return s&&(window.document.addEventListener("mouseup",E),window.document.addEventListener("mousemove",e)),()=>{window.document.removeEventListener("mousemove",e),window.document.removeEventListener("mouseup",E)}},[s,i]),o.default.useEffect(()=>(window.document.addEventListener("click",S,!0),()=>{window.document.removeEventListener("click",S,!0)}),[c]),o.default.useEffect(()=>{i&&r(h.current,_,e.handleSelect,e.handleDeselect,e.selection)},[i,_,e.selection]);const T=t=>{var o;if(s){if(1!==t.buttons)return d(!1),void l(!1);const s=null===(o=g.current)||void 0===o?void 0:o.getBoundingClientRect();let n=t.clientX-((null==s?void 0:s.left)||0),r=t.clientY-((null==s?void 0:s.top)||0);r<0&&(r=0),n<0&&(n=0),s&&n-10>s.width&&(n=s.width-10),s&&r-20>s.height&&(r=s.height-20);const c={top:Math.min(p.top,r),left:Math.min(p.left,n),height:Math.abs(p.top-r),width:Math.abs(p.left-n)};!i&&c.width<=5&&c.height<=5||(i?i&&f(c):(t.preventDefault(),e.updateSelection([],a.FilesViewActionSource.DRAG_TO_SELECT,!0),f(c),l(!0)))}},E=e=>{s&&(i&&u(Date.now()),l(!1),d(!1),f({top:0,left:0,width:0,height:0}),m({top:0,left:0}),e.preventDefault())},S=e=>{Date.now()-c<50&&e.preventDefault(),window.document.removeEventListener("click",S,!0)};if(!e.isDragToSelectEnabled){const t=(e,t)=>{};return o.default.createElement("div",null,e.children({registerSelectableItem:t}))}return o.default.createElement("div",{className:"files-view_drag-to-select",onMouseDown:i=>{var o;if(!i.isDefaultPrevented()&&!s&&1===i.buttons){const l=null===(o=g.current)||void 0===o?void 0:o.getBoundingClientRect(),a=i.clientX-((null==l?void 0:l.left)||0),s=i.clientY-((null==l?void 0:l.top)||0);t.shouldMouseDownInitiateDragToSelect(i,{top:s,left:a},e.selection,h.current)&&(m({top:s,left:a}),f({top:s,left:a,width:0,height:0}),d(!0))}},ref:g},o.default.createElement("div",{className:"files-view_drag-to-select-removal"},e.children({registerSelectableItem:(e,t)=>{var i;const o=t.top+40,l=null===(i=g.current)||void 0===i?void 0:i.getBoundingClientRect();if(l){const i=t.width||l.width;h.current[e]={top:o,width:i,left:t.left,height:t.height}}}})),i&&o.default.createElement("div",{className:"files-view_select-box",style:{top:_.top+"px",left:_.left+"px",width:_.width+"px",height:_.height+"px"}}))},["/static/css/files_view/drag_to_select-vfl1pMR5V.css"])})),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","ts-key-enum","modules/core/dom"],(function(e,t,i,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyPress=void 0,l=i.__importStar(l);const a=["/","\\",":","?","*","<",">","|"];let s=null;t.handleKeyPress=function(e,t,i,n){const r=e.key;Object.values(o.Key).includes(r)||a.includes(r)||!document.activeElement.closest(".brws-checkbox-cell")&&l.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||" "===r&&!t()||(" "===r&&t()&&e.preventDefault(),i(r),null!=s&&clearTimeout(s),s=setTimeout(()=>{n()},1e3))}})),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","immutable","lodash","react","spectrum/media_table/index","spectrum/table/index","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/view_type"],(function(e,t,i,o,l,a,s,n,r,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyFolderTable=void 0,o=i.__importStar(o),l=i.__importStar(l),a=i.__importDefault(a);t.EmptyFolderTable=({subtitle:e,subtitleLink:t,subtitleOnClick:i,numRowsAbove:c=2,totalRows:u=14,title:g,onTTI:h,onFocusSearchBar:p=l.noop,onNavigateToParentFolder:m=l.noop,onOpenKeyboardShortcutModal:_=l.noop,onPasteFromClipboard:f=l.noop})=>{const T=a.default.useRef(null);a.default.useEffect(()=>(null==h||h(),r.setupFilesViewKeyboardShortcuts({viewType:d.ViewType.List,getIsGlobalEvent:r.generateGetIsGlobalEventForRef(T),getIsItemEvent:()=>!1,getSelectedFiles:()=>o.OrderedMap(),isCurrentPathWriteable:()=>!1,selectAllAction:l.noop,deselectAllAction:l.noop,onCopyToClipboard:l.noop,onCutToClipboard:l.noop,onDelete:l.noop,onFocusSearchBar:p,onNavigateToFileOrFolder:l.noop,onNavigateToParentFolder:m,onPasteFromClipboard:f,onShowRename:l.noop,scope:"EmptyFolderTable",onShowHelpMenu:()=>_()}),()=>{r.resetFilesViewKeyboardShortcuts("EmptyFolderTable")}),[]);const E=[];for(let e=0;e<c;e++)E.push(a.default.createElement(s.MediaRow,{key:-e-1}));const S=[],b=Math.max(u-c-1,0);for(let e=0;e<b;e++)S.push(a.default.createElement(s.MediaRow,{key:e+1}));const w=a.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},g);return a.default.createElement(n.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table",ref:T},a.default.createElement(n.TableHead,null),a.default.createElement(n.TableBody,null,E,a.default.createElement(s.MediaRow,{key:0},a.default.createElement(s.MediaCell,{className:"empty-folder-table-cell",title:w,subtitle:e&&t?a.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:t,onClick:i},e):e?a.default.createElement("span",{className:"empty-folder-table-subtitle"},e):void 0})),S))},t.EmptyFolderTable.displayName="EmptyFolderTable"})),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSharingDisabledForFile=t.canFileBeHighlightedDropTarget=void 0,t.canFileBeHighlightedDropTarget=function({file:e,dropTargetHighlightMode:t}){if(t===o.DropTargetHighlightMode.NONE)return!1;if(!e.is_dir)return!1;if(l.File.isReadOnlySharedFolder(e))return!1;if(e.isDeleted)return!1;switch(t){case o.DropTargetHighlightMode.ALL_FOLDERS:return!0;case o.DropTargetHighlightMode.NONSHARED_FOLDERS:return e.type!==i.FileTypes.SHARED_FOLDER;case o.DropTargetHighlightMode.NONSHARED_NONTEAM_FOLDERS:return![i.FileTypes.SHARED_FOLDER,i.FileTypes.TEAM_SHARED_FOLDER].includes(e.type)}return!1},t.isSharingDisabledForFile=function({context:e,file:t,user:o,expVaultEnableViewOnlySharing:s=!1}){const n=t.per_node_metadata,r=!!((null==n?void 0:n.link_node)||(null==n?void 0:n.suppress_ns_partition)||(null==n?void 0:n.suppress_shared_link));return t.isDeleted||t.is_dir&&a.shouldUsePublicFolderSharing(e.config,t.fq_path)||l.File.isTeamMemberFolder(t)||!l.File.canViewFileMembers(t,e)||e.isInsideVaultFolder&&!s||t.type===i.FileTypes.VAULT_FOLDER||t.type===i.FileTypes.SANDBOX||r}})),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","classnames","react","spectrum/file_icon/get_extension","modules/clean/react/files_view/constants","modules/clean/react/files_view/view_type","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,o,l,a,s,n,r,d,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileThumbnail=t.FileThumbnailComponentForTests=void 0,o=i.__importDefault(o),l=i.__importDefault(l);class g extends l.default.PureComponent{constructor(e){super(e),this._thumbRequestId=null,this.handleThumbnailError=()=>{this.setState({thumbnailSrc:null})};const{thumbStore:t,file:{thumbnail_url_tmpl:i}}=e;this.state={thumbnailSrc:i?t.get_thumb(i):null}}componentDidMount(){this.fetchThumbnail(this.props)}UNSAFE_componentWillReceiveProps(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))}componentWillUnmount(){this.unbindThumbnailIfNeeded()}fetchThumbnail({file:e,thumbStore:t}){const i=e.fq_path||e.filename||"",o=a.getExtension(i);if(!o||!s.IMAGE_THUMBNAIL_EXTENSIONS.includes(o))return;const l=r.getThumbnailUrlForItem(e.thumbnail_url_tmpl,this.props.thumbnailSize?this.props.thumbnailSize:s.ViewTypeThumbnailSizes[n.ViewType.List]);l&&(this._thumbRequestId=t.bind_url(l,{onSuccess:()=>{this.setState({thumbnailSrc:t.get_thumb(l)})},onError:()=>{this.handleThumbnailError()}}))}unbindThumbnailIfNeeded(){const{thumbStore:e}=this.props;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})}render(){const{file:e,showCDMUserEducationEffects:t,iconSize:i}=this.props,{thumbnailSrc:a}=this.state,s=e.fq_path||e.filename;return a?l.default.createElement(d.LockBadge,{file:this.props.file,variant:"preview-small"},l.default.createElement("img",{alt:s,draggable:!1,className:o.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:a,onError:this.handleThumbnailError})):l.default.createElement(h,{file:e,showCDMUserEducationEffects:t,iconSize:i})}}t.FileThumbnailComponentForTests=g,g.displayName="FileThumbnailComponentForTests",t.FileThumbnail=u.withThumbStore(g);const h=({file:e,showCDMUserEducationEffects:t,iconSize:i})=>{const o=i?{height:i.toString(),width:i.toString()}:{},a=l.default.createElement(r.FileOrFolderIcon,Object.assign({className:"brws-file-name-cell-icon",file:e,showPreview:!1},o));return t?l.default.createElement(c.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},a):a};h.displayName="FileThumbnailFallback"})),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","keymaster","react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/view_type","modules/clean/react/files_view/util","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],(function(e,t,i,o,l,a,s,n,r,d,c,u,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetFileJumpKeyboardShortcuts=t.setupFileJumpKeyboardShortcuts=t.setupFilesViewKeyboardShortcuts=t.getActionsAndAttachLogging=t.resetFilesViewKeyboardShortcuts=t.generateGetIsGlobalEventForRef=t.generateGetIsGlobalEvent=t.FILES_VIEW_TILE_GRID_SHORTCUTS=t.FILES_VIEW_LIST_SHORTCUTS=t.FILES_VIEW_SHORTCUTS=void 0,o=i.__importDefault(o),l=i.__importStar(l),s=i.__importStar(s),d=i.__importStar(d),c=i.__importStar(c),t.FILES_VIEW_SHORTCUTS=[{key:u.intl.formatMessage({id:"kOb587",defaultMessage:"/"}),desc:u.intl.formatMessage({id:"vOBkFB",defaultMessage:"Search"})},{windowsKey:u.intl.formatMessage({id:"JD6thv",defaultMessage:"Ctrl + a"}),macKey:u.intl.formatMessage({id:"vXQEej",defaultMessage:"⌘ + a"}),desc:u.intl.formatMessage({id:"n7drWm",defaultMessage:"Select all files"})},{windowsKey:u.intl.formatMessage({id:"yY9fAj",defaultMessage:"Esc"}),macKey:u.intl.formatMessage({id:"yIq4Am",defaultMessage:"esc"}),desc:u.intl.formatMessage({id:"m7zp3J",defaultMessage:"Deselect all files"})},{windowsKey:u.intl.formatMessage({id:"BmNZ7+",defaultMessage:"Ctrl + c"}),macKey:u.intl.formatMessage({id:"L/3I1a",defaultMessage:"⌘ + c"}),desc:u.intl.formatMessage({id:"jD02CF",defaultMessage:"Copy selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"TeH7ne",defaultMessage:"Ctrl + x"}),macKey:u.intl.formatMessage({id:"Hjoc2x",defaultMessage:"⌘ + x"}),desc:u.intl.formatMessage({id:"JvfueH",defaultMessage:"Cut selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"pApXZD",defaultMessage:"Ctrl + v"}),macKey:u.intl.formatMessage({id:"1MiQRb",defaultMessage:"⌘ + v"}),desc:u.intl.formatMessage({id:"ORvNm9",defaultMessage:"Paste selected file(s) into the current folder"})},{key:u.intl.formatMessage({id:"u3d9dU",defaultMessage:"F2"}),desc:u.intl.formatMessage({id:"GrOPDo",defaultMessage:"Rename selected file"})},{windowsKey:u.intl.formatMessage({id:"kHlg2I",defaultMessage:"Delete"}),macKey:u.intl.formatMessage({id:"ZZU2Yr",defaultMessage:"delete"}),desc:u.intl.formatMessage({id:"45XRF8",defaultMessage:"Delete selected file(s)"})},{windowsKey:u.intl.formatMessage({id:"8X8aMD",defaultMessage:"Ctrl + z"}),macKey:u.intl.formatMessage({id:"10+RMZ",defaultMessage:"⌘ + z"}),desc:u.intl.formatMessage({id:"HGnEOI",defaultMessage:"Undo recent move/copy/rename/delete"})},{key:u.intl.formatMessage({id:"YQJt5v",defaultMessage:"?"}),desc:u.intl.formatMessage({id:"mFXmY0",defaultMessage:"Show keyboard shortcuts"})}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:u.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:u.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:u.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:u.intl.formatMessage({id:"rJHa1d",defaultMessage:"Go up a folder"})},{key:u.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:u.intl.formatMessage({id:"+WMBQW",defaultMessage:"Open folder"})},...t.FILES_VIEW_SHORTCUTS],t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:u.intl.formatMessage({id:"lkVLik",defaultMessage:"↑"}),desc:u.intl.formatMessage({id:"Xg+zFf",defaultMessage:"Select file in previous row (hold shift to select range)"})},{key:u.intl.formatMessage({id:"5ojTma",defaultMessage:"↓"}),desc:u.intl.formatMessage({id:"erVlBC",defaultMessage:"Select file in next row (hold shift to select range)"})},{key:u.intl.formatMessage({id:"u6AlvH",defaultMessage:"←"}),desc:u.intl.formatMessage({id:"Riu+zT",defaultMessage:"Select previous file (hold shift to select range)"})},{key:u.intl.formatMessage({id:"LJ+WGg",defaultMessage:"→"}),desc:u.intl.formatMessage({id:"li5upG",defaultMessage:"Select next file (hold shift to select range)"})},...t.FILES_VIEW_SHORTCUTS];let h="";const p=new r.ScopedEventHandlers(document);function m(e,t){return i=>{e(i)&&(i.preventDefault(),"function"==typeof t&&t(i))}}function _({user:e,viewType:t,getSelectedFiles:i,isCurrentPathWriteable:o,onShowHelpMenu:l,onDelete:s,onShowRename:n,onFocusSearchBar:r,onNavigateToFileOrFolder:c,onNavigateToParentFolder:h,selectAllAction:p,onCopyToClipboard:m,onCutToClipboard:_,onPasteFromClipboard:f,deselectAllAction:T}){const E=()=>{const e=i(),t=e.some(e=>e.read_only);if(1===e.size)if(o()&&!t){const t=e.first();t.isDeleted?g.Notify.error(u.intl.formatMessage({id:"CCUrto",defaultMessage:"Deleted files can’t be renamed."})):n(t)}else g.Notify.warning(u.intl.formatMessage({id:"jXim1P",defaultMessage:"You don’t have permission to rename files in this folder."}))},S=()=>{const e=i();e.size&&s(e)},b=()=>{d.performUndo()},w=()=>{const e=i();1===e.size&&c(e.first())},I=()=>{const e=i(),t=e.first();1===e.size&&t.is_dir&&c(t)},O=(i,o)=>{a.logKeyboardShortcutUsage({user_id:e?e.id:null,view_type:t,keyboard_shortcut_type:i}),o()};return{renameFile:()=>{O("rename",E)},focusSearchBar:()=>{O("search",r)},showHelpMenu:()=>{O("help",l)},selectAll:()=>{O("select-all",p)},copyToClipboard:()=>{O("copy",m)},cutToClipboard:()=>{O("cut",_)},deleteFiles:()=>{O("delete",S)},pasteFromClipboard:()=>{O("paste",f)},undoAction:()=>{O("undo",b)},deselectFiles:()=>{O("deselect",T)},navigateToFileOrFolder:()=>{O("navigate-file-folder",w)},navigateToFolder:()=>{O("navigate-folder",I)},navigateToParent:()=>{O("navigate-parent",h)}}}t.generateGetIsGlobalEvent=function(e){return t=>!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&l.findDOMNode(e).contains(t.target)},t.generateGetIsGlobalEventForRef=function(e){return t=>{var i;return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&(null===(i=e.current)||void 0===i?void 0:i.contains(t.target))||!1}},t.resetFilesViewKeyboardShortcuts=function(e){var t;t=e,o.default.clearScope(t),o.default.setScope(h),p.remove(e,"keydown"),p.remove(e,"keyup")},t.getActionsAndAttachLogging=_,t.setupFilesViewKeyboardShortcuts=function(e){const{scope:t,getIsItemEvent:i,getIsGlobalEvent:l}=e;h=o.default.getScope(),h!==t&&o.default.setScope(t);const a=_(e);o.default("f2",t,m(i,a.renameFile)),o.default("/",t,m(l,a.focusSearchBar)),o.default("shift+/",t,m(l,a.showHelpMenu)),o.default("escape",t,m(l,a.deselectFiles)),c.mac?(o.default("command+a",t,m(l,a.selectAll)),o.default("command+c",t,m(i,a.copyToClipboard)),o.default("backspace",t,m(i,a.deleteFiles)),o.default("command+v",t,m(l,a.pasteFromClipboard)),o.default("command+x",t,m(i,a.cutToClipboard)),o.default("command+z",t,m(l,a.undoAction))):(o.default("ctrl+a",t,m(l,a.selectAll)),o.default("ctrl+c",t,m(i,a.copyToClipboard)),o.default("delete",t,m(i,a.deleteFiles)),o.default("ctrl+v",t,m(l,a.pasteFromClipboard)),o.default("ctrl+x",t,m(i,a.cutToClipboard)),o.default("ctrl+z",t,m(l,a.undoAction))),e.viewType===n.ViewType.List&&(o.default("right",t,m(i,a.navigateToFolder)),o.default("left",t,m(l,a.navigateToParent)))},t.setupFileJumpKeyboardShortcuts=function({scope:e,getIsFileJumping:t,onAddFileJumpKeyCode:i,onResetFileJump:l}){p.add(e,"keypress",a=>{o.default.getScope()===e&&s.handleKeyPress(a,t,i,l)})},t.resetFileJumpKeyboardShortcuts=function(e){p.remove(e,"keypress")}})),define("modules/clean/react/files_view/name_input",["require","exports","tslib","react","ts-key-enum","modules/clean/react/files_view/types","dig-components/text_fields"],(function(e,t,i,o,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NameInput=void 0,o=i.__importDefault(o);const n=()=>{};class r extends o.default.PureComponent{constructor(){super(...arguments),this.inputRef=o.default.createRef(),this.handleDragStart=e=>{e.stopPropagation()},this.handleSubmit=e=>{e.preventDefault(),this.submitIfChanged(a.NameInputActionSource.SUBMIT)},this.handleKeyDown=e=>{e.key===l.Key.Escape?(e.preventDefault(),this.props.onCancel({source:a.NameInputActionSource.ESC})):e.key===l.Key.Enter&&this.handleSubmit(e)},this.handleBlur=e=>{this.submitIfChanged(a.NameInputActionSource.BLUR)},this.handleClick=e=>{e.preventDefault(),this.props.onClick(e)}}componentDidMount(){this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame(()=>{if(!this.inputRef.current)return;const e=this.inputRef.current.value;let t=this.props.ignoreFileExtension?e.length:e.lastIndexOf(".");t<0&&(t=e.length),this.inputRef.current.setSelectionRange(0,t)})}submitIfChanged(e){if(this.inputRef.current){const t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}}render(){return o.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},o.default.createElement(s.TextInput,{ref:this.inputRef,defaultValue:this.props.defaultValue,className:this.props.className,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))}}t.NameInput=r,r.defaultProps={className:"",onCancel:n,onClick:n,onSubmit:n,idDir:null},r.displayName="NameInput"})),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/async/loadable","modules/core/browser_detection","modules/core/i18n"],(function(e,t,i,o,l,a,s,n,r,d,c,u){"use strict";var g;Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewOverflowMenu=t.OverflowMenuSize=t.AsyncFilesViewMobileOverflowMenu=void 0,o=i.__importDefault(o),l=i.__importDefault(l),n=i.__importStar(n),t.AsyncFilesViewMobileOverflowMenu=d.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/files_view/mobile_overflow_menu"],t,i)}).then(i.__importStar).then(({FilesViewMobileOverflowMenu:e})=>e)}),(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(g=t.OverflowMenuSize||(t.OverflowMenuSize={}));class h extends o.default.Component{constructor(e){super(e),this.handleSelection=e=>{e.performAction()},this.handleMenuToggle=({isOpen:e})=>{if(e&&this.props.onMenuOpen&&this.props.onMenuOpen(),h.isDynamicProps(this.props)&&e){const e=this.props.getOverflowMenuActions(this.props.file,!!this.props.canDisplayFolderSizes);this.setState({actionSection:e})}},this.handlePreventMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleMobileMenuOpen=e=>t=>{this.handlePreventMouseDown(t),this.handleMenuToggle({isOpen:!0}),e()},this.handleClick=e=>t=>{this.handlePreventMouseDown(t),e({})},this.state={actionSection:h.isDynamicProps(e)?[]:e.actionSection}}render(){const{isResponsive:e,size:i,showBorders:a,ariaHidden:s}=this.props,{file:n}=h.isDynamicProps(this.props)?this.props:{},d=e&&c.is_mobile_or_tablet(),u=i===g.Small?"small":"standard";return o.default.createElement("div",{"aria-hidden":s?"true":void 0,className:"browse-overflow-menu"},d?o.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:({openMobileMenu:e})=>o.default.createElement(p,{onClick:this.handleMobileMenuOpen(e),showBorders:a,size:u}),file:n,actionSection:this.state.actionSection}):o.default.createElement(r.Menu.Wrapper,{onSelection:this.handleSelection,onToggle:this.handleMenuToggle,onClick:this.handlePreventMouseDown,onDoubleClick:this.handlePreventMouseDown,isPortaled:!1},({getTriggerProps:e,getContentProps:t,openMenu:i})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(p,{triggerProps:e(),onClick:this.handleClick(i),showBorders:a,size:u,tabIndex:s?-1:0}),o.default.createElement(r.Menu.Content,Object.assign({placement:"bottom-end"},t(),{className:"browse-overflow-menu-content"}),this.state.actionSection.map((e,t)=>o.default.createElement(r.Menu.Segment,{key:`action-group-${t}`},e.map((e,t)=>o.default.createElement(r.Menu.ActionItem,{key:`${t}-${e.label}`,value:e,disabled:e.disabled,className:l.default("browse-overflow-menu-item",e.className)},e.label))))))))}}t.FilesViewOverflowMenu=h,h.isDynamicProps=e=>"file"in e,h.defaultProps={onMenuToggle:()=>{},isResponsive:!0},h.displayName="FilesViewOverflowMenu";const p=({size:e,showBorders:t,onClick:i,tabIndex:l,triggerProps:r})=>{const d=u.intl.formatMessage({id:"oeNPkV",defaultMessage:"More actions"});return o.default.createElement(a.IconButton,Object.assign({},r,{"aria-label":d,onClick:i,size:e,variant:t?"outline":"transparent",tabIndex:l}),o.default.createElement(s.UIIcon,{src:n.MoreHorizontalLine,size:e}))};p.displayName="MenuTrigger"})),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/files_view/contexts/callback_context","modules/clean/react/browse/models"],(function(e,t,i,o,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarContainer=void 0,o=i.__importDefault(o),t.StarContainer=l.Loadable({loader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{idTypePairFromStarrableItem:t,itemNameFromStarrableItem:l,Star:n,StarredSource:r}=yield new Promise((t,i)=>{e(["modules/clean/react/starred/browse_exports"],t,i)}).then(i.__importStar);return e=>{const{item:i,user:d,className:c,isReadOnly:u,tabIndex:g,starButtonClassName:h,alwaysShowUnstarred:p}=e,{id:m,type:_}=t(i),f=l(i),{onStarClick:T}=o.default.useContext(a.FilesViewCallbackContext)||{};return o.default.createElement("div",{className:c},o.default.createElement(n,{id:m,key:"star",idType:_,isDir:Boolean(i.is_dir),user:d,onStarClick:e=>{i instanceof s.File&&(null==T||T(i,e))},source:r.BROWSE,isReadOnly:u,tabIndex:g,starButtonClassName:h,alwaysShowUnstarred:p,itemName:f}))}}))})})),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","classnames","immutable","react","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_drop/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/files_view/base_tile_grid","modules/clean/react/selectable_list","modules/clean/react/sticky_position","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,t,i,o,l,a,s,n,r,d,c,u,g,h,p,m,_,f,T,E,S,b,w,I,O,F,L,y){"use strict";function M(e){e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewTileGrid=t.TileLabel=void 0,o=i.__importDefault(o),l=i.__importStar(l),a=i.__importDefault(a),n=i.__importStar(n),L=i.__importStar(L);class v extends a.default.PureComponent{render(){const{fileRename:e,arePostTTIModulesLoaded:t,user:i,item:o,createRenameCancelHandler:l,createRenameSubmitHandler:r}=this.props;let d;if(d=o instanceof c.File?n.filename(o.fq_path):o instanceof c.FileSharedWithMe?o.filename:o instanceof c.Paper?o.title:o.name,o instanceof c.File&&e&&n.paths_are_equal(e.file.fq_path,o.fq_path)){if(e.state===T.RenameState.PENDING_INPUT)return a.default.createElement(f.TileLabelInput,{defaultValue:d,label:d,onCancel:l(o),onSubmit:r(o)});if(e.state===T.RenameState.SAVING_INPUT)return a.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:y.intl.formatMessage({id:"OefYpa",defaultMessage:"Renaming…"})})}const g=s.Emstring.em_snippet(d,14,.5),h=t&&o instanceof c.File&&!c.File.isNoAccessSharedFolder(o);let p=a.default.createElement(b.TileItemLabelText,{key:"label",label:g});if(d!==g){const e=d.length<=u.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?d:a.default.createElement("div",{className:"tile-label-tooltip"},d);p=a.default.createElement(O.TitleBubble,{content:e,position:I.StickyPosition.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},p)}const m=a.default.createElement(_.StarContainer,{item:o,user:i,className:"tile-star",key:"tileStar",tabIndex:-1});return a.default.createElement("span",null,[p,h&&!e&&m])}}t.TileLabel=v,v.displayName="TileLabel";class P extends a.default.PureComponent{constructor(){super(...arguments),this.tileGridRef=a.default.createRef(),this.state={inSelectMode:!1,selectedIds:l.Set(),menuOpenId:void 0},this.createRenameCancelHandler=e=>()=>{this.props.onRenameCancel(e)},this.createRenameSubmitHandler=e=>t=>{this.props.onRenameSubmit(e,t)},this.logOverflowMenuOpen=()=>{const{selectedFiles:e,user:t,viewType:i}=this.props,o=e?e.count(e=>e.is_dir):0,l=e?e.count()-o:0;d.logContextMenuClick({uid:t.id,viewType:i,action_surface:F.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:l,numFoldersSelected:o})},this.hrefForItem=(e,t)=>t instanceof c.File?this.props.hrefForFile(e,t):t instanceof c.FileSharedWithMe?t.href:t.url,this.getTileItem=(e,t)=>{const{activeDropTarget:i,isCreateFolderUIActive:o,isPhotosPage:l,items:a,selection:s,user:d,viewType:g,focusedFileIndex:h,disabledMultiselect:p,cutItems:m}=this.props,{menuOpenId:_}=this.state,{inSelectMode:f}=this.state;if(o){if(0===e)return this.getCreateFolderTile();e-=1}const b=a.get(e);if(!b){const t=`Placeholder ${e}`;return{altText:t,id:t,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}const w=E.isFile(b)||E.isFswm(b),I=b,O=f&&w,F=h===e,L=O&&s.selected.some(e=>I instanceof c.FileSharedWithMe?I.file_id===e:I.fq_path===e),M=this.createToggleSelectHandler(I,L),v=this.createClickHandler({item:b,inSelectModeAndIsFile:O,toggleSelectHandler:M}),P=this.createViewFileHandler(b,T.FilesViewActionSource.ROW_DOUBLE_CLICK),A=this.createViewFileHandler(b,T.FilesViewActionSource.ROW_TITLE),C=E.isFile(b)||E.isFswm(b)?this.renderTileOverflowMenu(b,t,l):void 0,R=this.renderLabelElement(e),N=(function(e){let t=e instanceof c.File?n.filename(e.fq_path):E.isFswm(e)?e.filename:e instanceof c.Paper?e.title:e.name;if(e instanceof c.File)switch(e.type){case r.FileTypes.FOLDER:t=y.intl.formatMessage({id:"C/gp+a",defaultMessage:"Folder, {alt}"},{alt:t});break;case r.FileTypes.PACKAGE:t=y.intl.formatMessage({id:"FhSkpL",defaultMessage:"Package, {alt}"},{alt:t});break;case r.FileTypes.SHARED_FOLDER:t=y.intl.formatMessage({id:"rWEPV0",defaultMessage:"Shared folder, {alt}"},{alt:t});break;case r.FileTypes.SANDBOX:t=y.intl.formatMessage({id:"+vbakm",defaultMessage:"Sandbox, {alt}"},{alt:t});break;case r.FileTypes.TEAM_SHARED_FOLDER:t=y.intl.formatMessage({id:"ZtOyAr",defaultMessage:"Team shared folder, {alt}"},{alt:t});break;case r.FileTypes.TEAM_MEMBER_FOLDER:t=y.intl.formatMessage({id:"1yRjbu",defaultMessage:"Team member folder, {alt}"},{alt:t});break;default:t=y.intl.formatMessage({id:"e8WrLw",defaultMessage:"File, {alt}"},{alt:t})}return t})(b),D=b===i,k=this.hrefForItem(d,b),H=b instanceof c.File||b instanceof c.FileSharedWithMe?S.getThumbnailUrlForItem(b.thumbnail_url_tmpl,u.ViewTypeThumbnailSizes[g]):void 0;return{file:I,paper:b instanceof c.Paper?b:void 0,fileSharedWithMe:b instanceof c.FileSharedWithMe?b:void 0,id:c.itemId(b),labelNode:R,altText:N,thumbnailUrl:H,actionNode:C,onClick:v,onDoubleClick:P,onLabelClick:A,isDraggable:!l&&(L||!O),isViewOnly:p,isFocused:F,isSelectable:w,handleToggleSelect:M,checkboxAriaText:y.intl.formatMessage({id:"o3Djy2",defaultMessage:"Select tile"}),href:k,onDragEnter:l?void 0:this.createDragEnterHandler(I,L,D),onDragStart:l?void 0:this.createDragStartHandler(I,L,M),onDragEnd:l?void 0:this.createDragEndHandler(),isCheckboxFocusable:l,isCutToClipboard:m&&E.isCutToClipboard(b,m),className:_===c.itemId(b)?"tile--hover-forced":void 0}},this.shouldFileBeHighlightedDropTarget=(e,t)=>{const{dropTargetHighlightMode:i}=this.props;return h.canFileBeHighlightedDropTarget({file:e,dropTargetHighlightMode:i})},this.scrollIntoView=({top:e,bottom:t},i)=>{const{viewportTopOffset:o=0}=this.props,{height:l,scrollTop:a,scrollTo:s}=this.getScrollPane(),n=l-o,r=a+n;e<a?s(0,e):t>r&&s(0,i&&t-e<n/2?t-n/2:t-n)}}UNSAFE_componentWillMount(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)}componentDidMount(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()}componentWillUnmount(){this.props.isPhotosPage||p.resetFileJumpKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE),p.resetFilesViewKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE),g.cleanupExternalDragHandler(w.SELECTABLE_TILE_GRID_KEY_SCOPE)}UNSAFE_componentWillReceiveProps(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))}componentDidUpdate(e){(e.createNewFolderState===T.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===T.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate(),e.isActive!==this.props.isActive&&(this.props.isActive?this.setupKeyboardShortcuts():p.resetFilesViewKeyboardShortcuts(w.SELECTABLE_TILE_GRID_KEY_SCOPE))}getTotalNumItems(){const{items:e,totalNumItems:t,isCreateFolderUIActive:i}=this.props;let o=Math.max(e.size,t);return i&&(o+=1),o}createToggleSelectHandler(e,t){const i=e instanceof c.FileSharedWithMe?e.file_id:e.fq_path;return e=>{const{onDeselectFile:o,onSelectFile:l}=this.props,a=Boolean(!("keyCode"in e)&&e.shiftKey);t?o(i,a):l(i,a?w.SelectOptions.EXTEND:w.SelectOptions.DEFAULT)}}renderTileOverflowMenu(e,t,i){const{getOverflowMenuActions:o,arePostTTIModulesLoaded:l,inlineActions:s}=this.props;return s&&e instanceof c.File?a.default.createElement("div",{onClick:M},a.default.createElement(s,{file:e,className:"tile__action-button--overflow-menu",onHoverLocked:({isOpen:t})=>{this.setState({menuOpenId:t?c.itemId(e):void 0})}})):l&&a.default.createElement(m.FilesViewOverflowMenu,{file:e,getOverflowMenuActions:o,size:m.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!i,onMenuOpen:this.logOverflowMenuOpen})}renderLabelElement(e){const{items:t,focusedFileIndex:i,user:o,fileRename:l,arePostTTIModulesLoaded:s,isPhotosPage:n}=this.props;if(n)return;const r=t.get(e);if(!r)return;const{inSelectMode:d}=this.state,c=i===e;return a.default.createElement(v,{item:r,user:o,fileRename:l,arePostTTIModulesLoaded:s,inSelectMode:d,isTileFocused:c,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler})}createViewFileHandler(e,t){return i=>{if(i.preventDefault(),i.stopPropagation(),"click"===i.type){const t=i;if(0===t.button){const i=this.hrefForItem(this.props.user,e);if(E.hasModifierKey(t))return void L.open_tab(i)}}e instanceof c.File?this.props.onNavigateToFileOrFolder(e,{actionSource:t}):e instanceof c.FileSharedWithMe?this.props.onOpenFileSharedWithMe(e):e instanceof c.Paper&&this.props.onOpenPaper(e)}}createClickHandler({item:e,inSelectModeAndIsFile:t,toggleSelectHandler:i}){const o=e instanceof c.File||e instanceof c.FileSharedWithMe;return t=>{if(o){const o="keyCode"in t;if(t.preventDefault(),o)i(t);else{const o=e instanceof c.FileSharedWithMe?e.file_id:e.fq_path;this.props.onSelectFile&&(t.shiftKey?this.props.onSelectFile(o,w.SelectOptions.EXTEND):t.ctrlKey||t.metaKey?i(t):this.props.onSelectFile(o,w.SelectOptions.ONLY))}}}}setSelectedTiles(e){const t=l.Set().withMutations(t=>{e.selectedFiles.forEach(e=>{var i;t.add((i=e)instanceof c.FileSharedWithMe?i.file_id:i.fq_path)})});this.setState({selectedIds:t})}setupExternalDragHandler(){g.setupExternalDragHandler(w.SELECTABLE_TILE_GRID_KEY_SCOPE,()=>!!this.props.isDraggingInternalFiles,()=>!!this.props.isDraggingExternalFiles,this.props.onSetFileUploaderPath,".tile",()=>this.props.activeDropTarget,this.props.onSetDropTarget)}setupKeyboardShortcuts(){const{user:e,viewType:t,onDelete:i,onShowRename:o,deselectAll:l,getIsCurrentPathWriteable:a,getIsFileJumping:s,onAddFileJumpKeyCode:n,onResetFileJump:r,onCopyToClipboard:d,onCutToClipboard:c,onFocusSearchBar:u,onPasteFromClipboard:g,selectAll:h}=this.props,m=p.generateGetIsGlobalEvent(this),_=m;this.props.isPhotosPage||p.setupFileJumpKeyboardShortcuts({scope:w.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:n,onResetFileJump:r}),p.setupFilesViewKeyboardShortcuts({user:e,viewType:t,getIsGlobalEvent:m,getIsItemEvent:_,getSelectedFiles:()=>this.props.selectedFiles,isCurrentPathWriteable:a,selectAllAction:h,deselectAllAction:l,onCopyToClipboard:d,onCutToClipboard:c,onDelete:i,onFocusSearchBar:u,onPasteFromClipboard:g,onShowRename:o,onNavigateToFileOrFolder:()=>{},onNavigateToParentFolder:()=>{},scope:w.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})}createDragEnterHandler(e,t,i){return o=>{this.props.onDragEnter(o,e,t,i)}}createDragStartHandler(e,t,i){const{preventSelectionOnDrag:o}=this.props;return l=>{t?this.props.onDragStart(l):(o||i(l),this.props.onDragStart(l,[e]))}}createDragEndHandler(){return e=>{this.props.onDragEnd(e)}}getCreateFolderTile(){const{createNewFolderState:e,onNewFolderCancel:t,onNewFolderSubmit:i}=this.props;let o=y.intl.formatMessage({id:"pxGZm3",defaultMessage:"New folder"}),l=a.default.createElement("div",null);return e===T.NewFolderCreationState.PENDING_INPUT?(o=y.intl.formatMessage({id:"ss4CO0",defaultMessage:"Folder name"}),l=a.default.createElement(f.TileLabelInput,{label:o,onCancel:t,onSubmit:i})):e===T.NewFolderCreationState.SAVING_INPUT&&(o=y.intl.formatMessage({id:"p58M12",defaultMessage:"Creating new folder…"}),l=a.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:o})),{altText:o,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:l}}getScrollPane(){const{scrollContainer:e}=this.props;if(e&&e.current){const{clientHeight:t,scrollTop:i,scrollTo:o}=e.current;return{height:t,scrollTop:i,scrollTo:o?o.bind(e.current):()=>{}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):()=>{}}}getWindow(){const{scrollContainer:e}=this.props;return e&&e.current?E.createFakeWindow(e.current):window}render(){const{enableMaxHeightGrouping:e,sections:t,viewType:i,viewportTopOffset:l,scrollContainer:s,scrollPositionOffset:n,registerSelectableTile:r,isPhotosPage:d}=this.props,c=o.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":!0}),g=new Set;return this.state.selectedIds.forEach(e=>g.add(e)),s&&!s.current?null:a.default.createElement("div",{role:"grid","aria-multiselectable":"true"},a.default.createElement(b.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:c,rowClass:"file-tile-row",enableMaxHeightGrouping:e,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:u.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:u.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:t.sectionStartIndices,sectionLabels:t.sectionLabels,showLabels:!d,contentOffset:l,getTileItem:this.getTileItem,selectedIds:g,handleTTI:this.props.onTTI,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:u.ViewTypeGridSizes[i],tileHeight:u.ViewTypeGridSizes[i],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:n||0,window:this.getWindow(),registerSelectableTile:r}))}}t.FilesViewTileGrid=P,P.defaultProps={enableMaxHeightGrouping:!1},P.displayName="FilesViewTileGrid"})),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","classnames","react","modules/clean/react/files_view/name_input"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileLabelInput=void 0,o=i.__importDefault(o),l=i.__importDefault(l),t.TileLabelInput=function(e){const t=o.default("tile-label-input",e.className),i=e.defaultValue||"";return l.default.createElement(a.NameInput,{className:t,defaultValue:i,label:e.label,onCancel:e.onCancel,onClick:e=>{e&&(e.stopPropagation(),e.preventDefault())},onSubmit:e.onSubmit})}})),define("modules/clean/react/files_view/types",["require","exports","modules/clean/web_user_action_events"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilesViewActionSource=t.DropTargetHighlightMode=t.LoadingState=t.RenameState=t.NewFolderCreationState=t.NameInputActionSource=void 0,Object.defineProperty(t,"FilesViewActionSource",{enumerable:!0,get:function(){return i.ActionSourceValue}}),(function(e){e.ESC="ESC",e.SUBMIT="SUBMIT",e.BLUR="BLUR"})(t.NameInputActionSource||(t.NameInputActionSource={})),(function(e){e.CREATE_FOLDER_INACTIVE="CREATE_FOLDER_INACTIVE",e.PENDING_INPUT="PENDING_INPUT",e.SAVING_INPUT="SAVING_INPUT"})(t.NewFolderCreationState||(t.NewFolderCreationState={})),(function(e){e.PENDING_INPUT="pending-input",e.SAVING_INPUT="saving-input"})(t.RenameState||(t.RenameState={})),(function(e){e.LOADED="LOADED",e.LOADING_FIRST_PAGE="LOADING_FIRST_PAGE",e.LOADING_REMAINING_PAGES="LOADING_REMAINING_PAGES",e.LOAD_ERROR="LOAD_ERROR"})(t.LoadingState||(t.LoadingState={})),(function(e){e.NONE="NONE",e.ALL_FOLDERS="ALL_FOLDERS",e.NONSHARED_FOLDERS="NONSHARED_FOLDERS",e.NONSHARED_NONTEAM_FOLDERS="NONSHARED_NONTEAM_FOLDERS"})(t.DropTargetHighlightMode||(t.DropTargetHighlightMode={}))})),define("modules/clean/react/flows/types",["require","exports","immutable","typescript/component_libraries/flows/src/common/types"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsMap=t.FlowsRuleType=t.ApiV2FolderActionTag=t.ApiV2FolderActionArgs=void 0,Object.defineProperty(t,"ApiV2FolderActionArgs",{enumerable:!0,get:function(){return o.ApiV2FolderActionArgs}}),Object.defineProperty(t,"ApiV2FolderActionTag",{enumerable:!0,get:function(){return o.ApiV2FolderActionTag}}),(function(e){e[e.None=0]="None",e[e.AutoPDF=1]="AutoPDF",e[e.AutoUnzip=2]="AutoUnzip",e[e.AutoTag=3]="AutoTag",e[e.AutoSmartSubfolders=4]="AutoSmartSubfolders",e[e.AutoImage=5]="AutoImage",e[e.AutoVideo=6]="AutoVideo",e[e.AutoTidyUp=7]="AutoTidyUp",e[e.AutoNamingConventions=8]="AutoNamingConventions",e[e.AutoAudio=9]="AutoAudio",e[e.EmailIngest=10]="EmailIngest"})(t.FlowsRuleType||(t.FlowsRuleType={})),t.FlowsMap=function(e){return i.Map(e)}})),define("modules/clean/react/files_view/tile_element",["require","exports","tslib","classnames","react","dig-components/controls","ts-key-enum","modules/clean/paper_formatting_utils","modules/clean/react/files_view/double_click","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/react/files_view/tile_grid_logger","modules/clean/user_education/react/user_education_effect","modules/clean/react/files_view/contexts/file_thumb_store"],(function(e,t,i,o,l,a,s,n,r,d,c,u,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileElement=t.TileElementComponentForTests=t.TilePlaceholder=t.TileLabel=void 0,o=i.__importDefault(o),l=i.__importDefault(l),n=i.__importStar(n);const p=()=>null;t.TileLabel=({ariaLabel:e,children:t,onClick:i})=>{if(!t)return null;const o=l.default.createElement("div",{className:"tile-label","aria-hidden":"true"},t);return i?l.default.createElement("a",{onClick:i,tabIndex:-1,"aria-label":e},o):o},t.TileLabel.displayName="TileLabel",t.TilePlaceholder=({leftOffset:e,tileHeight:i,tileWidth:o,thumbNode:a,labelNode:s})=>l.default.createElement("div",{className:"tile",style:{left:e,height:i,width:o,pointerEvents:"none"}},l.default.createElement("div",{className:"tile__thumb-container",style:{height:o,width:o}},a||l.default.createElement("div",{className:"tile__preview--placeholder"})),l.default.createElement(t.TileLabel,null,s)),t.TilePlaceholder.displayName="TilePlaceholder";class m extends l.default.PureComponent{constructor(e){super(e),this.thumbRequestId=null,this.animationRequestIds=[],this.handleThumbnailError=()=>{const{onThumbnailError:e,tileIndex:t}=this.props;this.setState({thumbLoaded:!1}),e&&e(t)},this.logTileInteractive=()=>{const e=!!this.props.thumbnailUrl,t=this.state.thumbLoaded;if(this.props.onThumbnailLoad){const i=window.requestAnimationFrame(()=>{const i=window.requestAnimationFrame(()=>{this.props.onThumbnailLoad(this.props.tileIndex,e,t)});this.animationRequestIds.push(i)});this.animationRequestIds.push(i)}},this.toggleSelect=e=>{e.stopPropagation(),this.props.handleToggleSelect(e)},this.handleKeyDown=e=>{const t=e.key;e.currentTarget!==e.target||" "!==t&&t!==s.Key.Enter||(e.preventDefault(),this.props.onClick(e))},this.handleCheckboxChange=()=>{},this.state=Object.assign({thumbLoaded:m.isThumbLoaded(e)},this.calcPaperTitleState(e))}componentDidMount(){this.props.delayRenderFullTile?this.renderCompleteTileTimeout=setTimeout(()=>{this.renderCompleteTileTimeout=0,this.fetchThumbnail(this.props)},100):this.fetchThumbnail(this.props),this.logTileInteractive()}componentDidUpdate(e,t){if(!e.isFocused&&this.props.isFocused){const e=this.refs.tileContainer;e&&e.focus()}}UNSAFE_componentWillReceiveProps(e){if(e.thumbnailUrl!==this.props.thumbnailUrl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e)),m.getPaperTitle(this.props)!==m.getPaperTitle(e)){const t=this.calcPaperTitleState(e);this.setState(t)}}static getPaperTitle(e){return e.paper?e.paper.title:null}calcPaperTitleState(e){return e.paper?{paperTitleParts:n.getPaperDocTitleParts(e.paper,"brws-file-name-grid-icon","brws-file-name-grid-icon-emoji",!0)}:{}}componentWillUnmount(){this.unbindThumbnailIfNeeded(),this.renderCompleteTileTimeout&&clearTimeout(this.renderCompleteTileTimeout),this.animationRequestIds.forEach(e=>{window.cancelAnimationFrame(e)}),this.animationRequestIds=[]}fetchThumbnail(e){const{thumbnailUrl:t,thumbStore:i}=e;if(t){const e=Date.now();this.thumbRequestId=i.bind_url(t,{onSuccess:()=>{this.setState({thumbLoaded:!0}),u.InfiniteTileGridLogger.logThumbRTT(Date.now()-e)},onError:()=>{this.handleThumbnailError()}})}}unbindThumbnailIfNeeded(){const{thumbStore:e}=this.props;this.thumbRequestId&&(e.unbind_url(this.thumbRequestId),this.thumbRequestId=null),this.setState({thumbLoaded:!1})}static isThumbLoaded(e){const{thumbStore:t,thumbnailUrl:i}=e;return!(!i||!t.get_thumb(i))}renderCheckbox(){let e=l.default.createElement(a.Checkbox,{className:"tile-checkbox","aria-label":this.props.checkboxAriaText,onClick:this.toggleSelect,onChange:this.handleCheckboxChange,tabIndex:this.props.checkboxTabIndex,checked:this.props.isSelected});return 0===this.props.tileIndex&&(e=l.default.createElement(g.UserEducationEffect,{containerName:"FileItemRow",name:"FirstFileSelectCheckbox"},e)),l.default.createElement("div",{key:"tile-select-checkbox",className:"tile-select-checkbox"},e)}renderActionNode(){return l.default.createElement("div",{key:"tile-action-node",className:"tile__action-button"},this.props.actionNode)}renderThumbnail(){const{thumbnailUrl:e,thumbStore:t,height:i,width:o,isSelected:a}=this.props;if(this.state.thumbLoaded){const s=t.get_thumb(e);if(s){const e=a?o-24:o,t=i||e;return l.default.createElement(c.LockBadge,{file:this.props.file,variant:"preview-large"},l.default.createElement("img",{className:"tile__preview tile__preview--thumb",draggable:!1,src:s,style:{maxHeight:t,maxWidth:e},onError:this.handleThumbnailError,alt:""}))}}return this.renderFileIcon()}renderFileIcon(){const{file:e,paper:t}=this.props;return t?this.state.paperTitleParts.icon:e?l.default.createElement(d.FileOrFolderIcon,Object.assign({className:"tile__preview tile__preview--icon brws-file-name-grid-icon",file:e,variant:"large",showPreview:!1},{"aria-hidden":!0})):l.default.createElement("div",{className:"tile__preview--placeholder"})}render(){const{altText:e,file:i,height:a,href:s,isActiveDropTarget:n,isAvailableDropTarget:d,isCutToClipboard:c,isDraggable:u,isFocused:g,isSelectable:h,isSelected:p,isViewOnly:m,labelHeight:_,labelNode:f,leftOffset:T,onClick:E,onDoubleClick:S,onLabelClick:b,onDragEnter:w,onDragStart:I,onDragEnd:O,overrideTabIndex:F,width:L,className:y}=this.props,M=a||L,v=M+_;if(m)return l.default.createElement(t.TilePlaceholder,{leftOffset:T,tileHeight:v,tileWidth:L,thumbNode:this.renderThumbnail(),labelNode:f});const P={left:T,height:v,width:L},A={height:M,width:L},C={className:o.default("tile",y,{"tile--is-selected":p,"tile--is-dragover":n,"tile--is-droppable":d&&!n,"tile--is-cut":c}),"data-filename":i&&i.name,style:P,draggable:u,href:s,onDragEnter:w,onDragStart:I,onDragEnd:O,"aria-label":i&&i.name,role:"gridcell"},R=l.default.createElement("div",{className:"tile__thumb-container",style:A},this.renderThumbnail());return l.default.createElement("div",{role:"row",ref:"tileContainer",className:"tile__container",onKeyDown:this.handleKeyDown,tabIndex:F||g?0:-1,"aria-label":e,"aria-selected":p},l.default.createElement(r.WithDoubleClick,{onClick:E,onDoubleClick:S},e=>l.default.createElement("div",Object.assign({},C,{onClick:e.onClick}),R,h&&this.renderCheckbox(),this.renderActionNode(),l.default.createElement(t.TileLabel,{onClick:b,ariaLabel:i&&i.name},f))))}}t.TileElementComponentForTests=m,m.defaultProps={checkboxAriaText:"",checkboxTabIndex:-1,delayRenderFullTile:!0,handleToggleSelect:p,isFocused:!1,isSelected:!1,isViewOnly:!1,onDragEnter:p,onDragStart:p,onClick:p},m.displayName="TileElementComponentForTests",t.TileElement=h.withThumbStore(m)})),define("modules/clean/react/files_view/base_tile_grid",["require","exports","tslib","classnames","react","resize-observer-polyfill","react-dom","spectrum/culled_list/index","modules/clean/filepath/filepath","modules/clean/js_client_stopwatch","modules/clean/react/files_view/tile_element","modules/clean/react/files_view/tile_grid_logger"],(function(e,t,i,o,l,a,s,n,r,d,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGrid=t.TileItemLabelText=t.memoizeCallback=void 0,o=i.__importDefault(o),l=i.__importDefault(l),a=i.__importDefault(a),s=i.__importStar(s),r=i.__importStar(r);function g(e){let t=null;return(...i)=>{if(!t||t.length!==i.length||!t.every((e,t)=>e===i[t]))return t=i,e(...i)}}t.memoizeCallback=g,t.TileItemLabelText=function({className:e,label:t}){return e=o.default("tile-label__text",e),l.default.createElement("div",{className:e},t)};class h extends l.default.PureComponent{constructor(e){if(super(e),this.tileIndexToRowIndex=[],this.rowHeights=[],this.ttiReported=!1,this.itemRangeByRow=[],this.tileLoadLogger=null,this.updateLayout=()=>{this.animationFrameRequestId=window.requestAnimationFrame(()=>{const e=this.getAndUpdateTileLayout();this.props.logTileLoading&&!this.tileLoadLogger&&this.setupTileLogging(this.getRowHeight(),e.tilesPerRow)})},this.updateScroll=e=>{const{scrollToIndex:t,scrollIntoView:i,scrollPositionOffset:o}=this.props;if(void 0!==t&&i){const l=this.tileIndexToRowIndex[t],a=this.rowHeights.slice(0,l).reduce((e,t)=>e+t,o);i({top:a,bottom:a+this.rowHeights[l]},e)}},this.getAndUpdateTileLayout=()=>{const e=this.props.maxTileWidth+this.props.tilePadding,t=s.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};const i=t.clientWidth;let o=Math.max(1,Math.floor(i/e)),l=this.props.maxTileWidth;return i%e>1&&(o++,l=i/o-this.props.tilePadding),this.state.tileWidth!==l&&this.setState({tileWidth:l}),this.props.tilesPerRow!==o&&this.props.onTilesPerRowChange(o),{tileWidth:l,tilesPerRow:o}},this.handleTTI=()=>{this.ttiReported=!0;const{handleTTI:e}=this.props;e&&e()},this.setLastViewedPage=e=>{if(!this.tileLoadLogger)return;const t=document.documentElement.scrollTop||document.body.scrollTop,i=Math.round(t/e);if(this.tileLoadLogger.pruneTrackedPages(),this.tileLoadLogger.logCompletedPages(),!this.tileLoadLogger.pagesCompletedLogging.has(i)&&!this.tileLoadLogger.pagesToLog.has(i))if(i!==this.tileLoadLogger.lastViewedPage){if(this.tileLoadLogger.lastViewedPage=i,this.tileLoadLogger.pageChangeTime=this.tileLoadLogger.getTimeNow(),!this.tileLoadLogger.startTimeByPage.get(i)){const e=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(i,e)}}else{this.tileLoadLogger.getTimeNow()-this.tileLoadLogger.pageChangeTime>1e3&&this.tileLoadLogger.pagesToLog.add(i)}},this.logTileError=e=>{this.tileLoadLogger&&this.tileLoadLogger.recordTileError(e),this.props.logTileLoading&&u.InfiniteTileGridLogger.logThumbLoadError()},this.logTileLoaded=(e,t,i)=>{this.tileLoadLogger&&this.tileLoadLogger.recordTileLoaded(e,t,i)},this.renderTileElement=(e,t,i,o)=>{var a,s;if(e<0||e>this.props.totalNumItems)return null;const n=this.props.getTileItem(e,i);if(!n)return l.default.createElement(c.TilePlaceholder,{leftOffset:t,tileHeight:this.state.tileWidth,tileWidth:this.state.tileWidth});const d=this.ttiReported&&this.props.delayRenderFullTile,u=n.isSelectable&&!!this.props.selectedIds&&this.props.selectedIds.has(n.id),g=n.file&&this.props.shouldFileBeHighlightedDropTarget(n.file,u),h=g&&n.file===this.props.activeDropTarget;let p,m="";n.fileSharedWithMe?(m=n.fileSharedWithMe.file_id,p={type:n.fileSharedWithMe.type,icon:n.fileSharedWithMe.icon,fq_path:`/${n.fileSharedWithMe.filename}`,thumbnail_url_tmpl:n.fileSharedWithMe.thumbnail_url_tmpl,name:n.fileSharedWithMe.filename}):n.file&&(m=n.file.fq_path,p={type:n.file.type,icon:n.file.icon,fq_path:n.file.fq_path,thumbnail_url_tmpl:n.file.thumbnail_url_tmpl,name:r.filename(n.file.fq_path),isDeleted:n.file.isDeleted,is_locked:n.file.is_locked,is_lockholder:n.file.is_lockholder,lockholder_name:n.file.lockholder_name,lock_info:n.file.lock_info});const _=n.labelNode?this.props.labelHeight:0;null===(s=(a=this.props).registerSelectableTile)||void 0===s||s.call(a,m,{top:o,left:t,width:this.state.tileWidth,height:_+this.state.tileWidth});const f=0===e&&this.props.selectedIds&&0===this.props.selectedIds.size;return l.default.createElement(c.TileElement,{file:p,paper:n.paper,key:n.id,onClick:n.onClick,onDoubleClick:n.onDoubleClick,onLabelClick:n.onLabelClick,width:this.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:_,delayRenderFullTile:d,actionNode:n.actionNode,thumbnailUrl:n.thumbnailUrl,labelNode:n.labelNode,altText:n.altText,onThumbnailError:this.props.logTileLoading?this.logTileError:void 0,onThumbnailLoad:this.props.logTileLoading?this.logTileLoaded:void 0,isDraggable:n.isDraggable,onDragEnter:n.onDragEnter,onDragStart:n.onDragStart,onDragEnd:n.onDragEnd,isFocused:n.isFocused,isSelectable:n.isSelectable,isSelected:u,isViewOnly:n.isViewOnly,isActiveDropTarget:h,isAvailableDropTarget:g,handleToggleSelect:n.handleToggleSelect,checkboxAriaText:n.checkboxAriaText,checkboxTabIndex:n.isCheckboxFocusable?0:-1,href:n.href,overrideTabIndex:f,isCutToClipboard:n.isCutToClipboard,className:n.className})},this.renderRow=(e,t,i)=>{const o=this.getRowHeight(t);if(!e)return l.default.createElement(n.CulledItem,{className:this.props.rowClass,height:o,key:t,tagName:"div",topOffset:i});if(!Array.isArray(e))return l.default.createElement(n.CulledItem,{className:this.props.rowClass,height:o,key:t,tagName:"div",topOffset:i},e);const[a,s]=e,r=this.state.tileWidth+this.props.tilePadding,d=[];let c=4;for(let e=a;e<s;e++)d.push(this.renderTileElement(e,c,d.length,i)),c+=r;return l.default.createElement(n.CulledItem,{className:this.props.rowClass,height:o,key:t,tagName:"div",topOffset:i},d)},this.handleRangeInView=g((e,t)=>{const{onRangeInView:i}=this.props;if(!i)return;if(0===this.props.totalNumItems)return;const[o,l]=this.translateRowRangeToItemRange(e,t);isNaN(o)||isNaN(l)||i(o,l)}),this.props.sectionLabels||this.props.sectionStartIndices){if(!this.props.sectionLabels||!this.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(this.props.sectionLabels.length!==this.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}this.state={tileWidth:this.props.maxTileWidth},d.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),this.resizeObserver=new a.default(this.updateLayout)}componentDidMount(){window.addEventListener("resize",this.updateLayout),this.updateLayout(),this.updateScroll(!0);const e=document.querySelector(".maestro-secondary-sidebar-v2");e&&this.resizeObserver.observe(e)}componentDidUpdate(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(this.props.totalNumItems),e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0),e.maxTileWidth!==this.props.maxTileWidth&&this.updateLayout()}componentWillUnmount(){this.resizeObserver.disconnect(),window.removeEventListener("resize",this.updateLayout),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),this.tileLoadLogger=null)}getRowHeight(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];let t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t}getPageHeight(){const e=(document.documentElement.clientHeight||window.outerHeight)-(this.props.contentOffset||0),t=this.getRowHeight(),i=t*Math.ceil(e/t);return Math.max(i,t)}setupTileLogging(e,t){const i=this.getPageHeight(),o=t*Math.ceil(i/e);this.tileLoadLogger=new u.InfiniteTileGridLogger(this.props.totalNumItems,o,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);const l=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,l),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,i)}translateRowRangeToItemRange(e,t){const{itemRangeByRow:i}=this;return[i[e][0],i[t][1]]}render(){this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];const e=[],t=this.getRowHeight(),{containerClass:i,enableMaxHeightGrouping:o,numThresholdRows:a,scrollDeltaThreshold:s,sectionStartIndices:r,sectionLabels:d,totalNumItems:c,window:u}=this.props;if(r&&r.length>0)r.forEach((i,o)=>{let a=c;o!==r.length-1&&(a=r[o+1]),this.rowHeights.push(32);const s=a-i,n=Math.ceil(s/this.props.tilesPerRow),u=d[o],g=l.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},u);e.push(g),this.itemRangeByRow.push([i,i]);for(let o=0;o<n;o++){const l=i+o*this.props.tilesPerRow,s=Math.min(l+this.props.tilesPerRow,a),n=[l,s];e.push(n),this.itemRangeByRow.push(n);for(let e=l;e<s;e++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(t)}});else{const i=Math.ceil(c/this.props.tilesPerRow);for(let o=0;o<i;o++){const i=o*this.props.tilesPerRow,l=Math.min(i+this.props.tilesPerRow,c),a=[i,l];e.push(a),this.itemRangeByRow.push(a);for(let e=i;e<l;e++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(t)}}return l.default.createElement(n.CulledList,{enableMaxHeightGrouping:o,items:e,listItemHeight:this.rowHeights,itemBuffer:a,className:i,renderRow:this.renderRow,scrollThreshold:s,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:u})}}t.InfiniteTileGrid=h,h.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:()=>null,handleTTI:()=>{}},h.displayName="InfiniteTileGrid"})),define("modules/clean/react/files_view/tile_grid_logger",["require","exports","modules/clean/js_client_stopwatch","modules/core/browser"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfiniteTileGridLogger=void 0;t.InfiniteTileGridLogger=class{constructor(e,t,i,o){this.recordTileError=e=>{const t=Math.floor(e/this.numTilesPerPage);this.pagesWithThumbErrors.has(t)||this.pagesWithThumbErrors.add(t)},this.recordTileLoaded=(e,t,i)=>{if(i){if(this.thumbsLoaded.has(e))return;this.thumbsLoaded.add(e)}else{if(this.iconsLoaded.has(e))return;this.iconsLoaded.add(e)}let o=!1;o=this.numTiles%this.numTilesPerPage==0?e>=this.numTiles-this.numTilesPerPage:e>=this.numTiles-this.numTiles%this.numTilesPerPage;let l=this.numTilesPerPage;if(o){const e=this.numTiles%this.numTilesPerPage;0!==e&&(l=e)}const a=Math.floor(e/this.numTilesPerPage);if(i||!t){const e=this.numTilesFinalizedByPage[a]||0;this.numTilesFinalizedByPage[a]=e+1}if(0===a&&this.handleTTI){!(this.iconsLoaded.has(e)&&this.thumbsLoaded.has(e))&&(this.numTilesLoadedOnFirstPage++,this.numTilesLoadedOnFirstPage===l&&this.handleTTI())}i&&(this.pagesWithThumbs.has(a)||this.pagesWithThumbs.add(a),this.anyThumbLoadedTimeByPage.get(a)||this.anyThumbLoadedTimeByPage.set(a,this.getTimeNow()),this.numTilesFinalizedByPage[a]===l&&this.allThumbsLoadedTimeByPage.set(a,this.getTimeNow()))},this.pruneTrackedPages=()=>{this.startTimeByPage.forEach((e,t)=>{!this.pagesToLog.has(t)&&!this.pagesCompletedLogging.has(t)&&this.getTimeNow()-e>2e3&&this.startTimeByPage.delete(t)})},this.logCompletedPages=()=>{this.pagesToLog.forEach(e=>{const t=this.startTimeByPage.get(e),i=Math.max(this.allThumbsLoadedTimeByPage.get(e),t),o=Math.max(this.anyThumbLoadedTimeByPage.get(e),t);!i||this.pagesWithThumbs.has(e)?this.pagesWithThumbErrors.has(e)?this.handlePageCompletedLogging(e):t&&i&&o&&(this.logPerfStats(e,t,o,i),this.handlePageCompletedLogging(e)):this.handlePageCompletedLogging(e)})},this.numTiles=e,this.numTilesPerPage=t,this.numTilesFinalizedByPage=[],this.numTilesLoadedOnFirstPage=0,this.iconsLoaded=new Set,this.thumbsLoaded=new Set,this.startTimeByPage=new Map,this.allThumbsLoadedTimeByPage=new Map,this.anyThumbLoadedTimeByPage=new Map,this.pagesWithThumbErrors=new Set,this.pagesWithThumbs=new Set,this.pagesCompletedLogging=new Set,this.pagesToLog=new Set,this.handleTTI=o}getTimeNow(){const e=o.performance();let t=-1;return e&&e.now&&(t=e.now()),t}updateNumTiles(e){this.numTiles>=e||(this.numTiles=e)}handlePageCompletedLogging(e){this.pagesCompletedLogging.add(e),this.pagesToLog.delete(e),this.startTimeByPage.delete(e),this.anyThumbLoadedTimeByPage.delete(e),this.allThumbsLoadedTimeByPage.delete(e)}static logThumbLoadError(){i.JSStopwatch.recordTrace("visual_browse_thumb_load_error",{stopwatchName:"infinite_tile_grid_logging",traceTime:0})}static logThumbRTT(e){i.JSStopwatch.recordTrace("visual_browse_thumb_rtt",{stopwatchName:"infinite_tile_grid_logging",traceTime:e})}logPerfStats(e,t,o,l){i.JSStopwatch.recordTrace(`loaded_any_thumbs_page_${e}`,{stopwatchName:"infinite_tile_grid_logging",traceTime:o-t}),i.JSStopwatch.recordTrace(`loaded_all_thumbs_page_${e}`,{stopwatchName:"infinite_tile_grid_logging",traceTime:l-t})}}})),define("modules/clean/tagging/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TAGS_PER_ITEM=void 0,t.MAX_TAGS_PER_ITEM=20})),define("modules/clean/tagging/data/action_creators",["require","exports","tslib","lodash","modules/core/i18n","modules/clean/filepath/filepath","modules/clean/react/snackbar","modules/clean/tagging/data/selectors/index","modules/clean/tagging/data/types","modules/clean/tagging/api","modules/clean/tagging/constants","modules/clean/tagging/logger","modules/clean/tagging/utils"],(function(e,t,i,o,l,a,s,n,r,d,c,u,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAllTagsSuggestions=t.fetchTagsForFiles=t.setAllTags=t.fileRename=t.removeTagFromFiles=t.addTagToFiles=void 0,a=i.__importStar(a),n=i.__importStar(n),u=i.__importStar(u);const h=({fileToTags:e,override:t})=>({type:r.ActionTypes.SET_FILE_TO_TAGS_MAP,payload:{fileToTags:e,override:t}});t.addTagToFiles=function({user:e,files:t,tag:r,onPartialError:p,onSuccess:m,autoTagFolderContents:_}){return(f,T)=>i.__awaiter(this,void 0,void 0,(function*(){const i=n.selectTagsByFile(T()),E=g.tagTextToTagUserGeneratedTag(r),S=t[0];if(1!==t.length||_)try{s.Snackbar.sync(l.intl.formatMessage({id:"U2RxSG",defaultMessage:"Tagging…"}),!0,"add-tag-bulk");let i=!1;if(_){const o=yield d.tagsApiClient.listFolder(g.getFileObjectNsIdAndPath(S).nsPath,e);t=o.files,i=o.reachedLimit}const b=yield d.tagsApiClient.addTagBulk(e,r,t),w=t.filter(e=>-1===b.findIndex(t=>{const i=g.getFileObjectNsIdAndPath(e);return i.nsId===t.ns_id&&i.nsPath===t.ns_path})),I=b.length,O=w.length,F=t.filter(e=>{var t;return(null===(t=e.tags)||void 0===t?void 0:t.length)===c.MAX_TAGS_PER_ITEM}).length,L=t.filter(e=>!g.fileHasEditPermissions(e)).length,y=w.reduce((e,t)=>{const i=g.getFileMapKey(t),l=n.selectTagsByFile(T())[i],a=o.uniq([E,...null!=l?l:[]]);return Object.assign(Object.assign({},e),{[i]:a})},{});if(u.logAddTag(e,w,r),f(h({fileToTags:y})),0===b.length&&!i)return s.Snackbar.close(),void m(!0,O,_);if(p(w),i)return void s.Snackbar.complete(l.intl.formatMessage({id:"Y9TAaz",defaultMessage:"Tagged {numOfSuccesses} of the files in {folderName}."},{numOfSuccesses:O,folderName:a.filename(S.fq_path)}),"add-tag-bulk");if(F>0&&L>0)return void s.Snackbar.complete(l.intl.formatMessage({id:"Evli0B",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldn’t tag {numOfFailures} files or folders."},{numOfSuccesses:O,tag:r,numOfFailures:I}),"add-tag-bulk");if(F>0)return void s.Snackbar.complete(l.intl.formatMessage({id:"jk4Wg3",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldn’t tag {numOfFailures} items that don’t have room for more tags."},{numOfSuccesses:O,tag:r,numOfFailures:I}),"add-tag-bulk");s.Snackbar.complete(l.intl.formatMessage({id:"JmcOdr",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldn’t tag {numOfFailures} files or folders without editing access."},{numOfSuccesses:O,tag:r,numOfFailures:I}),"add-tag-bulk")}catch(o){f(h({fileToTags:i,override:!0})),u.logFailTag(e,t,r),s.Snackbar.fail(l.intl.formatMessage({id:"8bKaBW",defaultMessage:"Couldn’t tag these files or folders."}),"add-tag-bulk")}else{const c=g.getFileMapKey(S),p=n.selectTagsByFile(T())[c],b=o.uniq([E,...null!=p?p:[]]);f(h({fileToTags:{[c]:b}}));try{yield d.tagsApiClient.addTag(e,r,S),u.logAddTag(e,t,r)}catch(o){return f(h({fileToTags:i,override:!0})),u.logFailTag(e,t,r),void s.Snackbar.fail(l.intl.formatMessage({id:"IibVuC",defaultMessage:"Couldn’t add #{tag} to {fileName}."},{tag:r,fileName:a.filename(S.fq_path)}))}m(!1,1,_)}}))},t.removeTagFromFiles=function({user:t,files:o,tag:r}){return(c,p)=>i.__awaiter(this,void 0,void 0,(function*(){var m;const _=r.tag_text,f=n.selectTagsByFile(p());if(1===o.length){const e=g.getFileMapKey(o[0]),i=n.selectTagsByFile(p())[e],T=null!==(m=null==i?void 0:i.filter(e=>e.tag_text!==_))&&void 0!==m?m:[];c(h({fileToTags:{[e]:T}}));try{yield d.tagsApiClient.removeTag(t,_,o[0]),u.logRemoveTag(t,o,r)}catch(e){c(h({fileToTags:f,override:!0})),s.Snackbar.fail(l.intl.formatMessage({id:"zXNhaY",defaultMessage:"Couldn’t remove #{tag} from {fileName}."},{tag:_,fileName:a.filename(o[0].fq_path)}))}return}const{showRemoveTagsModal:T}=yield new Promise((t,i)=>{e(["modules/clean/tagging/components/remove_tags_modal"],t,i)}).then(i.__importStar);T({numOfFiles:o.length,tag:_,onRemoveClick:()=>i.__awaiter(this,void 0,void 0,(function*(){try{s.Snackbar.sync(l.intl.formatMessage({id:"FAj93H",defaultMessage:"Removing tags…"}),!0,"remove-tag-bulk");const e=yield d.tagsApiClient.removeTagBulk(t,_,o),i=o.filter(t=>-1===e.findIndex(e=>{const i=g.getFileObjectNsIdAndPath(t);return i.nsId===e.ns_id&&i.nsPath===e.ns_path})),a=i.reduce((e,t)=>{var i;const o=g.getFileMapKey(t),l=n.selectTagsByFile(p())[o],a=null!==(i=null==l?void 0:l.filter(e=>e.tag_text!==_))&&void 0!==i?i:[];return Object.assign(Object.assign({},e),{[o]:a})},{});u.logRemoveTag(t,i,r),c(h({fileToTags:a})),s.Snackbar.complete(l.intl.formatMessage({id:"fXEVtA",defaultMessage:"Removed #{tag} from {numOfFiles} files."},{numOfFiles:i.length,tag:_}),"remove-tag-bulk")}catch(e){c(h({fileToTags:f,override:!0})),s.Snackbar.fail(l.intl.formatMessage({id:"YV4k+f",defaultMessage:"Couldn’t remove #{tag}."},{tag:_}),"remove-tag-bulk")}}))})}))},t.fileRename=({file:e,newFile:t})=>({type:r.ActionTypes.FILE_RENAME,payload:{file:e,newFile:t}}),t.setAllTags=({tags:e})=>({type:r.ActionTypes.SET_ALL_TAGS,payload:{tags:e}}),t.fetchTagsForFiles=function({user:e,files:t,override:i=!1}){return(o,l)=>{0!==t.length&&d.tagsApiClient.getTags(e,t).then(e=>{o(h({fileToTags:e,override:i}))})}},t.fetchAllTagsSuggestions=function({user:e,onSuccess:i}){return(o,l)=>{void 0===n.selectAllTagsSuggestions(l())&&d.tagsApiClient.getAllTags(e).then(e=>{o(t.setAllTags({tags:e})),null==i||i()})}}})),define("modules/clean/tagging/data/reducer",["require","exports","lodash","modules/clean/tagging/data/types","modules/clean/tagging/utils"],(function(e,t,i,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.taggingReducer=t.defaultTaggingState=void 0,t.defaultTaggingState={tagsByFile:{},tags:void 0};const a=(e,t)=>{const i=[...e,...t],o=new Map(i.map(e=>[e.tag_text,e]));return[...Array.from(o.values())]};t.taggingReducer=function(e=t.defaultTaggingState,s){switch(s.type){case o.ActionTypes.SET_FILE_TO_TAGS_MAP:return((e,{fileToTags:t,override:o})=>{const l=Object.keys(t).reduce((o,l)=>{const a=e.tagsByFile[l],s=t[l];return void 0===a?(o[l]=s,o):(i.isEqual(i.sortBy(a,e=>e.tag_text),i.sortBy(s,e=>e.tag_text))?o[l]=a:o[l]=s,o)},{});let s=void 0;if(void 0!==e.tags){const t=Object.entries(l).map(([e,t])=>t).reduce((e,t)=>[...t,...e],[]);s=a(e.tags,t)}return Object.assign(Object.assign({},e),{tagsByFile:Object.assign(Object.assign({},o?{}:e.tagsByFile),l),tags:null!=s?s:e.tags})})(e,s.payload);case o.ActionTypes.FILE_RENAME:return((e,{file:t,newFile:i})=>{const o=l.getFileMapKey(t),a=l.getFileMapKey(i),s=e.tagsByFile[o];if(!s)return e;const n=e.tagsByFile;return delete n[o],n[a]=s,Object.assign(Object.assign({},e),{tagsByFile:n})})(e,s.payload);case o.ActionTypes.SET_ALL_TAGS:return((e,{tags:t})=>Object.assign(Object.assign({},e),{tags:t}))(e,s.payload);default:return e}}})),define("modules/clean/tagging/data/selectors/index",["require","exports","modules/clean/redux/namespaces","modules/clean/redux/selectors"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectAllTagsSuggestions=t.selectTagsByFile=void 0;const l=e=>o.getStateAtNamespace(e,i.TAGGING_NAMESPACE_KEY);t.selectTagsByFile=e=>l(e).tagsByFile,t.selectAllTagsSuggestions=e=>l(e).tags})),define("modules/clean/tagging/data/store",["require","exports","modules/clean/tagging/data/reducer","modules/clean/redux/namespaces","modules/clean/redux/store"],(function(e,t,i,o,l){"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForTagging=void 0,t.getStoreForTagging=()=>(a||(a=l.getStoreAndRegisterReducers({[o.TAGGING_NAMESPACE_KEY]:i.taggingReducer})),a)})),define("modules/clean/tagging/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.SET_FILE_TO_TAGS_MAP="TAGGING/SET_FILE_TO_TAGS_MAP",e.ADD_TAG_TO_FILE="TAGGING/ADD_TAG_TO_FILE",e.REMOVE_TAG_FROM_FILE="TAGGING/REMOVE_TAG_FROM_FILE",e.FILE_RENAME="TAGGING/FILE_RENAME",e.SET_ALL_TAGS="TAGGING/SET_ALL_TAGS"})(t.ActionTypes||(t.ActionTypes={}))})),define("modules/clean/tagging/logger",["require","exports","tslib","modules/clean/logging/telemetry","modules/clean/logging/hive/schemas/server-tag_actions","modules/clean/tagging/utils"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logAutoTagSnackbarAction=t.logTagClick=t.logFailTag=t.logAddTag=t.logStartTypingTag=t.logSelectTagBar=t.logRemoveTag=void 0,o=i.__importStar(o);const s=new o.HiveLogger;function n(t){return i.__awaiter(this,void 0,void 0,(function*(){const{LOGGING_ALLOWED_EXTS:o,LOGGING_EXT_PLACEHOLDER:l}=yield new Promise((t,i)=>{e(["modules/constants/file_viewer"],t,i)}).then(i.__importStar);return o.includes(t.ext)?t.ext:l}))}t.logRemoveTag=function(e,t,o){return i.__awaiter(this,void 0,void 0,(function*(){yield Promise.all(t.map(t=>i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:a.getTagType(o),event_name:"remove_tag",action_surface:"right_pane",file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e.id,file_id:t.file_id}))}))))}))},t.logSelectTagBar=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){yield Promise.all(t.map(t=>i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:"na",event_name:"select_tag_bar",action_surface:"right_pane",file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e.id,file_id:t.file_id}))}))))}))},t.logStartTypingTag=function(e,t){return i.__awaiter(this,void 0,void 0,(function*(){yield Promise.all(t.map(t=>i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:"na",event_name:"start_typing_tag",action_surface:"right_pane",file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e.id,file_id:t.file_id}))}))))}))},t.logAddTag=function(e,t,o){return i.__awaiter(this,void 0,void 0,(function*(){yield Promise.all(t.map(t=>i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:"user_generated_tag",event_name:"add_tag",action_surface:"right_pane",file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e.id,file_id:t.file_id}))}))))}))},t.logFailTag=function(e,t,o){return i.__awaiter(this,void 0,void 0,(function*(){yield Promise.all(t.map(t=>i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:"user_generated_tag",event_name:"fail_tag",action_surface:"right_pane",file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e.id,file_id:t.file_id}))}))))}))},t.logTagClick=function(e,t,o,r){return i.__awaiter(this,void 0,void 0,(function*(){yield Promise.all(t.map(t=>i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:a.getTagType(r),event_name:"select_tag",action_surface:o,file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e.id,file_id:t.file_id}))}))))}))},t.logAutoTagSnackbarAction=function(e,t,o,a,r){return i.__awaiter(this,void 0,void 0,(function*(){s.log(new l.ServerTagActionsRow({tag_name:null,tag_type:"user_generated_tag",event_name:"auto_tag_snackbar_action",action_surface:"right_pane",file_ext:yield n(t),file_nsid:t.ns_id.toString(),file_sjid:t.sjid.toString(),platform:"web",user_id:e,file_id:t.file_id,snackbar_action:a,tagging_type:r}))}))}})),define("modules/clean/logging/hive/schemas/server-tag_actions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerTagActionsRow=void 0;t.ServerTagActionsRow=class{constructor(e){this.category="server-tag_actions",this.file_oid=0,this.session_id=null,this.team_id=null,this.user_id=e.user_id,this.tag_name=e.tag_name,this.tag_type=e.tag_type,this.platform=e.platform,this.event_name=e.event_name,this.file_ext=e.file_ext,this.file_nsid=e.file_nsid,this.file_sjid=e.file_sjid,e.hasOwnProperty("file_oid")&&void 0!==e.file_oid&&(this.file_oid=e.file_oid),this.action_surface=e.action_surface,e.hasOwnProperty("session_id")&&void 0!==e.session_id&&(this.session_id=e.session_id),e.hasOwnProperty("team_id")&&void 0!==e.team_id&&(this.team_id=e.team_id),e.hasOwnProperty("snackbar_action")&&void 0!==e.snackbar_action&&(this.snackbar_action=e.snackbar_action),e.hasOwnProperty("tagging_type")&&void 0!==e.tagging_type&&(this.tagging_type=e.tagging_type),this.file_id=e.file_id,Object.seal(this)}}})),define("modules/clean/teams/components/item_truncation_container/item_truncation_container",["require","exports","tslib","react","classnames","dig-components/chips","dig-components/tooltips","modules/clean/react/components/css","dig-components/typography","modules/core/i18n","modules/clean/react/hooks/resize_observer"],(function(e,t,i,o,l,a,s,n,r,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemTruncationContainer=t.ItemTruncationContainerWithoutCss=t.renderMoreButton=t.createChipsDefault=t.createMoreTooltipDefault=void 0,o=i.__importStar(o),l=i.__importDefault(l),t.createMoreTooltipDefault=e=>e.map(e=>`#${e}`).join(" "),t.createChipsDefault=(e,t,i,l)=>({item:s,ref:n})=>{const r=t?a.InputChip:a.ChoiceChip;return o.default.createElement(r,{key:s,ref:n,className:l,onClick:t=>null==e?void 0:e(s,t),onDelete:()=>null==t?void 0:t(s),size:i||"small"},"#"+s)},t.renderMoreButton=(e,t,i)=>o.default.createElement(r.Text,{size:"small",className:l.default("itc-show-more-button",{clickable:void 0!==t},i),onClick:t},"+",e),t.ItemTruncationContainerWithoutCss=function(e){const{showMoreWidth:i=60,containerMaxRows:a=2,itemsToMoreTooltipString:n,expandable:u=!0,renderItem:g,items:h,className:p,showMoreClassName:m}=e,[_,f]=o.default.useState(h.length),[T,E]=o.default.useState(!1),S=o.default.useMemo(()=>Array(h.length).fill(0).map(e=>o.createRef()),[h]),[b,w]=o.useState(),I=[];if(h.map((e,t)=>{(t<=_||T)&&I.push(g({item:e,ref:S[t],index:t}))}),S.length>_&&!T){const e=n(h.slice(_+1));I.push(o.default.createElement(s.Tooltip,{id:"more-button-tooltip",title:e},t.renderMoreButton(S.length-(_+1),u?()=>E(!0):void 0,m)))}const[O,F]=c.useResizeObserver();return o.default.useEffect(()=>{b&&(f(h.length),w(null))},[null==F?void 0:F.contentRect.width]),o.default.useLayoutEffect(()=>{var e,t;if(!S||!S[0]||!b||0===b.clientWidth)return void(_!==h.length&&f(h.length));const o=((null===(t=null===(e=S[0])||void 0===e?void 0:e.current)||void 0===t?void 0:t.offsetHeight)||1)-1,l=(a-1)*o,s=S.findIndex(e=>{const t=e.current;if(t){const e=b.offsetLeft+b.clientWidth-(t.offsetLeft+t.clientWidth),s=t.offsetTop-b.offsetTop;if(e<i&&s>=l||s>=a*o)return!0}return!1});E(!1),f(s<0?h.length:s-1)},[h.length,b]),o.default.createElement("div",{ref:O,className:l.default("itc-container",p)},o.default.createElement("div",{key:h.length,className:"itc-items-container",ref:e=>w(e)},I),T&&o.default.createElement(r.Text,{size:"small",key:"show_less",id:"show-less",onClick:()=>E(!1),className:l.default("itc-show-more-button clickable",m)},d.intl.formatMessage({id:"QSkw6O",defaultMessage:"show less"})))},t.ItemTruncationContainer=n.requireCssWithComponent(t.ItemTruncationContainerWithoutCss,["/static/css/teams/admin/components/item_truncation_container-vflnj951-.css"])})),define("modules/clean/tagging/api",["require","exports","tslib","api_v2/default_user_client","modules/clean/tagging/utils","modules/clean/react/browse/models"],(function(e,t,i,o,l,a){"use strict";function s(e){const t=l.getFileObjectNsIdAndPath(e);return{ns_id:t.nsId,ns_path:t.nsPath}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagsApiClient=t.TagsApiClient=void 0;const n=e=>new Promise(t=>setTimeout(t,e));class r{getTags(e,t){return i.__awaiter(this,void 0,void 0,(function*(){const i=new o.DefaultUserApiV2Client(e),a={content_ids:t.map(s)};return(yield i.ns("manual_tagging").rpc("tags/get",a,{})).tags_by_content_id.reduce((e,{content_id:{ns_id:t,ns_path:i},tags:o,typed_tags:a})=>(e[l.getFileObjectNsIdAndPathKey({nsId:t,nsPath:i})]=((e,t)=>t?t.filter(l.isTextTag):e.map(e=>({".tag":"user_generated_tag",tag_text:e})))(o,a),e),{})}))}getAllTags(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=new o.DefaultUserApiV2Client(e);return(yield t.ns("manual_tagging").rpc("tags/get_viewable_tags",void 0,{})).tag_and_counts.map(e=>e.typed_tag).filter(l.isTextTag)}))}addTag(e,t,l){return i.__awaiter(this,void 0,void 0,(function*(){const i=new o.DefaultUserApiV2Client(e),a={tag:t,content_id:s(l)};return(yield i.ns("manual_tagging").rpc("tag/add",a,{})).hlc}))}addTagBulk(e,t,l){return i.__awaiter(this,void 0,void 0,(function*(){const a=new o.DefaultUserApiV2Client(e),r={tag:t,content_ids:l.map(s)},d=yield a.ns("manual_tagging").rpc("tag/add_bulk",r,{});if("complete"===d[".tag"])return d.failed;if("failed"===d[".tag"])throw new Error("tag/add_bulk failed");const{async_job_id:c}=d,u=()=>i.__awaiter(this,void 0,void 0,(function*(){return yield a.ns("manual_tagging").rpc("tag/add_bulk/check",{async_job_id:c},{})}));let g=yield u();for(;"in_progress"===g[".tag"];)yield n(1e3),g=yield u();if("failed"===g[".tag"]||"other"===g[".tag"])throw new Error("tag/add_bulk failed");return g.failed}))}removeTag(e,t,l){return i.__awaiter(this,void 0,void 0,(function*(){const i=new o.DefaultUserApiV2Client(e),a={tag:t,content_id:s(l)};return(yield i.ns("manual_tagging").rpc("tag/remove",a,{})).hlc}))}removeTagBulk(e,t,l){return i.__awaiter(this,void 0,void 0,(function*(){const a=new o.DefaultUserApiV2Client(e),r={tag:t,content_ids:l.map(s)},d=yield a.ns("manual_tagging").rpc("tag/remove_bulk",r,{});if("complete"===d[".tag"])return d.failed;if("failed"===d[".tag"])throw new Error("tag/remove_bulk failed");const{async_job_id:c}=d,u=()=>i.__awaiter(this,void 0,void 0,(function*(){return yield a.ns("manual_tagging").rpc("tag/remove_bulk/check",{async_job_id:c},{})}));let g=yield u();for(;"in_progress"===g[".tag"];)yield n(1e3),g=yield u();if("failed"===g[".tag"]||"other"===g[".tag"])throw new Error("tag/remove_bulk failed");return g.failed}))}listFolder(e,t){var l,s;return i.__awaiter(this,void 0,void 0,(function*(){try{"/"===e&&(e="");const i={fq_path:e,include_deleted:!1,sort_is_ascending:!1,sort_folders_first:!1,include_xattrs:!1,include_folder_overview:!1};let n=!1;const r=[],d=new o.DefaultUserApiV2Client(t);let c=yield d.ns("files").rpc("browse",i,{});for(null===(l=c.paginated_file_info)||void 0===l||l.forEach(e=>e.file_info&&r.push(e.file_info));c.has_more;){if(r.length>700){n=!0;break}c=yield d.ns("files").rpc("browse_continue",{cursor:c.next_request_voucher},{}),null===(s=c.paginated_file_info)||void 0===s||s.forEach(e=>e.file_info&&r.push(e.file_info))}return{files:r.map(e=>a.File.fromAnyFileObject(e)),reachedLimit:n}}catch(e){throw new Error("list_folder API error")}}))}}t.TagsApiClient=r,t.tagsApiClient=new r})),define("modules/clean/tagging/utils",["require","exports","tslib","lodash","modules/core/browser","modules/clean/search/search_helpers","modules/clean/fuzzy","modules/clean/history_helper"],(function(e,t,i,o,l,a,s,n){"use strict";function r(e){for(;e.startsWith("#");)e=e.substr(1);return e}function d(e){return`#${r(e)}`}function c(e){const t=!e.is_unmounted&&e.target_ns;return{nsId:t?e.target_ns:e.ns_id,nsPath:t?"":e.ns_path}}function u(e){return`${e.nsId},${e.nsPath.toLowerCase()}`}function g(){let e="";for(let t=0;t<32;t++){const t=Math.floor(10*Math.random());e+=String(t)}return e}function h(e){return t.isUserGeneratedTag(e)?e[".tag"]:t.isSuggestedTag(e)?e.classifier[".tag"]:"unknown"}Object.defineProperty(t,"__esModule",{value:!0}),t.getTagsInQuery=t.getTagType=t.textTagsToUserGeneratedTags=t.fileHasEditPermissions=t.getTagsSuggestions=t.redirectToSearchByTag=t.queryContainsTag=t.isUserGeneratedTag=t.isSuggestedTag=t.isTextTag=t.tagTextToTagUserGeneratedTag=t.getFileMapKey=t.getFileObjectNsIdAndPathKey=t.getFileObjectNsIdAndPath=t.formatTypedTag=t.formatTag=t.trimHashtags=void 0,l=i.__importStar(l),a=i.__importStar(a),s=i.__importDefault(s),t.trimHashtags=r,t.formatTag=d,t.formatTypedTag=function(e){return t.isUserGeneratedTag(e)?d(e.tag_text):r(e.tag_text)},t.getFileObjectNsIdAndPath=c,t.getFileObjectNsIdAndPathKey=u,t.getFileMapKey=function(e){return u(c(e))},t.tagTextToTagUserGeneratedTag=e=>({".tag":"user_generated_tag",tag_text:e}),t.isTextTag=e=>"user_generated_tag"===e[".tag"]||"suggested_tag"===e[".tag"],t.isSuggestedTag=e=>"suggested_tag"===e[".tag"],t.isUserGeneratedTag=e=>"user_generated_tag"===e[".tag"],t.queryContainsTag=function(e,t){if(e.toLowerCase().replace(/,/g,"").split(" ").filter(e=>e.startsWith("#")).includes(`#${t}`))return!0;const i=e.toLowerCase().replace(/[.,\/!$%\^&\*;:{}=\-`~()]/g,"").split(" ").filter(e=>!e.startsWith("#")).join(" ").replace("_"," ").split(" "),l=t.split("_");return o.intersection(i,l).length>0},t.redirectToSearchByTag=function(e,t){l.redirect(a.buildSearchURL({user:e,searchPath:"/",normalizedQuery:`${d(t)}, `,searchSessionId:g(),searchToken:a.getSearchCsrfToken(),qargs:{search_from:n.deconstructUrl().path}}).toString())},t.getTagsSuggestions=function(e,t){return s.default.filter(e,t,{extract:e=>e.tag_text}).map(e=>e.original).sort((e,t)=>e.tag_text.localeCompare(t.tag_text))},t.fileHasEditPermissions=e=>(!e.is_dir||!e.isDeleted)&&(e.target_ns?!e._mount_access_perms||!(!e._mount_access_perms||!e._mount_access_perms.includes("can_edit")):!e.read_only),t.textTagsToUserGeneratedTags=e=>e.map(t.tagTextToTagUserGeneratedTag),t.getTagType=h,t.getTagsInQuery=function(e,t){const i={},o=e.toLowerCase().replace(/,/g," ").split(" ").filter(e=>e.startsWith("#")).map(e=>r(e)),l=o.length;return o.forEach(e=>{var o;const l=t&&t.find(t=>e===t.tag_text),a=l?h(l):"unknown";i[a]=(null!==(o=i[a])&&void 0!==o?o:0)+1}),{numOfTags:l,typeOfTagToCount:i}}})),define("modules/clean/tagging/components/tags_container",["require","exports","tslib","react","classnames","dig-components/chips","modules/clean/react/components/css","modules/clean/teams/components/item_truncation_container/item_truncation_container","modules/clean/tagging/utils","dig-components/icons","dig-components/icons/src","dig-components/tooltips","modules/core/i18n"],(function(e,t,i,o,l,a,s,n,r,d,c,u,g){"use strict";function h(e){return e.map(e=>r.formatTag(e.tag_text)).join(" ")}Object.defineProperty(t,"__esModule",{value:!0}),t.TagsContainer=void 0,o=i.__importDefault(o),l=i.__importDefault(l);const p=e=>{const{tags:t,highlightedIndexes:i=[],onTagClick:s,onTagDelete:p,containerClassName:m,chipClassName:_,chipSize:f}=e;if(0===t.length)return null;const T=t.filter((e,t)=>!i.includes(t)),E=t.filter((e,t)=>i.includes(t));return o.default.createElement(n.ItemTruncationContainer,Object.assign({items:[...E,...T],itemsToMoreTooltipString:h,renderItem:({item:e,ref:t,index:i})=>{const n=i<E.length,h=p?a.InputChip:a.FilterChip,m=r.isSuggestedTag(e),T=m?{withIconLeft:o.default.createElement(d.UIIcon,{src:c.Twinkle2Line,size:"small"})}:{},S=o.default.createElement(h,Object.assign({},T,{key:e.tag_text,ref:t,className:l.default("tag-chip",{highlighted:n},_),onClick:t=>null==s?void 0:s(e,t),onDelete:()=>null==p?void 0:p(e),size:f||"small"}),r.formatTypedTag(e));return m?o.default.createElement(u.Tooltip,{title:g.intl.formatMessage({id:"NXiDuW",defaultMessage:"Dropbox added this tag"})},S):S},className:l.default("tags-container",m)},e))};p.displayName="TagsContainerWithoutCss",t.TagsContainer=s.requireCssWithComponent(p,["/static/css/tagging/tags_container-vfl_m11fQ.css"])})),define("modules/clean/react/files_view/files_view_hooks",["require","exports","tslib","react","modules/core/cancelable_promise","modules/clean/web_timing_logger"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIsPostTTI=void 0,o=i.__importDefault(o),a=i.__importStar(a),t.useIsPostTTI=()=>{const[e,t]=o.default.useState(!!a.time_to_interactive);return o.default.useEffect(()=>{const e=l.makeCancelable(a.waitForTTI().then(()=>{t(!0)}));return()=>e.cancel()},[]),e}})),define("modules/clean/photos/thumb_loading/buffered_thumb_store",["require","exports","tslib","modules/clean/photos/thumb_loading/generic_thumb_store","modules/clean/web_timing_logger","modules/core/assert"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferedThumbStore=void 0,l=i.__importStar(l);t.BufferedThumbStore=class{constructor(e,t){this.isTTI=!1,this.postTTISuccesses=[],this.postTTIErrors=[],this.postTTIRequests=[],this.wrapHandlers=e=>({onSuccess:t=>{this.isTTI?e.onSuccess(t):this.bufferCallbacks(this.postTTISuccesses,e,t)},onRequest:t=>{e.onRequest&&(this.isTTI?e.onRequest(t):this.bufferCallbacks(this.postTTIRequests,e,t))},onError:()=>{e.onError&&(this.isTTI?e.onError():this.bufferErrorCallback(e))}}),this.innerStore=new o.GenericThumbStore(e,t),l.waitForTTI().then(()=>{this.isTTI=!0,this.postTTIRequests.forEach(e=>{const{onRequest:t}=e[0];t&&t(e[1])}),this.postTTIErrors.forEach(e=>e.onError&&e.onError()),this.postTTISuccesses.forEach(e=>e[0].onSuccess(e[1])),this.postTTIRequests=[],this.postTTIErrors=[],this.postTTISuccesses=[]})}get_thumb(e){return this.isTTI?this.innerStore.get_thumb(e):null}is_batching(){return this.innerStore.is_batching()}bind_url(e,t){const i=this.isTTI?t:this.wrapHandlers(t);return this.innerStore.bind_url(e,i)}bufferCallbacks(e,t,i){a.assert(!this.isTTI,"Should not buffer callback after TTI"),e.push([t,i])}bufferErrorCallback(e){a.assert(!this.isTTI,"Should not buffer error callback after TTI"),this.postTTIErrors.push(e)}unbind_url(e){this.innerStore.unbind_url(e)}}})),define("modules/clean/react/selection",["require","exports","tslib","immutable"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createSelection=t.Selection=void 0,o=i.__importStar(o);class l extends(o.Record({selected:null,anchor:null},"Selection")){}t.Selection=l,t.createSelection=function(e,t){return new l({selected:e?o.OrderedSet(e):o.OrderedSet(),anchor:t||(e?e[0]:null)})}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/sharing/public_folder/public_folder",["require","exports","modules/core/uri"],(function(e,t,i){"use strict";function o(e,t){if(e.publicAppToken)return t;if(!e.isPublicFolderEnabled)return null;const i=(e.publicFolderFqPath||"/public").toLowerCase(),o=t.toLowerCase();return o===i?"/":o.startsWith(i+"/")?t.substring(i.length):null}Object.defineProperty(t,"__esModule",{value:!0}),t.showPublicFolderLinkModal=t.makePublicFolderLink=t.shouldUsePublicFolderSharing=void 0,t.shouldUsePublicFolderSharing=function(e,t){return null!=o(e,t)},t.makePublicFolderLink=function(e,t,l,a){if(a)return null;const s=o(t,l);if(null!=s){const o=new i.URI({scheme:"https",authority:"dl.dropboxusercontent.com"});return t.publicAppToken?(o.setPath(`/spa/${t.publicAppToken}${s}/data`),o.toString()):(o.setPath(`/u/${e}${s}`),o.toString())}return null},t.showPublicFolderLinkModal=function(t){return new Promise((i,o)=>{Promise.all([new Promise((t,i)=>{e(["react"],t,i)}).then(__importStar),new Promise((t,i)=>{e(["modules/clean/react/components/modal"],t,i)}).then(__importStar),new Promise((t,i)=>{e(["modules/clean/sharing/public_folder/modal"],t,i)}).then(__importStar)]).then(([e,{Modal:o},{CopyPublicLinkModal:l}])=>{o.showInstance(e.createElement(l,{publicLink:t})),i()})})}})),define("modules/clean/emoji_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstEmojiFromTitle=void 0;let i;t.getFirstEmojiFromTitle=function(e){const t=(function(){i||(i=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]\ufe0f?|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g);return i})();t.lastIndex=0;const o=t.exec(e);if(o&&0===o.index){const i=o[0];if("‍"===e[i.length])return"";const l=t.exec(e);return l&&l.index===i.length?"":i||""}return""}})),define("modules/clean/filename_highlights",["require","exports","tslib","classnames","react"],(function(e,t,i,o,l){"use strict";function a(e,t,i,o){if(!t)return[{text:e,isHighlighted:!1}];i||(i=0),o||(o=e.length),t=(function(e,t){if(!t||!t.length)return[];const i=[];let o=0;return t.forEach(t=>{const l=t.pos;l>o&&(o=l);const a=e.indexOf(t.string,o);a>=0&&i.push({pos:a,len:t.string.length,string:t.string})}),i})(e,t);let l=0,a=0;const s=[];for(;l<e.length;){let n,r;const d=t[a];if(a>=t.length?(r=!1,n=l+e.length):d.pos>l?(r=!1,n=d.pos):(r=!0,n=d.pos+d.len),!(l<i&&n<=i||l>=o&&n>=o)){const t=e.substring(Math.max(l,i),Math.min(n,o));s.push({text:t,isHighlighted:r})}l=n,r&&a++}return s}function s(e,t,i,o){if(i||(i=0),o||(o=e.length),!t||!(function(e,t){const i=t.map(e=>e.highlight_str).join("");return e===i})(e,t))return[{text:e.substring(i,o),isHighlighted:!1}];const l=[];let a=0;for(const s of t){const t=e.indexOf(s.highlight_str,a),n=t+s.highlight_str.length;if(a=n,!(t<i&&n<=i||t>=o)){let e=s.highlight_str;t<i&&(e=e.slice(i-t)),o<n&&(e=e.slice(0,-(n-o))),l.push({text:e,isHighlighted:s.is_highlighted})}}return l}function n(e){return l.createElement("span",null,e.map((e,t)=>l.createElement("span",{className:o.default({highlighted:e.isHighlighted,"is-highlighted":e.isHighlighted}),key:t},e.text)))}Object.defineProperty(t,"__esModule",{value:!0}),t.highlightReactFromAllHighlightSpans=t.highlightReactFromHighlightSpans=t.highlightSectionsFromHighlightSpans=t.highlightMatchReact=t.highlightMatchSections=void 0,o=i.__importDefault(o),l=i.__importStar(l),t.highlightMatchSections=a,t.highlightMatchReact=function(e,t,i,o){return n(a(e,t,i,o))},t.highlightSectionsFromHighlightSpans=s,t.highlightReactFromHighlightSpans=function(e,t,i,o){return n(s(e,t,i,o))},t.highlightReactFromAllHighlightSpans=function(e){return n(e.map(({highlight_str:e,is_highlighted:t})=>({text:e,isHighlighted:t})))}})),define("modules/clean/paper_formatting_utils",["require","exports","tslib","modules/clean/emoji_utils","react","modules/clean/filename_highlights","spectrum/icon_content/index"],(function(e,t,i,o,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPaperDocTitleParts=void 0,o=i.__importStar(o),l=i.__importDefault(l),a=i.__importStar(a),t.getPaperDocTitleParts=function(e,t,i,n){let{title:r,highlight_spans:d,title_highlights:c}=e;const u=d&&d.length>0,g=o.getFirstEmojiFromTitle(r);if(g)if(r=r.substr(g.length),u){const e={highlight_str:d[0].highlight_str.substr(g.length),is_highlighted:d[0].is_highlighted};d=[e,...d.slice(1)]}else if(c){const e=g.length/2;c=c.slice().map(t=>({pos:t.pos-e,len:t.string.length,string:t.string}))}let h;return h=u?a.highlightReactFromHighlightSpans(r,d):a.highlightMatchReact(r,c),{title:r,highlightedTitle:h,icon:(function(e,t,i,o){return e?l.default.createElement("div",{className:"mc-media-cell-icon brws-file-name-icon-emoji-container"},l.default.createElement(s.IconContent,{name:o?"blank-large":"blank-small",className:t}),l.default.createElement("span",{className:i},e)):l.default.createElement(s.IconContent,{name:o?"paper-large":"paper-small",className:t})})(g,t,i,n)}}})),define("modules/clean/sharing/browse_exports",["require","exports","tslib","modules/clean/sharing/access_level","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/public_folder/public_folder","modules/clean/sharing/wizard/async_wizard_modals"],(function(e,t,i,o,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowShareAFolderWizardModal=t.showPublicFolderLinkModal=t.shouldUsePublicFolderSharing=t.makePublicFolderLink=t.asyncShowPrefilledShareModal=t.asyncShowNewFolderShareModal=t.asyncShowShareModal=t.asyncShowAppropriateNewFolderModalForCdmUser=t.asyncShowMultiFolderPermissionsAtUploadModal=t.asyncShowCdmNewFolderViaUploadModal=t.asyncShowCdmNewFolderModal=t.asyncMountSharedFolder=void 0,t.asyncMountSharedFolder=function(...t){new Promise((t,i)=>{e(["modules/clean/sharing/shared_content_link_mount_folder"],t,i)}).then(i.__importStar).then(({mountSharedFolder:e})=>{e(...t)})},t.asyncShowCdmNewFolderModal=function({handleCreateFolder:t,user:o,context:l,shouldSyncDefault:a,shouldDisplaySyncSettings:s,shouldDisplayAudienceInput:n,defaultInputFolderName:r,autoTeamGroupDefaultAccessLevel:d,redirectOnCancel:c,useDigModal:u=!0,isConfidential:g=!1}){new Promise((t,i)=>{e(["modules/clean/sharing/cdm_new_folder_modal"],t,i)}).then(i.__importStar).then(e=>{e.showCdmNewFolderModal(t,o,l,a,s,n,d,r,c,u,g)})},t.asyncShowCdmNewFolderViaUploadModal=function(t,l,a,s,n,r,d){return i.__awaiter(this,void 0,void 0,(function*(){(yield new Promise((t,i)=>{e(["modules/clean/sharing/cdm_new_folder_modal"],t,i)}).then(i.__importStar)).showCdmNewFolderViaUploadModal(t,l,a,!0,o.ACCESS_LEVEL.WRITER,s,n,r,d)}))},t.asyncShowMultiFolderPermissionsAtUploadModal=function(t){return i.__awaiter(this,void 0,void 0,(function*(){(yield new Promise((t,i)=>{e(["modules/clean/sharing/multifolder_permissions_at_upload/modal"],t,i)}).then(i.__importStar)).showMultiFolderPermissionsAtUploadModal(t)}))},t.asyncShowAppropriateNewFolderModalForCdmUser=function(t){return i.__awaiter(this,void 0,void 0,(function*(){(yield new Promise((t,i)=>{e(["modules/clean/sharing/cdm_new_folder_modal_util"],t,i)}).then(i.__importStar)).showAppropriateNewFolderModalForCdmUser(t)}))},Object.defineProperty(t,"asyncShowShareModal",{enumerable:!0,get:function(){return l.asyncShowShareModal}}),Object.defineProperty(t,"asyncShowNewFolderShareModal",{enumerable:!0,get:function(){return l.asyncShowNewFolderShareModal}}),Object.defineProperty(t,"asyncShowPrefilledShareModal",{enumerable:!0,get:function(){return l.asyncShowPrefilledShareModal}}),Object.defineProperty(t,"makePublicFolderLink",{enumerable:!0,get:function(){return a.makePublicFolderLink}}),Object.defineProperty(t,"shouldUsePublicFolderSharing",{enumerable:!0,get:function(){return a.shouldUsePublicFolderSharing}}),Object.defineProperty(t,"showPublicFolderLinkModal",{enumerable:!0,get:function(){return a.showPublicFolderLinkModal}}),Object.defineProperty(t,"asyncShowShareAFolderWizardModal",{enumerable:!0,get:function(){return s.asyncShowShareAFolderWizardModal}})})),define("modules/clean/sharing/content_manager",["require","exports","tslib","modules/core/uri","modules/clean/filepath/filepath","modules/core/browser"],(function(e,t,i,o,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.goToContentManagerForPath=t.genContentManagerBridgeUri=void 0,a=i.__importStar(a),t.genContentManagerBridgeUri=function({containingFolder:e,filenameToSelect:t}){let i;return e=l.normalize(e)||"",t&&(i=[e,t].join("/")),new o.URI({path:`/team/admin/content/home${e}`,query:i?{select:i}:void 0})},t.goToContentManagerForPath=function(e){const i=t.genContentManagerBridgeUri(e);a.open_tab(i.toString())}})),define("modules/clean/react/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button/index","modules/clean/react/title_bubble","modules/clean/em_string","modules/clean/filepath/filepath","dig-components/tooltips","modules/clean/react/sticky_position","dig-components/chips"],(function(e,t,i,o,l,a,s,n,r,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PathFilterButton=void 0,o=i.__importDefault(o),n=i.__importStar(n),t.PathFilterButton=({path:e,defaultText:t,dropdownClasses:i,disabled:u,onClick:g,useDigComponents:h})=>{const p=e&&!n.paths_are_equal(e,"/")?s.Emstring.em_snippet(n.filename(e),10,.6):null;if(h){const l=o.default.createElement(c.FilterChip,{className:i,disabled:u,onClick:g},p||t);return e&&p?o.default.createElement(r.Tooltip,{title:e,placement:"bottom"},l):l}const m=o.default.createElement(l.DropdownButton,{className:i,disabled:u,onClick:g},p||t);return p?o.default.createElement(a.TitleBubble,{content:e,position:d.StickyPosition.BOTTOM},m):m}})),define("typescript/component_libraries/flows/src/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-browse-utils.min.js-vflZFcq4u.map
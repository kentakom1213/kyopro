define(["require","exports","tslib","typescript/component_libraries/files_components/src/blades/comments/index","react","react-dom","react-redux","lodash","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/css/toolbar_v2.css","typescript/libraries/file-viewer/src/toolbar/video_thumbnails_v2","typescript/libraries/file-viewer/src/core/logging/video","typescript/component_libraries/files_components/src/blades/comments/data/types"],(function(e,r,t,a,i,s,l,o,n,d,c,m,u){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CommentMarkers=void 0,i=t.__importStar(i),d=t.__importStar(d);const b=({fileId:e,duration:r,fileViewerId:t,audioVideoMetadata:s,logVideoAction:b,sharedLinkInfo:v})=>{const h=u.createCommentFileIdentifier(e,null==v?void 0:v.url),f=l.useDispatch(),k=l.useSelector(e=>e.threads[h]||{}),[_,y]=i.useState(),C=n.useStabilizedCallback(r=>{f(a.activateThread({fileId:e,fileViewerId:t,isThirdParty:r.isThirdParty,threadId:r.id}))}),M="video"===(null==s?void 0:s[".tag"])?null==s?void 0:s.thumb_scrubber_vtt_url:void 0,T=i.useCallback(o.once(e=>{b(e?m.VideoPreviewEvent.ScrubberThumbnailsLoaded:m.VideoPreviewEvent.ScrubberThumbnailsFailed)}),[b]);return i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:d.commentMarkersContainer},Object.keys(k).map(e=>i.default.createElement(p,{key:e,duration:r,thread:k[e],setHoveredThread:y}))),M&&i.default.createElement(c.VideoThumbnailsComponent,{vttUrl:M,onScrubberThumbnailsLoaded:T,duration:r,lastHighlightedThread:_,openThreadInRightRail:C}))};b.displayName="CommentMarkersComponent";const p=({duration:e,thread:r,setHoveredThread:t})=>{const a=n.useStabilizedCallback(()=>t(r)),s=c.getTimeForThread(r);if(void 0===s)return null;const l=0===e?0:100*s/e;return i.default.createElement("div",{className:d.commentMarker,style:{left:`${l}%`},onMouseEnter:a})};p.displayName="Marker",r.CommentMarkers=e=>{var{container:r}=e,a=t.__rest(e,["container"]);return s.createPortal(i.default.createElement(b,Object.assign({},a)),r)},r.CommentMarkers.displayName="CommentMarkers",r.CommentMarkers.displayName="CommentMarkers"}));
//# sourceMappingURL=markers.amd.min.js-vflURcrNS.map
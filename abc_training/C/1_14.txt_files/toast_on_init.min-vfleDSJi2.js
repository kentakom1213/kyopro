define(["require","exports","tslib","modules/core/notify","modules/core/html","modules/core/cookies","modules/clean/security/csrf_hmac","modules/clean/csrf"],(function(e,o,t,i,s,r,n,u){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.decodeToastCookie=o.showToastFromCookie=void 0;function d(e,o){return t.__awaiter(this,void 0,void 0,(function*(){const t=yield n.readHmacCookieToken(e,o);if(null==t)return null;if(t.startsWith("er:"))return[!0,t.substring(3)];if(t.startsWith("ok:"))return[!1,t.substring(3)];throw new Error("unrecognized format of message in toast cookie")}))}o.showToastFromCookie=function(){var o;return t.__awaiter(this,void 0,void 0,(function*(){const n=r.Cookies.read("toast");if(n){const c=yield d(n,null!==(o=u.readCsrfToken())&&void 0!==o?o:void 0);if(null!=c){const[o,n]=c,{sanitize:u}=yield new Promise((o,t)=>{e(["dompurify"],o,t)}).then(t.__importStar),d=u(n),l=document.getElementById("flash");null!=l&&(l.innerHTML=d,l.style.display="block"),setTimeout(()=>r.Cookies.delete("toast"),2e3),o?i.Notify.error(new s.HTML(d),10):i.Notify.success(new s.HTML(d),10)}}}))},o.decodeToastCookie=d}));
//# sourceMappingURL=toast_on_init.min.js-vfl2H4FDy.map
define("modules/clean/react/flows/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AUTOMATED_ADOPTION_VARIANTS=t.SUPPORTED_UNZIP_EXTENSIONS=t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS=t.SUPPORTED_AUDIO_INPUT_EXTENSIONS=t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS=t.SUPPORTED_VIDEO_INPUT_EXTENSIONS=t.SUPPORTED_IMAGE_INPUT_EXTENSIONS=t.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS=t.SUPPORTED_DOC_INPUT_EXTENSIONS=t.SUPPORTED_PDF_EXTENSIONS=t.DOC_TO_PDF_EXTENSIONS=t.EXCLOG_TAG=t.FLOWS_STYLESHEETS=void 0,t.FLOWS_STYLESHEETS=["/static/css/spectrum/index.web-vfliw9181.css","/static/css/dig-components/index.web-vflm67Rix.css","/static/js/dig-experimental/index.web-vfl_TJZKT.css","/static/js/typescript/component_libraries/flows/src/index.web-vfl5W8hER.css","/static/css/flows/flows-vflp_EW84.css"],t.EXCLOG_TAG="dbx-owner:workflow-automation",t.DOC_TO_PDF_EXTENSIONS=["ai","azw4","binder","djvu","doc","docm","docx","dwg","eps","epub","fdr","fdx","gdoc","gslides","mobi","odp","odt","paper","papert","pps","ppsm","ppsx","ppt","pptm","pptx","ps","rtf","wpd"];t.SUPPORTED_PDF_EXTENSIONS=t.DOC_TO_PDF_EXTENSIONS.concat(["bmp","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","png","ppm","tga","tif","tiff"]),t.SUPPORTED_DOC_INPUT_EXTENSIONS=["ai","azw4","binder","djvu","doc","docm","docx","dwg","eps","epub","gdoc","gslides","mobi","odp","odt","paper","papert","pps","ppsm","ppsx","ppt","pptm","pptx","ps","rtf","wpd","pdf"],t.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS=["jpg","png"],t.SUPPORTED_IMAGE_INPUT_EXTENSIONS=["bmp","gif","heic","j2c","j2k","jp2","jpc","jpeg","jpf","jpg","jpg2","jpm","jpx","png","ppm","psd","svg","tga","tif","tiff","wbmp","webp","3fr","arw","cr2","cr3","crw","dcr","dcs","dng","erf","kdc","mef","mos","mrw","nef","nrw","orf","pef","r3d","raf","rw2","rwl","sr2","x3f"],t.SUPPORTED_VIDEO_INPUT_EXTENSIONS=["mov","mp4","avi","mkv","mpeg"],t.SUPPORTED_VIDEO_OUTPUT_CONTAINERS=["mp4","mov"],t.SUPPORTED_AUDIO_INPUT_EXTENSIONS=["aac","aif","aiff","flac","m4a","m4r","mp3","oga","ogg","wav","wma"],t.SUPPORTED_AUDIO_OUTPUT_CONTAINERS=["mp3","wav","m4a"],t.SUPPORTED_UNZIP_EXTENSIONS=["7z","bz","bz2","cpio","gz","iso","lha","lz","lzh","lzma","rar","tar","taz","tbz","tbz2","tgz","tlz","txz","tz","xar","xz","z","zip"],(function(e){e.ON="ON",e.OFF="OFF",e.V2_IMAGE_VIDEO="V2_IMAGE_VIDEO",e.M2_A="M2_A",e.M2_B="M2_B",e.M2_C="M2_C",e.M2_D="M2_D"})(t.AUTOMATED_ADOPTION_VARIANTS||(t.AUTOMATED_ADOPTION_VARIANTS={}))})),define("modules/clean/react/flows/components/badge",["require","exports","tslib","react","dig-components/badges","react-intl","modules/clean/react/components/css","modules/clean/react/flows/constants","modules/core/i18n","dig-components/tooltips","modules/clean/react/flows/types","typescript/component_libraries/flows/src/common/constants"],(function(e,t,o,n,a,s,i,r,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsFolderBadge=t.FlowsFolderBadgeComponent=void 0,n=o.__importDefault(n),t.FlowsFolderBadgeComponent=({type:e,isInUnifiedModal:t,isFolderFocused:o})=>{const{autoPdfBadgeContent:i,autoPdfBadgeTooltip:r,autoUnzipBadgeContent:f,autoUnzipBadgeTooltip:g,unifiedModalContent:p,autoTagBadgeContent:_,autoTagBadgeTooltip:v,autoSmartSubfoldersBadgeContent:A,autoSmartSubfoldersBadgeTooltip:y,autoImageBadgeContent:S,autoImageBadgeTooltip:T,autoVideoBadgeContent:b,autoVideoBadgeTooltip:M,autoNamingConventionsBadgeContent:E,autoNamingConventionsBadgeTooltip:w,autoTidyUpBadgeContent:h,autoTidyUpBadgeTooltip:C,autoAudioBadgeContent:O,autoAudioBadgeTooltip:F}=m(),N={[d.FlowsRuleType.AutoPDF]:{tooltip:r,content:i},[d.FlowsRuleType.AutoUnzip]:{tooltip:g,content:f},[d.FlowsRuleType.AutoTag]:{tooltip:v,content:_},[d.FlowsRuleType.AutoSmartSubfolders]:{tooltip:y,content:A},[d.FlowsRuleType.AutoImage]:{tooltip:T,content:S},[d.FlowsRuleType.AutoVideo]:{tooltip:M,content:b},[d.FlowsRuleType.AutoNamingConventions]:{tooltip:w,content:E},[d.FlowsRuleType.AutoTidyUp]:{tooltip:C,content:h},[d.FlowsRuleType.AutoAudio]:{tooltip:F,content:O},[d.FlowsRuleType.EmailIngest]:{tooltip:void 0,content:void 0}},I=e===d.FlowsRuleType.None?void 0:N[e];return n.default.createElement(s.RawIntlProvider,{value:l.intl},I&&n.default.createElement(c.Tooltip,{id:"flows-badge-tooltip","data-testid":u.TestTarget.FLOWS_BADGE_TOOLTIP,title:I.tooltip,maxWidth:400},n.default.createElement("div",{className:"flows-badge","data-testid":u.TestTarget.FLOWS_BADGE,tabIndex:o?0:-1},n.default.createElement(a.AccessoryBadge,null,t?p:I.content))))},t.FlowsFolderBadgeComponent.displayName="FlowsFolderBadgeComponent";const m=()=>{const e=s.useIntl();return{autoPdfBadgeContent:e.formatMessage({id:"J7Q2k7",defaultMessage:"Auto-PDF"}),autoPdfBadgeTooltip:e.formatMessage({id:"fsqHOb",defaultMessage:"Files added to this folder are automatically saved as PDFs."}),unifiedModalContent:e.formatMessage({id:"VWmNRn",defaultMessage:"Automated"}),autoUnzipBadgeContent:e.formatMessage({id:"ZrkK1J",defaultMessage:"Auto-unzip"}),autoUnzipBadgeTooltip:e.formatMessage({id:"7ZScv9",defaultMessage:"Zipped files added to this folder are automatically unzipped."}),autoTagBadgeContent:e.formatMessage({id:"86n5XF",defaultMessage:"Auto-tag"}),autoTagBadgeTooltip:e.formatMessage({id:"1VM5D6",defaultMessage:"Files added to this folder are automatically tagged"}),autoSmartSubfoldersBadgeContent:e.formatMessage({id:"fy7f50",defaultMessage:"Smart Subfolders"}),autoSmartSubfoldersBadgeTooltip:e.formatMessage({id:"apbbra",defaultMessage:"Files added to this folder are automatically sorted and moved to organized subfolders"}),autoImageBadgeContent:e.formatMessage({id:"sxUr1/",defaultMessage:"Auto-Image"}),autoImageBadgeTooltip:e.formatMessage({id:"IXOBFy",defaultMessage:"Files added to this folder are automatically saved as image files."}),autoVideoBadgeContent:e.formatMessage({id:"eomqk8",defaultMessage:"Auto-Video"}),autoVideoBadgeTooltip:e.formatMessage({id:"rAbBlX",defaultMessage:"Files added to this folder are automatically saved as video files."}),autoNamingConventionsBadgeContent:e.formatMessage({id:"Agx16U",defaultMessage:"Auto-Rename"}),autoNamingConventionsBadgeTooltip:e.formatMessage({id:"0fCqTu",defaultMessage:"Files added to this folder are automatically renamed."}),autoTidyUpBadgeContent:e.formatMessage({id:"ilGTr6",defaultMessage:"Auto-Organize"}),autoTidyUpBadgeTooltip:e.formatMessage({id:"eKz+EF",defaultMessage:"Files added to this folder are automatically organized by date."}),autoAudioBadgeContent:e.formatMessage({id:"KosKoB",defaultMessage:"Auto-Audio"}),autoAudioBadgeTooltip:e.formatMessage({id:"uQyruu",defaultMessage:"Files added to this folder are automatically saved as audio files."})}};t.FlowsFolderBadge=i.requireCssWithComponent(t.FlowsFolderBadgeComponent,r.FLOWS_STYLESHEETS)})),define("modules/clean/react/flows/components/flows_browse_root",["require","exports","tslib","react","modules/clean/react/browse/data/selectors","react-redux","modules/clean/react/browse/data/action_creators/index","modules/clean/react/flows/lib/api","modules/clean/react/hooks/usePrevious","modules/clean/react/flows/types","modules/clean/react/browse/models","modules/clean/filetypes","modules/clean/react/flows/utils/api_helpers","modules/clean/react/flows/types","modules/clean/react/flows/utils/bolt","modules/clean/user_survey/user_survey","modules/clean/file_store/utils","modules/clean/react/flows/utils/notifications","modules/clean/react/flows/redux/actions","modules/clean/react/flows/redux/store"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_,v,A,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FlowsRoot=t.FlowsRootComponent=void 0,a=o.__importStar(a),i=o.__importStar(i),r=o.__importStar(r);const S={getFolderRulesConfig:(A=o.__importStar(A)).getFolderRulesConfig,setFileHasAutomatedRuleMap:i.setFileHasAutomatedRuleMap};t.FlowsRootComponent=({unsortedFiles:e,setFileHasAutomatedRuleMap:t,user:o,path:a,flowsRule:s,getFolderRulesConfig:i})=>{const A=l.usePrevious(e),[S,T]=n.useState(!1),{handlePayload:b}=v.useFlowsNotifications(o),M=e=>{!S&&e.valueSeq().some(e=>e!==c.FlowsRuleType.None)&&T(!0),t({fileHasAutomatedRuleMap:e})};return n.useEffect(()=>{s&&T(!0)},[s]),n.useEffect(()=>{const t=[];e.forEach((e,o)=>{if(e.is_dir&&!d.File.isNoAccessSharedFolder(e)&&!e.is_in_vault_folder&&e.type!==u.FileTypes.VAULT_FOLDER)if(A){const n=A.get(o);n&&_.getFileRevisionId(n)===_.getFileRevisionId(e)||t.push(e.fq_path)}else t.push(e.fq_path)}),t.length>0&&r.getFolderRulesBatch(t).then(e=>{var t;if("folder_rule_batch_result"===(null===(t=null==e?void 0:e.get_rule_batch_result)||void 0===t?void 0:t[".tag"])){const t=null==e?void 0:e.get_rule_batch_result;if(t.folder_rule_results){const e=f.FlowsMap(t.folder_rule_results.map(e=>{var t,o,n,a;if(!e.err&&(null===(t=e.folder_rule_set)||void 0===t?void 0:t.rules)){const t=null===(o=e.folder_rule_set)||void 0===o?void 0:o.rules;if(t.length>0){const o=null===(a=null===(n=t[0].action)||void 0===n?void 0:n.action)||void 0===a?void 0:a[".tag"],s=o?m.APIV2_TAG_TO_RULE_TYPE[o]:c.FlowsRuleType.None;return[e.fq_path,s]}}return[e.fq_path,c.FlowsRuleType.None]}));M(e)}}})},[e]),n.useEffect(()=>{"/"!==a&&""!==a&&r.getFolderRules(a).then(e=>{var t,o,n,s;if("folder_rule_set"===(null===(t=null==e?void 0:e.get_rule_result)||void 0===t?void 0:t[".tag"])){const t=null===(o=e.get_rule_result)||void 0===o?void 0:o.rules;if(t&&t.length>0){const e=null===(s=null===(n=t[0].action)||void 0===n?void 0:n.action)||void 0===s?void 0:s[".tag"],o=e?m.APIV2_TAG_TO_RULE_TYPE[e]:c.FlowsRuleType.None;M(f.FlowsMap({[a]:o}))}}},e=>{})},[a]),n.useEffect(()=>(S&&g.FlowsBoltClient.subscribe(e=>{e.forEach(e=>{null==e||!e.action_type||e.status&&"success"!==e.status||(p.UserSurvey.addAttribute("flows_last_action_type",e.action_type),p.UserSurvey.trackEvent("flows_automation_success","browse")),g.isCompleteFlowsBoltPayload(e)&&b(e)})}),()=>g.FlowsBoltClient.unsubscribe()),[S,b]),n.useEffect(()=>{y.getStoreForAutomations(),i("OFF")},[]),null},t.FlowsRootComponent.displayName="FlowsRootComponent";const T=s.connect((e,t)=>({unsortedFiles:a.unsortedFiles(e),flowsRule:a.flowsFolderRule(e,t.path)}),S);t.FlowsRoot=T(t.FlowsRootComponent)})),define("modules/clean/react/flows/components/modals/automated_adoption_modal",["require","exports","tslib","react","dig-components/modal","dig-components/buttons","dig-components/typography","modules/clean/react/image","modules/core/i18n","modules/clean/react/browse/action_logger","modules/clean/web_user_action_events","modules/clean/react/flows/utils/modal_utils"],(function(e,t,o,n,a,s,i,r,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutomatedAdoptionModal=void 0,n=o.__importStar(n),t.AutomatedAdoptionModal=({modalName:e,userId:t,source:o,fileNsId:l})=>{const{closeButton:f,title:g,automationSteps:p,imageUrl1x:_,imageUrl2x:v}=m(e),[A,y]=n.useState(!0),S=n.useRef(u.generateModalSessionId()),T=(new Date).getTime().toString();n.default.useEffect(()=>{A&&b(d.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_MODAL_OPEN)},[A]);const b=(e,n)=>{c.logAutoFolderEducationModal({user_id:t,action_source:"adoption",event_name:e,file_nsid:l,source:o,modal_session_id:S.current,open_ts:T,close_ts:n})},M=()=>{b(d.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_MODAL_CLOSE,(new Date).getTime().toString()),y(!1)};return n.default.createElement(a.Modal,{open:A,width:600,onRequestClose:M},n.default.createElement(a.Modal.Body,{style:{padding:"0px"}},n.default.createElement("div",{className:"adoption-modal-image",style:{background:"#F7F5F2",display:"flex",alignItems:"center",justifyContent:"center",height:"338px"}},n.default.createElement(r.Image,{width:328,src:_,srcSet:v})),n.default.createElement("div",{className:"adoption-modal-text",style:{padding:"24px"}},n.default.createElement(i.Title,null,g),n.default.createElement(i.Text,null,p))),n.default.createElement(a.Modal.Footer,null,n.default.createElement(s.Button,{variant:"primary",onClick:M},f)))},t.AutomatedAdoptionModal.displayName="AutomatedAdoptionModal";const m=e=>{const t={closeButton:l.intl.formatMessage({id:"PomlfA",defaultMessage:"Got it"})};switch(e){case"addAutomation":return Object.assign(Object.assign({},t),{title:l.intl.formatMessage({id:"vm4jhB",defaultMessage:"To add an automation to a folder"}),automationSteps:l.intl.formatMessage({id:"QqxD05",defaultMessage:"<ol><li>Find the folder you want to automate </li> <li> Click “...” (ellipsis) </li> <li> Select <b>Add automation</b></li> </ol>"},{ol:e=>n.default.createElement("ol",{style:{paddingLeft:"1.5em"}},e),li:e=>n.default.createElement("li",null,e),b:e=>n.default.createElement("b",null,e)}),imageUrl1x:"https://assets.dropbox.com/prompt/en/workflow-automation/add_automated_folder@1x.png",imageUrl2x:"https://assets.dropbox.com/prompt/en/workflow-automation/add_automated_folder@2x.png"});default:return Object.assign(Object.assign({},t),{title:l.intl.formatMessage({id:"JjROwT",defaultMessage:"To create a new automated folder"}),automationSteps:l.intl.formatMessage({id:"lqFmMv",defaultMessage:"<ol><li> Click <b>Create</b> </li> <li> Click <b>Automated Folder</b> </li> </ol>"},{ol:e=>n.default.createElement("ol",{style:{paddingLeft:"1.5em"}},e),li:e=>n.default.createElement("li",null,e),b:e=>n.default.createElement("b",null,e)}),imageUrl1x:"https://assets.dropbox.com/prompt/en/workflow-automation/create_automated_folder@1x.png",imageUrl2x:"https://assets.dropbox.com/prompt/en/workflow-automation/create_automated_folder@2x.png"})}}})),define("modules/clean/react/flows/conversions/actions/convert_image_format",["require","exports","tslib","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src","modules/clean/react/flows/constants","modules/clean/react/flows/conversions/adoption_utils"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertImageFormatActions=void 0;const c={jpg:r.SUPPORTED_IMAGE_INPUT_EXTENSIONS.filter(e=>"jpg"!==e&&"jpeg"!==e),png:r.SUPPORTED_IMAGE_INPUT_EXTENSIONS.filter(e=>"png"!==e)};t.ConvertImageFormatActions=Object.entries(c).map(([e,t])=>({actionText:e.toUpperCase(),actionIcon:i.ImageLine,selector:s.singleFileWithExtensionSelector(t),convert:(t,i,{shareToken:r,isCurrentFolderEligibleForAutomation:c,isSubfolderEligibleForAutomation:d,source:u})=>{let m;return s.isAutomatedAdoptionV2Enabled(i)?m=t=>n.getM1AdoptionSnackbarProps({user:i,conversionType:"image-format",folderRuleAction:"image_conversion",fileType:e,resultPath:t,isCurrentFolderEligibleForAutomation:c,isSubfolderEligibleForAutomation:d,source:u}):s.isAutomatedAdoptionM2Enabled(i)&&(m=o=>l.getM2AdoptionSnackbarProps({user:i,conversionType:"image-format",folderRuleAction:"image_conversion",fileType:e,resultPath:o,source:u,nsId:t[0].ns_id})),n.convertFileAndShowSnackbar({file:t[0],user:i,shareToken:r,conversionType:"image-format",folderRuleAction:"image_conversion",loggingFunctions:s.getConversionLoggingFunctions("image-format"),getStrings:t=>s.getDefaultConversionStrings(e.toUpperCase(),t),conversionFn:(t,n,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){return(yield a.convertImageFormat(n.id,s.getFileIdentifier(t,i),e)).path})),getAdoptionSnackbarProps:m})}}))})),define("modules/clean/react/flows/conversions/actions/convert_doc_to_image",["require","exports","tslib","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src","modules/clean/react/flows/constants","modules/clean/react/flows/conversions/adoption_utils"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertDocToImageActions=void 0;t.ConvertDocToImageActions=r.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS.map(e=>({actionText:e.toUpperCase(),actionIcon:i.ImageLine,selector:s.singleFileWithExtensionSelector(r.SUPPORTED_DOC_INPUT_EXTENSIONS),convert:(t,i,{shareToken:r,isCurrentFolderEligibleForAutomation:c,isSubfolderEligibleForAutomation:d,source:u})=>{let m;return s.isAutomatedAdoptionV2Enabled(i)?m=t=>n.getM1AdoptionSnackbarProps({user:i,conversionType:"doc-to-image",folderRuleAction:"image_conversion",fileType:e,resultPath:t,isCurrentFolderEligibleForAutomation:c,isSubfolderEligibleForAutomation:d,source:u}):s.isAutomatedAdoptionM2Enabled(i)&&(m=o=>l.getM2AdoptionSnackbarProps({user:i,conversionType:"doc-to-image",folderRuleAction:"image_conversion",fileType:e,resultPath:o,source:u,nsId:t[0].ns_id})),n.convertFileAndShowSnackbar({file:t[0],user:i,shareToken:r,conversionType:"doc-to-image",folderRuleAction:"image_conversion",loggingFunctions:s.getConversionLoggingFunctions("doc-to-image"),getStrings:t=>s.getDefaultConversionStrings(e.toUpperCase(),t),conversionFn:(t,n,i)=>o.__awaiter(void 0,void 0,void 0,(function*(){return(yield a.convertDocToImage(n.id,s.getFileIdentifier(t,i),e)).path})),getAdoptionSnackbarProps:m})}}))})),define("modules/clean/react/flows/conversions/actions/convert_to_pdf",["require","exports","tslib","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src","modules/clean/react/flows/conversions/adoption_utils","modules/clean/react/flows/constants"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canConvertToPdfExcludingImages=t.ConvertToPdfAction=void 0;t.ConvertToPdfAction={actionText:"PDF",actionIcon:i.FileLine,selector:s.singleFileWithExtensionSelector(l.SUPPORTED_PDF_EXTENSIONS),convert:(e,t,{shareToken:i,isCurrentFolderEligibleForAutomation:l,isSubfolderEligibleForAutomation:c,source:d})=>{let u;return s.isAutomatedAdoptionEnabled(t)||s.isAutomatedAdoptionV2Enabled(t)?u=e=>n.getM1AdoptionSnackbarProps({user:t,conversionType:"pdf",folderRuleAction:"pdf_conversion",fileType:"PDF",resultPath:e,isCurrentFolderEligibleForAutomation:l,isSubfolderEligibleForAutomation:c,source:d}):s.isAutomatedAdoptionM2Enabled(t)&&(u=o=>r.getM2AdoptionSnackbarProps({user:t,conversionType:"pdf",folderRuleAction:"pdf_conversion",fileType:"PDF",resultPath:o,source:d,nsId:e[0].ns_id})),n.convertFileAndShowSnackbar({file:e[0],user:t,shareToken:i,conversionType:"pdf",folderRuleAction:"pdf_conversion",loggingFunctions:s.getConversionLoggingFunctions("pdf"),getStrings:e=>s.getDefaultConversionStrings("PDF",e),conversionFn:(e,t,n)=>o.__awaiter(void 0,void 0,void 0,(function*(){return(yield a.convertToPdf(t.id,s.getFileIdentifier(e,n))).path})),getAdoptionSnackbarProps:u,source:d})}},t.canConvertToPdfExcludingImages=e=>s.singleFileWithExtensionSelector(l.DOC_TO_PDF_EXTENSIONS)([e])})),define("modules/clean/react/flows/conversions/actions/unzip",["require","exports","tslib","modules/core/i18n","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","modules/clean/react/flows/conversions/convert","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/models","modules/clean/react/app_actions/telemetry_client","dig-components/icons/src","dig-components/icons/src","modules/clean/react/flows/conversions/api","modules/clean/react/flows/constants","modules/clean/react/flows/conversions/adoption_utils"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnzipAdoptionSnackbarProps=t.UnzipAction=void 0;t.UnzipAction={actionText:n.intl.formatMessage({id:"u1R/iY",defaultMessage:"Extract all"}),actionIcon:f.ZipLine,selector:i.singleFileWithExtensionSelector(_.SUPPORTED_UNZIP_EXTENSIONS),convert:(e,t,{shareToken:n,isCurrentFolderEligibleForAutomation:r,isSubfolderEligibleForAutomation:l,source:c})=>{let d=e=>T({user:t,conversionType:"unzip",folderRuleAction:"unzip",resultPath:e,isCurrentFolderEligibleForAutomation:r,isSubfolderEligibleForAutomation:l,source:c});return i.isAutomatedAdoptionM2Enabled(t)&&(d=o=>v.getM2AdoptionSnackbarProps({user:t,conversionType:"unzip",folderRuleAction:"unzip",resultPath:o,source:c,nsId:e[0].ns_id})),a.convertFileAndShowSnackbar({file:e[0],user:t,shareToken:n,loggingFunctions:y,conversionType:"unzip",folderRuleAction:"unzip",getStrings:e=>S(e),conversionFn:(e,t,n)=>o.__awaiter(void 0,void 0,void 0,(function*(){return(yield s.unzip(t.id,i.getFileIdentifier(e,n))).path})),getAdoptionSnackbarProps:d,source:c})}};const A=()=>({previewSession:u.FilePreviewSession.currentSession,browseSession:m.createTelemetryClient({component:"decompress_action"}).session()}),y={logConvert:()=>{const{previewSession:e,browseSession:t}=A();e?d.filePreviewEventEmitter.emit(c.EventType.DecompressInitiated,e):t.event(c.EventType.DecompressInitiated)},logConvertRetry:()=>{const{previewSession:e,browseSession:t}=A();e?l.logUserAction(c.UserAction.DecompressRetry,c.UserActionContext.Snackbar):t.event(c.UserAction.DecompressRetry,{context:c.UserActionContext.Snackbar})},logConvertOpen:()=>{const{previewSession:e,browseSession:t}=A();e?l.logUserAction(c.UserAction.GoToFolder,c.UserActionContext.Snackbar):t.event(c.UserAction.GoToFolder,{context:c.UserActionContext.Snackbar})},logConvertClose:()=>{const{previewSession:e,browseSession:t}=A();e?l.logUserAction(c.UserAction.DecompressCloseSnackbar,c.UserActionContext.Snackbar):t.event(c.UserAction.DecompressCloseSnackbar,{context:c.UserActionContext.Snackbar})}},S=e=>{const t=n.intl.formatMessage({id:"gJnC96",defaultMessage:"Couldn't extract files"}),o=i.getSuccessString(e,(e,t)=>n.intl.formatMessage({id:"Hz2NSj",defaultMessage:"Files extracted to {folderName} in {parentFolderName} folder"},{folderName:e,parentFolderName:t}),e=>n.intl.formatMessage({id:"TRohxO",defaultMessage:"Files extracted to {folderName} in your main Dropbox folder"},{folderName:e}));return{saving:n.intl.formatMessage({id:"Jk+n/I",defaultMessage:"Extracting files..."}),success:o,successAutomatedAdoption:o,failGeneric:t,failRetryable:t,failOverQuota:n.intl.formatMessage({id:"atcchQ",defaultMessage:"Couldn't extract because your Dropbox account is out of space"}),failTooLarge:n.intl.formatMessage({id:"Hgd1fQ",defaultMessage:"Couldn't extract files. Can only handle files up to {fileSize} MB"},{fileSize:512}),failCorrupt:n.intl.formatMessage({id:"00qMd1",defaultMessage:"Couldn't extract because the file is damaged"}),failPassword:n.intl.formatMessage({id:"xbgxEF",defaultMessage:"Couldn't extract because the file is password protected"}),failPasswordLink:n.intl.formatMessage({id:"UvS9P9",defaultMessage:"Couldn't extract because the file was shared using a password-protected link"})}};function T({user:e,conversionType:t,folderRuleAction:o,resultPath:a,isCurrentFolderEligibleForAutomation:s,isSubfolderEligibleForAutomation:l,source:c}){const d={user:e,conversionType:t,folderRuleAction:o,isCurrentFolderEligibleForAutomation:s,isSubfolderEligibleForAutomation:l,source:c};return i.isAutomatedAdoptionEnabled(e)||i.isAutomatedAdoptionV2Enabled(e)?{actions:[{icon:g.AddFolderLine,name:"create_automated_folder",text:n.intl.formatMessage({id:"AS674M",defaultMessage:"Create automated folder"}),onClick:r.createAutomatedFolderHandler},{icon:g.FolderLine,name:"automated_existing_folder",text:n.intl.formatMessage({id:"n9iAyA",defaultMessage:"Automate existing folder"}),onClick:r.automateExistingFolderHandler},{name:"maybe_later",text:n.intl.formatMessage({id:"/5Lzsh",defaultMessage:"Maybe later"}),onClick:r.remindMeLaterHandler}],helperText:n.intl.formatMessage({id:"tMuSn1",defaultMessage:"Want to unzip files automatically?"}),clickHandlerArgs:{userId:e.id,filePath:a||"",conversionArg:d},onCloseClick:()=>{p.updateAdoptionStatus(d.conversionType,o,e.id)}}:void 0}t.getUnzipAdoptionSnackbarProps=T})),define("modules/clean/react/flows/conversions/api",["require","exports","tslib","api_v2/user_client","modules/clean/react/flows/conversions/utils","modules/clean/downloads"],(function(e,t,o,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateAdoptionStatus=t.checkAdoptionStatus=t.convertVideoToGif=t.mediaRemux=t.archive=t.convertDocToImage=t.convertImageFormat=t.unzip=t.convertToPdf=void 0,t.convertToPdf=function(e,t,o){const a={file:t,dest_path:o};return(new n.UserApiV2Client).ns("flows").rpc("convert_to_pdf",a,{subjectUserId:e})},t.unzip=function(e,t,o){const a={file:t,dest_path:o};return(new n.UserApiV2Client).ns("flows").rpc("unzip",a,{subjectUserId:e})},t.convertImageFormat=function(e,t,o,a){const s={file:t,format:o,dest_path:a};return(new n.UserApiV2Client).ns("flows").rpc("convert_image_format",s,{subjectUserId:e})},t.convertDocToImage=function(e,t,o,a){const s={file:t,format:o,dest_path:a};return(new n.UserApiV2Client).ns("flows").rpc("convert_doc_to_image",s,{subjectUserId:e})},t.archive=function(e,t,i,r,l){return o.__awaiter(this,void 0,void 0,(function*(){if(r&&r.blockHash){const o=r.currentFQPath,c=t.map(e=>e.fq_path),d=yield s.getZipDownloadUrl({block_hash:r.blockHash,fq_paths:c,parent_path:o,subjectUserId:e,flat_mode:!1});if(d.isError)return s.showGetZipUrlErrorSnackbar(d.error),Promise.resolve({path:void 0});{const o=t.map(e=>a.getFileIdentifier(e));i=i||"archive.zip";const s={file:o,dest_path:l,zip_url:d.result.url,archive_name:i};return(new n.UserApiV2Client).ns("flows").rpc("archive",s,{subjectUserId:e})}}return Promise.resolve({path:void 0})}))},t.mediaRemux=function(e,t,o,a){const s={file:t,dest_path:a,container:o};return(new n.UserApiV2Client).ns("flows").rpc("media_remux",s,{subjectUserId:e})},t.convertVideoToGif=function(e,t,o,a,s,i){const r={file:t,dest_path:i,start_offset:o,duration:a,resolution:s};return(new n.UserApiV2Client).ns("flows").rpc("convert_video_to_gif",r,{subjectUserId:e})},t.checkAdoptionStatus=function(e,t,o){const a={check_adoption_status_arg:{".tag":"check_automation_adoption_status_arg",conversion_type:e,folder_rule_action:t}};return(new n.UserApiV2Client).ns("flows").rpc("check_adoption_status",a,{subjectUserId:o})},t.updateAdoptionStatus=function(e,t,o){const a={update_adoption_status_arg:{".tag":"update_automated_adoption_status_arg",conversion_type:e,folder_rule_action:t}};return(new n.UserApiV2Client).ns("flows").rpc("update_adoption_status",a,{subjectUserId:o})}})),define("modules/clean/react/flows/conversions/conversion_actions",["require","exports","modules/clean/react/flows/conversions/actions/convert_to_pdf","modules/clean/react/flows/conversions/actions/convert_image_format","modules/clean/react/flows/conversions/actions/convert_doc_to_image","modules/clean/react/flows/conversions/actions/media_remux","modules/clean/react/flows/conversions/actions/convert_video_to_gif"],(function(e,t,o,n,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConversionActionsForFiles=void 0;const r=[o.ConvertToPdfAction,...n.ConvertImageFormatActions,...a.ConvertDocToImageActions,...s.MediaRemuxActions,i.ConvertVideoToGifAction];t.getConversionActionsForFiles=(e,t)=>r.filter(o=>o.selector(e,t))})),define("modules/clean/react/flows/conversions/convert",["require","exports","tslib","modules/core/i18n","react","modules/clean/react/snackbar","modules/clean/browse_uri_interface","modules/core/uri","modules/core/browser","modules/clean/react/flows/conversions/utils","modules/clean/react/flows/conversions/api","dig-components/icons/src","modules/clean/react/flows/components/modals/automated_adoption_modal","modules/clean/react/components/modal","react-redux","modules/clean/react/browse/data/store","react-intl","modules/clean/react/flows/redux/store","modules/clean/react/flows/redux/actions","modules/clean/react/browse/data/action_creators/index","modules/clean/react/browse/action_logger","modules/clean/web_user_action_events"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_,v,A,y,S,T){"use strict";function b(e){var t;return o.__awaiter(this,void 0,void 0,(function*(){const{file:o,user:n,shareToken:a,conversionFn:s,loggingFunctions:i,conversionType:r,folderRuleAction:l,getAdoptionSnackbarProps:u,source:m}=e;i.logConvert(),M(Object.assign(Object.assign({},e),{state:"saving"}));try{const i=yield s(o,n,a);if(i){const a=u?u(i):void 0;let s=!1;if(a&&l){const e=yield d.checkAdoptionStatus(r,l,n.id);s="show_automation_adoption_tooltips"===(null===(t=e.check_automation_adoption_status_result)||void 0===t?void 0:t[".tag"])&&e.check_automation_adoption_status_result.show_automation_adoption_tooltips.valueOf()}s?(S.logAutoFolderAdoptionSnackbar({user_id:n.id,action_source:"adoption",event_name:T.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_SHOW,file_nsid:o.ns_id,source:m,trigger_rule:l}),M(Object.assign(Object.assign({},e),{state:"successAutomatedAdoption",resultPath:i,adoptionSnackbarProps:a}))):M(Object.assign(Object.assign({},e),{state:"success",resultPath:i}))}else M(Object.assign(Object.assign({},e),{state:"failGeneric"}))}catch(t){const o=c.getConversionStateFromException(t);M(Object.assign(Object.assign({},e),{state:o}))}}))}function M(e){const{user:t,getStrings:o,state:i,resultPath:r,loggingFunctions:l,adoptionSnackbarProps:c}=e,d=Object.assign(Object.assign({},o(r||"")),{open:n.intl.formatMessage({id:"+JIEsO",defaultMessage:"Open"}),close:n.intl.formatMessage({id:"In8b64",defaultMessage:"Close"}),retry:n.intl.formatMessage({id:"Y/tkCj",defaultMessage:"Try again"})}),u={closeButtonText:d.close,onCloseClick:l.logConvertClose},m={saving:{variant:"sync",syncProgressLoop:!0},failGeneric:Object.assign({variant:"fail"},u),failOverQuota:Object.assign({variant:"fail"},u),failTooLarge:Object.assign({variant:"fail"},u),failCorrupt:Object.assign({variant:"fail"},u),failPassword:Object.assign({variant:"fail"},u),failPasswordLink:Object.assign({variant:"fail"},u),failRetryable:Object.assign({variant:"fail",onActionClick:()=>{l.logConvertRetry(),b(e)}},u),successAutomatedAdoption:Object.assign({variant:"complete",onActionClick:()=>E(t,r,l),richSnackbarProps:c},u),success:Object.assign({variant:"complete",actionButtonText:d.open,onActionClick:()=>E(t,r,l)},u)};s.Snackbar.update(a.default.createElement(s.Snackbar,Object.assign({id:"flows-conversion-snackbar",title:d[i]},m[i])))}function E(e,t,o){o.logConvertOpen();const n=t,a=i.get_browse_root(e)+r.URI.encode_parts(n);l.replace_location(a)}function w(e,t,o,s){f.Modal.showInstance(a.default.createElement(g.Provider,{store:p.getStoreForBrowse()},a.default.createElement(_.RawIntlProvider,{value:n.intl},a.default.createElement(m.AutomatedAdoptionModal,{modalName:e,userId:t,source:o,fileNsId:s}))))}Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLaunchAutomatedAdoptionModal=t.remindMeLaterHandler=t.automateExistingFolderHandler=t.createAutomatedFolderHandler=t.getM1AdoptionSnackbarProps=t.convertFileAndShowSnackbar=void 0,a=o.__importDefault(a),l=o.__importStar(l),y=o.__importStar(y),t.convertFileAndShowSnackbar=b,t.getM1AdoptionSnackbarProps=function({user:e,conversionType:o,folderRuleAction:a,fileType:s,resultPath:i,isCurrentFolderEligibleForAutomation:r,isSubfolderEligibleForAutomation:l,source:c}){const m={user:e,conversionType:o,folderRuleAction:a,isCurrentFolderEligibleForAutomation:r,isSubfolderEligibleForAutomation:l,source:c};return{actions:[{icon:u.AddFolderLine,name:"create_automated_folder",text:n.intl.formatMessage({id:"AS674M",defaultMessage:"Create automated folder"}),onClick:t.createAutomatedFolderHandler},{icon:u.FolderLine,name:"automated_existing_folder",text:n.intl.formatMessage({id:"n9iAyA",defaultMessage:"Automate existing folder"}),onClick:t.automateExistingFolderHandler},{name:"maybe_later",text:n.intl.formatMessage({id:"/5Lzsh",defaultMessage:"Maybe later"}),onClick:t.remindMeLaterHandler}],helperText:n.intl.formatMessage({id:"KmBuBt",defaultMessage:"Want to save files as {fileType}s automatically?"},{fileType:s.toUpperCase()}),clickHandlerArgs:{userId:e.id,filePath:i||"",conversionArg:m},onCloseClick:()=>{d.updateAdoptionStatus(m.conversionType,a,e.id)}}},t.createAutomatedFolderHandler=e=>o.__awaiter(void 0,void 0,void 0,(function*(){const{conversionArg:t,userId:o,ns_id:n}=e;if(t){const{conversionType:e,folderRuleAction:a,source:s,isSubfolderEligibleForAutomation:i}=t;if(yield d.updateAdoptionStatus(e,a,o),S.logAutoFolderAdoptionSnackbar({user_id:o,action_source:"adoption",event_name:T.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_CLICK,file_nsid:n,trigger_rule:a,snackbar_click_option:"create",source:s}),i){const e=p.getStoreForBrowse(),t=v.getStoreForAutomations();e.dispatch(y.clearSelection({skipLogging:!0})),e.dispatch(y.setCreateMenuOpenRequest({autoFocus:!1})),t.dispatch(A.setAutoFolderOnboarding({conversionType:a,step:1,totalSteps:2,variant:"create"}))}else w("createAutomation",o,s,n)}s.Snackbar.close("flows-conversion-snackbar")})),t.automateExistingFolderHandler=e=>o.__awaiter(void 0,void 0,void 0,(function*(){const{conversionArg:t,userId:o,ns_id:n}=e;if(t){const{conversionType:e,folderRuleAction:a,source:s,isCurrentFolderEligibleForAutomation:i}=t;if(yield d.updateAdoptionStatus(e,a,o),S.logAutoFolderAdoptionSnackbar({user_id:o,action_source:"adoption",event_name:T.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_CLICK,file_nsid:n,trigger_rule:a,snackbar_click_option:"add",source:s}),i){const e=p.getStoreForBrowse();e.dispatch(y.clearSelection({skipLogging:!0})),e.dispatch(y.setOverflowMenuOpenRequest({autoFocus:!1})),v.getStoreForAutomations().dispatch(A.setAutoFolderOnboarding({conversionType:a,step:1,totalSteps:2,variant:"add"}))}else w("addAutomation",o,s,n)}s.Snackbar.close("flows-conversion-snackbar")})),t.remindMeLaterHandler=e=>{const{conversionArg:t,userId:o,ns_id:n}=e;if(t){const{folderRuleAction:e}=t;S.logAutoFolderAdoptionSnackbar({user_id:o,action_source:"adoption",event_name:T.WebUserActionLogEvent.AUTOMATED_FOLDER_ADOPTION_SNACKBAR_CLICK,file_nsid:n,trigger_rule:e,snackbar_click_option:"later",source:t.source})}s.Snackbar.close("flows-conversion-snackbar")},t.asyncLaunchAutomatedAdoptionModal=w})),define("modules/clean/react/flows/conversions/utils",["require","exports","tslib","modules/core/i18n","modules/clean/file_store/utils","spectrum-sharing/utils/sharing_constants","modules/clean/file_store/utils","modules/clean/filepath/filepath","modules/clean/hql/index","dropbox/proto/hql_events/flows/manual_file_conversion","dropbox/proto/hql_events/extensions","dropbox/proto/hql_events/taxonomy","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/models","modules/clean/react/app_actions/telemetry_client","modules/constants/file_viewer","modules/clean/react/flows/constants"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommonStrings=t.getConversionLoggingFunctions=t.getDefaultConversionStrings=t.getSuccessString=t.singleFileWithExtensionSelector=t.canConvertFile=t.getConversionStateFromException=t.isAutomatedAdoptionM2Enabled=t.isAutomatedAdoptionV2Enabled=t.isAutomatedAdoptionEnabled=t.getFileIdentifier=void 0,r=o.__importStar(r),t.getFileIdentifier=function(e,t){return a.isBrowseFile(e)||(null==t?void 0:t.linkType)===s.SharedLinkType.Content?{identifier:{file_id:e.file_id,".tag":"file_id"}}:{identifier:{shared_link_url:e.href?e.href:"",".tag":"shared_link_url"}}};const A={generic_error:"failGeneric",permission_error:"failGeneric",unsupported_error:"failGeneric",filesystem_error:"failGeneric",filesystem_transient_error:"failRetryable",over_quota_error:"failOverQuota",riviera_permanent_error:"failGeneric",riviera_retryable_error:"failRetryable",riviera_too_large_error:"failTooLarge",riviera_source_corrupt_error:"failCorrupt",riviera_password_protected_error:"failPassword",password_protected_shared_link_error:"failPasswordLink",riviera_invalid_request_error:"failGeneric",other:"failGeneric"};function y(e,t,o){const n=r.filename(e),a=r.parentDirName(e);return a?t(n,a):o(n)}t.isAutomatedAdoptionEnabled=e=>!!(e&&_.AUTOMATED_ADOPTION_BY_USER_ID&&_.AUTOMATED_ADOPTION_BY_USER_ID[e.id]),t.isAutomatedAdoptionV2Enabled=e=>!!(e&&_.AUTOMATED_ADOPTION_V2_BY_USER_ID&&_.AUTOMATED_ADOPTION_V2_BY_USER_ID[e.id]),t.isAutomatedAdoptionM2Enabled=e=>!!(e&&_.AUTOMATED_ADOPTION_VARIANT_BY_USER_ID&&[v.AUTOMATED_ADOPTION_VARIANTS.M2_A,v.AUTOMATED_ADOPTION_VARIANTS.M2_B,v.AUTOMATED_ADOPTION_VARIANTS.M2_C,v.AUTOMATED_ADOPTION_VARIANTS.M2_D].includes(_.AUTOMATED_ADOPTION_VARIANT_BY_USER_ID[e.id])),t.getConversionStateFromException=function(e){const t=null==e?void 0:e.error;return(function(e){return e&&e[".tag"]&&e[".tag"]in A})(t)?A[t[".tag"]]:"failGeneric"},t.canConvertFile=function(e,t){return a.isBrowseFile(e)||t&&t.canDownloadRoles.length>0},t.singleFileWithExtensionSelector=function(e){return t=>{if(1!==t.length||t[0].is_dir)return!1;const o=i.getExtension(t[0]);return e.includes(o)}},t.getSuccessString=y,t.getDefaultConversionStrings=function(e,t){const o=n.intl.formatMessage({id:"WthXj+",defaultMessage:"Couldn't save as {fileType}"},{fileType:e}),a=y(t,(e,t)=>n.intl.formatMessage({id:"HwR61n",defaultMessage:"{fileName} saved to {dirName} folder"},{fileName:e,dirName:t}),e=>n.intl.formatMessage({id:"ukwwi2",defaultMessage:"{fileName} saved to your main Dropbox folder"},{fileName:e}));return{saving:n.intl.formatMessage({id:"Bdb4J5",defaultMessage:"Saving {fileType}..."},{fileType:e}),success:a,successAutomatedAdoption:a,failGeneric:o,failRetryable:o,failOverQuota:n.intl.formatMessage({id:"QP2WHb",defaultMessage:"Couldn't save as {fileType} because your Dropbox account is out of space"},{fileType:e}),failTooLarge:n.intl.formatMessage({id:"cmnQAC",defaultMessage:"Couldn't save as {fileType} because the file is too large"},{fileType:e}),failCorrupt:n.intl.formatMessage({id:"INKSmo",defaultMessage:"Couldn't save as {fileType} because the file is damaged"},{fileType:e}),failPassword:n.intl.formatMessage({id:"dnnNdt",defaultMessage:"Couldn't save as {fileType} because the file is password protected"},{fileType:e}),failPasswordLink:n.intl.formatMessage({id:"qzTamN",defaultMessage:"Couldn't save as {fileType} because the file was shared using a password-protected link"},{fileType:e})}};const S=new Map([["pdf","convert_to_pdf"],["image-format","convert_image_format"],["doc-to-image","convert_doc_to_image"]]);t.getConversionLoggingFunctions=function(e){const t=u.hql_events.TaxonomyAppSurface.AppSurface,o=u.hql_events.TaxonomyActionSurface.ActionSurface,n=()=>({previewSession:g.FilePreviewSession.currentSession,browseSession:p.createTelemetryClient({component:"file_conversion"}).session()}),a=S.has(e)?S.get(e):e;return{logConvert:()=>{l.logEvent(c.hql_events.SelectConversion.create({conversionType:a,hqlMetadata:d.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));const{previewSession:e,browseSession:s}=n();e?m.logUserAction(f.UserAction.FileConversionInitiated,f.UserActionContext.Snackbar,{conversion_type:a}):s.event(f.UserAction.FileConversionInitiated,{conversion_type:a})},logConvertRetry:()=>{l.logEvent(c.hql_events.SelectConversionRetry.create({conversionType:a,hqlMetadata:d.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));const{previewSession:e,browseSession:s}=n();e?m.logUserAction(f.UserAction.FileConversionRetry,f.UserActionContext.Snackbar,{conversion_type:a}):s.event(f.UserAction.FileConversionRetry,{context:f.UserActionContext.Snackbar,conversion_type:a})},logConvertClose:()=>{l.logEvent(c.hql_events.SelectConversionCloseClick.create({conversionType:a,hqlMetadata:d.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));const{previewSession:e,browseSession:s}=n();e?m.logUserAction(f.UserAction.FileConversionCloseSnackbar,f.UserActionContext.Snackbar,{conversion_type:a}):s.event(f.UserAction.FileConversionCloseSnackbar,{context:f.UserActionContext.Snackbar,conversion_type:a})},logConvertOpen:()=>{l.logEvent(c.hql_events.SelectConversionOpenClick.create({conversionType:a,hqlMetadata:d.hql_events.HQLMetadata.create({appSurface:t.WEB,actionSurface:o.BROWSER_WINDOW})}));const{previewSession:e,browseSession:s}=n();e?m.logUserAction(f.UserAction.GoToFolder,f.UserActionContext.Snackbar,{conversion_type:a}):s.event(f.UserAction.GoToFolder,{context:f.UserActionContext.Snackbar,conversion_type:a})}}},t.getCommonStrings=function(){return{open:n.intl.formatMessage({id:"+JIEsO",defaultMessage:"Open"}),close:n.intl.formatMessage({id:"In8b64",defaultMessage:"Close"}),retry:n.intl.formatMessage({id:"Y/tkCj",defaultMessage:"Try again"})}}})),define("dropbox/proto/hql_events/flows/manual_file_conversion",["require","exports","tslib","protobufjs/minimal","dropbox/proto/hql_events/extensions"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.hql_events=void 0;const a=(n=o.__importStar(n)).Reader,s=n.Writer,i=(n.util,n.roots.default||(n.roots.default={}));var r;t.default=i,t.hql_events=i.hql_events=((r=i.hql_events||{}).SelectConversion=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));let o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversion;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversion"},e})(r.SelectConversion||{}),r.SelectConversionRetry=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));let o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversionRetry;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversionRetry"},e})(r.SelectConversionRetry||{}),r.SelectConversionCloseClick=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));let o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversionCloseClick;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversionCloseClick"},e})(r.SelectConversionCloseClick||{}),r.SelectConversionOpenClick=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.conversionType="",e.prototype.hqlMetadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=s.create()),null!=e.conversionType&&Object.hasOwnProperty.call(e,"conversionType")&&t.uint32(10).string(e.conversionType),null!=e.hqlMetadata&&Object.hasOwnProperty.call(e,"hqlMetadata")&&i.hql_events.HQLMetadata.encode(e.hqlMetadata,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof a||(e=a.create(e));let o=void 0===t?e.len:e.pos+t,n=new i.hql_events.SelectConversionOpenClick;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.conversionType=e.string();break;case 2:n.hqlMetadata=i.hql_events.HQLMetadata.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/hql_events.SelectConversionOpenClick"},e})(r.SelectConversionOpenClick||{}),r)})),define("modules/clean/react/file_viewer/file_conversion/convert_to_pdf_button",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/flows/conversions/actions/convert_to_pdf"],(function(e,t,o,n,a,s,i,r,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertToPdfButton=void 0,n=o.__importStar(n),t.ConvertToPdfButton=({file:e,user:t,shareToken:u})=>{const[m,f]=n.useState(!1);return n.default.createElement(a.Button,{style:{margin:"12px 25px"},variant:"opacity",size:"large",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){f(!0),l.logUserAction(c.UserAction.ConvertToPdf,c.UserActionContext.PreviewContentMain),yield d.ConvertToPdfAction.convert([e],t,{shareToken:u}),f(!1)})),disabled:m,withIconLeft:n.default.createElement(s.UIIcon,{src:i.FileLine})},r.intl.formatMessage({id:"Xlc8yC",defaultMessage:"Save as PDF"}))}})),define("modules/clean/react/file_viewer/file_conversion/save_as_button",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","modules/clean/react/flows/conversions/conversion_actions","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants"],(function(e,t,o,n,a,s,i,r,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveAsButton=void 0,n=o.__importDefault(n),t.SaveAsButton=({file:e,user:t,shareToken:o,experiments:m})=>{const f=l.getConversionActionsForFiles([e],m);return 0===f.length?null:n.default.createElement(r.Menu.Wrapper,null,({getTriggerProps:l,getContentProps:m})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(a.Button,Object.assign({className:"flows_save_as_button",style:{margin:"12px 25px"},variant:"opacity",withIconLeft:n.default.createElement(s.UIIcon,{src:i.ConvertFileLine}),withDropdownIcon:!0},l()),c.intl.formatMessage({id:"GAZsDK",defaultMessage:"Save as..."})),n.default.createElement(r.Menu.Content,Object.assign({},m()),n.default.createElement(r.Menu.Segment,null,f.map(a=>n.default.createElement(r.Menu.ActionItem,{key:a.actionText,onClick:()=>{d.logUserAction(u.UserAction.ConvertFile,u.UserActionContext.PreviewContentMain,{action:a.actionText}),a.convert([e],t,{shareToken:o,source:"preview"})}},n.default.createElement("div",{style:{display:"flex"}},n.default.createElement(s.UIIcon,{src:a.actionIcon}),a.actionText)))))))}})),define("modules/clean/react/file_viewer/file_conversion/unzip_button",["require","exports","tslib","react","dig-components/buttons","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/clean/react/flows/conversions/actions/unzip"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnzipButton=void 0,n=o.__importStar(n),t.UnzipButton=({file:e,user:t,shareToken:c})=>{const[d,u]=n.useState(!1);return n.default.createElement(a.Button,{className:"decompress-button",variant:"outline",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){u(!0),i.logUserAction(r.UserAction.DecompressFile,r.UserActionContext.PreviewContentMain),yield l.UnzipAction.convert([e],t,{shareToken:c,source:"preview"}),u(!1)})),disabled:d},s.intl.formatMessage({id:"rFpkYN",defaultMessage:"Extract all"}))}})),define("modules/clean/react/file_viewer/file_conversion/utils",["require","exports","tslib","react","modules/clean/file_store/utils","modules/constants/file_viewer","modules/clean/react/file_viewer/file_conversion/save_as_button","modules/clean/react/file_viewer/file_conversion/convert_to_pdf_button","modules/clean/react/flows/conversions/utils","modules/clean/react/flows/conversions/actions/unzip","modules/clean/react/flows/conversions/actions/convert_to_pdf","modules/clean/react/file_viewer/file_conversion/unzip_button"],(function(e,t,o,n,a,s,i,r,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConversionsForPreview=t.isManualAudioConversionEnabled=t.isManualVideoGifEnabled=t.isManualVideoRemuxingEnabled=t.isManualFileConversionEnabled=t.isManualPdfConversionEnabled=void 0,n=o.__importDefault(n),t.isManualPdfConversionEnabled=e=>!!(e&&s.MANUAL_PDF_CONVERSION_BY_USER_ID&&s.MANUAL_PDF_CONVERSION_BY_USER_ID[e.id]),t.isManualFileConversionEnabled=e=>!!(e&&s.MANUAL_FILE_CONVERSION_BY_USER_ID&&s.MANUAL_FILE_CONVERSION_BY_USER_ID[e.id]),t.isManualVideoRemuxingEnabled=e=>!!(e&&s.MANUAL_VIDEO_REMUX_BY_USER_ID&&s.MANUAL_VIDEO_REMUX_BY_USER_ID[e.id]),t.isManualVideoGifEnabled=e=>!!(e&&s.MANUAL_VIDEO_GIF_BY_USER_ID&&s.MANUAL_VIDEO_GIF_BY_USER_ID[e.id]),t.isManualAudioConversionEnabled=e=>!!(e&&s.MANUAL_AUDIO_CONVERSION_BY_USER_ID&&s.MANUAL_AUDIO_CONVERSION_BY_USER_ID[e.id]),t.getConversionsForPreview=function(e,o,s,m){if(!o||a.isArchiveFile(e)||!l.canConvertFile(e,m)||""===window.location.search||-1!==window.location.search.indexOf("xframed=1"))return null;if(c.UnzipAction.selector([e]))return n.default.createElement("div",null,n.default.createElement(u.UnzipButton,{user:o,file:e,shareToken:s}));if(t.isManualFileConversionEnabled(o)){const a={expFlowsManualVideoRemuxUi:t.isManualVideoRemuxingEnabled(o),expFlowsManualVideoGifUi:t.isManualVideoGifEnabled(o)};return n.default.createElement("div",null,n.default.createElement(i.SaveAsButton,{user:o,file:e,shareToken:s,experiments:a}))}return t.isManualPdfConversionEnabled(o)&&d.canConvertToPdfExcludingImages(e)?n.default.createElement("div",null,n.default.createElement(r.ConvertToPdfButton,{user:o,file:e,shareToken:s})):null}})),define("modules/clean/logging/hive/schemas/web-app_actions_telemetry",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppActionsTelemetryRow=void 0;t.AppActionsTelemetryRow=class{constructor(e){this.category="web-app_actions_telemetry",this.user_id=null,this.session_id=null,this.request_id=null,this.url=null,this.telemetry_session_id=e.telemetry_session_id,this.event_name=e.event_name,this.event_start_ts=e.event_start_ts,this.event_extras=e.event_extras,Object.seal(this)}}})),define("modules/clean/react/app_actions/telemetry_client",["require","exports","tslib","modules/clean/logging/telemetry","modules/clean/logging/hive/schemas/web-app_actions_telemetry"],(function(e,t,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPiiSafeExtension=t.createTelemetryClient=t.TelemetryClient=t.Session=void 0,n=o.__importStar(n);class s{constructor(e,t){this.logger=e,this.context=t,this.sessionId=s.generateRandomId()}static generateRandomId(){return Math.random().toString(36).substring(2)}static getCurrentTimestamp(){return(new Date).getTime()}event(e,t){const o=s.getCurrentTimestamp(),n=Object.assign(Object.assign({},this.context),t),i=new a.AppActionsTelemetryRow({telemetry_session_id:this.sessionId,event_name:e,event_start_ts:o,event_extras:JSON.stringify(n)});this.logger.log(i)}}t.Session=s;class i{constructor(e,t){this.logger=e,this.context=t||{}}session(e){const t=Object.assign(Object.assign({},this.context),e);return new s(this.logger,t)}}t.TelemetryClient=i;const r=new n.HiveLogger;t.createTelemetryClient=function(e){return new i(r,e)};const l=(function(e){const t={};for(const o of e)t[o]=!0;return t})(["",".doc",".docx",".pdf",".dwg",".png",".jpg",".jpeg",".tiff",".m4v",".wmv",".mpg",".pptx",".xlsx",".pages",".numbers",".key"]);t.getPiiSafeExtension=function(e){return l[e]?e:"__REDACTED__"}})),define("modules/clean/react/flows/conversions/actions/media_remux",["require","exports","tslib","modules/core/i18n","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src","modules/clean/react/flows/constants","modules/clean/react/flows/conversions/adoption_utils"],(function(e,t,o,n,a,s,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConversionStrings=t.MediaRemuxActions=void 0;const d=(e,t)=>(n,r,{shareToken:l,isCurrentFolderEligibleForAutomation:d,isSubfolderEligibleForAutomation:u,source:m})=>{let g;return t&&(i.isAutomatedAdoptionV2Enabled(r)?g=o=>a.getM1AdoptionSnackbarProps({user:r,conversionType:"media-remux",folderRuleAction:t,fileType:e,resultPath:o,isCurrentFolderEligibleForAutomation:d,isSubfolderEligibleForAutomation:u,source:m}):i.isAutomatedAdoptionM2Enabled(r)&&(g=o=>c.getM2AdoptionSnackbarProps({user:r,conversionType:"media-remux",folderRuleAction:t,fileType:e,resultPath:o,source:m,nsId:n[0].ns_id}))),a.convertFileAndShowSnackbar({file:n[0],user:r,shareToken:l,conversionType:"media-remux",folderRuleAction:t,loggingFunctions:i.getConversionLoggingFunctions("media-remux"),getStrings:t=>f(e.toUpperCase(),t),conversionFn:(t,n,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){return(yield s.mediaRemux(n.id,i.getFileIdentifier(t,a),e)).path})),getAdoptionSnackbarProps:g})},u=l.SUPPORTED_VIDEO_OUTPUT_CONTAINERS.map(e=>({actionText:e.toUpperCase(),actionIcon:r.VideoLine,selector:(t,o)=>{const n=i.singleFileWithExtensionSelector(l.SUPPORTED_VIDEO_INPUT_EXTENSIONS.filter(t=>t!==e)),a=!!o&&o.expFlowsManualVideoRemuxUi;return n(t)&&a},convert:d(e,"video_conversion")})),m=l.SUPPORTED_AUDIO_OUTPUT_CONTAINERS.map(e=>({actionText:e.toUpperCase(),actionIcon:r.AudioLine,selector:(t,o)=>{const n=i.singleFileWithExtensionSelector(l.SUPPORTED_AUDIO_INPUT_EXTENSIONS.filter(t=>t!==e)),a=!!o&&o.expFlowsAudioConversionUi;return n(t)&&!!a},convert:d(e)}));function f(e,t){const o=i.getDefaultConversionStrings(e,t);return Object.assign(Object.assign({},o),{failTooLarge:n.intl.formatMessage({id:"D67i/e",defaultMessage:"Couldn't save as {fileType} because the file is too large. The maximum file size is {maxSize} MB."},{fileType:e,maxSize:512})})}t.MediaRemuxActions=[...u,...m],t.getConversionStrings=f})),define("modules/clean/react/flows/conversions/actions/convert_video_to_gif",["require","exports","modules/clean/react/flows/conversions/utils","dig-components/icons/src","modules/clean/react/flows/conversions/modals"],(function(e,t,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConvertVideoToGifAction=void 0;const s=["mov","mp4","avi","mkv","mpeg"];t.ConvertVideoToGifAction={actionText:"GIF",actionIcon:n.VideoLine,selector:(e,t)=>{const n=o.singleFileWithExtensionSelector(s),a=!!t&&t.expFlowsManualVideoGifUi;return n(e)&&a},convert:function(e,t,{shareToken:o}){return a.asyncLaunchVideoToGifSettingsModal(e[0],t,o),Promise.resolve()}}})),define("modules/clean/react/flows/conversions/modals",["require","exports","tslib","react","modules/clean/react/components/modal","react-redux","modules/clean/react/browse/data/store","react-intl","modules/core/i18n"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLaunchVideoToGifSettingsModal=void 0,n=o.__importDefault(n),t.asyncLaunchVideoToGifSettingsModal=function(t,c,d){new Promise((t,o)=>{e(["modules/clean/react/flows/components/modals/video_to_gif_settings_modal"],t,o)}).then(o.__importStar).then(({StatefulVideoToGifSettingsModal:e})=>{a.Modal.showInstance(n.default.createElement(s.Provider,{store:i.getStoreForBrowse()},n.default.createElement(r.RawIntlProvider,{value:l.intl},n.default.createElement(e,{file:t,user:c,shareToken:d}))))})}})),define("modules/clean/react/flows/lib/api",["require","exports","api_v2/user_client","modules/clean/active_user"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undoActions=t.getBoltData=t.getFolderMetadata=t.getUserAutomations=t.getFolderRulesConfig=t.removeFolderRules=t.updateFolderRules=t.getFeedbackStatus=t.logFreeformFeedback=t.createFolder=t.getFolderRulesBatch=t.moveFile=t.setupFolderRules=t.getFolderRules=t.deleteFolderRules=void 0,t.deleteFolderRules=function(e){const t={delete_arg:{".tag":"delete_folder_rule_arg",folder_fq_path:e}};return(new o.UserApiV2Client).ns("flows").rpc("delete_rule",t,{subjectUserId:n.mustGetActiveUserId()})},t.getFolderRules=function(e){const t={get_rule_arg:{".tag":"get_folder_rule_arg",folder_fq_path:e}};return(new o.UserApiV2Client).ns("flows").rpc("get_rule",t,{subjectUserId:n.mustGetActiveUserId()})},t.setupFolderRules=function(e,t){const a={setup_rule_arg:{".tag":"setup_folder_rule_arg",folder_fq_path:e,rule_set:t}};return(new o.UserApiV2Client).ns("flows").rpc("setup_rule",a,{subjectUserId:n.mustGetActiveUserId()})},t.moveFile=function(e,t){const a={from_path:e,to_path:t};return(new o.UserApiV2Client).ns("files").rpc("move_v2",a,{subjectUserId:n.mustGetActiveUserId()})},t.getFolderRulesBatch=function(e){const t={get_rule_batch_arg:{".tag":"get_folder_rule_batch_arg",folder_fq_paths:e}};return(new o.UserApiV2Client).ns("flows").rpc("get_rule_batch",t,{subjectUserId:n.mustGetActiveUserId()})},t.createFolder=function(e){const t={path:e};return(new o.UserApiV2Client).ns("files").rpc("create_folder_v2",t,{subjectUserId:n.mustGetActiveUserId()})},t.logFreeformFeedback=function(e,t,a){const s={log_feedback_arg:{".tag":"log_freeform_feedback_arg",freeform_feedback:e,folder_fq_path:t,feedback_source:a}};return(new o.UserApiV2Client).ns("flows").rpc("log_feedback",s,{subjectUserId:n.mustGetActiveUserId()})},t.getFeedbackStatus=function(e){const t={get_feedback_status_arg:{".tag":"get_freeform_feedback_status_arg",feedback_source:e}};return(new o.UserApiV2Client).ns("flows").rpc("get_feedback_status",t,{subjectUserId:n.mustGetActiveUserId()})},t.updateFolderRules=function(e,t,a){const s={update_rules_arg:{".tag":"update_folder_rules_arg",folder_fq_path:e,rule_set:t,apply_to_existing_files:a}};return(new o.UserApiV2Client).ns("flows").rpc("update_rules",s,{subjectUserId:n.mustGetActiveUserId()})},t.removeFolderRules=function(e,t){const a={remove_rules_arg:{".tag":"remove_folder_rules_arg",folder_fq_path:e,rule_set:t}};return(new o.UserApiV2Client).ns("flows").rpc("remove_rules",a,{subjectUserId:n.mustGetActiveUserId()})},t.getFolderRulesConfig=function(){return(new o.UserApiV2Client).ns("flows").rpc("get_folder_rules_config",void 0,{subjectUserId:n.mustGetActiveUserId()})},t.getUserAutomations=function(){return(new o.UserApiV2Client).ns("flows").rpc("get_user_automations",{folder_limit:1e3},{subjectUserId:n.mustGetActiveUserId()})},t.getFolderMetadata=function(e){const t={path:e};return(new o.UserApiV2Client).ns("files").rpc("get_metadata",t,{subjectUserId:n.mustGetActiveUserId()})},t.getBoltData=function(){return(new o.UserApiV2Client).ns("flows").rpc("get_bolt_data",void 0,{subjectUserId:n.mustGetActiveUserId()})},t.undoActions=function(e,t){const a={creates:e,moves:t};return(new o.UserApiV2Client).ns("flows").rpc("undo_actions",a,{subjectUserId:n.mustGetActiveUserId()})}})),define("modules/clean/react/flows/redux/actions",["require","exports","tslib","modules/clean/react/flows/redux/types","modules/clean/react/flows/redux/helpers","modules/clean/react/flows/lib/api","modules/clean/react/flows/tray_io/apis","modules/clean/react/flows/tray_io/constants","modules/clean/active_user"],(function(e,t,o,n,a,s,i,r,l){"use strict";function c(e){return{type:n.Actions.SetFolderRulesConfig,payload:e}}function d(e){return{type:n.Actions.SetUserAutomations,payload:e}}function u(e){return{type:n.Actions.AddUserAutomation,payload:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setAutoFolderOnboarding=t.removeUserAutomation=t.toggleAutomationStatus=t.editUserAutomation=t.addUserAutomation=t.getUserAutomations=t.setUserAutomations=t.getFolderRulesConfig=t.setFolderRulesConfig=void 0,s=o.__importStar(s),t.setFolderRulesConfig=c,t.getFolderRulesConfig=function(e){return t=>o.__awaiter(this,void 0,void 0,(function*(){var o,n;t(c({status:"pending"}));try{const a=yield s.getFolderRulesConfig(),i=(null===(o=a.folder_rules_config)||void 0===o?void 0:o.actions)||[],r=(null===(n=a.folder_rules_config)||void 0===n?void 0:n.action_experiments)||[];t(c({status:"completed",data:i,hasDashboardAccess:Boolean(a.exp_flows_dashboard_ui),actionExperiments:r,expFlowsTrayPoC:e}))}catch(e){t(c({status:"errored",error:e.message}))}}))},t.setUserAutomations=d,t.getUserAutomations=function(e){return t=>o.__awaiter(this,void 0,void 0,(function*(){t(d({status:"pending"}));try{const n=(function(e){var t,n,s,i;const r=[];if(e.folder_rule_results)for(const a of e.folder_rule_results)if(!a.err&&(null===(t=a.folder_rule_set)||void 0===t?void 0:t.rules)&&(null===(n=a.folder_rule_set)||void 0===n?void 0:n.rules.length)>0){const e=null===(s=a.folder_rule_set)||void 0===s?void 0:s.rules[0],t=null===(i=e.action)||void 0===i?void 0:i.action;if(!t)continue;const{".tag":n}=t,l=o.__rest(t,[".tag"]);"other"!==n&&a.fq_path&&r.push({action:n,actionArgs:l,fqPath:a.fq_path,isActive:e.enabled||!1,nsId:a.ns_id})}return r.sort(a.compareAutomation),r})(yield s.getUserAutomations());t(d({status:"completed",data:n})),e&&t((function(){return e=>o.__awaiter(this,void 0,void 0,(function*(){i.listSolutionInstances(r.SOLUTION_ID).then(t=>{const o=t.instances;if(o)for(const t of o){let o="",n="";for(const e of t.config_values)if(e.external_id===r.FOLDER_PATH_EXTERNAL_ID){o=e.value;const t=l.mustGetActiveUser();t.home_ns_id!==t.root_ns_id&&(o="/"+t.display_name+"/"+o)}else e.external_id===r.SENDER_EMAIL_EXTERNAL_ID&&(n=e.value);const a={connectedEmailService:"google",senderEmail:n,folderFqPath:o,id:t.id};e(u({fqPath:o,isActive:!0,action:"email_ingest",actionArgs:a,nsId:void 0}))}})}))})())}catch(e){t(d({status:"errored",error:e.message}))}}))},t.addUserAutomation=u,t.editUserAutomation=function(e){return{type:n.Actions.EditUserAutomation,payload:e}},t.toggleAutomationStatus=function(e){return{type:n.Actions.ToggleAutomationStatus,payload:e}},t.removeUserAutomation=function(e){return{type:n.Actions.RemoveUserAutomation,payload:{fqPath:e}}},t.setAutoFolderOnboarding=e=>({type:n.Actions.SetAutoFolderOnboarding,payload:e})})),define("modules/clean/react/flows/redux/helpers",["require","exports","modules/clean/filepath/filepath"],(function(e,t,o){"use strict";function n(e,t){return e.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase())}function a(e,t){const a=(function(e,t){return o.filename(e.fqPath).toLocaleLowerCase().localeCompare(o.filename(t.fqPath).toLocaleLowerCase())})(e,t);return 0!==a?a:n(e.fqPath,t.fqPath)}Object.defineProperty(t,"__esModule",{value:!0}),t.insertAutomation=t.compareAutomation=t.compareFqPath=void 0,t.compareFqPath=n,t.compareAutomation=a,t.insertAutomation=function(e,t){const o=[];let s=!1;for(const i of e)!s&&a(t,i)<0&&(o.push(Object.assign({},t)),s=!0),0!==n(t.fqPath,i.fqPath)&&o.push(Object.assign({},i));return s||o.push(Object.assign({},t)),o}})),define("modules/clean/react/flows/redux/reducer",["require","exports","modules/clean/react/flows/redux/types","modules/clean/react/flows/redux/helpers"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutomationsReducer=t.defaultAutomationsState=void 0,t.defaultAutomationsState={folderRulesConfig:{status:"initial"},userAutomations:{status:"initial"},autoFolderOnboarding:void 0},t.AutomationsReducer=(e=t.defaultAutomationsState,a)=>{switch(a.type){case o.Actions.SetFolderRulesConfig:return Object.assign(Object.assign({},e),{folderRulesConfig:a.payload});case o.Actions.SetUserAutomations:return Object.assign(Object.assign({},e),{userAutomations:a.payload});case o.Actions.SetAutoFolderOnboarding:return Object.assign(Object.assign({},e),{autoFolderOnboarding:a.payload});case o.Actions.AddUserAutomation:{const t="completed"===e.userAutomations.status?e.userAutomations.data:void 0;if(!t)return e;const o=n.insertAutomation(t,a.payload);return Object.assign(Object.assign({},e),{userAutomations:{status:"completed",data:o}})}case o.Actions.EditUserAutomation:{const t="completed"===e.userAutomations.status?e.userAutomations.data:void 0;if(!t)return e;const o=a.payload,s=t.map(e=>0===n.compareFqPath(e.fqPath,o.fqPath)?Object.assign(Object.assign({},e),o):e);return Object.assign(Object.assign({},e),{userAutomations:{status:"completed",data:s}})}case o.Actions.RemoveUserAutomation:{const t="completed"===e.userAutomations.status?e.userAutomations.data:void 0;if(!t)return e;const o=a.payload,s=t.filter(e=>0!==n.compareFqPath(o.fqPath,e.fqPath));return Object.assign(Object.assign({},e),{userAutomations:{status:"completed",data:s}})}case o.Actions.ToggleAutomationStatus:{const t="completed"===e.userAutomations.status?e.userAutomations.data:void 0;if(!t)return e;const o=a.payload,s=t.map(e=>0===n.compareFqPath(e.fqPath,o.fqPath)?Object.assign(Object.assign({},e),o):e);return Object.assign(Object.assign({},e),{userAutomations:{status:"completed",data:s}})}default:return e}}})),define("modules/clean/react/flows/redux/store",["require","exports","tslib","lodash","modules/clean/redux/namespaces","modules/clean/redux/store","modules/clean/react/flows/redux/reducer","modules/clean/tagging/data/store"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForAutomations=void 0,n=o.__importStar(n);const l={[a.AUTOMATIONS_NAMESPACE_KEY]:i.AutomationsReducer};t.getStoreForAutomations=n.once(()=>{const e=s.getStoreAndRegisterReducers(l);return r.getStoreForTagging(),e})})),define("modules/clean/react/flows/redux/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(function(e){e.GetFolderRulesConfig="AUTOMATIONS/GET_FOLDER_RULES_CONFIG",e.SetFolderRulesConfig="AUTOMATIONS/SET_FOLDER_RULES_CONFIG",e.GetUserAutomations="AUTOMATIONS/GET_USER_AUTOMATIONS",e.SetUserAutomations="AUTOMATIONS/SET_USER_AUTOMATIONS",e.SetAutoFolderOnboarding="AUTOMATIONS/SetAutoFolderOnboarding",e.AddUserAutomation="AUTOMATIONS/ADD_USER_AUTOMATION",e.EditUserAutomation="AUTOMATIONS/EDIT_USER_AUTOMATION",e.RemoveUserAutomation="AUTOMATIONS/REMOVE_USER_AUTOMATION",e.ToggleAutomationStatus="TOGGLE_AUTOMATION_STATUS"})(t.Actions||(t.Actions={}))})),define("modules/clean/react/flows/utils/modal_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateModalSessionId=void 0,t.generateModalSessionId=function(){return(new Date).getTime().toString()+Math.random().toString(36).substring(2)}})),define("modules/clean/react/flows/tray_io/apis",["require","exports","api_v2/user_client","modules/clean/active_user"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteSolutionInstance=t.listSolutionInstances=t.generateAuthCode=t.updateSolutionInstance=t.createSolutionInstance=t.createUserToken=t.createTrayUser=void 0,t.createTrayUser=function(e){return(new o.UserApiV2Client).ns("flows").rpc("create_tray_user",void 0,{subjectUserId:e})},t.createUserToken=function(e){return(new o.UserApiV2Client).ns("flows").rpc("create_user_token",void 0,{subjectUserId:e})},t.createSolutionInstance=function(e,t,n,a){const s={solution_id:t,instance_name:n,user_token:a};return(new o.UserApiV2Client).ns("flows").rpc("create_solution_instance",s,{subjectUserId:e})},t.updateSolutionInstance=function(e,t,n){const a={instance:t,user_token:n};return(new o.UserApiV2Client).ns("flows").rpc("update_solution_instance",a,{subjectUserId:e})},t.generateAuthCode=function(e){return(new o.UserApiV2Client).ns("flows").rpc("generate_auth_code",void 0,{subjectUserId:e})},t.listSolutionInstances=function(e){const t={solution_id:e};return(new o.UserApiV2Client).ns("flows").rpc("list_solution_instances",t,{subjectUserId:n.mustGetActiveUserId()})},t.deleteSolutionInstance=function(e){const t={instance_id:e};return(new o.UserApiV2Client).ns("flows").rpc("delete_solution_instance",t,{subjectUserId:n.mustGetActiveUserId()})}})),define("modules/clean/react/flows/tray_io/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EXP_TRAY_POC_API_ONLY=t.EXP_TRAY_POC_EMBEDDED=t.SENDER_EMAIL_EXTERNAL_ID=t.HISTORICAL_SYNC_TIME_EXTERNAL_ID=t.FOLDER_PATH_EXTERNAL_ID=t.AUTH_IDS=t.GMAIL_AUTH_EXTERNAL_ID=t.DBX_AUTH_EXTERNAL_ID=t.SOLUTION_ID=void 0,t.SOLUTION_ID="fa435765-0441-411c-b0e0-d45e203c23a8",t.DBX_AUTH_EXTERNAL_ID="external_dropbox_authentication",t.GMAIL_AUTH_EXTERNAL_ID="external_gmail_authentication",t.AUTH_IDS=[t.DBX_AUTH_EXTERNAL_ID,t.GMAIL_AUTH_EXTERNAL_ID],t.FOLDER_PATH_EXTERNAL_ID="external_folder_path",t.HISTORICAL_SYNC_TIME_EXTERNAL_ID="external_historical_sync_time",t.SENDER_EMAIL_EXTERNAL_ID="external_sender_email",t.EXP_TRAY_POC_EMBEDDED="EMBEDDED",t.EXP_TRAY_POC_API_ONLY="API_ONLY"})),define("modules/clean/react/flows/automations/auto_audio",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/flows/constants","typescript/component_libraries/flows/src/components/icon-row/index","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoAudioUiConfig=void 0,n=o.__importDefault(n);t.AutoAudioUiConfig={action:{description:a.intl.formatMessage({id:"tgJ2Cm",defaultMessage:"Save as"}),rightRailDescription:a.intl.formatMessage({id:"ci35Iy",defaultMessage:"Save as audio"}),icon:n.default.createElement(r.UIIcon,{src:l.AudioLine}),tooltip:a.intl.formatMessage({id:"Zlgoz2",defaultMessage:"Are saved as audio"}),defaultActionData:{format:"mp3",input_filetypes:[]},renderAdditionalControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(i.OutputTypeControls,{allOutputTypes:s.SUPPORTED_AUDIO_OUTPUT_CONTAINERS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:o=>t(Object.assign(Object.assign({},e),{format:o})),onError:o}),renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(i.InputTypeControls,{allInputTypes:s.SUPPORTED_AUDIO_INPUT_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:o=>t(Object.assign(Object.assign({},e),{input_filetypes:o})),onError:o}),allowApplyToExistingFiles:e=>"add"===e},genericDescription:a.intl.formatMessage({id:"t4dkfK",defaultMessage:"Save files added to this folder as audio"}),shortLabel:a.intl.formatMessage({id:"HYJJOF",defaultMessage:"audio"}),title:a.intl.formatMessage({id:"o9ix6Q",defaultMessage:"Files added to a folder are saved as audio"}),trigger:"folder",type:"audio_conversion",notifications:{inProgress:()=>a.intl.formatMessage({id:"Q6KR2n",defaultMessage:"Automatically saving your files as audio..."}),success:e=>a.intl.formatMessage({id:"z22mBM",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as an audio file} other {# files automatically saved as audio files}}."},{numSucceeded:e}),fail:e=>a.intl.formatMessage({id:"HmFt9a",defaultMessage:"{numFailed, plural, one {# file couldn't be automatically saved as an audio file} other {# files couldn't be automatically saved as audio files}}."},{numFailed:e}),allowUndo:!0}}})),define("modules/clean/react/flows/automations/auto_image",["require","exports","tslib","react","typescript/component_libraries/flows/src/components/icon-row/index","modules/core/i18n","modules/clean/react/flows/constants","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoImageUiConfig=void 0,n=o.__importDefault(n);t.AutoImageUiConfig={action:{description:s.intl.formatMessage({id:"Fhu2DC",defaultMessage:"Save as"}),rightRailDescription:s.intl.formatMessage({id:"FtUJcR",defaultMessage:"Save as images"}),icon:n.default.createElement(r.UIIcon,{src:l.ImageLine}),tooltip:s.intl.formatMessage({id:"8r69yc",defaultMessage:"Are saved as images"}),defaultActionData:{format:"png",input_filetypes:[]},renderAdditionalControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(a.OutputTypeControls,{allOutputTypes:i.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:o=>t(Object.assign(Object.assign({},e),{format:o})),onError:o}),renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(a.InputTypeControls,{allInputTypes:i.SUPPORTED_DOC_INPUT_EXTENSIONS.concat(i.SUPPORTED_IMAGE_INPUT_EXTENSIONS),selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:o=>t(Object.assign(Object.assign({},e),{input_filetypes:o})),onError:o}),allowApplyToExistingFiles:e=>"add"===e},genericDescription:s.intl.formatMessage({id:"vp85ch",defaultMessage:"Save files added to this folder as images"}),shortLabel:s.intl.formatMessage({id:"CpxBZu",defaultMessage:"image"}),title:s.intl.formatMessage({id:"aQxSFW",defaultMessage:"Files added to a folder are saved as images"}),trigger:"folder",type:"image_conversion",notifications:{inProgress:()=>s.intl.formatMessage({id:"tpGlkv",defaultMessage:"Automatically saving your files as images..."}),success:e=>s.intl.formatMessage({id:"Umhvnj",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as an image} other {# files automatically saved as images}}."},{numSucceeded:e}),fail:e=>s.intl.formatMessage({id:"opwGp2",defaultMessage:"{numFailed, plural, one {# file couldn't automatically be saved as an image} other {# files couldn't automatically be saved as images}}."},{numFailed:e}),allowUndo:!0}}})),define("modules/clean/react/flows/automations/auto_naming_conventions",["require","exports","tslib","react","modules/core/i18n","dig-components/icons","dig-components/icons/src","modules/clean/react/hoc","modules/clean/react/naming_conventions/components/nc_title_casing_selection_button","modules/clean/react/naming_conventions/components/nc_parent_folder_name_selection_button","modules/clean/react/naming_conventions/components/nc_date_selection_button","modules/clean/react/naming_conventions/components/nc_consistent_separator_selection_button","modules/clean/react/naming_conventions/components/nc_generic_live_preview","modules/clean/react/naming_conventions/generic_live_preview","modules/clean/react/naming_conventions/components/nc_ml_toggle","modules/clean/react/naming_conventions/types","modules/clean/react/naming_conventions/utils"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_){"use strict";function v(e){return e.includes("nc_ml_filename_enabled")}Object.defineProperty(t,"__esModule",{value:!0}),t.AutoNamingConventionsControls=t.AutoNamingConventionsUiConfig=void 0,n=o.__importStar(n),t.AutoNamingConventionsUiConfig={action:{description:a.intl.formatMessage({id:"rT2iTB",defaultMessage:"Rename to match the rules below"}),rightRailDescription:a.intl.formatMessage({id:"It11QI",defaultMessage:"Rename"}),icon:n.default.createElement(s.UIIcon,{src:i.CursorLine}),tooltip:a.intl.formatMessage({id:"3pMd5a",defaultMessage:"Are renamed"}),defaultActionData:{args_json:JSON.stringify(_.NamingConventionConversions.NamingConventionToApiV2(Object.assign(Object.assign({},p.defaultNamingConventionParameters),{mlFilenameParsing:!0})))},renderAdditionalControls:e=>n.default.createElement(t.AutoNamingConventionsControls,Object.assign({},e)),allowApplyToExistingFiles:e=>"add"===e||"edit"===e},genericDescription:a.intl.formatMessage({id:"0c/WbW",defaultMessage:"Files added to a folder are renamed"}),shortLabel:a.intl.formatMessage({id:"355s7s",defaultMessage:"rename"}),title:a.intl.formatMessage({id:"LPqqfF",defaultMessage:"Files added to a folder are renamed"}),trigger:"folder",type:"naming_conventions",notifications:{inProgress:()=>a.intl.formatMessage({id:"GcgPQq",defaultMessage:"Automatically renaming your files..."}),success:e=>a.intl.formatMessage({id:"xsD6gG",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically renamed."},{numSucceeded:e}),fail:e=>a.intl.formatMessage({id:"8mMlk3",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically renamed."},{numFailed:e}),allowUndo:!0}};const A=({data:e,onDataChange:t,onDataError:o,actionExperiments:a})=>{const[s,i]=n.default.useState(p.defaultNamingConventionParameters),[r,A]=n.default.useState(""),[y,S]=n.default.useState(!1);n.useEffect(()=>{var t;let n={};if(null==e?void 0:e.args_json)try{n=JSON.parse(e.args_json)}catch(e){}const a=_.NamingConventionConversions.NamingConventionFromApiV2(n);0===(null===(t=null==a?void 0:a.selectedRules)||void 0===t?void 0:t.length)&&o(),i(e=>Object.assign(Object.assign({},e),a)),S(!0)},[e,o]),n.useEffect(()=>{A(f.getGenericLivePreviewText(s))},[s]),n.useEffect(()=>{v(a)||T(Object.assign(Object.assign({},s),{mlFilenameParsing:!1}))},[y]);const T=e=>{const o=_.NamingConventionConversions.NamingConventionToApiV2(e);t({args_json:JSON.stringify(o)})},b=e=>Array.from(new Set([...s.selectedRules,e])),M=e=>{const t=e.target.value,o=[...s.selectedRules],n=o.indexOf(t);n>=0?o.splice(n,1):o.push(t);let a=s.mlFilenameParsing;t===p.NamingConventionType.by_date&&(a=!E(p.NamingConventionType.by_date)),T(Object.assign(Object.assign({},s),{selectedRules:o,mlFilenameParsing:a}))},E=e=>s.selectedRules.includes(e);return n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement(d.NamingConventionsDateSelectionButton,{isSelected:E(p.NamingConventionType.by_date),onSelect:M,dateFormatSelection:s.dateFormatSelection,setDateFormatSelection:e=>{T(Object.assign(Object.assign({},s),{selectedRules:b(p.NamingConventionType.by_date),dateFormatSelection:e,mlFilenameParsing:v(a)&&(!E(p.NamingConventionType.by_date)||s.mlFilenameParsing)}))}}),n.default.createElement(l.NamingConventionsTitleCasingSelectionButton,{isSelected:E(p.NamingConventionType.by_title_casing),onSelect:M}),n.default.createElement(u.NamingConventionsConsistentSeparatorSelectionButton,{isSelected:E(p.NamingConventionType.by_consistent_separators),onSelect:M,separatorSelection:s.consistentSeparatorSelection,setSeparatorSelection:e=>{T(Object.assign(Object.assign({},s),{selectedRules:b(p.NamingConventionType.by_consistent_separators),consistentSeparatorSelection:e}))},useSelectComponent:!1}),n.default.createElement(c.NamingConventionsParentFolderNameSelectionButton,{isSelected:E(p.NamingConventionType.by_parent_folder_name),onSelect:M})),n.default.createElement(m.NamingConventionsGenericLivePreview,{previewText:r}),v(a)?n.default.createElement(g.NamingConventionsMLToggle,{isToggled:s.mlFilenameParsing,onSelect:e=>{const t=e.target.checked;T(Object.assign(Object.assign({},s),{mlFilenameParsing:t}))},value:p.NamingConventionML,disabled:!E(p.NamingConventionType.by_date)}):null)};A.displayName="UnstyledAutoNamingConventionsControls",t.AutoNamingConventionsControls=r.withCSS(["/static/css/naming_conventions/naming_conventions-vflSGybEF.css"])(A)})),define("modules/clean/react/flows/automations/auto_pdf",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/flows/constants","typescript/component_libraries/flows/src/components/icon-row/index","dig-components/icons/src","dig-components/icons"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPdfUiConfig=void 0,n=o.__importDefault(n),t.AutoPdfUiConfig={action:{description:a.intl.formatMessage({id:"lUL/WC",defaultMessage:"Save as PDFs"},{b:e=>n.default.createElement("b",null,e)}),icon:n.default.createElement(l.UIIcon,{src:r.PdfLine}),tooltip:a.intl.formatMessage({id:"2c4ZCd",defaultMessage:"Are saved as PDFs"}),defaultActionData:{input_filetypes:[]},renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(i.InputTypeControls,{allInputTypes:s.SUPPORTED_PDF_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,onSelect:o=>t(Object.assign(Object.assign({},e),{input_filetypes:o})),onError:o}),allowApplyToExistingFiles:e=>"add"===e},genericDescription:a.intl.formatMessage({id:"78ED3w",defaultMessage:"Save files added to this folder as PDFs"}),shortLabel:a.intl.formatMessage({id:"PJ39gK",defaultMessage:"PDF"}),title:a.intl.formatMessage({id:"/jb68x",defaultMessage:"Files added to a folder are saved as PDFs"}),trigger:"folder",type:"pdf_conversion",notifications:{inProgress:()=>a.intl.formatMessage({id:"reapzT",defaultMessage:"Automatically saving your files as PDFs..."}),success:e=>a.intl.formatMessage({id:"VeOt0m",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as a PDF} other {# files automatically saved as PDFs}}."},{numSucceeded:e}),fail:e=>a.intl.formatMessage({id:"HjIGnc",defaultMessage:"{numFailed, plural, one {# file couldn't be automatically saved as a PDF} other {# files couldn't be automatically saved as PDFs}}."},{numFailed:e}),allowUndo:!0}}})),define("modules/clean/react/flows/automations/auto_smart_subfolders",["require","exports","tslib","react","modules/core/i18n","dig-components/typography","dig-components/controls","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSmartSubfoldersUiConfig=void 0,n=o.__importDefault(n);const c=({data:e,onDataChange:t,onDataError:o})=>{var a;const[r,l]=n.default.useState((null===(a=null==e?void 0:e.variant)||void 0===a?void 0:a[".tag"])||"use_existing_folders");return n.default.useEffect(()=>{t({variant:{".tag":"use_existing_folders"===r?"use_existing_folders":"use_premade_categories"}})},[r]),n.default.useEffect(()=>{var t;l((null===(t=null==e?void 0:e.variant)||void 0===t?void 0:t[".tag"])||"use_existing_folders")},[e]),n.default.createElement("div",null,n.default.createElement(s.Text,null,"Select a rule to classify and sort by"),n.default.createElement("div",{className:"classification-radio"},n.default.createElement("div",null,n.default.createElement(i.RadioButton,{"aria-label":"Pre-defined Document Classes",id:"pre-defined",checked:"use_premade_categories"===r,onChange:()=>{l("use_premade_categories")}}),n.default.createElement(s.Text,{tagName:"label",htmlFor:"pre-defined"},"Pre-defined Document Classes")),n.default.createElement("div",null,n.default.createElement(i.RadioButton,{"aria-label":"Your Existing Sub-folders",id:"existing",checked:"use_existing_folders"===r,onChange:()=>{l("use_existing_folders")}}),n.default.createElement(s.Text,{tagName:"label",htmlFor:"existing"},"Your Existing Sub-folders"))))};c.displayName="AutoSmartSubfolderOptions",t.AutoSmartSubfoldersUiConfig={action:{description:a.intl.formatMessage({id:"iqinwH",defaultMessage:"Automatically sort files into organized subfolders"}),icon:n.default.createElement(r.UIIcon,{src:l.MultipleFoldersLine}),tooltip:a.intl.formatMessage({id:"/hC6lR",defaultMessage:"Are sorted into organized subfolders"}),renderAdditionalControls:e=>n.default.createElement(c,Object.assign({},e))},genericDescription:a.intl.formatMessage({id:"a9iSb9",defaultMessage:"Sort files added to this folder into organized subfolders"}),shortLabel:a.intl.formatMessage({id:"y7ZDUa",defaultMessage:"sort files"}),title:a.intl.formatMessage({id:"QY8XR8",defaultMessage:"Files added to a folder are organized by content type"}),trigger:"folder",type:"smart_subfolders"}})),define("modules/clean/react/flows/automations/auto_tagging",["require","exports","tslib","react","modules/clean/react/tagging/components/auto_tagging_typeahead","modules/core/i18n","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTaggingUiConfig=void 0,n=o.__importDefault(n),t.AutoTaggingUiConfig=e=>({action:{description:s.intl.formatMessage({id:"iWVH9L",defaultMessage:"Tag as"}),rightRailDescription:s.intl.formatMessage({id:"LRr2Ss",defaultMessage:"Tag"}),icon:n.default.createElement(i.UIIcon,{src:r.TagLine}),tooltip:s.intl.formatMessage({id:"clWHiV",defaultMessage:"Are tagged"}),renderAdditionalControls:t=>n.default.createElement(a.AutoTaggingTypeahead,Object.assign({},t,{user:e})),allowApplyToExistingFiles:e=>"add"===e||"edit"===e},genericDescription:s.intl.formatMessage({id:"gtiSpl",defaultMessage:"Automatically tag files added to this folder"}),shortLabel:s.intl.formatMessage({id:"stkmXg",defaultMessage:"tag"}),title:s.intl.formatMessage({id:"Rjaxdd",defaultMessage:"Files added to a folder are tagged"}),trigger:"folder",type:"tag",notifications:{inProgress:()=>s.intl.formatMessage({id:"cjg/6X",defaultMessage:"Automatically tagging your files..."}),success:e=>s.intl.formatMessage({id:"nQKCo3",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically tagged."},{numSucceeded:e}),fail:e=>s.intl.formatMessage({id:"kj8GOO",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically tagged."},{numFailed:e})}})})),define("modules/clean/react/flows/automations/auto_tidy_up",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/hoc","modules/clean/react/tidy_up/utils","modules/clean/react/tidy_up/modal/types","modules/clean/react/tidy_up/modal/options_view/tidy_radio_selection","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTidyUpControls=t.AutoTidyUpUiConfig=void 0,n=o.__importStar(n);const u={type:r.TidyUpType.by_month,inactiveSelection:r.InactiveSelection.thirty_days,excludeCurrentMonth:!1,excludeCurrentYear:!1,keyphrase:void 0,keyphraseDestination:void 0,previewData:void 0,dateFormatSelection:r.DateFormatSelection.YYYY_MM};t.AutoTidyUpUiConfig={action:{description:a.intl.formatMessage({id:"K781BL",defaultMessage:"Organize into folders grouped by"}),rightRailDescription:a.intl.formatMessage({id:"hwC5wH",defaultMessage:"Organize by category"}),icon:n.default.createElement(c.UIIcon,{src:d.MultipleFoldersLine}),tooltip:a.intl.formatMessage({id:"u07O3h",defaultMessage:"Are organized by category"}),defaultActionData:{args_json:JSON.stringify(i.TidyConversions.tidyTypeToApiV2(u))},renderAdditionalControls:e=>n.default.createElement(t.AutoTidyUpControls,Object.assign({},e)),allowApplyToExistingFiles:e=>"add"===e},genericDescription:a.intl.formatMessage({id:"qoGbIp",defaultMessage:"Organize files added to this folder into subfolders according to rules"}),shortLabel:a.intl.formatMessage({id:"h5nATP",defaultMessage:"organize by category"}),title:a.intl.formatMessage({id:"VYnC2d",defaultMessage:"Files added to a folder are sorted based on category"}),trigger:"folder",type:"tidy_up",notifications:{inProgress:()=>a.intl.formatMessage({id:"kOOwLi",defaultMessage:"Automatically organizing your files..."}),success:e=>a.intl.formatMessage({id:"OGrBCr",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically organized into subfolders."},{numSucceeded:e}),fail:e=>a.intl.formatMessage({id:"z51P9Z",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically organized"},{numFailed:e}),allowUndo:!0}};const m=({data:e,onDataChange:t})=>{const[o,s]=n.default.useState(u);n.useEffect(()=>{let t={".tag":"other"};if(null==e?void 0:e.args_json)try{t=JSON.parse(e.args_json)}catch(e){}const o=i.TidyConversions.tidyTypeFromApiV2(t);s(e=>Object.assign(Object.assign({},e),o))},[e]);const c=n.useCallback(e=>{const o=i.TidyConversions.tidyTypeToApiV2(e);t({args_json:JSON.stringify(o)})},[t]),d=n.default.useCallback(e=>{c(Object.assign(Object.assign({},o),{type:e.target.value}))},[o,c]);return n.default.createElement("div",null,n.default.createElement(l.TidyUpSelection,{isSelected:o.type===r.TidyUpType.by_month,onSelect:d,value:r.TidyUpType.by_month,label:a.intl.formatMessage({id:"shN5TV",defaultMessage:"Month"}),subtext:a.intl.formatMessage({id:"FyhDVP",defaultMessage:"Month your content was added to Dropbox"})}),n.default.createElement(l.TidyUpSelection,{isSelected:o.type===r.TidyUpType.by_year,onSelect:d,value:r.TidyUpType.by_year,label:a.intl.formatMessage({id:"PWjmB8",defaultMessage:"Year"}),subtext:a.intl.formatMessage({id:"maa3SN",defaultMessage:"Year your content was added to Dropbox"})}))};m.displayName="UnstyledAutoTidyUpControls",t.AutoTidyUpControls=s.withCSS(["/static/css/tidy_up/tidy_up-vfl3cOB8M.css"])(m)})),define("modules/clean/react/flows/automations/auto_unzip",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/flows/constants","typescript/component_libraries/flows/src/components/icon-row/index","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoUnzipUiConfig=void 0,n=o.__importDefault(n),t.AutoUnzipUiConfig={action:{description:a.intl.formatMessage({id:"8bjgn0",defaultMessage:"Unzip"}),icon:n.default.createElement(r.UIIcon,{src:l.ZipLine}),tooltip:a.intl.formatMessage({id:"W2z+/h",defaultMessage:"Are unzipped"}),defaultActionData:{input_filetypes:[]},renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(i.InputTypeControls,{allInputTypes:s.SUPPORTED_UNZIP_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,onSelect:o=>t(Object.assign(Object.assign({},e),{input_filetypes:o})),onError:o}),allowApplyToExistingFiles:e=>"add"===e},genericDescription:a.intl.formatMessage({id:"jGuv/Z",defaultMessage:"Unzip compressed files added to this folder"}),shortLabel:a.intl.formatMessage({id:"+y6Wz9",defaultMessage:"unzip"}),title:a.intl.formatMessage({id:"BC9LJ/",defaultMessage:"Files added to a folder are unzipped"}),trigger:"folder",type:"unzip",notifications:{inProgress:()=>a.intl.formatMessage({id:"lACYwF",defaultMessage:"Automatically unzipping your files..."}),success:e=>a.intl.formatMessage({id:"9elMjf",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically unzipped."},{numSucceeded:e}),fail:e=>a.intl.formatMessage({id:"zV9Yhw",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically unzipped."},{numFailed:e}),allowUndo:!0}}})),define("modules/clean/react/flows/automations/auto_video",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/flows/constants","typescript/component_libraries/flows/src/components/icon-row/index","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoVideoUiConfig=void 0,n=o.__importDefault(n);t.AutoVideoUiConfig={action:{description:a.intl.formatMessage({id:"RSERPS",defaultMessage:"Save as"}),rightRailDescription:a.intl.formatMessage({id:"4z/68P",defaultMessage:"Save as videos"}),icon:n.default.createElement(r.UIIcon,{src:l.VideoFileLine}),tooltip:a.intl.formatMessage({id:"+dY8qg",defaultMessage:"Are saved as videos"}),defaultActionData:{format:"mov",input_filetypes:[]},renderAdditionalControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(i.OutputTypeControls,{allOutputTypes:s.SUPPORTED_VIDEO_OUTPUT_CONTAINERS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:o=>t(Object.assign(Object.assign({},e),{format:o})),onError:o}),renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:o})=>n.default.createElement(i.InputTypeControls,{allInputTypes:s.SUPPORTED_VIDEO_INPUT_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:o=>t(Object.assign(Object.assign({},e),{input_filetypes:o})),onError:o}),allowApplyToExistingFiles:e=>"add"===e},genericDescription:a.intl.formatMessage({id:"pFtoOT",defaultMessage:"Save files added to this folder as videos"}),shortLabel:a.intl.formatMessage({id:"cYek3I",defaultMessage:"video"}),title:a.intl.formatMessage({id:"kzki/y",defaultMessage:"Files added to a folder are saved as videos"}),trigger:"folder",type:"video_conversion",notifications:{inProgress:()=>a.intl.formatMessage({id:"HlZIB6",defaultMessage:"Automatically saving your files as videos..."}),success:e=>a.intl.formatMessage({id:"KBpE7R",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as a video} other {# files automatically saved as videos}}."},{numSucceeded:e}),fail:e=>a.intl.formatMessage({id:"q8gfGn",defaultMessage:"{numFailed, plural, one {# file couldn't be automatically saved as a video} other {# files couldn't be automatically saved as videos}}."},{numFailed:e}),allowUndo:!0}}})),define("modules/clean/react/flows/automations/snackbar",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/snackbar","modules/core/browser"],(function(e,t,o,n,a,s,i){"use strict";function r(){return{createInProgress:e=>a.intl.formatMessage({id:"ixnxFP",defaultMessage:"Creating {folderName} automated folder..."},{folderName:e}),addInProgress:e=>a.intl.formatMessage({id:"XWVzJa",defaultMessage:"Adding automation to {folderName}..."},{folderName:e}),feedbackSuccess:a.intl.formatMessage({id:"lXPwmi",defaultMessage:"Thank you for your feedback!"}),createSuccess:e=>a.intl.formatMessage({id:"eqvXsV",defaultMessage:"{folderName} automated folder created."},{folderName:e}),addSuccess:e=>a.intl.formatMessage({id:"yb+Ei+",defaultMessage:"Automation added to {folderName}."},{folderName:e}),removalSuccess:e=>a.intl.formatMessage({id:"gEPRxb",defaultMessage:"Removed automation from {folderName}."},{folderName:e}),pauseSuccess:e=>a.intl.formatMessage({id:"BJcdth",defaultMessage:"Paused automation for {folderName}."},{folderName:e}),editSuccess:e=>a.intl.formatMessage({id:"PjF0k5",defaultMessage:"Edited automation for {folderName}."},{folderName:e}),reactivateSuccess:e=>a.intl.formatMessage({id:"9CrZQ4",defaultMessage:"Activated automation for {folderName}."},{folderName:e}),defaultError:a.intl.formatMessage({id:"V2wwgQ",defaultMessage:"Something went wrong. Please try again."}),folderRuleGenericCreateError:e=>a.intl.formatMessage({id:"b2vbCw",defaultMessage:"Couldn't create {folderName} automated folder."},{folderName:e}),folderRuleGenericAddError:e=>a.intl.formatMessage({id:"/+u3gq",defaultMessage:"Couldn't add automation to {folderName}."},{folderName:e}),folderRuleNoAccessError:a.intl.formatMessage({id:"7Ke97p",defaultMessage:"You do not have permission to edit this folder."}),conflictPathError:a.intl.formatMessage({id:"X00Q2k",defaultMessage:"A folder with that name already exists."}),closeSnackbarBtn:a.intl.formatMessage({id:"uzUPSw",defaultMessage:"Close"}),tryAgainSnackbarBtn:a.intl.formatMessage({id:"oj8Ras",defaultMessage:"Try again"}),showAutomationDashboardBtn:a.intl.formatMessage({id:"wHJiLw",defaultMessage:"Show all automations"})}}Object.defineProperty(t,"__esModule",{value:!0}),t.showErrorSnackbar=t.showSuccessSnackbar=t.showPendingSnackbar=t.updateSnackbar=t.AUTOMATIONS_SNACKBAR_ID=void 0,n=o.__importDefault(n),i=o.__importStar(i),t.AUTOMATIONS_SNACKBAR_ID="flows-automations-snackbar",t.updateSnackbar=e=>{if("sync"===e.variant)s.Snackbar.update(n.default.createElement(s.Snackbar,Object.assign({id:t.AUTOMATIONS_SNACKBAR_ID},e)));else{const{closeSnackbarBtn:o}=r();s.Snackbar.update(n.default.createElement(s.Snackbar,Object.assign({id:t.AUTOMATIONS_SNACKBAR_ID,closeButtonText:o},e)))}},t.showPendingSnackbar=function(e){const{createInProgress:o,addInProgress:n}=r(),a={create:o(e.folderName),add:n(e.folderName)}[e.type];s.Snackbar.sync(a,!0,t.AUTOMATIONS_SNACKBAR_ID)},t.showSuccessSnackbar=function(e){const{addSuccess:o,createSuccess:a,feedbackSuccess:l,pauseSuccess:c,removalSuccess:d,editSuccess:u,reactivateSuccess:m,showAutomationDashboardBtn:f,closeSnackbarBtn:g}=r(),p={add:o(e.folderName),create:a(e.folderName),feedback:l,pause:c(e.folderName),remove:d(e.folderName),edit:u(e.folderName),reactivate:m(e.folderName)}[e.type];if(e.shouldShowDashboardCta){const o={closeButtonText:g,actionButtonText:f,onActionClick:()=>i.redirect(`/automations?_tk=${e.type}_snackbar`),id:t.AUTOMATIONS_SNACKBAR_ID,title:p,timeoutDelayMs:5e3,variant:"complete"};s.Snackbar.show(n.default.createElement(s.Snackbar,Object.assign({},o)))}else s.Snackbar.complete(p,t.AUTOMATIONS_SNACKBAR_ID)},t.showErrorSnackbar=function({folderName:e,onClose:o,onRetry:a,type:i}){const{conflictPathError:l,defaultError:c,folderRuleGenericCreateError:d,folderRuleGenericAddError:u,folderRuleNoAccessError:m,closeSnackbarBtn:f,tryAgainSnackbarBtn:g}=r(),p={conflict:l,default:c,"generic-create":d(e),"generic-add":u(e),"no-access":m}[i];let _={closeButtonText:f,id:t.AUTOMATIONS_SNACKBAR_ID,onCloseClick:o,title:p,timeoutDelayMs:5e3,variant:"fail"};if(a){const e=()=>{s.Snackbar.close(),a()};_=Object.assign(Object.assign({},_),{actionButtonText:g,onActionClick:e})}s.Snackbar.show(n.default.createElement(s.Snackbar,Object.assign({},_)))}})),define("modules/clean/react/flows/automations/ui_config",["require","exports","modules/clean/react/flows/automations/auto_pdf","modules/clean/react/flows/automations/auto_tagging","modules/clean/react/flows/automations/auto_unzip","modules/clean/react/flows/automations/auto_smart_subfolders","modules/clean/react/flows/automations/auto_image","modules/clean/react/flows/automations/auto_video","modules/clean/react/flows/automations/auto_tidy_up","modules/clean/react/flows/automations/auto_naming_conventions","modules/clean/react/flows/automations/auto_audio"],(function(e,t,o,n,a,s,i,r,l,c,d){"use strict";function u(e,{user:t}){switch(e){case"pdf_conversion":return o.AutoPdfUiConfig;case"unzip":return a.AutoUnzipUiConfig;case"tag":return n.AutoTaggingUiConfig(t);case"smart_subfolders":return s.AutoSmartSubfoldersUiConfig;case"image_conversion":return i.AutoImageUiConfig;case"video_conversion":return r.AutoVideoUiConfig;case"tidy_up":return l.AutoTidyUpUiConfig;case"naming_conventions":return c.AutoNamingConventionsUiConfig;case"audio_conversion":return d.AutoAudioUiConfig;default:return}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUiConfig=t.loadFolderAutomationUi=void 0,t.loadFolderAutomationUi=u;const m={tidy_up:0,naming_conventions:1,tag:2,pdf_conversion:3,image_conversion:4,video_conversion:5,unzip:6,smart_subfolders:7,audio_conversion:8,other:9,email_ingest:10},f=(e,t)=>m[e.type]-m[t.type];function g(e){return null!=e}t.getUiConfig=function(e,t,o){const n=e.map(e=>u(e,t)).filter(g);return n.sort(null!=o?o:f),n}})),define("modules/clean/react/flows/components/modals/create_file_name_modal",["require","exports","tslib","react","modules/clean/react/flows/conversions/actions/archive","react-intl","dig-components/modal","dig-components/buttons","dig-components/text_fields","dig-components/typography","typescript/component_libraries/flows/src/components/spacer/index","ts-key-enum"],(function(e,t,o,n,a,s,i,r,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateFileNameModal=void 0,n=o.__importStar(n),t.CreateFileNameModal=({action:e,files:t,user:o,context:s})=>{const[f,g]=n.useState(!0),[p,_]=n.useState(""),v=()=>{A()&&(a.ArchiveAction.convert(t,o,{context:s,name:p}),g(!1))},A=()=>0!==p.length&&-1===p.indexOf("/")&&-1===p.indexOf("\\"),{defaultTitle:y,defaultSubtitle:S,primaryAction:T,secondaryAction:b,fileNameLabel:M,defaultFileNamePlaceholder:E}=m(e);return n.default.createElement(i.Modal,{open:f,width:"small"},n.default.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(i.Modal.Title,null,y)),n.default.createElement(i.Modal.Body,{hasVerticalSpacing:!1},n.default.createElement(c.Text,{id:"flows-create-file-name",variant:"paragraph"},S),n.default.createElement(d.Spacer,{multiplier:3}),n.default.createElement(c.Text,{variant:"paragraph",size:"small",isBold:!0},M),n.default.createElement(d.Spacer,{multiplier:1}),n.default.createElement(l.TextInput,{"aria-label":M,value:p,onChange:e=>{_(e.currentTarget.value)},onKeyPress:e=>{e.key===u.Key.Enter&&v()},placeholder:E})),n.default.createElement(i.Modal.Footer,null,n.default.createElement(r.Button,{variant:"opacity",onClick:()=>{g(!1)}},b),n.default.createElement(r.Button,{variant:"primary",onClick:v,disabled:!A()},T)))},t.CreateFileNameModal.displayName="CreateFileNameModal";const m=e=>{const t=s.useIntl(),o={secondaryAction:t.formatMessage({id:"AcQYt9",defaultMessage:"Cancel"}),primaryAction:t.formatMessage({id:"iv8S9b",defaultMessage:"Save"}),fileNameLabel:t.formatMessage({id:"V4Y6/+",defaultMessage:"File name"}),defaultFileNamePlaceholder:t.formatMessage({id:"+KXywp",defaultMessage:"Archive folder"})};return Object.assign(Object.assign({},o),{defaultTitle:t.formatMessage({id:"5gN6rc",defaultMessage:"Zip files"}),defaultSubtitle:t.formatMessage({id:"kTxoco",defaultMessage:'The selected files will be saved as a single file with a "zip" extension.'})})}})),define("modules/clean/react/flows/conversions/actions/archive",["require","exports","tslib","modules/core/i18n","modules/clean/react/flows/conversions/convert","modules/clean/react/flows/conversions/api","modules/clean/react/flows/conversions/utils","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArchiveAction=void 0;t.ArchiveAction={actionText:n.intl.formatMessage({id:"39qUu3",defaultMessage:"Make an archive"}),actionIcon:r.FileLine,selector:()=>!0,convert:(e,t,{shareToken:n,context:r,name:c})=>a.convertFileAndShowSnackbar({file:e[0],user:t,shareToken:n,conversionType:"archive",loggingFunctions:i.getConversionLoggingFunctions("archive"),getStrings:(t,o)=>l(t,e.length,e[0]),conversionFn:(t,n,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){const t=yield s.archive(n.id,e,c,r);return t?t.path:void 0}))})};const l=(e,t,o)=>{const a=t>1?n.intl.formatMessage({id:"FtOEg9",defaultMessage:"Couldn't zip files"}):n.intl.formatMessage({id:"+GUWwR",defaultMessage:"Couldn't zip file"}),s=i.getSuccessString(e,(e,o)=>t>1?n.intl.formatMessage({id:"8mHKZl",defaultMessage:"{numFiles} files zipped and saved as {fileName} in {dirName} folder"},{numFiles:t,fileName:e,dirName:o}):n.intl.formatMessage({id:"jZTSy9",defaultMessage:"{numFiles} file zipped and saved as {fileName} in {dirName} folder"},{numFiles:t,fileName:e,dirName:o}),e=>t>1?n.intl.formatMessage({id:"oT9Ra2",defaultMessage:"{numFiles} files zipped and saved as {dirName} in your main Dropbox folder"},{numFiles:t,dirName:e}):n.intl.formatMessage({id:"hZllBo",defaultMessage:"{numFiles} file zipped and saved as {dirName} in your main Dropbox folder"},{numFiles:t,dirName:e}));return{saving:t>1?n.intl.formatMessage({id:"f8o64Y",defaultMessage:"Zipping files..."}):n.intl.formatMessage({id:"0pAwi/",defaultMessage:"Zipping file..."}),success:s,successAutomatedAdoption:s,failGeneric:a,failRetryable:a,failOverQuota:n.intl.formatMessage({id:"meIIGB",defaultMessage:"Couldn't zip because your Dropbox account is out of space"}),failTooLarge:t>1?n.intl.formatMessage({id:"JdMBky",defaultMessage:"Couldn't zip files. Can only handle files up to {fileSize} GB"},{fileSize:20}):n.intl.formatMessage({id:"Pi6R58",defaultMessage:"Couldn't zip file. Can only handle files up to {fileSize} GB"},{fileSize:20}),failCorrupt:n.intl.formatMessage({id:"FuOmGz",defaultMessage:"Couldn't zip because the file is damaged"}),failPassword:n.intl.formatMessage({id:"4tVWiT",defaultMessage:"Couldn't zip because the file is password protected"}),failPasswordLink:n.intl.formatMessage({id:"f77DNZ",defaultMessage:"Couldn't zip because the link is password-protected"})}}})),define("modules/clean/react/flows/conversions/adoption_utils",["require","exports","tslib","dig-components/icons/src","modules/clean/filepath/filepath","modules/clean/react/browse/data/action_creators/index","modules/clean/react/browse/data/selectors","modules/clean/react/browse/data/store","modules/clean/react/flows/automations/snackbar","modules/clean/react/flows/automations/ui_config","modules/clean/react/flows/constants","modules/clean/react/flows/conversions/api","modules/clean/react/flows/redux/actions","modules/clean/react/flows/redux/selectors","modules/clean/react/flows/redux/store","modules/clean/react/flows/types","modules/clean/react/flows/utils/api_helpers","modules/clean/react/flows/utils/folder_rules","modules/clean/react/snackbar","modules/constants/file_viewer","modules/core/i18n"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_,v,A,y,S){"use strict";function T(e){const t=!!i.isInsideFlowsEligibleFolder(r.getStoreForBrowse().getState()),o=i.flowsFolderRule(r.getStoreForBrowse().getState(),a.parent_dir(e))!==p.FlowsRuleType.None;return t&&!o}function b(e){h();const{filePath:t,conversionArg:o,userId:n}=e;if(!o)return;const{conversionType:i,folderRuleAction:r,user:d}=o;u.updateAdoptionStatus(i,r,n);const m=a.parent_dir(t),v=a.parentDirName(t);l.showPendingSnackbar({folderName:v,type:"add"});const A=g.getStoreForAutomations(),y=A.getState(),S=c.loadFolderAutomationUi(r,{user:d}),T=f.hasFlowsDashboardAccess(y),M=C(o);_.updateFolderRule(m,r,!0,M,!1).then(()=>{var e;A.dispatch(s.setFileHasAutomatedRuleMap({fileHasAutomatedRuleMap:p.FlowsMap({[m]:_.APIV2_TAG_TO_RULE_TYPE[r]})})),null===(e=null==S?void 0:S.onAdd)||void 0===e||e.call(S,M,m),l.showSuccessSnackbar({folderName:v,shouldShowDashboardCta:T,type:"add"})},t=>{l.showErrorSnackbar({folderName:v,onRetry:()=>{b(e)},type:"generic-add"})})}function M({userId:e,filePath:t,ns_id:o,conversionArg:n}){if(!n)return;const{conversionType:s,user:i,folderRuleAction:r}=n,l=a.parent_dir(t),c=C(n);u.updateAdoptionStatus(s,r,e),v.asyncLaunchUnifiedAutomationAddModal(l,l,i,o,r,c,"settings"),h()}function E({filePath:e,userId:t,ns_id:o,conversionArg:n}){if(!n)return;const{conversionType:s,folderRuleAction:i,user:r}=n;u.updateAdoptionStatus(s,i,t),h(),g.getStoreForAutomations().dispatch(m.setAutoFolderOnboarding({conversionType:i,step:1,totalSteps:1,variant:"quick-add"}));const l=a.parent_dir(e),c=C(n);v.asyncLaunchUnifiedAutomationAddModal(l,l,r,o,i,c,"select")}function w({userId:e,conversionArg:t}){if(!t)return;const{conversionType:o,folderRuleAction:n}=t;u.updateAdoptionStatus(o,n,e),h()}function h(){A.Snackbar.close("flows-conversion-snackbar")}function C(e){const{user:t,folderRuleAction:o,fileType:n}=e,a=c.loadFolderAutomationUi(o,{user:t}),s=null==a?void 0:a.action.defaultActionData;if(s)switch(o){case"image_conversion":case"video_conversion":s.format=n}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.optOutOfAdoptionFlow=t.showAddAutomationModalWithTooltip=t.showAddAutomationModal=t.addAutomationToCurrentFolder=t.getM2AdoptionSnackbarProps=t.isEligibleForAdoptionSnackbar=t.optOutOfAdoptionFlowAction=t.showAddAutomationModalAction=t.addAutomationToCurrentFolderWithTooltipAction=t.addAutomationToCurrentFolderWithModalAction=t.addAutomationToCurrentFolderAction=void 0,i=o.__importStar(i),f=o.__importStar(f),_=o.__importStar(_),t.addAutomationToCurrentFolderAction={icon:n.AutomationLine,name:"automate_current_folder",text:S.intl.formatMessage({id:"GwuHIR",defaultMessage:"Automate this folder"}),onClick:b},t.addAutomationToCurrentFolderWithModalAction={icon:n.AutomationLine,name:"automate_current_folder_with_modal",text:S.intl.formatMessage({id:"bBdxj0",defaultMessage:"Automate this folder"}),onClick:M},t.addAutomationToCurrentFolderWithTooltipAction={icon:n.AutomationLine,name:"automate_current_folder_with_tooltip",text:S.intl.formatMessage({id:"3E1r2l",defaultMessage:"Automate this folder"}),onClick:E},t.showAddAutomationModalAction={name:"show_me_how_to_automate",text:S.intl.formatMessage({id:"qFr5h+",defaultMessage:"Show me how"}),onClick:M},t.optOutOfAdoptionFlowAction={name:"do_not_show_me_this_again",text:S.intl.formatMessage({id:"E2TETO",defaultMessage:"Don't show me this again"}),onClick:w},t.isEligibleForAdoptionSnackbar=T,t.getM2AdoptionSnackbarProps=function(e){const{user:o,conversionType:n,folderRuleAction:a,resultPath:s,source:i,nsId:r}=e;if(!T(s))return;const l={user:o,conversionType:n,folderRuleAction:a,fileType:"unzip"===a?void 0:e.fileType,source:i},c={userId:o.id,filePath:s||"",ns_id:r,conversionArg:l},u="unzip"===a?S.intl.formatMessage({id:"+Ath7j",defaultMessage:"Want to automatically unzip files by setting up an automated folder?"}):S.intl.formatMessage({id:"+9Utp7",defaultMessage:"Want to automatically save {fileType} copies by setting up an automated folder?"},{fileType:e.fileType.toUpperCase()});switch(y.AUTOMATED_ADOPTION_VARIANT_BY_USER_ID[o.id]){case d.AUTOMATED_ADOPTION_VARIANTS.M2_A:return{actions:[t.addAutomationToCurrentFolderAction,t.optOutOfAdoptionFlowAction],helperText:u,clickHandlerArgs:c};case d.AUTOMATED_ADOPTION_VARIANTS.M2_B:return{actions:[t.addAutomationToCurrentFolderWithModalAction,t.optOutOfAdoptionFlowAction],helperText:u,clickHandlerArgs:c};case d.AUTOMATED_ADOPTION_VARIANTS.M2_C:return{actions:[t.addAutomationToCurrentFolderWithTooltipAction,t.optOutOfAdoptionFlowAction],helperText:u,clickHandlerArgs:c};case d.AUTOMATED_ADOPTION_VARIANTS.M2_D:return{actions:[t.addAutomationToCurrentFolderAction,t.showAddAutomationModalAction,t.optOutOfAdoptionFlowAction],helperText:u,clickHandlerArgs:c};default:return}},t.addAutomationToCurrentFolder=b,t.showAddAutomationModal=M,t.showAddAutomationModalWithTooltip=E,t.optOutOfAdoptionFlow=w})),define("modules/clean/react/flows/redux/selectors",["require","exports","modules/clean/redux/namespaces","modules/clean/react/flows/redux/reducer"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoFolderOnboarding=t.getUserAutomations=t.getFlowsFolderRulesActionExperiments=t.hasFlowsDashboardAccess=t.getExpFlowsTrayPoC=t.getFolderRulesConfig=t.getAutomationsState=void 0,t.getAutomationsState=e=>e[o.AUTOMATIONS_NAMESPACE_KEY]||n.defaultAutomationsState,t.getFolderRulesConfig=e=>{const{folderRulesConfig:o}=t.getAutomationsState(e);return"completed"===o.status?o.data:[]},t.getExpFlowsTrayPoC=e=>{const{folderRulesConfig:o}=t.getAutomationsState(e);return"completed"===o.status?o.expFlowsTrayPoC:void 0},t.hasFlowsDashboardAccess=e=>{const{folderRulesConfig:o}=t.getAutomationsState(e);return"completed"===o.status&&o.hasDashboardAccess},t.getFlowsFolderRulesActionExperiments=e=>{const{folderRulesConfig:o}=t.getAutomationsState(e);return"completed"===o.status&&o.actionExperiments||[]},t.getUserAutomations=e=>{const{userAutomations:o}=t.getAutomationsState(e);return"completed"===o.status&&o.data?o.data:[]},t.getAutoFolderOnboarding=e=>t.getAutomationsState(e).autoFolderOnboarding})),define("modules/clean/react/flows/utils/api_helpers",["require","exports","tslib","modules/clean/react/flows/lib/api","modules/clean/react/flows/types"],(function(e,t,o,n,a){"use strict";function s(e,t){switch(e){case"pdf_conversion":return Object.assign({".tag":"pdf_conversion"},t);case"unzip":return Object.assign({".tag":"unzip"},t);case"tag":return Object.assign({".tag":"tag"},t);case"smart_subfolders":return Object.assign({".tag":"smart_subfolders"},t);case"image_conversion":return Object.assign({".tag":"image_conversion"},t);case"video_conversion":return Object.assign({".tag":"video_conversion"},t);case"tidy_up":return Object.assign({".tag":"tidy_up"},t);case"naming_conventions":return Object.assign({".tag":"naming_conventions"},t);case"audio_conversion":return Object.assign({".tag":"audio_conversion"},t);default:throw new Error(`Undefined .tag ${e}`)}}function i(e,t,o){return{enabled:t,action:{action:s(e,o)}}}function r(e,t,o){return{rules:[i(e,t,o)]}}Object.defineProperty(t,"__esModule",{value:!0}),t.removeFolderRule=t.updateFolderRule=t.makeFolderRuleSet=t.makeFolderRule=t.getFolderActionTag=t.RULE_TYPE_TO_APIV2_TAG=t.APIV2_TAG_TO_RULE_TYPE=void 0,n=o.__importStar(n),t.APIV2_TAG_TO_RULE_TYPE={other:a.FlowsRuleType.None,pdf_conversion:a.FlowsRuleType.AutoPDF,tag:a.FlowsRuleType.AutoTag,unzip:a.FlowsRuleType.AutoUnzip,smart_subfolders:a.FlowsRuleType.AutoSmartSubfolders,image_conversion:a.FlowsRuleType.AutoImage,video_conversion:a.FlowsRuleType.AutoVideo,tidy_up:a.FlowsRuleType.AutoTidyUp,naming_conventions:a.FlowsRuleType.AutoNamingConventions,audio_conversion:a.FlowsRuleType.AutoAudio,email_ingest:a.FlowsRuleType.EmailIngest},t.RULE_TYPE_TO_APIV2_TAG={[a.FlowsRuleType.None]:void 0,[a.FlowsRuleType.AutoPDF]:"pdf_conversion",[a.FlowsRuleType.AutoUnzip]:"unzip",[a.FlowsRuleType.AutoTag]:"tag",[a.FlowsRuleType.AutoSmartSubfolders]:"smart_subfolders",[a.FlowsRuleType.AutoImage]:"image_conversion",[a.FlowsRuleType.AutoVideo]:"video_conversion",[a.FlowsRuleType.AutoTidyUp]:"tidy_up",[a.FlowsRuleType.AutoNamingConventions]:"naming_conventions",[a.FlowsRuleType.AutoAudio]:"audio_conversion",[a.FlowsRuleType.EmailIngest]:"email_ingest"},t.getFolderActionTag=s,t.makeFolderRule=i,t.makeFolderRuleSet=r,t.updateFolderRule=function(e,t,a,s,i){return o.__awaiter(this,void 0,void 0,(function*(){switch(t){case"pdf_conversion":case"tag":case"unzip":case"smart_subfolders":case"image_conversion":case"video_conversion":case"tidy_up":case"naming_conventions":case"audio_conversion":return n.updateFolderRules(e,r(t,a,s),i);default:throw new Error(`Undefined .tag ${t}`)}}))},t.removeFolderRule=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){switch(t){case"pdf_conversion":case"tag":case"unzip":case"smart_subfolders":case"image_conversion":case"video_conversion":case"tidy_up":case"naming_conventions":case"audio_conversion":return n.removeFolderRules(e,r(t,!1,void 0));default:throw new Error(`Undefined .tag ${t}`)}}))}})),define("modules/clean/react/flows/utils/folder_rules",["require","exports","tslib","react","modules/clean/react/components/modal","modules/core/i18n","react-intl","modules/clean/react/flows/redux/actions","modules/clean/react/browse/data/store","react-redux","modules/clean/react/flows/components/modals/create_file_name_modal","modules/clean/react/flows/redux/store"],(function(e,t,o,n,a,s,i,r,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLaunchAddOrEditAutoFolderModal=t.asyncLaunchUnifiedAutomationEditModal=t.asyncLaunchUnifiedAutomationAddModal=t.asyncLaunchCreateAutoFolderModalFromHome=t.asyncLaunchUnifiedAutomationCreateModal=t.launchArchiveNameModal=void 0,n=o.__importDefault(n),t.launchArchiveNameModal=function(e,t,o,r){a.Modal.showInstance(n.default.createElement(c.Provider,{store:l.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(d.CreateFileNameModal,{action:e,files:t,user:o,context:r}))))},t.asyncLaunchUnifiedAutomationCreateModal=function(t,r){new Promise((t,o)=>{e(["modules/clean/react/flows/components/modals/browse_adapter"],t,o)}).then(o.__importStar).then(({BrowseCreateAutoFolderModal:e})=>{a.Modal.showInstance(n.default.createElement(c.Provider,{store:l.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(e,{parentFqPath:t,surface:"browse",user:r}))))})},t.asyncLaunchCreateAutoFolderModalFromHome=function(t){const d=l.getStoreForBrowse(),m=u.getStoreForAutomations();new Promise((t,o)=>{e(["modules/clean/react/flows/components/modals/browse_adapter"],t,o)}).then(o.__importStar).then(({BrowseCreateAutoFolderModal:e})=>{m.dispatch(r.getFolderRulesConfig("OFF")),a.Modal.showInstance(n.default.createElement(c.Provider,{store:d},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(e,Object.assign({},t,{surface:"home"})))))})},t.asyncLaunchUnifiedAutomationAddModal=function(t,r,d,u,m,f,g){new Promise((t,o)=>{e(["modules/clean/react/flows/components/modals/browse_adapter"],t,o)}).then(o.__importStar).then(({BrowseAddAutoFolderModal:e})=>{a.Modal.showInstance(n.default.createElement(c.Provider,{store:l.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(e,{currentFqPath:t,folderFqPath:r,user:d,nsId:u,automation:m,actionData:f,initialScreen:g}))))})},t.asyncLaunchUnifiedAutomationEditModal=function(t,r,d,u){return o.__awaiter(this,void 0,void 0,(function*(){const{getFolderRuleForFqPath:r,BrowseEditAutoFolderModal:m}=yield new Promise((t,o)=>{e(["modules/clean/react/flows/components/modals/browse_adapter"],t,o)}).then(o.__importStar),f=yield r(t);if(null!=(null==f?void 0:f.folderRule)&&null!=(null==f?void 0:f.actionTag)){const{folderRule:e,actionTag:o}=f;(function r(){a.Modal.showInstance(n.default.createElement(c.Provider,{store:l.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(m,{automation:o,folderRule:e,fqPath:t,onRetry:r,user:d,nsId:u}))))})()}}))},t.asyncLaunchAddOrEditAutoFolderModal=function({fqPath:t,nsId:r,user:d}){return o.__awaiter(this,void 0,void 0,(function*(){const{getFolderRuleForFqPath:u,BrowseAddAutoFolderModal:m,BrowseEditAutoFolderModal:f}=yield new Promise((t,o)=>{e(["modules/clean/react/flows/components/modals/browse_adapter"],t,o)}).then(o.__importStar),g=yield u(t);if(null!=(null==g?void 0:g.folderRule)&&null!=(null==g?void 0:g.actionTag)){const{folderRule:e,actionTag:o}=g;(function u(){a.Modal.showInstance(n.default.createElement(c.Provider,{store:l.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(f,{automation:o,folderRule:e,fqPath:t,onRetry:u,user:d,nsId:r}))))})()}else a.Modal.showInstance(n.default.createElement(c.Provider,{store:l.getStoreForBrowse()},n.default.createElement(i.RawIntlProvider,{value:s.intl},n.default.createElement(m,{currentFqPath:t,folderFqPath:t,user:d,nsId:r}))))}))}})),define("modules/clean/react/flows/utils/undo",["require","exports","tslib","modules/clean/react/flows/automations/snackbar","modules/core/i18n","modules/clean/react/flows/lib/api"],(function(e,t,o,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undo=void 0,s=o.__importStar(s);t.undo=function({creates:e,moves:t}){return o.__awaiter(this,void 0,void 0,(function*(){const{closeLabel:o,undoProgressLabel:i,undoSuccessLabel:r,undoFailLabel:l}={closeLabel:a.intl.formatMessage({id:"xB3cXP",defaultMessage:"Close"}),undoProgressLabel:e=>a.intl.formatMessage({id:"CdBI55",defaultMessage:"Undoing {count, plural, one {# change} other {# changes}}..."},{count:e}),undoSuccessLabel:e=>a.intl.formatMessage({id:"k+8Dk9",defaultMessage:"{count, plural, one {# change} other {# changes}} undone."},{count:e}),undoFailLabel:a.intl.formatMessage({id:"026V5B",defaultMessage:"Couldn't undo some changes."})},c=e.length+t.length;n.updateSnackbar({variant:"sync",title:i(c)});try{for(let o=0;o<c;o+=32){const n=o+32,a=t.slice(o,n),i=e.slice(Math.max(0,o-t.length),Math.max(0,n-t.length));yield s.undoActions(i,a)}n.updateSnackbar({variant:"complete",title:r(c),closeButtonText:o})}catch(e){n.updateSnackbar({variant:"fail",title:l,closeButtonText:o})}}))}})),define("modules/clean/react/naming_conventions/api_v2",["require","exports","tslib","api_v2/user_client","modules/clean/react/polling_util"],(function(e,t,o,n,a){"use strict";function s(e,t,n,s,i,r){return o.__awaiter(this,void 0,void 0,(function*(){const o=yield e.ns("naming_conventions").rpc("apply",{source_path:n,filename_suggestions:s,rules_struct:i,automation_toggled:r},{subjectUserId:t});return"complete"===o[".tag"]?{status:a.PollingStatus.COMPLETE,result:o}:"other"===o[".tag"]?{status:a.PollingStatus.ERROR,result:o}:{status:a.PollingStatus.IN_PROGRESS,result:o.async_job_id}}))}function i(e,t,n){return o.__awaiter(this,void 0,void 0,(function*(){const o=yield e.ns("naming_conventions").rpc("apply/check",{async_job_id:n},{subjectUserId:t});if("in_progress"===o[".tag"])return{status:a.PollingStatus.IN_PROGRESS,result:n};if("complete"===o[".tag"])return{status:a.PollingStatus.COMPLETE,result:o};if("failed"===o[".tag"])return{status:a.PollingStatus.ERROR,result:o.failed};throw new a.PollingUtilError("Unexpected Result")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.undo=t.snackbarDismissed=t.shouldShowSnackbar=t.previewWithRetries=t.getRules=t.preview=t._setTimeout=t.applyNamingConventions=t.pollForNamingConventionsApplyResponse=t.initialNamingConventionsApplyRequest=void 0,t.initialNamingConventionsApplyRequest=s,t.pollForNamingConventionsApplyResponse=i,t.applyNamingConventions=function(e,t,r,c,d){return o.__awaiter(this,void 0,void 0,(function*(){t=l(t);const u=new n.UserApiV2Client;return yield a.makePollingRequest(()=>o.__awaiter(this,void 0,void 0,(function*(){return s(u,e,t,r,c,d)})),t=>o.__awaiter(this,void 0,void 0,(function*(){return i(u,e,t)})))}))};t._setTimeout=window.setTimeout.bind(window);t.preview=(e,t,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){return t=l(t),(new n.UserApiV2Client).ns("naming_conventions").rpc("preview",{rules_struct:a,source_path:t},{subjectUserId:e})})),t.getRules=(e,t)=>o.__awaiter(void 0,void 0,void 0,(function*(){return t=l(t),(new n.UserApiV2Client).ns("naming_conventions").rpc("get_rules",{source_path:t},{subjectUserId:e})})),t.previewWithRetries=(e,n,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){return r(()=>t.preview(e,n,a)).catch(e=>e)}));const r=(e,n=2,a)=>o.__awaiter(void 0,void 0,void 0,(function*(){return 0===n?Promise.reject(a):e().catch(o=>{return(a=1e3,new Promise(e=>t._setTimeout(e,a))).then(()=>r(e,n-1,o));var a})}));t.shouldShowSnackbar=(e,t)=>o.__awaiter(void 0,void 0,void 0,(function*(){return(new n.UserApiV2Client).ns("naming_conventions").rpc("feature_discovery/should_show_snackbar",{snackbar_type:t},{subjectUserId:e})})),t.snackbarDismissed=e=>o.__awaiter(void 0,void 0,void 0,(function*(){return(new n.UserApiV2Client).ns("naming_conventions").rpc("feature_discovery/snackbar_dismissed",{reset_criteria:!1},{subjectUserId:e})})),t.undo=(e,t,a,s)=>o.__awaiter(void 0,void 0,void 0,(function*(){return t=l(t),(new n.UserApiV2Client).ns("naming_conventions").rpc("undo",{source_path:t,entries:a,rules_struct:s},{subjectUserId:e})}));const l=e=>"/"===e?"":e})),define("modules/clean/react/naming_conventions/components/nc_consistent_separator_selection_button",["require","exports","tslib","react","react-intl","modules/clean/react/naming_conventions/types","modules/clean/react/naming_conventions/components/nc_selection_button_with_selection","modules/core/i18n"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsConsistentSeparatorSelectionButton=void 0,n=o.__importStar(n);const l=a.defineMessage({id:"U595M8",defaultMessage:"Change separators to"}),c=a.defineMessage({id:"jyN4iF",defaultMessage:"Separate words with"}),d=a.defineMessage({id:"fNMZat",defaultMessage:"Spaces"}),u=a.defineMessage({id:"WlQ6fB",defaultMessage:"Underscores"}),m=a.defineMessage({id:"dxmlqa",defaultMessage:"Dashes"});t.NamingConventionsConsistentSeparatorSelectionButton=({isSelected:e,onSelect:t,separatorSelection:o,setSeparatorSelection:a,useSelectComponent:f})=>{const g=n.useMemo(()=>new Map([[s.ConsistentSeparatorSelection.spaces,r.intl.formatMessage(d)],[s.ConsistentSeparatorSelection.underscores,r.intl.formatMessage(u)],[s.ConsistentSeparatorSelection.dashes,r.intl.formatMessage(m)]]),[]);return n.default.createElement(i.NamingConventionsSelectionButtonWithSelection,{isSelected:e,onSelect:t,value:s.NamingConventionType.by_consistent_separators,label:f?r.intl.formatMessage(c):r.intl.formatMessage(l),optionsMapping:g,optionSelection:o,setOptionSelection:a,useSelectComponent:f})},t.NamingConventionsConsistentSeparatorSelectionButton.displayName="NamingConventionsConsistentSeparatorSelectionButton"})),define("modules/clean/react/naming_conventions/components/nc_date_selection_button",["require","exports","tslib","react","react-intl","modules/clean/react/naming_conventions/types","modules/clean/react/naming_conventions/components/nc_selection_button_with_selection","modules/core/i18n"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsDateSelectionButton=void 0,n=o.__importStar(n);const l=a.defineMessage({id:"Op7+fy",defaultMessage:"Start filenames with date"}),c=a.defineMessage({id:"kuIfCl",defaultMessage:"YYYY-MM"}),d=a.defineMessage({id:"Wo8t/x",defaultMessage:"YYYY-MM-DD"}),u=a.defineMessage({id:"dq2xhP",defaultMessage:"YYYYMMDD"}),m=a.defineMessage({id:"ASIht1",defaultMessage:"YYYY-Mon-DD"});t.NamingConventionsDateSelectionButton=({isSelected:e,onSelect:t,dateFormatSelection:o,setDateFormatSelection:a})=>{const f=n.useMemo(()=>new Map([[s.DateFormatSelection.yyyy_mm,r.intl.formatMessage(c)],[s.DateFormatSelection.yyyy_mm_dd,r.intl.formatMessage(d)],[s.DateFormatSelection.yyyy_abbr_dd,r.intl.formatMessage(m)],[s.DateFormatSelection.yyyymmdd,r.intl.formatMessage(u)]]),[]);return n.default.createElement(i.NamingConventionsSelectionButtonWithSelection,{isSelected:e,onSelect:t,value:s.NamingConventionType.by_date,label:r.intl.formatMessage(l),optionsMapping:f,optionSelection:o,setOptionSelection:a,useSelectComponent:!1})},t.NamingConventionsDateSelectionButton.displayName="NamingConventionsDateSelectionButton"})),define("modules/clean/react/naming_conventions/components/nc_generic_live_preview",["require","exports","tslib","react","dig-components/typography","react-intl","dig-components/icons/src","dig-components/icons","modules/core/i18n"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsGenericLivePreview=void 0,n=o.__importDefault(n);const c=s.defineMessage({id:"/f9BQ2",defaultMessage:"This is how your filenames will look"});t.NamingConventionsGenericLivePreview=({previewText:e,forModal2:t})=>t?n.default.createElement("div",{id:e,className:"naming-conventions__live-preview-container-2"},n.default.createElement(r.UIIcon,{className:"naming-conventions__live-preview-icon",src:i.FileLine}),n.default.createElement(a.Text,{monospace:!0},e)):n.default.createElement("div",{className:"naming-conventions__live-preview-section"},n.default.createElement(a.Text,{tagName:"label",htmlFor:e},l.intl.formatMessage(c)),n.default.createElement("div",{id:e,className:"naming-conventions__live-preview-container"},n.default.createElement(r.UIIcon,{className:"naming-conventions__live-preview-icon",src:i.FileLine}),n.default.createElement(a.Text,{monospace:!0},e))),t.NamingConventionsGenericLivePreview.displayName="NamingConventionsGenericLivePreview"})),define("modules/clean/react/naming_conventions/components/nc_ml_toggle",["require","exports","tslib","react","react-intl","modules/core/i18n","modules/clean/react/naming_conventions/components/nc_toggle_button"],(function(e,t,o,n,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsMLToggle=void 0,n=o.__importDefault(n);const r=a.defineMessage({id:"yqIarH",defaultMessage:"Intelligent file renaming"});t.NamingConventionsMLToggle=({isToggled:e,onSelect:t,value:o,disabled:a})=>n.default.createElement(i.NamingConventionsToggleButton,{isToggled:e,onSelect:t,value:o,disabled:a,label:s.intl.formatMessage(r)}),t.NamingConventionsMLToggle.displayName="NamingConventionsMLToggle"})),define("modules/clean/react/naming_conventions/components/nc_parent_folder_name_selection_button",["require","exports","tslib","react","react-intl","modules/clean/react/naming_conventions/types","modules/clean/react/naming_conventions/components/nc_selection_button","modules/core/i18n"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsParentFolderNameSelectionButton=void 0,n=o.__importDefault(n);const l=a.defineMessage({id:"JNB+YZ",defaultMessage:"Add parent folder name"});t.NamingConventionsParentFolderNameSelectionButton=({isSelected:e,onSelect:t})=>n.default.createElement(i.NamingConventionsSelectionButton,{isSelected:e,onSelect:t,value:s.NamingConventionType.by_parent_folder_name,label:r.intl.formatMessage(l)}),t.NamingConventionsParentFolderNameSelectionButton.displayName="NamingConventionsParentFolderNameSelectionButton"})),define("modules/clean/react/naming_conventions/components/nc_selection_button_with_selection",["require","exports","tslib","react","dig-components/controls","dig-components/typography","dig-components/chips","dig-components/menu","dig-components/text_fields","modules/clean/react/naming_conventions/types"],(function(e,t,o,n,a,s,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsSelectionButtonWithSelection=void 0,n=o.__importDefault(n),t.NamingConventionsSelectionButtonWithSelection=({isSelected:e,onSelect:t,value:o,label:d,optionsMapping:u,optionSelection:m,setOptionSelection:f,useSelectComponent:g})=>{const p=[];return u.forEach((e,t)=>{g?p.push(n.default.createElement(l.Select.Option,{value:t},e)):p.push(n.default.createElement(r.Menu.SelectItem,{key:t,value:t,selected:t===m},e))}),n.default.createElement("div",{className:"naming-conventions__checkbox-row",key:o},n.default.createElement(a.Checkbox,{id:o,value:o,checked:e,onChange:t,className:"naming-conventions__checkbox"}),n.default.createElement("span",{className:"naming-conventions__checkbox-label"},n.default.createElement(s.Text,{tagName:"label",htmlFor:o},d)),g?n.default.createElement("div",{className:"naming-conventions__separators-select-container"},n.default.createElement(l.Select,{id:"separators-select",value:m,onChange:e=>{f("underscores"===e?c.ConsistentSeparatorSelection.underscores:"dashes"===e?c.ConsistentSeparatorSelection.dashes:c.ConsistentSeparatorSelection.spaces)}},p)):n.default.createElement(r.Menu.Wrapper,{onSelection:e=>{f(e)},className:"naming-conventions__drop-down-container"},({getTriggerProps:e,getContentProps:t})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(i.FilterChip,Object.assign({withDropdownIcon:!0},e()),u.get(m)),n.default.createElement(r.Menu.Content,Object.assign({},t()),n.default.createElement(r.Menu.Segment,null,p)))))},t.NamingConventionsSelectionButtonWithSelection.displayName="NamingConventionsSelectionButtonWithSelection"})),define("modules/clean/react/naming_conventions/components/nc_selection_button",["require","exports","tslib","react","dig-components/controls","dig-components/typography"],(function(e,t,o,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsSelectionButton=void 0,n=o.__importDefault(n),t.NamingConventionsSelectionButton=({isSelected:e,onSelect:t,value:o,label:i})=>n.default.createElement("div",{className:"naming-conventions__checkbox-row",key:o},n.default.createElement(a.Checkbox,{id:o,value:o,checked:e,onChange:t,className:"naming-conventions__checkbox"}),n.default.createElement("span",{className:"naming-conventions__checkbox-label"},n.default.createElement(s.Text,{tagName:"label",htmlFor:o},i))),t.NamingConventionsSelectionButton.displayName="NamingConventionsSelectionButton"})),define("modules/clean/react/naming_conventions/components/nc_title_casing_selection_button",["require","exports","tslib","react","react-intl","modules/clean/react/naming_conventions/types","modules/clean/react/naming_conventions/components/nc_selection_button","modules/core/i18n"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsTitleCasingSelectionButton=void 0,n=o.__importDefault(n);const l=a.defineMessage({id:"vkhtzi",defaultMessage:"Capitalize initials"});t.NamingConventionsTitleCasingSelectionButton=({isSelected:e,onSelect:t})=>n.default.createElement(i.NamingConventionsSelectionButton,{isSelected:e,onSelect:t,value:s.NamingConventionType.by_title_casing,label:r.intl.formatMessage(l)}),t.NamingConventionsTitleCasingSelectionButton.displayName="NamingConventionsTitleCasingSelectionButton"})),define("modules/clean/react/naming_conventions/components/nc_toggle_button",["require","exports","tslib","react","dig-components/controls","dig-components/typography","react-intl","modules/core/i18n"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsToggleButton=void 0,n=o.__importDefault(n);const l=i.defineMessage({id:"ncTZKN",defaultMessage:"Learn More"});t.NamingConventionsToggleButton=({isToggled:e,onSelect:t,value:o,disabled:i,label:c,learnMoreLink:d})=>n.default.createElement("div",{className:"naming-conventions__toggle-row",key:o},n.default.createElement(a.Toggle,{id:o,isToggled:e,onChange:t,className:"naming-conventions__toggle-button",disabled:i}),n.default.createElement("span",{className:"naming-conventions__toggle-label"},n.default.createElement(s.Text,{tagName:"label",htmlFor:o},c),d?n.default.createElement(s.Link,{className:"naming-conventions__toggle-learn-more",href:d,target:"_blank",variant:"monochromatic",rel:"noreferrer"},r.intl.formatMessage(l)):null)),t.NamingConventionsToggleButton.displayName="NamingConventionsToggleButton"})),define("modules/clean/react/naming_conventions/generic_live_preview",["require","exports","modules/clean/react/naming_conventions/types","react-intl","modules/core/i18n"],(function(e,t,o,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericLivePreviewText2=t.getGenericLivePreviewText=void 0;const s=n.defineMessage({id:"pXtmWv",defaultMessage:"Example Folder"}),i=n.defineMessage({id:"VsyQFb",defaultMessage:"Example Filename.pdf"}),r=n.defineMessage({id:"2Dzzt5",defaultMessage:"example filename.pdf"}),l=n.defineMessage({id:"Twdm0+",defaultMessage:"keyword"}),c=new Map([[o.DateFormatSelection.yyyy_mm,"2021-11"],[o.DateFormatSelection.yyyy_mm_dd,"2021-11-02"],[o.DateFormatSelection.yyyy_abbr_dd,"2021-Nov-02"],[o.DateFormatSelection.yyyymmdd,"20211102"]]),d=new Map([[o.ConsistentSeparatorSelection.spaces," "],[o.ConsistentSeparatorSelection.underscores,"_"],[o.ConsistentSeparatorSelection.dashes,"-"]]);t.getGenericLivePreviewText=e=>{const{selectedRules:t,dateFormatSelection:n}=e;let i=u(e);return t.includes(o.NamingConventionType.by_parent_folder_name)&&(i=a.intl.formatMessage(s)+" - "+i),t.includes(o.NamingConventionType.by_date)&&(i=c.get(n)+" - "+i),i},t.getGenericLivePreviewText2=e=>"example filename.pdf";const u=e=>{const{selectedRules:t,consistentSeparatorSelection:n}=e;let s;if(s=t.includes(o.NamingConventionType.by_title_casing)?a.intl.formatMessage(i):a.intl.formatMessage(r),t.includes(o.NamingConventionType.by_keyword)){const e=s.split(".");s=e[0]+" "+a.intl.formatMessage(l)+"."+e[1]}if(t.includes(o.NamingConventionType.by_consistent_separators)){const e=d.get(n);s=s.replace(/\s/g,e)}return s}})),define("modules/clean/react/naming_conventions/utils",["require","exports","modules/clean/react/naming_conventions/types","lodash"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namingConventionsParametersEqual2=t.namingConventionsParametersEqual=t.NamingConventionConversions=void 0,t.NamingConventionConversions={NamingConventionToApiV2(e){const{selectedRules:n,dateFormatSelection:a,consistentSeparatorSelection:s,data:i}=e,r={};for(const e of n)switch(e){case o.NamingConventionType.by_date:r.start_with_date=t.NamingConventionConversions.dateFormatToApiV2(a);break;case o.NamingConventionType.by_title_casing:r.capitalize_all_initials={".tag":"capitalize_initials"};break;case o.NamingConventionType.by_consistent_separators:r.change_all_separators=t.NamingConventionConversions.consistentSeparatorToApiV2(s);break;case o.NamingConventionType.by_parent_folder_name:r.include_parent_folder_name={".tag":"prepend_parent_folder_name"};break;case o.NamingConventionType.by_keyword:r.end_with_keyword={".tag":"end_with_keyword"},i&&i.keyword&&(r.data||(r.data={}),r.data.keyword=i.keyword);break;default:throw new Error(`Invalid type for NamingConventionType selection! (value=${e})`)}return e.mlFilenameParsing&&(r.ml_filename={".tag":"ml_filename_parsing"}),r},dateFormatToApiV2(e){switch(e){case o.DateFormatSelection.yyyy_mm:return{".tag":"yyyy_mm"};case o.DateFormatSelection.yyyy_mm_dd:return{".tag":"yyyy_mm_dd"};case o.DateFormatSelection.yyyy_abbr_dd:return{".tag":"yyyy_abbr_dd"};case o.DateFormatSelection.yyyymmdd:return{".tag":"yyyymmdd"};default:return{".tag":"other"}}},consistentSeparatorToApiV2(e){switch(e){case o.ConsistentSeparatorSelection.spaces:return{".tag":"spaces"};case o.ConsistentSeparatorSelection.underscores:return{".tag":"underscores"};case o.ConsistentSeparatorSelection.dashes:return{".tag":"dashes"};default:return{".tag":"other"}}},NamingConventionFromApiV2(e){const n={},a=[];if(e.start_with_date&&(a.push(o.NamingConventionType.by_date),n.dateFormatSelection=t.NamingConventionConversions.dateFormatFromApiv2(e.start_with_date)),e.capitalize_all_initials&&"capitalize_initials"===e.capitalize_all_initials[".tag"]&&a.push(o.NamingConventionType.by_title_casing),e.change_all_separators&&(a.push(o.NamingConventionType.by_consistent_separators),n.consistentSeparatorSelection=t.NamingConventionConversions.consistentSeparatorFromApiV2(e.change_all_separators)),e.include_parent_folder_name&&"prepend_parent_folder_name"===e.include_parent_folder_name[".tag"]&&a.push(o.NamingConventionType.by_parent_folder_name),n.mlFilenameParsing=!(!e.ml_filename||"ml_filename_parsing"!==e.ml_filename[".tag"]),e.end_with_keyword&&"end_with_keyword"===e.end_with_keyword[".tag"]&&(a.push(o.NamingConventionType.by_keyword),e.data&&e.data.keyword)){const t={keyword:e.data.keyword};n.data=t}return n.selectedRules=a,n},NamingConventionsParametersFromRuleStruct(e){const n={},a=[];let s=o.defaultNamingConventionsParametersData;return e.component_list.forEach(e=>{switch(e[".tag"]){case"date":a.push(o.NamingConventionType.by_date),s=Object.assign(Object.assign({},s),{uploadDateInfo:{dateFormatSelection:t.NamingConventionConversions.dateFormatFromApiv2(e.date_format),mlFilenameParsing:e.ml_identification}});break;case"parent_folder_name":a.push(o.NamingConventionType.by_parent_folder_name);break;case"keyword":a.push(o.NamingConventionType.by_keyword),s=Object.assign(Object.assign({},s),{keyword:e.keyword});break;case"original_snippet":a.push(o.NamingConventionType.original_snippet)}}),e.capitalize_all_initials&&"capitalize_all_initials"===e.capitalize_all_initials[".tag"]&&(n.capitalizeAllInitials=!0),e.change_all_separators&&(n.changeAllSeparators=!0,s=Object.assign(Object.assign({},s),{consistentSeparatorSelection:t.NamingConventionConversions.consistentSeparatorFromApiV2(e.change_all_separators)})),n.componentList=a,n.data=s,n},dateFormatFromApiv2(e){switch(e[".tag"]){case"yyyy_mm":return o.DateFormatSelection.yyyy_mm;case"yyyy_mm_dd":return o.DateFormatSelection.yyyy_mm_dd;case"yyyy_abbr_dd":return o.DateFormatSelection.yyyy_abbr_dd;case"yyyymmdd":return o.DateFormatSelection.yyyymmdd;default:return o.DateFormatSelection.yyyy_mm_dd}},consistentSeparatorFromApiV2(e){switch(e[".tag"]){case"spaces":return o.ConsistentSeparatorSelection.spaces;case"underscores":return o.ConsistentSeparatorSelection.underscores;case"dashes":return o.ConsistentSeparatorSelection.dashes;default:return o.ConsistentSeparatorSelection.spaces}}},t.namingConventionsParametersEqual=(e,t)=>n.isEqual(e.selectedRules,t.selectedRules)&&n.isEqual(e.data,t.data)&&e.dateFormatSelection===t.dateFormatSelection&&e.consistentSeparatorSelection===t.consistentSeparatorSelection&&e.mlFilenameParsing===t.mlFilenameParsing,t.namingConventionsParametersEqual2=(e,t)=>n.isEqual(e.componentList,t.componentList)&&e.capitalizeAllInitials===t.capitalizeAllInitials&&e.changeAllSeparators===t.changeAllSeparators&&n.isEqual(e.data,t.data)})),define("modules/clean/react/polling_util",["require","exports","tslib"],(function(e,t,o){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.makePollingRequest=t.PollingUtilError=t.PollingStatus=void 0,(function(e){e[e.IN_PROGRESS=0]="IN_PROGRESS",e[e.COMPLETE=1]="COMPLETE",e[e.ERROR=2]="ERROR"})(n=t.PollingStatus||(t.PollingStatus={}));class a extends Error{constructor(e){super(e),this.name="PollingUtilError"}}t.PollingUtilError=a;t.makePollingRequest=function(e,t,a=1e3){var s;return o.__awaiter(this,void 0,void 0,(function*(){try{const o=yield e();if(o.status===n.COMPLETE)return{isError:!1,result:o.result};if(o.status===n.ERROR)return{isError:!0,error:o.result,error_summary:"default_error"};let s=1,i=void 0;do{s=s>=8?1:2*s,yield new Promise(e=>setTimeout(e,a*s)),i=yield t(o.result)}while(i.status===n.IN_PROGRESS);return i.status===n.COMPLETE?{isError:!1,result:i.result}:{isError:!0,error:i.result,error_summary:"default_error"}}catch(e){return(null===(s=null==e?void 0:e.error)||void 0===s?void 0:s[".tag"])?{isError:!0,error:e.error,error_summary:e.summary}:{isError:!0,error:{".tag":"undefined_error"},error_summary:"undefined_error"}}}))}})),define("modules/clean/react/tagging/components/auto_tagging_typeahead",["require","exports","tslib","react","modules/core/i18n","modules/clean/tagging/components/tags_container","modules/clean/tagging/components/tags_search","modules/clean/react/components/css","modules/clean/tagging/utils"],(function(e,t,o,n,a,s,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTaggingTypeahead=void 0,n=o.__importStar(n);const c=({user:e,data:t,onDataChange:o,onDataError:a})=>{const[r,c]=n.useState((null==t?void 0:t.tags)||[]);n.useEffect(()=>{o({tags:r}),0===r.length&&a()},[r]),n.useEffect(()=>{(null==t?void 0:t.tags)&&c(t.tags)},[t]);return n.createElement(n.Fragment,null,n.createElement(i.TagsSearch,{user:e,maxTagsReached:r.length>=5,getStrings:d,excludeResults:r,onSelection:e=>{r.includes(e)||c([e,...r])}}),n.createElement(s.TagsContainer,{tags:l.textTagsToUserGeneratedTags(r),onTagDelete:e=>{c(r.filter(t=>t!==e.tag_text))},containerClassName:"tags-container",chipClassName:"tag-chip",showMoreClassName:"tag-chip"}))};function d(){return{addTypeaheadEmptyState:a.intl.formatMessage({id:"tOzwXq",defaultMessage:"Use words that will help you or teammates find the files in this folder"}),maxTagsReachedError:a.intl.formatMessage({id:"umQAUu",defaultMessage:"5 tags is the maximum per automation. Remove existing tags to add new tags."}),addTag:a.intl.formatMessage({id:"m6+B0R",defaultMessage:"Add a tag"}),tagsInfo:a.intl.formatMessage({id:"coaiAD",defaultMessage:"Choose carefully! Anyone on your team can see tags. People who can edit the file can edit tags, too."}),alreadyExistsError:a.intl.formatMessage({id:"370uDs",defaultMessage:"That tag’s already selected"}),invalidCharsError:a.intl.formatMessage({id:"USd6JI",defaultMessage:"Use letters (a-z), numbers (0-9), and underscores ( _ )"}),tooLongError:a.intl.formatMessage({id:"l83VsE",defaultMessage:"32 characters is the maximum"})}}c.displayName="AutoTaggingTypeaheadWithoutCss",t.AutoTaggingTypeahead=r.requireCssWithComponent(c,["/static/js/organized-content/index.web-vfly_JRjx.css"])})),define("modules/clean/tagging/components/tags_search",["require","exports","tslib","react","react-redux","ts-key-enum","dig-components/icons","dig-components/icons/src","dig-components/text_fields","dig-components/tooltips","dig-components/typeahead","dig-components/typography","modules/clean/react/components/css","modules/clean/tagging/utils","modules/clean/tagging/data/selectors/index","modules/clean/tagging/data/action_creators","modules/clean/tagging/utils"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m,f,g,p,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TagsSearch=t.TagsSearchWithoutCss=void 0,n=o.__importStar(n),f=o.__importStar(f);const v=({placeholderText:e})=>n.createElement("div",{className:"tg-empty-state"},n.createElement(u.Text,{variant:"label",size:"small",color:"faint",tagName:"p"},e));v.displayName="EmptyState";const A=e=>{var{disabled:t,children:a}=e,s=o.__rest(e,["disabled","children"]);return t?n.createElement(n.Fragment,null,a):n.createElement(c.Tooltip,Object.assign({},s),a)};A.displayName="Tooltip";const y=({hasFocus:e})=>n.createElement(u.Text,{size:"small",color:e?"standard":"faint",className:"tg-input-hashtag-accessory"},"#");y.displayName="LeftAccessory",t.TagsSearchWithoutCss=({user:e,maxTagsReached:t,readOnly:o=!1,excludeResults:c,onSelection:m,onInputFocus:S,onStartTyping:T,onInputBlur:b,getStrings:M})=>{const[E,w]=n.useState(""),[h,C]=n.useState([]),[O,F]=n.useState(!1),N=a.useDispatch(),I=a.useSelector(g.selectAllTagsSuggestions),{addTypeaheadEmptyState:U,createTagPrefix:P,addTag:R,invalidCharsError:D,maxTagsReachedError:x,tooLongError:k,alreadyExistsError:L,readOnlyError:j}=M();n.useEffect(()=>{N(p.fetchAllTagsSuggestions({user:e}))},[]),n.useEffect(()=>{const e=E.toLowerCase();if(V(e)||void 0===I)return void C([]);const t=f.trimHashtags(e),o=f.getTagsSuggestions(t,I).filter(_.isUserGeneratedTag).map(e=>e.tag_text).filter(e=>!c.includes(e));C(o)},[E,I,c]);const B=e=>n.createElement(d.Typeahead.Row,{key:`@${e}`,id:`@${e}`,value:e,withTitle:n.createElement(u.Text,{size:"small"},f.formatTag(e))}),q=e=>n.createElement(d.Typeahead.Row,{key:e,value:e,withTitle:P?n.createElement(u.Text,{size:"small"},P+" ",n.createElement(u.Text,{size:"small",isBold:!0},f.formatTag(e))):n.createElement(u.Text,{size:"small"},f.formatTag(e)),id:e}),V=e=>!(/^\#*[_a-zA-Z0-9]+$/i.test(e)&&e.length<=32||/^\#*$/i.test(e)),z=({currentTarget:{value:e}})=>{0===E.length&&1===e.length&&(null==T||T()),w(e)},G=t?x:o?j:void 0,W=E.toLowerCase(),H=f.trimHashtags(W),X=""!==H&&0===h.length&&c.includes(H),Y=V(W)||X,K=Y||c.includes(H)||h.includes(H)||""===H?[]:[W],Q=o||t;return n.createElement(d.Typeahead.Wrapper,{onSelection:e=>{w(""),m(e)},onFocus:()=>{null==S||S(),F(!0)},onBlur:()=>{null==b||b(E),F(!1)},className:"tg-search"},({getTriggerProps:e,getContentProps:t,closeMenu:o})=>n.createElement(n.Fragment,null,n.createElement(A,{disabled:!Q,id:"more-button-tooltip",title:G},n.createElement(l.TextInput,Object.assign({id:"trigger"},e({onChange:z}),{value:E,"aria-label":R,placeholder:R,disabled:Q,withLeftAccessory:n.createElement(y,{hasFocus:O||E.length>0}),autoComplete:"off",isInvalid:Y,className:"tg-input tg-input-small-font-override",onKeyDown:e=>((e,t)=>{if(e.key===s.Key.Enter&&""!==E){if(V(E)||c.includes(H))return;const e=f.trimHashtags(E).toLowerCase();m(e),w(""),t({})}})(e,o)}))),Y&&n.createElement(l.FormHelperText,{isInvalid:!0,id:"bad-parms-input-helper"},n.createElement(i.UIIcon,{src:r.FailLine,size:"small"}),E.length>=32?k:X?L:D),n.createElement(d.Typeahead.Container,Object.assign({},t(),{auto:!1,isEmptyQuery:0===E.length,placement:"bottom-start",emptyState:n.createElement(v,{placeholderText:U})}),n.createElement(d.Typeahead.Results,{results:h.slice(0,3),renderRow:B}),n.createElement(d.Typeahead.Results,{results:K,renderRow:q}))))},t.TagsSearchWithoutCss.displayName="TagsSearchWithoutCss",t.TagsSearch=m.requireCssWithComponent(t.TagsSearchWithoutCss,["/static/css/tagging/manual_tagging-vflrX3nPg.css"])})),define("typescript/component_libraries/flows/src/common/constants",["require","exports"],(function(e,t){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.FOLDER_NAME_MAX_LENGTH=t.FEEDBACK_FORM_MAX_COMMENT_LENGTH=t.LINK=t.LEARN_MORE_LINKS=t.TestTarget=void 0,(o=t.TestTarget||(t.TestTarget={})).ADD_FOLDER_RULES_MODAL="flows-add-folder-rules-modal",o.ADD_FOLDER_RULES_MODAL_CANCEL="flows-add-folder-rules-modal-cancel",o.ADD_FOLDER_RULES_MODAL_CONFIRM="flows-add-folder-rules-modal-confirm",o.ADD_FOLDER_RULES_MODAL_FOLDER_NAME_INPUT="flows-add-folder-rules-modal-folder-name-input",o.ADD_FOLDER_RULES_MODAL_SUGGESTION_LINK="flows-add-folder-rules-modal-suggestion-link",o.AUTOMATED_FOLDER_MODAL="flows-folder-automation-modal",o.AUTOMATED_FOLDER_MODAL_CANCEL="flows-folder-automation-modal-cancel",o.AUTOMATED_FOLDER_MODAL_INVALID_NAME="flows-folder-automation-modal-invalid-name",o.AUTOMATED_FOLDER_MODAL_NEXT="flows-folder-automation-modal-next",o.AUTOMATED_FOLDER_MODAL_NEXT_CONTAINER="flows-folder-automation-modal-next_container",o.AUTOMATED_FOLDER_MODAL_NEXT_DISABLED_TOOLTIP="flows-folder-automation-modal-next-tooltip",o.AUTOMATED_FOLDER_MODAL_BACK="flows-folder-automation-modal-back",o.AUTOMATED_FOLDER_MODAL_SUBMIT="flows-folder-automation-modal-submit",o.FILE_CONVERSION_INPUT_TYPE_SELECT="flows-file-conversion-input-type-select",o.FILE_CONVERSION_FORMAT_SELECT="flows-file-conversion-format-select",o.FOLDER_RULES_SETTINGS_MODAL="flows-folder-rules-settings-modal",o.FOLDER_RULES_SETTINGS_MODAL_CANCEL="flows-folder-rules-settings-modal-cancel",o.FOLDER_RULES_SETTINGS_MODAL_MENU="flows-folder-rules-settings-modal-menu",o.FOLDER_RULES_SETTINGS_MODAL_CHANGE_TO_BASIC="flows-folder-rules-settings-modal-change-to-basic",o.FOLDER_RULES_SETTINGS_MODAL_TOGGLE_RULE="flows-folder-rules-settings-modal-toggle-rule",o.FOLDER_RULES_SETTINGS_MODAL_TOGGLE_PDF="flows-folder-rules-settings-modal-toggle-pdf",o.FREEFORM_FEEDBACK_MODAL="freeform-feedback-modal",o.FREEFORM_FEEDBACK_MODAL_SUBMIT="freeform-feedback-modal-submit",o.FREEFORM_FEEDBACK_MODAL_CLOSE="freeform-feedback-modal-close",o.FREEFORM_FEEDBACK_MODAL_FEEDBACK_INPUT="freeform-feedback-modal-feedback-input",o.FLOWS_BADGE_TOOLTIP="flows-badge-tooltip",o.FLOWS_BADGE="flows-badge",o.AUTOMATED_FOLDER_TOGGLE_TEXT="flows-folder-automation-toggle-text",o.DASHBOARD_OVERVIEW_VIDEO_THUMBNAIL="flows-dashboard-overview-video-thumbnail",o.DASHBOARD_OVERVIEW_VIDEO_LIGHTBOX="flows-dashboard-overview-video-lightbox",o.VIDEO_TO_GIF_MODAL_CLOSE="flows-video-to-gif-modal-close",o.VIDEO_TO_GIF_MODAL_SUBMIT="flows-video-to-gif-modal-submit",o.VIDEO_TO_GIF_TITLE="flows-video-to-gif-modal-title",(t.LEARN_MORE_LINKS||(t.LEARN_MORE_LINKS={})).ABOUT_FOLDER_RULES="https://help.dropbox.com",(t.LINK||(t.LINK={})).SUPPORT="/support",t.FEEDBACK_FORM_MAX_COMMENT_LENGTH=5e3,t.FOLDER_NAME_MAX_LENGTH=255})),define("typescript/component_libraries/flows/src/components/icon-row/index",["require","exports","tslib","classnames","dig-components/icons","dig-components/icons/src","dig-components/typography","react","react-intl","typescript/component_libraries/flows/src/components/select-menu/index","typescript/component_libraries/flows/src/common/constants","dig-components/controls","dig-components/icons/src"],(function(e,t,o,n,a,s,i,r,l,c,d,u,m){"use strict";function f(){const e=l.useIntl();return{supportedFileTypesLabel:e.formatMessage({id:"JgIvka",defaultMessage:"Supported file types"}),fileTypesLabel:e.formatMessage({id:"Y6lIn/",defaultMessage:"File types"}),allSupportedTypesLabel:e.formatMessage({id:"5j9iTj",defaultMessage:"All supported file types"}),noTypesSelectedLabel:e.formatMessage({id:"F+DhKQ",defaultMessage:"Select at least one file type"}),fewTypesSelectedLabel:t=>e.formatList(t,{style:"narrow"}),manyTypesSelectedLabel:t=>e.formatMessage({id:"uSeDCB",defaultMessage:"{type1}, {type2}, {type3}, and {count, plural, one {# other} other {# others}}"},{type1:t[0],type2:t[1],type3:t[2],count:t.length-3}),applyToExistingFilesLabel:e.formatMessage({id:"tV6YXS",defaultMessage:"Apply to current files"}),filetypeErrorTooltipLabel:e.formatMessage({id:"lbcHxV",defaultMessage:"Select a different input or output file type"})}}Object.defineProperty(t,"__esModule",{value:!0}),t.ActionRow=t.ApplyToExistingFilesCheckbox=t.SupportedFileTypes=t.OutputTypeControls=t.InputTypeControls=t.TriggerRow=t.Connector=t.IconRow=void 0,n=o.__importDefault(n),r=o.__importDefault(r),t.IconRow=({children:e,className:t,icon:o})=>r.default.createElement("div",{className:n.default("flows-icon-row",t)},r.default.createElement("div",{className:"flows-icon-row__icon"},o),r.default.createElement("div",{className:"flows-icon-row__content"},e)),t.IconRow.displayName="IconRow",t.Connector=()=>r.default.createElement("div",{className:"flows-icon-row flows-icon-row--connector"},r.default.createElement(a.UIIcon,{src:s.ArrowDownLine})),t.Connector.displayName="Connector",t.TriggerRow=({action:e,actionControlProps:o,shouldRenderPseudoTriggerControls:n=!0,triggerComponent:s})=>{const{renderPseudoTriggerControls:i,allowApplyToExistingFiles:l}=e;return r.default.createElement(t.IconRow,{icon:r.default.createElement(a.UIIcon,{src:m.FolderLine})},s,n&&r.default.createElement(r.default.Fragment,null,i&&i(o),(null==l?void 0:l(o.source))&&r.default.createElement(t.ApplyToExistingFilesCheckbox,{checked:o.applyToExistingFiles,onToggle:o.setApplyToExistingFiles})))},t.TriggerRow.displayName="TriggerRow",t.InputTypeControls=({allInputTypes:e,selectedInputTypes:t,selectedOutputType:o,onSelect:n,onError:a})=>{const{fileTypesLabel:s,noTypesSelectedLabel:l,fewTypesSelectedLabel:u,manyTypesSelectedLabel:m,allSupportedTypesLabel:g,filetypeErrorTooltipLabel:p}=f();let _=null!=t?t:[];return 0===(null==t?void 0:t.length)&&(_=e),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{"data-testid":d.TestTarget.FILE_CONVERSION_INPUT_TYPE_SELECT},r.default.createElement(i.Text,null,s),r.default.createElement(c.MultiSelectMenu,{options:e.sort(),selected:_,onSelect:t=>{0===t.length?(n(void 0),a(l)):t.length===e.length?n([]):1===t.length&&o&&t.includes(o)?(n(t),a(p)):n(t)},getLabel:t=>t.length===e.length?g:t.length>4?m(t):t.length>0?u(t):l})))},t.InputTypeControls.displayName="InputTypeControls",t.OutputTypeControls=e=>{const{allOutputTypes:t,selectedInputTypes:o,selectedOutputType:n,onSelect:a,onError:s}=e,{filetypeErrorTooltipLabel:i,noTypesSelectedLabel:l}=f();return r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:"flows-icon-row__file-conversion-format-select","data-testid":d.TestTarget.FILE_CONVERSION_FORMAT_SELECT},r.default.createElement(c.SingleSelectMenu,{options:t,selected:null!=n?n:t[0],onSelect:e=>{a(e),o?1===o.length&&o.includes(e)&&s(i):s(l)},getLabel:e=>e})))},t.OutputTypeControls.displayName="OutputTypeControls",t.SupportedFileTypes=({content:e})=>{const{supportedFileTypesLabel:t}=f(),[o,n]=r.default.useState(!1);return r.default.createElement("div",{className:"flows-icon-row__file-types"},r.default.createElement("button",{"aria-controls":"supported-file-types","aria-expanded":o,className:"flows-icon-row__accordion",id:"supported-file-types-trigger",onClick:()=>{n(!o)}},r.default.createElement(i.Text,{isBold:!0,color:"faint",className:"flows-icon-row__accordion-content"},t,r.default.createElement(a.UIIcon,{src:o?s.ChevronUpLine:s.ChevronDownLine,size:"small"}))),r.default.createElement("div",{"aria-labelledby":"supported-file-types-trigger",id:"supported-file-types",role:"region"},o&&r.default.createElement(i.Text,{variant:"paragraph",tagName:"p",size:"small",color:"faint"},e)))},t.SupportedFileTypes.displayName="SupportedFileTypes",t.ApplyToExistingFilesCheckbox=({checked:e,onToggle:t})=>{const{applyToExistingFilesLabel:o}=f();return r.default.createElement("div",{className:"flows-icon-row__checkbox-row"},r.default.createElement(u.Checkbox,{"aria-label":o,id:"flows-apply-to-existing-files",checked:e,onClick:()=>t(!e)}),r.default.createElement("span",{className:"flows-icon-row__checkbox-label"},r.default.createElement(i.Text,{tagName:"label",htmlFor:"flows-apply-to-existing-files"},o)))},t.ApplyToExistingFilesCheckbox.displayName="ApplyToExistingFilesCheckbox",t.ActionRow=({action:e,actionControlProps:o})=>{const{description:n,icon:a,renderAdditionalControls:s}=e;return r.default.createElement(t.IconRow,{icon:a},n,s?s(o):null)},t.ActionRow.displayName="ActionRow"})),define("typescript/component_libraries/flows/src/components/select-menu/index",["require","exports","tslib","react","react-intl","dig-components/menu","dig-components/buttons","dig-components/controls"],(function(e,t,o,n,a,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SingleSelectMenu=t.MultiSelectMenu=void 0,n=o.__importDefault(n),t.MultiSelectMenu=e=>{const{options:t,selected:o,onSelect:l,getLabel:c}=e,{selectAllLabel:d,deselectAllLabel:u}=(function(){const e=a.useIntl();return{selectAllLabel:e.formatMessage({id:"1/cL7w",defaultMessage:"Select all"}),deselectAllLabel:e.formatMessage({id:"VwtAk4",defaultMessage:"Deselect all"})}})(),m=o.length===t.length,f=()=>{l(m?[]:t)};return n.default.createElement(s.Menu.Wrapper,{closeOnSelection:!1,matchContainingWidth:!0,onSelection:e=>{const t=-1===o.indexOf(e)?o.concat(e):o.filter(t=>t!==e);l(t)},className:"flows-select-menu__wrapper"},({getContentProps:e,getTriggerProps:a})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(i.Button,Object.assign({},a(),{variant:"outline",className:"flows-select-menu__trigger",withDropdownIcon:!0}),c(o)),n.default.createElement(s.Menu.Content,Object.assign({className:"flows-select-menu__content"},e()),n.default.createElement(s.Menu.Segment,{withLabel:n.default.createElement(n.default.Fragment,null,n.default.createElement(i.Button,{size:"small",variant:"transparent",onClick:f},m?u:d))},t.map(e=>n.default.createElement(s.Menu.ActionItem,{key:e,value:e,role:"menuitemcheckbox","aria-checked":-1!==o.indexOf(e),withLeftAccessory:n.default.createElement(r.Checkbox,{checked:-1!==o.indexOf(e),readOnly:!0,tabIndex:-1})},e))))))},t.MultiSelectMenu.displayName="MultiSelectMenu",t.SingleSelectMenu=e=>{const{options:t,selected:o,onSelect:a,getLabel:r}=e;return n.default.createElement(s.Menu.Wrapper,{className:"flows-select-menu__wrapper",matchContainingWidth:!0,onSelection:a},({getContentProps:e,getTriggerProps:a})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(i.Button,Object.assign({},a(),{className:"flows-select-menu__trigger",variant:"outline",withDropdownIcon:!0}),r(o)),n.default.createElement(s.Menu.Content,Object.assign({className:"flows-select-menu__content"},e(),{placement:"bottom-end"}),n.default.createElement(s.Menu.Segment,null,t.map(e=>n.default.createElement(s.Menu.SelectItem,{key:e,value:e,selected:o===e},e))))))},t.SingleSelectMenu.displayName="SingleSelectMenu"})),define("typescript/component_libraries/flows/src/components/spacer/index",["require","exports","tslib","react"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spacer=void 0,n=o.__importDefault(n);t.Spacer=({multiplier:e=1})=>n.default.createElement("div",{style:{height:8*e,width:8*e}})}));
//# sourceMappingURL=pkg-flows.min.js-vflgRtNwP.map
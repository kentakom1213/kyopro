define("modules/clean/abuse/captcha_helper",["require","exports","tslib","modules/constants/login_and_register","modules/constants/page_load","modules/clean/web_timing_logger","modules/core/assert","modules/core/exception","modules/core/uri"],(function(e,t,s,a,o,r,i,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUMMY_RESPONSE=t.BuildRecaptchaURI=t.isTest=t.LoadRecaptcha=t.ClearCaptchaPromise=t.HasCaptchaLoaded=t.captchaPromise=void 0,a=s.__importStar(a),n=s.__importStar(n);let c=!1;function u(){const e={onload:"recaptchaOnloadCallback",render:"explicit",hl:o.USER_LOCALE.replace("_","-")};return new l.URI({scheme:"https",authority:"www.google.com",path:"/recaptcha/api.js",query:e}).toString()}function p(){return new Promise((o,r)=>{if(window.recaptchaOnloadCallback=function(){o(window.grecaptcha)},a.SHOULD_LOAD_FUNCAPTCHA&&c&&new Promise((t,s)=>{e(["modules/clean/abuse/funcaptcha_modal"],t,s)}).then(s.__importStar).then(({loadFuncaptchaModal:e,recordFunCaptchaLoadingStats:t})=>{const s=performance.now();let a,o="",r=!1;try{e(),r=!0}catch(e){o=e.message}finally{a=performance.now()}t("funcaptcha_modal_loading",a-s,r,o)}),t.isTest())o(f);else{const e=document.createElement("script"),t=u();e.setAttribute("src",t);const s=window.CSP_SCRIPT_NONCE;if(!s)return n.reportException({err:new Error("CSP nonce not set"),severity:n.SEVERITY.CRITICAL,tags:["product-safety-infra","recaptcha"]}),void r();e.setAttribute("nonce",s),document.body.appendChild(e)}})}t.HasCaptchaLoaded=function(){return null!=t.captchaPromise},t.ClearCaptchaPromise=function(){t.captchaPromise=null},t.LoadRecaptcha=function(e,s){return void 0!==s&&(c=s),t.captchaPromise||(t.captchaPromise=e?new Promise((e,t)=>{r.waitForTTI().then(e),setTimeout(e,2500)}).then(p):p()),t.captchaPromise},t.isTest=()=>a.IS_SELENIUM_TEST,t.BuildRecaptchaURI=u;const d={},m={};let g=0;t.DUMMY_RESPONSE="DUMMY-RESPONSE";const h=e=>{e.setAttribute("class","g-recaptcha-response"),e.setAttribute("name","g-recaptcha-response"),e.value=""},f={reset(e){const t=m[e].querySelector(".g-recaptcha-response");return h(t),!0},render(e,s,a){const o=g;g+=1,i.assert(null==e.querySelector(".g-recaptcha-response"),"can't render multiple recaptcha elements in same div");const r=document.createElement("textarea");return r.id=`g-recaptcha-response-${o}`,h(r),e.appendChild(r),m[o]=e,d[o]=()=>{const e=t.DUMMY_RESPONSE;return r.value=e,s.callback&&s.callback(e),e},o},execute:e=>Promise.resolve(d[e]())}})),define("modules/clean/auth/common/captcha",["require","exports","tslib","classnames","react","modules/clean/react/components/css","modules/clean/abuse/captcha_helper"],(function(e,t,s,a,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Captcha=t.CaptchaComponent=t.clear_captcha_response=t.handle_captcha_errors=t.get_captcha_responses=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.get_captcha_responses=function(e){const t=e.getWrappedComponent();return{"g-recaptcha-response":t.recaptcha_response,"funcaptcha-response":t.funcaptcha_response}},t.handle_captcha_errors=function(e,t,s){return e.getWrappedComponent().handle_captcha_errors(t,s)},t.clear_captcha_response=function(e){return e.getWrappedComponent().clear_captcha_response()};class n extends o.default.Component{constructor(e){super(e)}handle_captcha_errors(t,a){return!(!t||!t.funcaptcha_response)&&(new Promise((t,s)=>{e(["modules/clean/abuse/funcaptcha_modal"],t,s)}).then(s.__importStar).then(({openFuncaptchaModal:e})=>{e(this.props.email||"",a||this.props.source,e=>{this.funcaptcha_response=e,this.props.onSubmit()},this.props.onReady)}),!0)}clear_captcha_response(){this.funcaptcha_response=void 0}componentDidMount(){i.LoadRecaptcha(void 0,!0)}render(){return o.default.createElement("div",{ref:"container_div",className:a.default({"recaptcha-v2-challenge-container":!0,"recaptcha-v2-challenge-container--invisible":!0})},o.default.createElement("div",{ref:"captcha_div",className:"recaptcha_v2_challenge"}))}submit(){this.clear_captcha_response(),this.props.onSubmit()}}t.CaptchaComponent=n,n.displayName="CaptchaComponent",t.Captcha=r.requireCssWithComponent(n,["/static/css/recaptcha-vflIN6j39.css"])})),define("modules/clean/auth/common/utils",["require","exports","tslib","modules/clean/auth/login/types","modules/clean/auth/register/types","modules/constants/page_load","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/form_util/name_parser","modules/clean/marketing_tracker"],(function(e,t,s,a,o,r,i,n,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pushMarketingEvent=t.notifyCaptchaNotLoaded=t.twoFactorRecoveryUrl=t.getFormattedName=t.lastNameGoesFirst=t.generateId=void 0,c=s.__importDefault(c),t.generateId=e=>e+Math.random().toString().slice(2);const p=["ja","ko","zh"];t.lastNameGoesFirst=()=>p.includes(r.USER_LOCALE.slice(0,2)),t.getFormattedName=(e,s,a)=>{if(!a)return[e,s];const[o,r]=c.default.splitFullName(e);return t.lastNameGoesFirst()?r?[r,o]:[e,s]:[o,r]},t.twoFactorRecoveryUrl=(e,t)=>{const s=new l.URI({path:"/twofactor_recovery"});return e&&s.updateQuery({remember_me:e.toString()}),t&&!["/",""].includes(t)&&s.updateQuery({cont:t}),s.toString()},t.notifyCaptchaNotLoaded=()=>{n.Notify.warning(i.intl.formatMessage({id:"977N0X",defaultMessage:"Your browser appears to be blocking dropboxcaptcha.com, which is required for authentication. To resolve this issue, please update any anti-virus or ad-blocking software settings to allow connections to dropboxcaptcha.com."}))},t.pushMarketingEvent=(e,t)=>{let s;switch(e){case a.LoginFormEvent.LOGIN_CLICK:case a.LoginFormEvent.GOOGLE_LOGIN_CLICK:case a.LoginFormEvent.APPLE_LOGIN_CLICK:case o.RegisterFormEvent.REGISTER_CLICK:case o.RegisterFormEvent.GOOGLE_REGISTER_CLICK:if(!t)return;s={form_event:e},u.MarketingTracker.tryPushEvent("conversionDataReady",u.EventTypeEnum.Link,s);break;case a.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS:case a.LoginFormEvent.GOOGLE_LOGIN_SUCCESS:case a.LoginFormEvent.APPLE_LOGIN_SUCCESS:s=u.getGAEventData(u.MARKETING_LOGIN_EVENT,u.MARKETING_LOGIN_EVENT),u.MarketingTracker.tryPushEvent(u.MARKETING_LOGIN_EVENT,u.EventTypeEnum.Link,s);break;case o.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS:case o.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS:s=u.getGAViewData(u.MARKETING_REGISTER_EVENT,"ga_register_pageview","/virtual/ga_register_pageview"),u.MarketingTracker.tryPushEvent(u.MARKETING_REGISTER_EVENT,u.EventTypeEnum.View,s)}}})),define("modules/clean/auth/common/error",["require","exports","tslib","dompurify","react"],(function(e,t,s,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthError=void 0,a=s.__importStar(a),o=s.__importDefault(o);class r extends o.default.Component{shouldComponentUpdate(e){return this.hasNewError(e.error)}hasNewError(e){var t;return!this.hasMatchingErrorMessage(e)||(null==e?void 0:e.clientTimestamp)!==(null===(t=this.props.error)||void 0===t?void 0:t.clientTimestamp)}hasMatchingErrorMessage(e){var t,s;return(null==e?void 0:e.message_html)===(null===(t=this.props.error)||void 0===t?void 0:t.message_html)&&(null==e?void 0:e.message_text)===(null===(s=this.props.error)||void 0===s?void 0:s.message_text)}render(){const e=this.props.error;return e&&e.message_html?o.default.createElement("div",{className:"text-input-error-wrapper",dangerouslySetInnerHTML:{__html:a.sanitize(e.message_html)}}):e&&e.message_text?o.default.createElement("div",{className:"text-input-error-wrapper"},o.default.createElement("span",{className:"error-message","aria-live":"polite","aria-atomic":"true"},e.message_text,o.default.createElement("span",{className:"text-input-error-hidden ax-visually-hidden","aria-hidden":"true",style:{visibility:"hidden"}},e.clientTimestamp))):o.default.createElement("div",{className:"text-input-error-wrapper"})}}t.AuthError=r,r.displayName="AuthError"})),define("modules/clean/auth/common/inputs/checkbox",["require","exports","tslib","dompurify","react","classnames","modules/clean/auth/common/error","modules/clean/auth/common/utils","modules/clean/auth/common/types","dig-components/text_fields","dig-components/controls","dig-components/icons","dig-components/icons/src"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthCheckbox=void 0,a=s.__importStar(a),o=s.__importDefault(o),r=s.__importDefault(r);const m=e=>{const{label:t,htmlFor:s,unsafeLabelHTML:r}=e;return t?o.default.createElement("label",{htmlFor:s,className:"checkbox_label"},o.default.createElement("span",null,t)):r?o.default.createElement("label",{htmlFor:s,className:"checkbox_label"},o.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.sanitize(r)}})):null},g=(e,t)=>{const{name:s,error:r,label:i,onChange:n,className:l,checked:g}=e,h=r&&(r.message_text||r.message_html);return o.default.createElement("div",{className:"auth__checkbox-row"},o.default.createElement(c.FormRow,{variant:"control"},o.default.createElement(u.Checkbox,{className:l,name:s,id:t,onChange:n,checked:g,"aria-checked":g}),o.default.createElement(m,{htmlFor:t,label:i})),h&&o.default.createElement(c.FormHelperText,{isInvalid:!0},o.default.createElement(p.UIIcon,{src:d.FailLine,size:"small"}),(null==r?void 0:r.message_html)?o.default.createElement("span",{dangerouslySetInnerHTML:{__html:a.sanitize(r.message_html)}}):o.default.createElement("span",null,null==r?void 0:r.message_text)))};class h extends o.default.Component{constructor(e){super(e),this.id=n.generateId(e.name)}render(){const{checked:e,className:t,disabled:s,error:a,inline:n,label:c,maestroStyle:u,name:p,onChange:d,unsafeLabelHTML:h,variant:f}=this.props;if(f===l.AuthFormVariant.DIG20)return o.default.createElement(g,Object.assign({},this.props));const _=r.default("checkbox",f,t,{"checkbox-inline":n});let S=o.default.createElement("input",{type:"checkbox",id:this.id,name:p,checked:e,onChange:d,disabled:s,"aria-checked":e});u&&(S=o.default.createElement("label",{className:"maestro_checkbox",htmlFor:this.id},S,o.default.createElement("span",null)));const E=o.default.createElement(i.AuthError,{error:a});return o.default.createElement("div",{className:_},!u&&E,S,o.default.createElement(m,{htmlFor:this.id,label:c,unsafeLabelHTML:h}),u&&E)}}t.AuthCheckbox=h,h.displayName="AuthCheckbox"})),define("modules/clean/auth/common/inputs/text",["require","exports","tslib","classnames","react","dompurify","modules/core/i18n","classnames","modules/clean/auth/common/error","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/components/password_strength_meter","dig-components/text_fields","dig-components/icons","dig-components/icons/src","modules/clean/react/input_dig"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d,m,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthTextField=void 0,a=s.__importDefault(a),o=s.__importDefault(o),r=s.__importStar(r),n=s.__importDefault(n);const f=e=>{const t=e.error&&(e.error.message_html||e.error.message_text),s=a.default("text-input-input",e.className,{"input-error":!!t,"numeric-input":e.type===c.AuthTextInputType.NUMBER}),r=e.passwordStrengthProps||{},n=i.intl.formatMessage({id:"/uvN/C",defaultMessage:"Good passwords are hard to guess. Use uncommon words or inside jokes, non-standard uPPercasing, creative spelllling, and non-obvious numbers and symbols"});return o.default.createElement("div",{className:"text-input-wrapper"},e.type===c.AuthTextInputType.PASSWORD&&e.measureStrength&&o.default.createElement(p.PasswordStrengthMeter,{password:e.value||"",zxcvbnPostTti:!0,className:e.variant,bubblePosition:r.position,bubbleDescription:r.description||n,bubbleClassName:r.className}),o.default.createElement("input",{id:e.id,type:e.type,className:s,name:e.name,value:e.value,onChange:e.onChange,disabled:e.disabled,autoFocus:e.autoFocus,autoComplete:e.autoComplete?"on":"off","aria-invalid":t?"true":"false",inputMode:e.type===c.AuthTextInputType.NUMBER?"numeric":"text",onKeyDown:e.type===c.AuthTextInputType.NUMBER?e=>{!0===e.ctrlKey||!0===e.metaKey||8===e.keyCode||46===e.keyCode||9===e.keyCode||13===e.keyCode||e.keyCode>=48&&e.keyCode<=57||e.keyCode>=96&&e.keyCode<=105||144===e.keyCode||37===e.keyCode||39===e.keyCode||e.preventDefault()}:void 0}),!e.value&&o.default.createElement("label",{htmlFor:e.id},e.placeholder))},_=e=>{const{disabled:t,name:s,placeholder:a,error:i,onChange:l,measureStrength:c,type:u}=e,p=!(!i||!i.message_text&&!i.message_html);return o.default.createElement("div",{className:"auth__input-wrapper"},c?o.default.createElement(h.password,{name:"password",className:n.default("auth__password-input",{"is-invalid":!!p}),measureStrength:!0,placeholder:a,onChange:l}):o.default.createElement(d.TextInput,{disabled:t,isInvalid:!!p,name:s,onChange:l,placeholder:a,wrapperProps:{className:"auth__input-field"},type:u}),p&&o.default.createElement(d.FormHelperText,{isInvalid:!0},o.default.createElement(m.UIIcon,{src:g.FailLine,size:"small"}),(null==i?void 0:i.message_html)?o.default.createElement("span",{dangerouslySetInnerHTML:{__html:r.sanitize(i.message_html)}}):o.default.createElement("span",null,null==i?void 0:i.message_text)))};class S extends o.default.Component{constructor(e){super(e),this.id=u.generateId(e.name)}render(){if(this.props.variant===c.AuthFormVariant.DIG20)return o.default.createElement(_,Object.assign({},this.props));const e=this.props.maestroStyle?null:this.props.className,t=a.default("text-input",this.props.variant,e),s=o.default.createElement(l.AuthError,{error:this.props.error}),r=o.default.createElement("div",{className:t},!this.props.maestroStyle&&s,o.default.createElement(f,{id:this.id,name:this.props.name,onChange:this.props.onChange,value:this.props.value,disabled:this.props.disabled,className:this.props.inputClassName,error:this.props.error,variant:this.props.variant,type:this.props.type,placeholder:this.props.placeholder,measureStrength:this.props.measureStrength,passwordStrengthProps:this.props.passwordStrengthProps,autoComplete:this.props.autoComplete||!1,autoFocus:this.props.autoFocus||!1}),this.props.maestroStyle&&s);if(!this.props.maestroStyle)return r;const i=a.default(this.props.className,{"register-form__name-field":"email"!==this.props.type&&"password"!==this.props.type,"register-form__field":"email"===this.props.type||"password"===this.props.type});return o.default.createElement("div",{className:i},this.props.label&&o.default.createElement("label",{className:"register-form__field-label",htmlFor:this.id},this.props.label),r)}}t.AuthTextField=S,S.displayName="AuthTextField"})),define("modules/clean/auth/common/stats",["require","exports","tslib","modules/clean/analytics","modules/core/browser","modules/core/browser_detection","modules/core/exception","modules/clean/auth/login/types","modules/clean/metrics/index"],(function(e,t,s,a,o,r,i,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logUXAnalytics=t.AppleUXAnalyticsLogger=t.GoogleUXAnalyticsLogger=t.EmailAuthUXAnalyticsLogger=t.AuthUXAnalyticsLogger=t.AuthAMPLogger=t.AuthType=void 0,o=s.__importStar(o),r=s.__importStar(r);var c;(function(e){e.CREDENTIALS="email",e.GOOGLE="google_auth",e.APPLE="apple_auth"})(c=t.AuthType||(t.AuthType={}));const u=new Set(["form_error","user_exists","access_denied","tfa_required","sso_required","emails_do_not_match_redirect"]),p=new Set(["enable_twofactor_required","emails_do_not_match","emails_do_not_match_redirect","not_verified","email_not_verified","google_login_not_allowed","access_denied","disabled_account","tos_required","sso_required","no_email_in_response","requires_password_on_first_link","apple_login_not_allowed","apple_login_not_allowed_for_teams","user_cancelled_authorize"]);function d(e){return{url:o.get_href(),status:e.status?e.status:void 0}}function m(e){return{url:o.get_href(),remember_me:e.remember_me?e.remember_me.toString():void 0,pair_user:e.pair_user?e.pair_user.toString():void 0,err_msg:e.err_msg?e.err_msg:void 0}}function g(e,t){return e&&t.has(e)?e:"unknown"}function h(){const e=[[r.chrome,"chrome"],[r.edge,"edge"],[r.mozilla,"firefox"],[r.msie,"msie"],[r.safari,"safari"]];let t="other";for(const[s,a]of e)if(s){t=a;break}return t}function f(e,t,s=1){try{l.getMetricsReporter().createStats({ns:"web_auth",name:e},Object.assign(Object.assign({},t),{browser:h()})).record(s)}catch(s){i.reportException({err:s,severity:i.SEVERITY.NONCRITICAL,tags:["web_auth_amp_logging","acquisition_eng"],exc_extra:Object.assign({metricName:e},t)})}}function _(e,t){a.UXAnalyticsLogger.log(e,t)}t.AuthAMPLogger={logSignupIntent(){f("signup/intent",{},1)},logSignupAttempt(e){f("signup/attempt",{authType:e},1)},logSignupResponse(e,t,s){"funcaptcha_response"!==s?t?f("signup/success",{authType:e},1):(f("signup/success",{authType:e},0),f("signup/failure",{authType:e,error:g(s,u)},1)):f("signup/failure",{authType:e,error:s},1)},logLoginIntent(e){f("login/intent",{loginType:e||"normal"},1)},logLoginAttempt(e,t){f("login/attempt",{authType:e,loginType:t||"normal"},1)},logCredentialsLoginResponse(e,t){const s=c.CREDENTIALS,a=e||"normal";if("funcaptcha_response"!==t)if(t===n.LoginResponseStatus.OK||t===n.LoginResponseStatus.TWOFACTOR)f("login/success",{authType:s,loginType:a},1);else{let e;switch(t){case n.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:e="tos_required";break;case n.LoginResponseStatus.SSO:e="sso_required";break;case n.LoginResponseStatus.TWOFACTOR_REQUIRED:e="enable_twofactor_required";break;case n.LoginResponseStatus.RATELIMIT:e="rate_limited";break;case n.LoginResponseStatus.EXPIRED:e="login_expired";break;case n.LoginResponseStatus.PASSWORD_EXPIRED:e="password_expired";break;case n.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:e="password_descryption_error";break;case n.LoginResponseStatus.ERROR:e="generic_error";break;case"form_error":e=t;break;default:e="unknown"}f("login/success",{authType:s,loginType:a},0),f("login/failure",{authType:s,loginType:a,error:e},1)}else f("login/failure",{authType:s,loginType:a,error:t},1)},logThirdPartyLoginResponse(e,t,s,a){const o=t||"normal";s||"tfa_required"===a?f("login/success",{authType:e,loginType:o},1):(f("login/success",{authType:e,loginType:o},0),f("login/failure",{authType:e,loginType:o,error:g(a,p)},1))},log2faResponse(e,t){const s=e||"normal";if(t===n.LoginResponseStatus.OK)f("2fa/success",{loginType:s},1);else{let e;switch(t){case n.LoginResponseStatus.REQUIRES_ROLE:e="requires_role";break;case n.LoginResponseStatus.EXPIRED:e="twofactor_expired";break;case n.LoginResponseStatus.INVALID_CREDENTIALS:e="invalid_credentials";break;case n.LoginResponseStatus.ERROR:e="generic_error";break;case"u2f_error":case"code_error":e=t;break;default:e="unknown"}f("2fa/success",{loginType:s},0),f("2fa/failure",{loginType:s,error:e},1)}}},t.AuthUXAnalyticsLogger={logSignupModalShown(e,t={}){_("signup_modal_shown",Object.assign({url:o.get_href(),kind:e},t))},logLoginModalShown(e,t={}){_("login_modal_shown",Object.assign({url:o.get_href(),kind:e},t))},logSignupModalDismissed(e){_("signup_modal_dismissed",{url:o.get_href(),kind:e})},logLoginModalDismissed(e){_("login_modal_dismissed",{url:o.get_href(),kind:e})}},t.EmailAuthUXAnalyticsLogger={logLoginStart(){_("email_login_start",{url:o.get_href()})},logSplitSignupContinue(){_("email_split_signup_continue",{url:o.get_href()})},logLoginResponse(e){switch(e.status){case n.LoginResponseStatus.OK:_("email_login_succeeded",d(e));break;case n.LoginResponseStatus.TWOFACTOR:_("email_login_requires_two_factor",d(e));break;case n.LoginResponseStatus.TWOFACTOR_REQUIRED:case n.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:case n.LoginResponseStatus.EXPIRED:case n.LoginResponseStatus.SSO:_("email_login_redirect",d(e));break;default:_("email_login_failed",d(e))}},logLoginError(){_("email_login_failed",{url:o.get_href()})},logSignupStart(){_("email_signup_start",{url:o.get_href()})},logSignupResponse(){_("email_signup_succeeded",{url:o.get_href()})},logSignupError(){_("email_signup_failed",{url:o.get_href()})}},t.GoogleUXAnalyticsLogger={logLoginStart(){_("google_login_start",{url:o.get_href()})},logLoginResponse(e){e.success?_("google_login_succeeded",m(e)):"tfa_required"===e.err_msg?_("google_login_requires_two_factor",m(e)):_("google_login_failed",m(e))},logSignupStart(){_("google_signup_start",{url:o.get_href()})},logSignupResponse(e){e.success?_("google_signup_succeeded",m(e)):_("google_signup_failed",m(e))}},t.AppleUXAnalyticsLogger={logLoginStart(){_("sia_login_start",{url:o.get_href()})},logLoginResponse(e){e.success?_("sia_login_succeeded",m(e)):"tfa_required"===e.err_msg?_("sia_login_requires_two_factor",m(e)):"requires_password_on_first_link"===e.err_msg?_("sia_login_requires_password",m(e)):_("sia_login_failed",m(e))}},t.logUXAnalytics=_})),define("modules/clean/auth/common/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthFormVariant=t.AuthButtonVariant=t.AuthTextInputType=void 0,(function(e){e.EMAIL="email",e.PASSWORD="password",e.TEXT="text",e.NUMBER="number"})(t.AuthTextInputType||(t.AuthTextInputType={})),(function(e){e.BIG="big",e.SMALL="small",e.STANDARD="standard"})(t.AuthButtonVariant||(t.AuthButtonVariant={})),(function(e){e.PAPER_COMPACT="paper-compact",e.SMALL="small",e.STANDARD="standard",e.DIG20="dig20"})(t.AuthFormVariant||(t.AuthFormVariant={}))})),define("modules/clean/auth/login/2fa/authenticator_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/trust_checkbox"],(function(e,t,s,a,o,r,i,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Authenticator2FAForm=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.Authenticator2FAForm=e=>{const t=o.default.createElement("button",{className:a.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},r.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return o.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&o.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),o.default.createElement("div",{className:"login-info two-factor-uses-authenticator"},r.intl.formatMessage({id:"sufs69",defaultMessage:"Enter the code generated by your authenticator app."})),o.default.createElement("div",{className:a.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},o.default.createElement(i.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:r.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:n.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&o.default.createElement(c.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&o.default.createElement("div",{className:"two-factor-need-help"},o.default.createElement("a",{href:l.twoFactorRecoveryUrl(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},r.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("modules/clean/auth/login/2fa/email_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types"],(function(e,t,s,a,o,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Email2FAForm=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.Email2FAForm=e=>{const t=o.default.createElement("button",{className:a.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},r.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return o.default.createElement("form",{className:"two-factor-form clearfix 2fa-email-form",onSubmit:e.onSubmit},e.displayHeader&&o.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),o.default.createElement("div",{className:"login-info two-factor-uses-email"},r.intl.formatMessage({id:"FuPzY9",defaultMessage:"We sent a code to {email} and any devices you’ve linked to this account. Enter the code to continue."},{span:e=>o.default.createElement("span",{className:"tfa-email"},e),email:e.email})),o.default.createElement("div",{className:a.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},o.default.createElement(i.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:r.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:n.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.inlineSubmit&&t,o.default.createElement("div",{className:"two-factor-need-help"},o.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},r.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"}))))}})),define("modules/clean/auth/login/2fa/phone_form",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/trust_checkbox"],(function(e,t,s,a,o,r,i,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Phone2FAForm=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.Phone2FAForm=e=>{const t=o.default.createElement("button",{className:a.default("mc-button mc-button-primary",{"inline-submit":e.inlineSubmit,"login-button":!e.inlineSubmit}),type:"submit"},r.intl.formatMessage({id:"K57Ot6",defaultMessage:"Enter"}));return o.default.createElement("form",{className:"two-factor-form clearfix 2fa-phone-form",onSubmit:e.onSubmit},e.displayHeader&&o.default.createElement("div",{className:"login-header"},r.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),o.default.createElement("div",{className:"login-info two-factor-uses-sms"},r.intl.formatMessage({id:"lWPbUP",defaultMessage:"We sent a code to your phone number ending in <span>{last_two_digits}</span>."},{span:e=>o.default.createElement("span",{className:"last-two-digits"},e),last_two_digits:e.lastTwoDigits})),o.default.createElement("div",{className:a.default({"inline-input-submit-pair":e.inlineSubmit,"backup-verification-code-form":e.inlineSubmit})},o.default.createElement(i.AuthTextField,{className:"login-text-input inline-input",disabled:!1,error:e.error,maestroStyle:e.maestroStyle,name:"code",onChange:e.onInputChange,value:e.value,placeholder:r.intl.formatMessage({id:"DFLqLE",defaultMessage:"6-digit code"}),type:n.AuthTextInputType.NUMBER,variant:e.variant,autoFocus:!0,autoComplete:!1}),e.inlineSubmit&&t),!e.hideTrustCheckbox&&o.default.createElement(c.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),!e.inlineSubmit&&t,!e.hideHelp&&o.default.createElement("div",{className:"two-factor-need-help"},o.default.createElement("a",{href:"#",onClick:e.onResendCodeClick,className:"resend-two-factor-code two-factor-uses-sms"},r.intl.formatMessage({id:"HTy4qW",defaultMessage:"Resend code"})),o.default.createElement("a",{href:l.twoFactorRecoveryUrl(e.rememberMe,e.continuationUrl),className:"twofactor_recovery_url"},r.intl.formatMessage({id:"gR0Vz1",defaultMessage:"Having trouble getting a code?"}))))}})),define("modules/clean/auth/login/2fa/seckey_form",["require","exports","tslib","react","modules/core/i18n","modules/clean/auth/login/2fa/trust_checkbox","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite","modules/clean/static_urls"],(function(e,t,s,a,o,r,i,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecKey2FAForm=void 0,a=s.__importDefault(a);const u=()=>a.default.createElement(n.Image,{src:c.static_url("/static/images/security_keys/insert-vflkCfC4_.png"),srcHiRes:c.static_url("/static/images/security_keys/insert@2x-vflTxG2RJ.png"),className:"seckey-insert"}),p=()=>a.default.createElement(n.Image,{src:c.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:c.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif"),className:"seckey-loading-status"}),d=e=>a.default.createElement("div",{className:"two-factor-seckey-instructions"},a.default.createElement("p",null,a.default.createElement("span",{style:{fontWeight:"bold"}},o.intl.formatMessage({id:"DljPpW",defaultMessage:"Insert your security key to use it"}))," ",e.securityKeyState===i.SecurityKeyState.LOADING&&a.default.createElement(p,null),e.securityKeyState===i.SecurityKeyState.FOUND&&a.default.createElement(m,null)),o.intl.formatMessage({id:"eonxEJ",defaultMessage:"After inserting, tap your key if it has a button or gold disk."})),m=()=>a.default.createElement(l.Sprite,{group:"web",name:"bulletpoint-check",alt:"",className:"seckey-loading-status"});t.SecKey2FAForm=e=>a.default.createElement("form",{className:"two-factor-form clearfix 2fa-seckey-form"},e.displayHeader&&a.default.createElement("div",{className:"login-header"},o.intl.formatMessage({id:"FFqVaU",defaultMessage:"Enter Dropbox 2-step verification code"})),a.default.createElement("div",{className:"login-info two-factor-uses-u2f"},a.default.createElement(u,null),e.securityKeyState!==i.SecurityKeyState.NOT_FOUND&&a.default.createElement(d,{securityKeyState:e.securityKeyState}),a.default.createElement("div",{className:"text-input"},a.default.createElement("div",{className:"text-input-error-wrapper"})),e.securityKeyState===i.SecurityKeyState.NOT_FOUND&&a.default.createElement("div",{className:"two-factor-seckey-instructions"},a.default.createElement("div",{style:{color:"red"}},a.default.createElement("span",{className:"error-msg"},e.error||o.intl.formatMessage({id:"uqQwD8",defaultMessage:"Key not found."}))),a.default.createElement("button",{className:"button-tertiary two-factor-seckey-retry",onClick:e.onRetry},o.intl.formatMessage({id:"n1zYou",defaultMessage:"Retry"}))),!e.hideTrustCheckbox&&a.default.createElement(r.TwoFactorTrustCheckbox,{checked:e.trusted,maestroStyle:e.maestroStyle,onChange:e.onInputChange,tooltipPosition:e.trustTooltipPosition,variant:e.variant}),a.default.createElement("div",{className:"two-factor-use-phone-instead"},a.default.createElement("a",{href:"#",onClick:e.onChange2FA},e.secondaryTwoFactorType===i.TwoFactorType.SMS?o.intl.formatMessage({id:"cDmyI0",defaultMessage:"Send SMS instead"}):o.intl.formatMessage({id:"yzAIpy",defaultMessage:"Use mobile authenticator instead"})))))})),define("modules/clean/auth/login/2fa/trust_checkbox",["require","exports","tslib","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/react/sprite_div","modules/clean/react/tooltip"],(function(e,t,s,a,o,r,i,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyTrustTooltipContent=t.TwoFactorTrustCheckbox=void 0,a=s.__importDefault(a),o=s.__importStar(o),n=s.__importDefault(n),l=s.__importStar(l);const c=()=>a.default.createElement("div",{className:"two-factor-trusted-info"},o.is_mobile_or_tablet()?r.intl.formatMessage({id:"UkQZnd",defaultMessage:"Trusted devices will never ask you for a security code again. You should only trust this device if you trust everyone who uses it."}):r.intl.formatMessage({id:"UraGyT",defaultMessage:"Trusted computers will never ask you for a security code again. You should only trust this computer if you trust everyone who uses it."}));t.TestOnlyTrustTooltipContent=c;const u=e=>a.default.createElement("div",{className:"tooltip-wrapper info-icon"},a.default.createElement(l.Tooltip,{position:l.TooltipPosition[e.position||"TOP"],tooltip_classname:"twofactor-trust-tooltip",tooltip_contents:a.default.createElement(c,null)},a.default.createElement(n.default,{group:"web",name:"info",alt:r.intl.formatMessage({id:"+SX5vq",defaultMessage:"More information"}),text:o.is_mobile_or_tablet()?r.intl.formatMessage({id:"+79s4f",defaultMessage:"Trust this device"}):r.intl.formatMessage({id:"Ey/8Q8",defaultMessage:"Trust this computer"}),spritePosition:"right"})));t.TwoFactorTrustCheckbox=e=>a.default.createElement(i.AuthCheckbox,{className:"remember-me",name:"trusted",checked:e.checked,inline:!0,disabled:!1,maestroStyle:e.maestroStyle,onChange:e.onChange,variant:e.variant,label:a.default.createElement(u,{position:e.tooltipPosition})})})),define("modules/clean/auth/login/api",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_as_promised_jquery","api_v2/default_user_client","modules/clean/auth/login/types","modules/clean/viewer","modules/clean/viewer_refresh","modules/core/assert","modules/core/exception","modules/core/i18n"],(function(e,t,s,a,o,r,i,n,l,c,u){"use strict";function p(){const e=i.Viewer.get_viewer().get_users()[0];return l.assert(null!=e,"Expect user is logged in when pairing"),new o.DefaultUserApiV2Client(e)}function d(e){var t;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t[".tag"])?{status:r.LoginResponseStatus.ERROR,html_response:!1,message:e.message}:{status:r.LoginResponseStatus.ERROR,html_response:!1,message:u.intl.formatMessage({id:"vuVMnM",defaultMessage:"Something went wrong."})}}function m(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=e.login_email,s=e.encrypted_password;l.assert(null!=t&&null!=s,"Expect login email and password not null");const a=p(),o={login_email:t,encrypted_password:s,remember_me:e.remember_me};try{const e=yield a.ns("team").rpc("account_pair_login",o,{});return e.two_factor_request?e.two_factor_request:e}catch(e){return d(e)}}))}function g(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=e.checkpoint_token,s=e.code;l.assert(null!=t&&null!=s,"Expect checkpoint token and code not null");const a=p(),o={checkpoint_token:t,code:s,remember_me:e.remember_me};try{return yield a.ns("team").rpc("account_pair_two_factor_login",o,{})}catch(e){return d(e)}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.updateDropboxPasswordsEligibility=t.submitTwoFactorForm=t.retryU2fAuthentication=t.resendTwoFactorCode=t.submitCredentialsForm=t.accountPairTwoFactorLogin=t.accountPairLogin=t.checkSsoState=void 0,a=s.__importStar(a),t.checkSsoState=function(e){return new Promise(t=>a.WebRequest({url:"/sso_state",data:{email:e},success:e=>t(JSON.parse(e))}))},t.accountPairLogin=m,t.accountPairTwoFactorLogin=g,t.submitCredentialsForm=function(e,t){let s;switch(e){case"multi":s="/ajax_multi_login";break;case"pairing":s="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":s="/cli_link_nonce";break;case"bidirectional_pair":return m(t);default:s="/ajax_login"}return new Promise((e,o)=>a.WebRequest({url:s,type:"POST",data:t,success:t=>{e(JSON.parse(t))},error:(t,s,a)=>{"{"!==a[0]&&-1===a.indexOf(":")?e({status:r.LoginResponseStatus.ERROR,html_response:!1,message:a}):o(JSON.parse(a))}}))},t.resendTwoFactorCode=function(e,t){return new Promise((s,o)=>a.WebRequest({url:"/twofactor_resend",data:{backup:e,mobile_push:t},success:s,error:o}))},t.retryU2fAuthentication=function(){return new Promise((e,t)=>a.WebRequest({url:"/account/twofactor/u2f_start_authentication",success:e,error:t}))},t.submitTwoFactorForm=function(e,t){let s;switch(e){case"multi":s="/ajax_multi_verify_code";break;case"pairing":s="/team/join/new_pair_login_ajax";break;case"cli_link_nonce":s="/cli_link_twofactor";break;case"admin":s="/admin/login/twofactor";break;case"bidirectional_pair":return g(t);default:s="/ajax_verify_code"}return new Promise((e,o)=>a.WebRequest({url:s,type:"POST",data:t,success:t=>e(JSON.parse(t)),error:(e,t,s)=>o(JSON.parse(s))}))},t.updateDropboxPasswordsEligibility=function(e){return s.__awaiter(this,void 0,void 0,(function*(){i.Viewer.get_viewer().is_signed_in||(yield n.refreshViewerAfterLogin());try{const t=p();yield t.ns("passwords").rpc("update_freemium_eligibility",{entry_point:{".tag":e}},{})}catch(e){c.reportException({err:e,severity:"non-critical"})}}))}})),define("modules/clean/auth/login/apple_login_button",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/auth/login/login_error"],(function(e,t,s,a,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppleLoginButton=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.AppleLoginButton=e=>{const t=e.buttonProps||{},s=o.default("auth-apple","button-primary",t.className),n=t.text||r.intl.formatMessage({id:"pTMcB4",defaultMessage:"Sign in with Apple"});return a.default.createElement("div",{className:"login-form-container__apple-div"},a.default.createElement("button",{className:s,onClick:e.onClick,type:"button",disabled:e.disabled||t.disabled,"data-uxa-log":"sia_login_start"},a.default.createElement("div",{className:"sign-in-text"},n)),e.error&&a.default.createElement(i.LoginError,{className:"apple-login-error",message:e.error}))}})),define("modules/clean/auth/login/credentials_form",["require","exports","tslib","classnames","react","modules/core/browser_detection","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/captcha","modules/clean/auth/login/login_error","modules/clean/auth/login/google_login_button","modules/clean/auth/login/apple_login_button","modules/clean/auth/login/types","modules/clean/react/image","modules/clean/react/sprite_div","modules/clean/static_urls"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d,m,g,h,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginCredentialsForm=void 0,a=s.__importDefault(a),o=s.__importDefault(o),f=s.__importDefault(f);const S=e=>{let t="/forgot",s=e.target;return e.appendEmail&&(t=`/forgot?email_from_login=${e.email}`,s=void 0),o.default.createElement("a",{className:"forgot-password-link",href:t,target:s},e.text||i.intl.formatMessage({id:"ovBgtz",defaultMessage:"Forgot your password?"}))},E=e=>o.default.createElement("div",{id:"navisite"},o.default.createElement("br",null),o.default.createElement("a",{href:"/navi_redirect/login",target:e.openLinkInNewTab?"_blank":void 0},i.intl.formatMessage({id:"vnuqfB",defaultMessage:"Dropbox NAVI"}))),b=e=>o.default.createElement("div",{className:"sso-optout"},i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})," ",o.default.createElement("a",{href:"#",onClick:e.onClick},i.intl.formatMessage({id:"fRMS5E",defaultMessage:"Log in with Dropbox credentials"}))),y=()=>o.default.createElement("span",{className:"login-loading-indicator ajax-loading"},o.default.createElement(h.Image,{src:_.static_url("/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif"),srcHiRes:_.static_url("/static/images/icons/ajax-loading-small@2x-vflAxdZTP.gif")})),w=()=>o.default.createElement("div",{className:"sso-description"},o.default.createElement(f.default,{group:"web",name:"lock",text:i.intl.formatMessage({id:"WH73xS",defaultMessage:"Single sign-on enabled"})})),C=e=>o.default.createElement("div",{className:"credentials-form__fields"},o.default.createElement(l.AuthTextField,{value:e.emailValue,className:a.default("login-text-input","login-email",e.emailProps.className),onChange:e.onInputChange,disabled:e.disabled||e.emailProps.readonly||!1,label:e.emailProps.label||(e.maestroStyle?i.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"}):void 0),placeholder:e.emailProps.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"mx5U0y",defaultMessage:"you@mail.com"}):i.intl.formatMessage({id:"hK3Vsp",defaultMessage:"Email"})),error:e.emailError,maestroStyle:e.maestroStyle,name:"login_email",type:c.AuthTextInputType.EMAIL,variant:e.variant}),e.ssoState===g.SsoState.OFF&&o.default.createElement(l.AuthTextField,{value:e.passwordValue,placeholder:e.passwordProps.placeholder||(e.maestroStyle?i.intl.formatMessage({id:"JtdF1I",defaultMessage:"Your password"}):i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"login_password",className:a.default("login-text-input","login-password",e.passwordProps.className),error:e.passwordError,inputClassName:"password-input",onChange:e.onInputChange,measureStrength:!1,label:e.passwordProps.label||(e.maestroStyle?i.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),maestroStyle:e.maestroStyle,disabled:e.disabled,variant:e.variant,type:c.AuthTextInputType.PASSWORD}));class T extends o.default.Component{constructor(){super(...arguments),this.setCaptchaComponent=e=>{this.captchaComponent=e},this.getCaptchaResponses=()=>this.props.supportsCaptcha?u.get_captcha_responses(this.captchaComponent):{},this.handleCaptchaErrors=e=>!!this.props.supportsCaptcha&&u.handle_captcha_errors(this.captchaComponent,e),this.submitRecaptcha=()=>{this.props.supportsCaptcha?this.captchaComponent.getWrappedComponent().submit():this.props.onSubmit()}}render(){const e=this.props.rememberMeProps||{},t=this.props.googleLoginProps,s=this.props.appleLoginProps,l=a.default({clearfix:!this.props.hideRememberMe||!this.props.hideHelp&&r.is_supported_mobile_browser()}),h=this.props.openLinksInNewTab?"_blank":void 0,f=a.default("clearfix","credentials-form","login-form",{"sso-required":this.props.ssoState!==g.SsoState.OFF,"sso-optional":this.props.ssoState===g.SsoState.OPTIONAL}),_=t&&t.positionBelow,T=t&&!t.positionBelow,v=s&&s.positionBelow,R=s&&!s.positionBelow,L=_||v,M=T||R,A=t?o.default.createElement(d.GoogleLoginButton,{buttonProps:t.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.googleLoginError,onClick:this.props.onGoogleLoginClick,variant:this.props.variant}):null,N=s?o.default.createElement(m.AppleLoginButton,{buttonProps:s.buttonProps,disabled:this.props.disabled||this.props.isSubmitting,error:this.props.appleLoginError,onClick:this.props.onAppleLoginClick}):null,I=this.props.hideHelp||this.props.ssoState===g.SsoState.REQUIRED?null:o.default.createElement(S,{email:this.props.emailValue,target:h,appendEmail:void 0===this.props.forgotPasswordProps.appendEmail||this.props.forgotPasswordProps.appendEmail,text:this.props.forgotPasswordProps.text}),O=o.default.createElement("button",{className:a.default("login-button","signin-button","button-primary",this.props.loginButtonProps.className),type:"submit",disabled:this.props.disabled||this.props.isSubmitting||this.props.loginButtonProps.disabled},this.props.ssoState===g.SsoState.OFF&&o.default.createElement("div",{className:"signin-text"},this.props.loginButtonProps.text||i.intl.formatMessage({id:"raLp6W",defaultMessage:"Sign in"})),this.props.ssoState!==g.SsoState.OFF&&o.default.createElement("div",{className:"sso-text"},i.intl.formatMessage({id:"LgJiOW",defaultMessage:"Continue"}))),F=o.default.createElement("div",{className:"hr-label"},o.default.createElement("span",{className:"hr-label__text"},i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),k=this.props.variant===c.AuthFormVariant.PAPER_COMPACT,P=this.props.isPaperLogin;let x,D;(function(e){e[e.INLINE_WITH_LOGIN_BUTTON=0]="INLINE_WITH_LOGIN_BUTTON",e[e.ON_NEW_LINE=1]="ON_NEW_LINE",e[e.BELOW_FORM=2]="BELOW_FORM",e[e.INLINE_WITH_REMEMBER_ME=3]="INLINE_WITH_REMEMBER_ME"})(x||(x={})),D=L||k?P&&!k?x.BELOW_FORM:x.INLINE_WITH_LOGIN_BUTTON:x.ON_NEW_LINE;const U=this.props.loginBasicSignupsVariant;!!U&&["V1","V2"].includes(U)&&(D=x.INLINE_WITH_REMEMBER_ME);const G=o.default.createElement("div",{className:"forgot-password-link-wrapper"},I);return o.default.createElement("div",{className:"login-form-container--subcontainer"},T&&A,R&&N,M&&!this.props.hideCredentialFields&&F,o.default.createElement("form",{className:f,onSubmit:this.props.onLoginClick,method:"POST"},!this.props.hideCredentialFields&&o.default.createElement(C,{disabled:this.props.disabled,emailError:this.props.emailError,emailProps:this.props.emailProps,emailValue:this.props.emailValue,maestroStyle:this.props.maestroStyle,onInputChange:this.props.onInputChange,passwordError:this.props.passwordError,passwordProps:this.props.passwordProps,passwordValue:this.props.passwordValue,ssoState:this.props.ssoState,variant:this.props.variant}),this.props.loginError&&o.default.createElement(p.LoginError,{message:this.props.loginError}),o.default.createElement("div",{className:l},this.props.ssoState!==g.SsoState.OFF&&o.default.createElement(w,null),!this.props.hideRememberMe&&o.default.createElement(n.AuthCheckbox,{checked:this.props.rememberMeValue,className:"remember-me",disabled:e.disabled||this.props.disabled,inline:void 0===e.inline||e.inline,label:e.label||i.intl.formatMessage({id:"ztezCK",defaultMessage:"Remember me"}),maestroStyle:this.props.maestroStyle,name:"remember_me",onChange:this.props.onInputChange,variant:this.props.variant}),D===x.INLINE_WITH_LOGIN_BUTTON&&I,D===x.INLINE_WITH_REMEMBER_ME&&G,!k&&!this.props.hideCredentialFields&&O,this.props.isSubmitting&&o.default.createElement(y,null),this.props.ssoState===g.SsoState.OPTIONAL&&o.default.createElement(b,{onClick:this.props.onSsoChangeClick}),D===x.ON_NEW_LINE&&o.default.createElement("div",{className:"login-need-help"},I),this.props.showNaviSiteLogin&&o.default.createElement(E,{openLinkInNewTab:this.props.openLinksInNewTab}),k&&O)),_&&A,v&&N,D===x.BELOW_FORM&&o.default.createElement("div",{className:"login-need-help"},I),this.props.supportsCaptcha&&o.default.createElement(u.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"LOGIN"}))}}t.LoginCredentialsForm=T,T.displayName="LoginCredentialsForm"})),define("modules/clean/auth/login/form",["require","exports","tslib","classnames","react","modules/core/assert","modules/core/browser","modules/core/exception","modules/core/html","modules/core/notify","modules/core/uri","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/login/2fa/authenticator_form","modules/clean/auth/login/2fa/email_form","modules/clean/auth/login/2fa/phone_form","modules/clean/auth/login/2fa/seckey_form","modules/clean/auth/login/api","modules/clean/auth/login/credentials_form","modules/clean/auth/login/sso_utils","modules/clean/auth/login/types","modules/clean/react/components/css","modules/core/i18n","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/auth/authenticator","modules/clean/security/passwords","modules/clean/auth/common/stats","modules/clean/react/fedramp/fedramp_util"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d,m,g,h,f,_,S,E,b,y,w,C,T,v,R,L,M){"use strict";var A;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyLoginStep=t.TestOnlyLoginFormComponent=t.LoginForm=void 0,a=s.__importDefault(a),o=s.__importDefault(o),i=s.__importStar(i),_=s.__importStar(_),C=s.__importDefault(C),v=s.__importStar(v),(function(e){e[e.CREDENTIALS_OR_SSO=0]="CREDENTIALS_OR_SSO",e[e.EMAIL_2FA=1]="EMAIL_2FA",e[e.PHONE_2FA=2]="PHONE_2FA",e[e.AUTHENTICATOR_2FA=3]="AUTHENTICATOR_2FA",e[e.SECKEY_2FA=4]="SECKEY_2FA"})(A||(A={})),t.TestOnlyLoginStep=A;class N extends o.default.Component{constructor(e){var t;super(e),this.testOnlyGetSsoChecker=()=>this.ssoChecker,this.setCredentialsFormComponent=e=>{this.credentialsFormComponent=e},this.testOnlyGetCredentialsFormComponent=()=>this.credentialsFormComponent,this.onInputChange=e=>{const t=e.currentTarget,s={},a=Object.assign({},this.state.localErrors);let o=!1;switch(t.name){case"login_email":s.email=t.value,a.email=void 0,o=!0;break;case"login_password":s.password=t.value,a.password=void 0;break;case"remember_me":s.rememberMe=t.checked;break;case"trusted":s.trusted=t.checked;break;case"code":s.twoFactorCode=t.value,a.twoFactor=void 0}s.localErrors=a,this.setState(s,()=>{o&&this.ssoChecker.checkSsoState(s.email,this.onSsoStateUpdate)})},this.onSsoStateUpdate=(e,t)=>{e===this.state.email&&this.setState({ssoState:t})},this.onSsoChangeClick=()=>{r.assert(this.state.ssoState===b.SsoState.OPTIONAL,"User can change SSO state only when it is optional",{tags:["react-login-form"]}),this.setState({ssoState:b.SsoState.OFF})},this.generateThirdPartyAuthUrl=(e,t)=>{const s={fname:e.profile.given_name,lname:e.profile.family_name,email:e.profile.email,picture_url:e.profile.picture_url,refresh_token:e.refresh_token,email_sig:e.email_sig,automatic_redirect:t.toString(),cont:this.props.continuationUrl||"/"};return this.props.googleLoginProps&&this.props.googleLoginProps.signupTag&&(s.signup_tag=this.props.googleLoginProps.signupTag),this.props.googleLoginProps&&this.props.googleLoginProps.signupEndpoint&&(s.signup_endpoint=this.props.googleLoginProps.signupEndpoint),String(new u.URI({path:"/third_party_signup"}).updateQuery(s))},this.handleGoogleCallback=e=>{L.AuthAMPLogger.logThirdPartyLoginResponse(L.AuthType.GOOGLE,this.props.type,e.success,e.err_msg),L.GoogleUXAnalyticsLogger.logLoginResponse(e);let t=M.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,this.props.continuationUrl||"/");if(e.success)this.handleLoginFormEvent(b.LoginFormEvent.GOOGLE_LOGIN_SUCCESS),!1!==this.props.canRedirect?(c.Notify.success(w.intl.formatMessage({id:"Ce9FpX",defaultMessage:"Log in successful! Your browser will be redirected in a few seconds."})),i.redirect(t)):e.is_fedramp_user&&!this.props.forceOnLoginSuccess?(t=M.getFedrampRedirectUrlIfApplicable(!0,this.props.continuationUrl||i.get_href()),i.redirect(t)):this.props.onLoginSuccess&&this.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("emails_do_not_match_redirect"===e.err_msg){const t=this.props.googleLoginProps,s=t&&t.customErrorHandlers;if(s&&s.emailsDoNotMatchRedirect)s.emailsDoNotMatchRedirect(e);else{const t=this.generateThirdPartyAuthUrl(e,!0);i.redirect(t)}}else if("emails_do_not_match"===e.err_msg)if("pairing"!==this.props.type&&this.props.variant===p.AuthFormVariant.STANDARD){const t=this.generateThirdPartyAuthUrl(e,!1),s=w.intl.formatMessage({id:"6AHSKo",defaultMessage:"Oops! We couldn’t find a Dropbox account matching that email. <a>Click here to create one.</a>"},{a:e=>o.default.createElement("a",{className:"third-party-signup-link",href:t},e)});this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{googleLogin:s})})}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}));else if("tos_required"===e.err_msg){const t=new u.URI({path:"/account/complete_registration_page"}).updateQuery({finish_web_auth:"true",remember_me:e.remember_me.toString(),cont:this.props.continuationUrl||"/"});i.redirect(t.toString())}else if("tfa_required"===e.err_msg){const s=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(s.toString())}else if("enable_twofactor_required"===e.err_msg){const s=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(s.toString())}else if("not_verified"===e.err_msg){const s=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(s.toString())}else if("email_not_verified"===e.err_msg){const t=w.intl.formatMessage({id:"S6RuBm",defaultMessage:"Before you can sign in, you’ll need to verify your account with Google {email}"},{email:e.profile.email});c.Notify.error(new l.HTML(`<span>${t}</span>`),30)}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"google_login_not_allowed"!==e.err_msg&&"sso_required"!==e.err_msg||(this.setState({email:e.profile.email}),this.ssoChecker.checkSsoState(e.profile.email,this.onSsoStateUpdate))},this.onGoogleLoginClick=()=>{this.handleLoginFormEvent(b.LoginFormEvent.GOOGLE_LOGIN_CLICK),this.setState({localErrors:{}}),L.AuthAMPLogger.logLoginAttempt(L.AuthType.GOOGLE,this.props.type),L.GoogleUXAnalyticsLogger.logLoginStart();const e=!!this.props.googleLoginProps&&!1!==this.props.googleLoginProps.popup;(new T.ProfileServicesLinkingHandler).auth_service_login_web(C.default.GOOGLE,this.handleGoogleCallback,"login_form",e?T.AuthWindowOption.POP_UP:T.AuthWindowOption.REDIRECT,this.state.rememberMe,this.props.continuationUrl||"/","pairing"===this.props.type)},this.handleAppleCallback=e=>{L.AuthAMPLogger.logThirdPartyLoginResponse(L.AuthType.APPLE,this.props.type,e.success,e.err_msg),L.AppleUXAnalyticsLogger.logLoginResponse(e);let t=M.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,this.props.continuationUrl||"/");if(e.success)this.handleLoginFormEvent(b.LoginFormEvent.APPLE_LOGIN_SUCCESS),!1!==this.props.canRedirect?(c.Notify.success(w.intl.formatMessage({id:"ZJmJez",defaultMessage:"Sign in successful! Your browser will be redirected in a few seconds."})),i.redirect(t)):e.is_fedramp_user&&!this.props.forceOnLoginSuccess?(t=M.getFedrampRedirectUrlIfApplicable(!0,this.props.continuationUrl||i.get_href()),i.redirect(t)):this.props.onLoginSuccess&&this.props.onLoginSuccess({display_name:e.display_name,id:e.user_id,email:e.profile.email,is_fedramp_user:e.is_fedramp_user});else if("no_email_in_response"===e.err_msg){const e=w.intl.formatMessage({id:"oFA/9f",defaultMessage:"Sign in failed. If you’d like to sign in with Apple again, <a>see how in our help center</a>. You could also sign in with your Dropbox account email and password."},{a:e=>`<a href="/help/accounts-billing/settings-sign-in/apple-sign-in-error">${e}</a>`});c.Notify.error(new l.HTML(`<span>${e}</span>`),30)}else if("tfa_required"===e.err_msg){const s=new u.URI({path:"/verify_code"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(s.toString())}else if("enable_twofactor_required"===e.err_msg){const s=new u.URI({path:"/twofactor"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(s.toString())}else if("requires_password_on_first_link"===e.err_msg){const s=new u.URI({path:"/show_password_form"}).updateQuery({cont:t,remember_me:e.remember_me.toString(),pair_user:e.pair_user.toString()});i.redirect(s.toString())}else if("emails_do_not_match"===e.err_msg){const t=w.intl.formatMessage({id:"8cKJMG",defaultMessage:"We couldn’t find a Dropbox account matching the email {email}. <a1>Sign up for a new account</a1> or <a2>get help signing in</a2> to an existing account."},{a1:e=>`<a href="/individual/plans-comparison?_tk=sia_nomatch_plan_web">${e}</a1>`,a2:e=>`<a href="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_web">${e}</a2>`,email:e.profile.email});c.Notify.error(new l.HTML(`<span>${t}</span>`),30)}else e.localized_error?c.Notify.error(e.localized_error):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})),"apple_login_not_allowed"===e.err_msg&&(this.setState({email:e.profile.email}),this.ssoChecker.checkSsoState(e.profile.email,this.onSsoStateUpdate))},this.onAppleLoginClick=()=>{this.handleLoginFormEvent(b.LoginFormEvent.APPLE_LOGIN_CLICK),this.setState({localErrors:{}}),L.AuthAMPLogger.logLoginAttempt(L.AuthType.APPLE,this.props.type),L.AppleUXAnalyticsLogger.logLoginStart();const e=!!this.props.appleLoginProps&&!1!==this.props.appleLoginProps.popup;(new T.ProfileServicesLinkingHandler).auth_service_login_web(C.default.APPLE,this.handleAppleCallback,"login_form",e?T.AuthWindowOption.POP_UP:T.AuthWindowOption.REDIRECT,this.state.rememberMe,this.props.continuationUrl||"/","pairing"===this.props.type)},this.credentialsFormData=()=>{const e=Object.assign(Object.assign({login_email:this.state.email,cont:this.props.continuationUrl||"/",remember_me:this.state.rememberMe},this.credentialsFormComponent.getCaptchaResponses()),this.props.additionalData);if(void 0===this.props.encryptionOptions)return Promise.reject(new Error("Must provide encryption options"));const t=this.state.ssoState===b.SsoState.OFF?this.state.password:"";return R.wrapPassword(t,this.props.encryptionOptions).then(t=>(e.encrypted_password=t,Promise.resolve(e)))},this.handleLoginSuccess=e=>s.__awaiter(this,void 0,void 0,(function*(){if(this.handleLoginFormEvent(b.LoginFormEvent.LOGIN_IMMEDIATE_SUCCESS,{userInfo:e}),this.state.didEnterIncorrectPassword&&(yield _.updateDropboxPasswordsEligibility("incorrect_password")),!1!==this.props.canRedirect){const t=M.getFedrampRedirectUrlIfApplicable(e.is_fedramp_user||!1,e.cont_override||this.props.continuationUrl||"/");return i.redirect(t)}if(e.is_fedramp_user&&!this.props.forceOnLoginSuccess){const e=M.getFedrampRedirectUrlIfApplicable(!0,this.props.continuationUrl||i.get_href());return i.redirect(e)}return this.props.onLoginSuccess?this.props.onLoginSuccess(e):i.redirect("/")})),this.handleSuccessResponse=e=>{switch(this.setState({isSubmitting:!1}),L.AuthAMPLogger.logCredentialsLoginResponse(this.props.type,e.status),L.EmailAuthUXAnalyticsLogger.logLoginResponse(e),e.status){case b.LoginResponseStatus.ERROR:const t=e.html_response?new l.HTML(e.message):e.message;return c.Notify.error(t);case b.LoginResponseStatus.EXPIRED:return i.redirect(e.cont);case b.LoginResponseStatus.OK:const s={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user,cont_override:e.cont_override};this.handleLoginSuccess(s);break;case b.LoginResponseStatus.PASSWORD_EXPIRED:return this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:w.intl.formatMessage({id:"3EEu7s",defaultMessage:"The password of the account associated with this email has expired. Please login to this account and update its password before pairing."})}})});case b.LoginResponseStatus.RATELIMIT:return this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:w.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."})}})});case b.LoginResponseStatus.TWOFACTOR_REQUIRED:case b.LoginResponseStatus.TOS_SIGNATURE_REQUIRED:return i.redirect(e.cont);case b.LoginResponseStatus.TWOFACTOR:e.checkpoint_token&&this.setState({checkpointToken:e.checkpoint_token}),e.use_email_2fa?this.setState({primaryTwoFactorType:b.TwoFactorType.EMAIL,currentStep:A.EMAIL_2FA}):e.u2f_challenge&&v.canUseAuthenticator(this.generateU2fRequest(e.u2f_challenge))?(this.setState({primaryTwoFactorType:b.TwoFactorType.SEC_KEY,currentStep:A.SECKEY_2FA}),e.last_two_digits?this.setState({lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:b.TwoFactorType.SMS}):this.setState({secondaryTwoFactorType:b.TwoFactorType.AUTHENTICATOR}),this.kickOffU2f(e.u2f_challenge)):e.last_two_digits?this.setState({primaryTwoFactorType:b.TwoFactorType.SMS,lastTwoDigits:e.last_two_digits,secondaryTwoFactorType:void 0,currentStep:A.PHONE_2FA}):this.setState({primaryTwoFactorType:b.TwoFactorType.AUTHENTICATOR,lastTwoDigits:void 0,secondaryTwoFactorType:void 0,currentStep:A.AUTHENTICATOR_2FA});break;case b.LoginResponseStatus.SSO:return i.unsafeRedirect(e.sso_url);case b.LoginResponseStatus.PASSWORD_DECRYPTION_ERROR:return i.redirect(e.cont)}},this.handleServerErrors=e=>{if(L.AuthAMPLogger.logCredentialsLoginResponse(this.props.type,e.funcaptcha_response?"funcaptcha_response":"form_error"),this.credentialsFormComponent.handleCaptchaErrors(e))return void setTimeout(()=>{this.isCaptchaReady||d.notifyCaptchaNotLoaded()},1e4);L.EmailAuthUXAnalyticsLogger.logLoginError();const t={};e.login_email?t.email=e.login_email:t.email=void 0,e.login_password?t.password=e.login_password:t.password=void 0,e["failed-login-invalid-email-password"]?(t.login=w.intl.formatMessage({id:"kfg1Pg",defaultMessage:"Oops! It looks like you may have forgotten your password. <a>Click here to reset it.</a>"},{a:e=>o.default.createElement("a",{href:"/forgot"},e)}),this.setState({didEnterIncorrectPassword:!0})):t.login=void 0,this.setState({localErrors:t}),this.setState({isSubmitting:!1})},this.onCredentialsFormSubmit=()=>{L.EmailAuthUXAnalyticsLogger.logLoginStart(),this.setState({isSubmitting:!0}),this.credentialsFormData().then(e=>{const t=_.submitCredentialsForm(this.props.type,e);t.catch(this.handleServerErrors),t.then(this.handleSuccessResponse)}).catch(e=>{let t,s;e.isBrowserNotSupported?(t="user-error",s=w.intl.formatMessage({id:"rWb8d2",defaultMessage:"Dropbox doesn’t support your browser. For a better experience, upgrade to the latest version of a modern browser like Chrome, Firefox, Edge, or Safari."})):(t="critical",s=w.intl.formatMessage({id:"dNlIBC",defaultMessage:"There was a problem completing this request."})),n.reportException({err:e,severity:t,tags:["react-login-form"]}),this.setState({isSubmitting:!1}),c.Notify.error(s)})},this.onLoginClick=e=>{e.preventDefault(),L.AuthAMPLogger.logLoginAttempt(L.AuthType.CREDENTIALS,this.props.type),this.handleLoginFormEvent(b.LoginFormEvent.LOGIN_CLICK),this.credentialsFormComponent.submitRecaptcha()},this.handleResendCodeSuccess=e=>{let t;switch(e){case b.TwoFactorResendResponse.OK:return c.Notify.success(w.intl.formatMessage({id:"vdqTup",defaultMessage:"We sent you a code. It may take a few minutes to arrive."}));case b.TwoFactorResendResponse.RATELIMIT:t=w.intl.formatMessage({id:"7k/CMy",defaultMessage:"You’ve tried to log in too many times. Please try again in a few minutes."});break;case b.TwoFactorResendResponse.UNREACHABLE:t=w.intl.formatMessage({id:"G6HUee",defaultMessage:"We couldn’t reach your phone number. Are you sure it’s correct?"});break;case b.TwoFactorResendResponse.EXPIRED:t=w.intl.formatMessage({id:"l5AyQn",defaultMessage:"Sorry, your phone code has expired. Please log in again."});break;case b.TwoFactorResendResponse.BADCARRIER:t=w.intl.formatMessage({id:"ffjRA4",defaultMessage:"Unfortunately, your carrier isn’t supported at this time."});break;case b.TwoFactorResendResponse.INVALIDNUMBER:t=w.intl.formatMessage({id:"1P05hM",defaultMessage:"That isn’t a valid phone number."});break;case b.TwoFactorResendResponse.NOTAMOBILE:t=w.intl.formatMessage({id:"aI/ARD",defaultMessage:"That phone number doesn’t appear to be a valid mobile number."});break;default:return c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{twoFactor:{message_text:t}})})},this.resendCode=()=>{var e,t,s,a;const o=_.resendTwoFactorCode(null!==(t=null===(e=this.props.additionalData)||void 0===e?void 0:e.backup)&&void 0!==t&&t,null!==(a=null===(s=this.props.additionalData)||void 0===s?void 0:s.mobile_push)&&void 0!==a&&a);o.then(this.handleResendCodeSuccess),o.catch(()=>{c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})},this.handleTwoFactorSuccess=e=>{switch(L.AuthAMPLogger.log2faResponse(this.props.type,e.status),e.status){case b.LoginResponseStatus.OK:this.state.currentStep===A.SECKEY_2FA&&this.setState({securityKeyState:b.SecurityKeyState.FOUND});const t={id:e.id,email:e.email,display_name:e.display_name,locale:e.locale,is_fedramp_user:e.is_fedramp_user,cont_override:e.cont_override};this.handleLoginSuccess(t);break;case b.LoginResponseStatus.ERROR:c.Notify.error(e.message);break;case b.LoginResponseStatus.REQUIRES_ROLE:case b.LoginResponseStatus.EXPIRED:this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{email:{message_text:e.message}}),currentStep:A.CREDENTIALS_OR_SSO});break;case b.LoginResponseStatus.INVALID_CREDENTIALS:this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{password:{message_text:e.message}}),currentStep:A.CREDENTIALS_OR_SSO});break;default:c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}},this.twoFactorFormData=()=>{const e=Object.assign({remember_me:this.state.rememberMe,cont:this.props.continuationUrl||"/",code:this.state.twoFactorCode,trusted:this.state.trusted},this.props.additionalData);return this.state.checkpointToken?Object.assign({checkpoint_token:this.state.checkpointToken},e):e},this.submitTwoFactor=()=>{this.setState({isSubmitting:!0});const e=_.submitTwoFactorForm(this.props.type,this.twoFactorFormData());e.then(this.handleTwoFactorSuccess),e.catch(e=>{L.AuthAMPLogger.log2faResponse(this.props.type,e.u2f?"u2f_error":e.code?"code_error":"unknown"),this.state.currentStep===A.SECKEY_2FA&&e.u2f?this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{securityKey:e.u2f.message_text}),securityKeyState:b.SecurityKeyState.NOT_FOUND}):e.code?this.setState({localErrors:Object.assign(Object.assign({},this.state.localErrors),{twoFactor:e.code})}):c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))}),e.finally(()=>{this.setState({isSubmitting:!1})})},this.onPhone2FASubmit=e=>{e.preventDefault(),this.submitTwoFactor()},this.onAuthenticator2FASubmit=e=>{e.preventDefault(),this.submitTwoFactor()},this.generateU2fRequest=e=>{const t=JSON.parse(e),s={challenge_id:t.challenge_id};for(const e of Object.keys(v.PROTOCOLS))s[e]=t[e]&&JSON.parse(t[e]);return s},this.kickOffU2f=e=>s.__awaiter(this,void 0,void 0,(function*(){const t=this.generateU2fRequest(e);if(v.canUseAuthenticator(t))try{const e=yield v.sign(t);this.state.currentStep===A.SECKEY_2FA&&this.setState({twoFactorCode:JSON.stringify(e)},()=>this.submitTwoFactor())}catch(e){this.state.currentStep===A.SECKEY_2FA&&this.setState({securityKeyState:b.SecurityKeyState.NOT_FOUND}),r.assert(!1,`U2F Error - ${e}`,{tags:["react-login-form","u2f"]})}})),this.switch2FA=()=>{let e;r.assert(this.state.primaryTwoFactorType===b.TwoFactorType.SEC_KEY,"Unexpected two factor choice switch",{tags:["react-login-form"]}),this.state.secondaryTwoFactorType===b.TwoFactorType.SMS?(e=A.PHONE_2FA,this.resendCode()):e=A.AUTHENTICATOR_2FA,this.setState({twoFactorCode:"",primaryTwoFactorType:this.state.secondaryTwoFactorType,secondaryTwoFactorType:void 0,currentStep:e})},this.onRetryU2f=()=>{this.setState({securityKeyState:b.SecurityKeyState.LOADING});const e=_.retryU2fAuthentication();e.then(this.kickOffU2f),e.catch(()=>{this.setState({securityKeyState:b.SecurityKeyState.NOT_FOUND}),c.Notify.error(w.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."}))})},this.onCaptchaReady=()=>{this.isCaptchaReady=!0},r.assert(!1!==e.canRedirect||!!e.onLoginSuccess,"Need an on login success handler if we cannot redirect the user",{tags:["react-login-form"]}),this.ssoChecker=new E.SsoStateChecker,this.isCaptchaReady=!1;let a=A.CREDENTIALS_OR_SSO,m=void 0,g=void 0,h=void 0;e.twoFactorOnlyProps&&(e.twoFactorOnlyProps.u2fChallenge&&!(null===(t=e.additionalData)||void 0===t?void 0:t.backup)&&v.canUseAuthenticator(this.generateU2fRequest(e.twoFactorOnlyProps.u2fChallenge))?(a=A.SECKEY_2FA,m=b.TwoFactorType.SEC_KEY,e.twoFactorOnlyProps.lastTwoDigits?(g=b.TwoFactorType.SMS,h=e.twoFactorOnlyProps.lastTwoDigits):g=b.TwoFactorType.AUTHENTICATOR):e.twoFactorOnlyProps.lastTwoDigits?(a=A.PHONE_2FA,m=b.TwoFactorType.SMS,h=e.twoFactorOnlyProps.lastTwoDigits):(a=A.AUTHENTICATOR_2FA,m=b.TwoFactorType.AUTHENTICATOR)),this.state={currentStep:a,email:e.emailProps&&e.emailProps.initialValue||"",isSubmitting:!1,lastTwoDigits:h,localErrors:{},password:"",primaryTwoFactorType:m,secondaryTwoFactorType:g,rememberMe:e.rememberMeCheckboxProps&&e.rememberMeCheckboxProps.checked||!1,securityKeyState:b.SecurityKeyState.LOADING,ssoState:b.SsoState.OFF,trusted:e.twoFactorTrustCheckboxProps&&e.twoFactorTrustCheckboxProps.checked||!1,twoFactorCode:"",checkpointToken:void 0,shouldDisableForm:!0,didEnterIncorrectPassword:!1}}handleLoginFormEvent(e,t){d.pushMarketingEvent(e,this.props.pushConversionDataReadyMarketingEvent),this.props.onLoginFormEvent&&this.props.onLoginFormEvent(e,t)}componentDidMount(){this.setState({shouldDisableForm:!1}),this.props.twoFactorOnlyProps||L.AuthAMPLogger.logLoginIntent(this.props.type),this.props.twoFactorOnlyProps&&this.props.twoFactorOnlyProps.u2fChallenge&&this.state.currentStep===A.SECKEY_2FA&&this.kickOffU2f(this.props.twoFactorOnlyProps.u2fChallenge),this.state.email&&this.ssoChecker.checkSsoState(this.state.email,this.onSsoStateUpdate)}get shouldDisableForm(){return!!this.props.disabled||this.state.shouldDisableForm}get supportsCaptcha(){return!this.props.hideCredentialFields&&!["multi","pairing","cli_link_nonce"].includes(this.props.type)}render(){var e,t,s,r;let i;switch(this.state.currentStep){case A.CREDENTIALS_OR_SSO:i=o.default.createElement(S.LoginCredentialsForm,{ref:this.setCredentialsFormComponent,disabled:this.shouldDisableForm,emailError:this.state.localErrors.email,emailProps:this.props.emailProps||{},emailValue:this.state.email,forgotPasswordProps:this.props.forgotPasswordProps||{},googleLoginError:this.state.localErrors.googleLogin,googleLoginProps:this.props.googleLoginProps,appleLoginError:this.state.localErrors.appleLogin,appleLoginProps:this.props.appleLoginProps,hideCredentialFields:this.props.hideCredentialFields||!1,hideHelp:this.props.hideHelp||!1,hideRememberMe:this.props.hideRememberMe||!1,isPaperLogin:this.props.isPaperLogin||!1,isSubmitting:this.state.isSubmitting,loginButtonProps:this.props.loginButtonProps||{},loginError:this.state.localErrors.login,maestroStyle:this.props.maestroStyle||!1,onGoogleLoginClick:this.onGoogleLoginClick,onAppleLoginClick:this.onAppleLoginClick,onInputChange:this.onInputChange,onLoginClick:this.onLoginClick,openLinksInNewTab:!!this.props.openLinksInNewTab,onSsoChangeClick:this.onSsoChangeClick,onSubmit:this.onCredentialsFormSubmit,onCaptchaReady:this.onCaptchaReady,passwordError:this.state.localErrors.password,passwordProps:this.props.passwordProps||{},passwordValue:this.state.password,rememberMeProps:this.props.rememberMeCheckboxProps||{},rememberMeValue:this.state.rememberMe,showNaviSiteLogin:!!this.props.showNaviSiteLogin,ssoState:this.state.ssoState,supportsCaptcha:this.supportsCaptcha,variant:this.props.variant||p.AuthFormVariant.STANDARD,loginBasicSignupsVariant:this.props.loginBasicSignupsVariant});break;case A.PHONE_2FA:i=o.default.createElement(h.Phone2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(e=this.props.twoFactorDisplayHeader)&&void 0!==e&&e,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,lastTwoDigits:this.state.lastTwoDigits||"",maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onResendCodeClick:this.resendCode,onSubmit:this.onPhone2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||p.AuthFormVariant.STANDARD});break;case A.EMAIL_2FA:i=o.default.createElement(g.Email2FAForm,{displayHeader:null!==(t=this.props.twoFactorDisplayHeader)&&void 0!==t&&t,email:this.state.email,error:this.state.localErrors.twoFactor,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onPhone2FASubmit,value:this.state.twoFactorCode,variant:this.props.variant||p.AuthFormVariant.STANDARD,onResendCodeClick:this.resendCode});break;case A.AUTHENTICATOR_2FA:i=o.default.createElement(m.Authenticator2FAForm,{continuationUrl:this.props.continuationUrl,displayHeader:null!==(s=this.props.twoFactorDisplayHeader)&&void 0!==s&&s,error:this.state.localErrors.twoFactor,hideHelp:this.props.hideHelp||!1,hideTrustCheckbox:this.props.hideRememberMe||!1,inlineSubmit:void 0===this.props.twoFactorSubmitButtonInline||this.props.twoFactorSubmitButtonInline,maestroStyle:this.props.maestroStyle||!1,onInputChange:this.onInputChange,onSubmit:this.onAuthenticator2FASubmit,rememberMe:this.state.rememberMe,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,value:this.state.twoFactorCode,variant:this.props.variant||p.AuthFormVariant.STANDARD});break;case A.SECKEY_2FA:i=o.default.createElement(f.SecKey2FAForm,{displayHeader:null!==(r=this.props.twoFactorDisplayHeader)&&void 0!==r&&r,error:this.state.localErrors.securityKey,hideTrustCheckbox:this.props.hideRememberMe||!1,maestroStyle:this.props.maestroStyle||!1,onChange2FA:this.switch2FA,onInputChange:this.onInputChange,onRetry:this.onRetryU2f,trusted:this.state.trusted,trustTooltipPosition:this.props.twoFactorTrustCheckboxProps&&this.props.twoFactorTrustCheckboxProps.tooltipPosition,secondaryTwoFactorType:this.state.secondaryTwoFactorType,securityKeyState:this.state.securityKeyState,variant:this.props.variant||p.AuthFormVariant.STANDARD})}const n=a.default("login-form-container",this.props.variant,this.props.className,{"login-form-container--centered":this.props.centered,"login-form-container--maestro":this.props.maestroStyle});return o.default.createElement("div",{className:n},o.default.createElement("div",{className:"regular-login-forms"},i))}}t.TestOnlyLoginFormComponent=N,N.displayName="LoginFormComponent",t.LoginForm=y.requireCssWithComponent(N,["/static/css/components/exp_cards-vfls5BO1G.css","/static/css/components/login_form-vflPyw88n.css","/static/css/legacy_packages/components-vfl9706n8.css","/static/css/login_or_register-vfl4OKtQr.css","/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/spectrum/index.web-vfliw9181.css","/static/css/recaptcha_challenge-vflrcf67y.css","/static/css/recaptcha_v2_challenge-vflYEW-GO.css"])})),define("modules/clean/auth/login/google_login_button",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/auth/common/types","modules/clean/auth/login/login_error","dig-components/buttons","modules/clean/react/image","modules/clean/static_urls"],(function(e,t,s,a,o,r,i,n,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleLoginButton=void 0,a=s.__importDefault(a),o=s.__importDefault(o);const p=u.static_url("/static/images/growth/biz-setup/gmail-vflKoZim9.svg"),d=e=>{const{onClick:t,label:s,disabled:o}=e;return a.default.createElement(l.Button,{className:"setup-button",disabled:o,onClick:t,variant:"outline",size:"large"},a.default.createElement("div",{className:"email-cta-button"},a.default.createElement(c.Image,{className:"email-cta-button__item",src:p}),a.default.createElement("div",{className:"email-cta-button__item"},s)))};t.GoogleLoginButton=e=>{const t=e.buttonProps||{},s=o.default("auth-google","button-primary",t.className),l=e.variant&&e.variant===i.AuthFormVariant.DIG20,c=t.text||r.intl.formatMessage({id:"SgtygT",defaultMessage:"Sign in with Google"});return a.default.createElement("div",{className:"login-form-container__google-div"},l?a.default.createElement(d,Object.assign({},e,{label:c})):a.default.createElement("button",{className:s,onClick:e.onClick,type:"button",disabled:e.disabled||t.disabled,"data-uxa-log":"google_login_start"},a.default.createElement("div",{className:"sign-in-text"},c)),e.error&&a.default.createElement(n.LoginError,{className:"google-login-error",message:e.error}))}})),define("modules/clean/auth/login/login_error",["require","exports","tslib","react","classnames"],(function(e,t,s,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginError=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.LoginError=e=>{const t=o.default("c-card","c-card--error",e.className);return a.default.createElement("div",{className:t},e.message)}})),define("modules/clean/auth/login/sso_utils",["require","exports","tslib","modules/clean/auth/login/api","modules/clean/auth/login/types"],(function(e,t,s,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoStateChecker=void 0,a=s.__importStar(a);const r=/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/;t.SsoStateChecker=class{constructor(){this.shouldCheckSsoState=e=>e.match(r),this.checkSsoState=(e,t)=>{this.shouldCheckSsoState(e)?this.CACHE[e]?t(e,this.CACHE[e]):this.INFLIGHT[e]||(this.INFLIGHT[e]=!0,a.checkSsoState(e).then(s=>{switch(s.user_sso_state){case"optional":this.CACHE[e]=o.SsoState.OPTIONAL;break;case"required":this.CACHE[e]=o.SsoState.REQUIRED;break;default:this.CACHE[e]=o.SsoState.OFF}t(e,this.CACHE[e])}).finally(()=>{delete this.INFLIGHT[e]})):t(e,o.SsoState.OFF)},this.CACHE={},this.INFLIGHT={}}}})),define("modules/clean/auth/login/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginFormEvent=t.TwoFactorResendResponse=t.LoginResponseStatus=t.SsoState=t.SecurityKeyState=t.TwoFactorType=t.LoginRole=void 0,(function(e){e.ROLE_WORK="work",e.ROLE_PERSONAL="personal",e.ROLE_PHOTOS="photos",e.ROLE_BOTH="both"})(t.LoginRole||(t.LoginRole={})),(function(e){e[e.EMAIL=0]="EMAIL",e[e.SMS=1]="SMS",e[e.AUTHENTICATOR=2]="AUTHENTICATOR",e[e.SEC_KEY=3]="SEC_KEY"})(t.TwoFactorType||(t.TwoFactorType={})),(function(e){e[e.LOADING=0]="LOADING",e[e.FOUND=1]="FOUND",e[e.NOT_FOUND=2]="NOT_FOUND"})(t.SecurityKeyState||(t.SecurityKeyState={})),(function(e){e.OFF="off",e.OPTIONAL="optional",e.REQUIRED="required"})(t.SsoState||(t.SsoState={})),(function(e){e.DEVICE_LIMIT="DEVICE_LIMIT",e.OK="OK",e.SSO="SSO",e.TWOFACTOR="TWOFACTOR",e.TWOFACTOR_REQUIRED="TWOFACTOR_REQUIRED",e.RATELIMIT="RATELIMIT",e.PASSWORD_EXPIRED="PASSWORD_EXPIRED",e.EXPIRED="EXPIRED",e.ERROR="ERROR",e.REQUIRES_ROLE="REQUIRES_ROLE",e.INVALID_CREDENTIALS="INVALID_CREDENTIALS",e.PASSWORD_DECRYPTION_ERROR="PASSWORD_DECRYPTION_ERROR",e.TOS_SIGNATURE_REQUIRED="TOS_SIGNATURE_REQUIRED"})(t.LoginResponseStatus||(t.LoginResponseStatus={})),(function(e){e.OK="OK",e.RATELIMIT="RATELIMIT",e.UNREACHABLE="UNREACHABLE",e.EXPIRED="EXPIRED",e.BADCARRIER="BADCARRIER",e.INVALIDNUMBER="BADCARRIER",e.NOTAMOBILE="BADCARRIER"})(t.TwoFactorResendResponse||(t.TwoFactorResendResponse={})),(function(e){e.LOGIN_CLICK="LOGIN_CLICK",e.LOGIN_IMMEDIATE_SUCCESS="LOGIN_IMMEDIATE_SUCCESS",e.GOOGLE_LOGIN_CLICK="GOOGLE_LOGIN_CLICK",e.GOOGLE_LOGIN_SUCCESS="GOOGLE_LOGIN_SUCCESS",e.APPLE_LOGIN_CLICK="APPLE_LOGIN_CLICK",e.APPLE_LOGIN_SUCCESS="APPLE_LOGIN_SUCCESS"})(t.LoginFormEvent||(t.LoginFormEvent={}))})),define("modules/clean/auth/login_or_register/login_register_container",["require","exports","tslib","react","react-intl","classnames","modules/core/i18n","modules/clean/react/components/css","modules/clean/auth/login_or_register/logging_util","modules/clean/auth/login_or_register/types","modules/clean/auth/login/form","modules/clean/auth/register/form","dig-components/typography","ts-key-enum","classnames"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d,m,g){"use strict";var h;Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyStatelessLoginRegisterContainer=t.LoginRegisterContainer=t.StatelessLoginRegisterContainer=t.SwitchLinkLocationEnum=void 0,a=s.__importStar(a),r=s.__importDefault(r),g=s.__importDefault(g),(function(e){e.TOP="top",e.BOTTOM="bottom"})(h=t.SwitchLinkLocationEnum||(t.SwitchLinkLocationEnum={}));const f=o.defineMessages({registerHeader:{id:"P09UfX",defaultMessage:"Create an account"},loginHeader:{id:"raLp6W",defaultMessage:"Sign in"},switchToRegisterLinkLabel:{id:"91fajJ",defaultMessage:"create an account"},switchToLoginLinkLabel:{id:"/bdGRh",defaultMessage:"log in"}}),_=({switchLinkLabel:e,onSwitchLinkAction:t,switchLinkUxaId:s,hideSwitchOrText:o=!1})=>a.default.createElement("div",{className:"login-register-switch"},!o&&a.default.createElement("span",null,`${i.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"})} `),a.default.createElement(d.Link,{className:"login-register-switch-link",onClick:t,onKeyDown:e=>{e.target instanceof HTMLAnchorElement&&[m.Key.Enter," "].includes(e.key)&&(e.preventDefault(),e.target.click())},hasNoUnderline:!0,href:"#","data-uxa-log":s,role:"button",tabIndex:0},e));_.displayName="SwitchLink";const S=({className:e,hideHeader:t,headerText:s,switchLinkLocation:o,switchLinkLabel:i,onSwitchLinkAction:n,switchLinkUxaId:l,children:c,showTopSwitchLink:u=!0,hideSwitchOrText:p=!1})=>{const d=a.default.createElement(_,{onSwitchLinkAction:n,switchLinkLabel:i,switchLinkUxaId:l,hideSwitchOrText:p});return a.default.createElement("div",{className:r.default("login-register-part",e)},a.default.createElement("div",{className:"clearfix"},!t&&a.default.createElement("div",{className:"login-register-header"},s),u&&o===h.TOP&&d),c,o===h.BOTTOM&&d)};S.displayName="AuthFormWithHeader";const E=e=>{var t,{switchLinkProps:n={switchLinkLocation:h.TOP},hideHeaders:l=!1,currentMode:d,setLoginRegisterMode:m}=e,_=s.__rest(e,["switchLinkProps","hideHeaders","currentMode","setLoginRegisterMode"]);const{className:E,loginHeader:b,registerHeader:y,loginFormProps:w,registerFormProps:C,showTopSwitchLink:T=!0,isBasicSignupsVariant:v,setLoginRegisterPageMode:R}=_,{switchLinkLocation:L,switchToRegisterLinkLabel:M,switchToLoginLinkLabel:A}=n,N=r.default("login-register-container",E,null!==(t=w.variant)&&void 0!==t?t:C.variant,[`login-register-container--link-${L}`]),I=!T,O=o.defineMessages({signupToggleText:{id:"F2YYO0",defaultMessage:"Don’t have an account?"},signupToggleButtonLabel:{id:"HXjK0v",defaultMessage:"Sign up for free"},loginToggleText:{id:"hVkDSg",defaultMessage:"Already have an account?"},loginToggleButtonLabel:{id:"98QA7W",defaultMessage:"Log in"}}),F=a.default.createElement("div",{className:"login_page_basic_signups--bottom-toggle-text"},i.intl.formatMessage(d===c.Mode.LOGIN?O.signupToggleText:O.loginToggleText)),k=`${d===c.Mode.REGISTER?"log_in":"create_an_account"}_toggle`,P=i.intl.formatMessage(d===c.Mode.LOGIN?O.signupToggleButtonLabel:O.loginToggleButtonLabel),x=()=>{const e=d===c.Mode.REGISTER?c.Mode.LOGIN:c.Mode.REGISTER;m(e),R&&R(e)},D=a.default.createElement("button",{className:g.default("button-primary","login_page_basic_signups--bottom-toggle"),onClick:e=>{x(),e.currentTarget.blur()},"data-uxa-log":k},P),U=a.default.createElement(S,{className:r.default("login-register-login-part",{"current-form":d===c.Mode.LOGIN}),hideHeader:l,headerText:null!=b?b:i.intl.formatMessage(f.loginHeader),switchLinkLocation:L,switchLinkLabel:null!=M?M:i.intl.formatMessage(f.switchToRegisterLinkLabel),onSwitchLinkAction:x,switchLinkUxaId:"create_an_account_toggle",showTopSwitchLink:T,hideSwitchOrText:v},a.default.createElement(u.LoginForm,Object.assign({},w))),G=a.default.createElement(S,{className:r.default("login-register-register-part",{"current-form":d===c.Mode.REGISTER}),hideHeader:l,headerText:null!=y?y:i.intl.formatMessage(f.registerHeader),switchLinkLocation:L,switchLinkLabel:null!=A?A:i.intl.formatMessage(f.switchToLoginLinkLabel),onSwitchLinkAction:x,switchLinkUxaId:"log_in_toggle",showTopSwitchLink:T,hideSwitchOrText:v},a.default.createElement(p.RegisterForm,Object.assign({},C)));return a.default.createElement("div",{className:N},U,G,I&&[F,D])};t.TestOnlyStatelessLoginRegisterContainer=E,E.displayName="StatelessLoginRegisterContainerView",t.StatelessLoginRegisterContainer=n.requireCssWithComponent(E,["/static/css/components/login_or_register-vflK11v8G.css","/static/css/legacy_packages/components-vfl9706n8.css","/static/css/components/button-vfllw60O5.css","/static/css/scooter/scooter-scoped-vflpl9JSl.css","/static/css/recaptcha_challenge-vflrcf67y.css","/static/css/recaptcha_v2_challenge-vflYEW-GO.css"]),t.LoginRegisterContainer=e=>{const[s,o]=a.useState(e.defaultRegister?c.Mode.REGISTER:c.Mode.LOGIN);return a.useEffect(()=>l.logAuthIntent(s),[s]),a.default.createElement(t.StatelessLoginRegisterContainer,Object.assign({currentMode:s,setLoginRegisterMode:o},e))},t.LoginRegisterContainer.displayName="LoginRegisterContainer"})),define("modules/clean/auth/login_or_register/logging_util",["require","exports","modules/clean/analytics","modules/clean/auth_event_logger","modules/clean/auth/common/stats","modules/clean/auth/login_or_register/types"],(function(e,t,s,a,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logModalMiscActivity=t.logModalShown=t.logModalDismissed=t.logAuthIntent=void 0,t.logAuthIntent=e=>{e===r.Mode.REGISTER?a.AuthEventLogger.log_web_signup_intent():a.AuthEventLogger.log_web_login_intent()},t.logModalDismissed=(e,t)=>{e===r.Mode.REGISTER?o.AuthUXAnalyticsLogger.logSignupModalDismissed(t):o.AuthUXAnalyticsLogger.logLoginModalDismissed(t)},t.logModalShown=(e,t,s={})=>{e===r.Mode.REGISTER?o.AuthUXAnalyticsLogger.logSignupModalShown(t,s):o.AuthUXAnalyticsLogger.logLoginModalShown(t,s)},t.logModalMiscActivity=(e,t)=>{const a={auth_google:!0};e===r.LoginOrRegisterKind.IMMEDIATE?s.WebMiscActivityLogger.log("signup_modal-show-upfront",a):e===r.LoginOrRegisterKind.DOWNLOAD&&t===r.DownloadAction.DIRECT_DOWNLOAD&&s.WebMiscActivityLogger.log("signup_modal-show-download",a)}})),define("modules/clean/auth/register/form",["require","exports","tslib","react","modules/core/i18n","modules/core/browser","modules/core/assert","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/auth/common/types","modules/clean/auth/common/utils","modules/clean/auth/register/types","modules/clean/auth/register/view","modules/clean/profile_services/auth_callback_handler","modules/clean/profile_services/profile_services_constants","modules/clean/profile_services/profile_services_link","modules/clean/react/components/css","modules/clean/web_timing_logger","modules/clean/web_register_logging_data","modules/clean/auth/common/stats","api_v2/noauth_client","modules/core/notify"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d,m,g,h,f,_,S,E,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyRegisterFormComponent=t.RegisterForm=t.handleInviteResendImpl=void 0,a=s.__importDefault(a),r=s.__importStar(r),n=s.__importStar(n),m=s.__importDefault(m);class y extends a.default.Component{constructor(e){super(e),this.testOnlyGetViewComponent=()=>this.viewComponent,this.setViewComponent=e=>{this.viewComponent=e},this.onClickSignUp=e=>{e.preventDefault(),this.handleRegisterFormEvent(u.RegisterFormEvent.REGISTER_CLICK),S.AuthAMPLogger.logSignupAttempt(S.AuthType.CREDENTIALS),S.EmailAuthUXAnalyticsLogger.logSignupStart();const t=this.getFormErrors();t.fname||t.email||t.password||t.tos?this.setState({localErrors:t}):this.viewComponent.getCaptchaComponent().getWrappedComponent().submit()},this.onSubmit=()=>{this.setState({isSubmitting:!0});const e=this.registerData(),t=this.props.signupUrl||(this.thirdPartySignupInitiated?"/ajax_thirdparty_register":"/ajax_register");n.WebRequest({url:t,type:"POST",data:e,success:(e,t,s)=>{this.handleSuccess(e)},error:(e,t,s)=>{this.handleServerErrors(JSON.parse(s))}})},this.handleGoogleCallback=e=>{S.AuthAMPLogger.logSignupResponse(S.AuthType.GOOGLE,e.success,e.err_msg),S.GoogleUXAnalyticsLogger.logSignupResponse(e);const{additionalParams:t={},marketingOptInProps:a={},canRedirect:o}=this.props,i=this.props.googleRegisterProps||{},n=i.signupContinuationUrl||"/",l=i.optimisticLoginContinuationUrl||n,c=_.getWebRegisterLoggingData();d.handleRegisterResponse(e,Object.assign({showMarketingOptIn:!!a.show,registerCont:n,loginCont:l,signupTag:t.signup_tag||"",canRedirect:!1!==o,k:t.k,eh:t.eh,signupEndpoint:this.props.signupEndpoint,inlineRedirect:o?void 0:e=>{const{fname:t,lname:a,email:o}=e,r=s.__rest(e,["fname","lname","email"]);this.setState({fname:t,lname:a,email:o,inlineThirdPartySignupState:r})}},c),void 0,()=>{this.handleRegisterFormEvent(u.RegisterFormEvent.GOOGLE_REGISTER_SUCCESS)},e=>{if(this.handleRegisterFormEvent(u.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:e}),!1!==this.props.canRedirect)r.redirect(l);else if(this.props.onRegisterSuccess)return this.props.onRegisterSuccess(e,e)})},this.onGoogleRegisterClick=()=>{this.handleRegisterFormEvent(u.RegisterFormEvent.GOOGLE_REGISTER_CLICK),S.AuthAMPLogger.logSignupAttempt(S.AuthType.GOOGLE),S.GoogleUXAnalyticsLogger.logSignupStart();const e=new g.ProfileServicesLinkingHandler,t=this.props.googleRegisterProps||{};let s;s=void 0===t.popup?g.AuthWindowOption.POP_UP:t.popup?g.AuthWindowOption.POP_UP:g.AuthWindowOption.REDIRECT;const a=t.signupContinuationUrl?{kind:"web",cont:t.signupContinuationUrl,remember_me:!1,pair_user:!1}:null;e.auth_service_create_user_if_needed(m.default.GOOGLE,this.handleGoogleCallback,"register_form",s,a)},this.onInputChange=e=>{const t={},s=e.currentTarget,{name:a,value:o,checked:r}=s;"fname"===a?t.fname=o:"lname"===a?t.lname=o:"email"===a?t.email=o:"password"===a?t.password=o:"tos_agree"===a?t.tosAgree=r:"marketing_opt_in"===a&&(t.marketingOptIn=r),this.setState(t),this.clearFormErrors(t)},this.handleResendClick=e=>{const t=e.target,{email:s,isSendingInvite:a}=this.state;"login-register-resend-invite"===t.className&&w(e,a,s,()=>this.setState({isSendingInvite:!0}),()=>this.setState({isSendingInvite:!1}))},this.onCaptchaReady=()=>{this.isCaptchaReady=!0},i.assert(!1!==e.canRedirect||!!e.onRegisterSuccess,"Need an on register success handler if we cannot redirect the user",{tags:["react-register-form"]});const{fnameProps:t={},lnameProps:a={},emailProps:o={},tosCheckboxProps:l={},marketingOptInProps:c={}}=e,p=!c.show||!!c.checked;this.state={localErrors:{},isSubmitting:!1,fname:t.initialValue||"",lname:a.initialValue||"",email:o.initialValue||"",password:"",tosAgree:!!l.checked,isSendingInvite:!1,marketingOptIn:p,shouldDisableForm:!0},this.mounted=!1,this.isCaptchaReady=!1}handleServerErrors(e){if(!this.mounted)return;if(S.AuthAMPLogger.logSignupResponse(S.AuthType.CREDENTIALS,!1,e.funcaptcha_response?"funcaptcha_response":"form_error"),this.viewComponent.handleCaptchaErrors(e))return void setTimeout(()=>{this.isCaptchaReady||c.notifyCaptchaNotLoaded()},1e4);S.EmailAuthUXAnalyticsLogger.logSignupError();const t=Object.assign({},this.state.localErrors),s=Date.now();e.email&&(t.email=e.email,t.email.clientTimestamp=s),e.password&&(t.password=e.password,t.password.clientTimestamp=s),e.fname&&(t.fname=e.fname,t.fname.clientTimestamp=s),e.tos_agree&&(t.tos=e.tos_agree,t.tos.clientTimestamp=s),this.setState({localErrors:t}),this.setState({isSubmitting:!1})}handleSuccess(e){if(!this.mounted)return;const t=JSON.parse(e),s={id:t.id,email:t.email,display_name:t.display_name};if(S.AuthAMPLogger.logSignupResponse(S.AuthType.CREDENTIALS,!0,null),S.EmailAuthUXAnalyticsLogger.logSignupResponse(),this.handleRegisterFormEvent(u.RegisterFormEvent.REGISTER_IMMEDIATE_SUCCESS,{userInfo:s}),!1!==this.props.canRedirect){const e=t.force_redirect_url?t.redirect_url:this.props.continuationUrlForNonGoogleSignup||t.redirect_url||"/";r.redirect(e)}else this.props.onRegisterSuccess&&this.props.onRegisterSuccess(s,t);this.setState({isSubmitting:!1})}handleRegisterFormEvent(e,t){c.pushMarketingEvent(e,this.props.pushConversionDataReadyMarketingEvent),this.props.onRegisterFormEvent&&this.props.onRegisterFormEvent(e,t)}registerData(){const[e,t]=c.getFormattedName(this.state.fname,this.state.lname,this.props.combinedName),s=r.get_uri().getQuery(),{email:a,password:o,tosAgree:i,marketingOptIn:n,inlineThirdPartySignupState:l}=this.state,{additionalParams:u,thirdPartyInitiatedSignupData:p}=this.props,d=Object.assign({fname:e,lname:t,email:a,tos_agree:i},this.thirdPartySignupInitiated?{}:{password:o}),m=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({cont:this.props.continuationUrlForNonGoogleSignup,signup_endpoint:this.props.signupEndpoint,demandbase_override:s.demandbase_override,marketing_opt_in:n},d),p||{}),l||{}),this.viewComponent&&this.viewComponent.getCaptchaResponses()||{}),u);return _.setWebRegisterLoggingData(m)}clearFormErrors(e){const t=this.state.localErrors;e.fname&&(t.fname={}),e.email&&(t.email={}),e.password&&(t.password={}),e.tosAgree&&(t.tos={}),this.setState({localErrors:t})}getFormErrors(){const e={};if(!this.props.validateClientSide)return e;const t=Date.now();return this.state.fname?e.fname=void 0:e.fname={message_text:o.intl.formatMessage({id:"GlyhO1",defaultMessage:"Please enter your name"}),clientTimestamp:t},this.state.email?e.email=void 0:e.email={message_text:o.intl.formatMessage({id:"I7g4FQ",defaultMessage:"Please enter an email address"}),clientTimestamp:t},this.state.password||this.thirdPartySignupInitiated?e.password=void 0:e.password={message_text:o.intl.formatMessage({id:"LhlWCW",defaultMessage:"Please enter a password"}),clientTimestamp:t},this.state.tosAgree?e.tos=void 0:e.tos={message_text:o.intl.formatMessage({id:"yw3Lbd",defaultMessage:"Please agree to the terms of service"}),clientTimestamp:t},e}get thirdPartySignupInitiated(){return!!this.props.thirdPartyInitiatedSignupData||!!this.state.inlineThirdPartySignupState}componentDidMount(){this.setState({shouldDisableForm:!1}),this.props.markTti&&f.mark_time_to_interactive(),this.mounted=!0,S.AuthAMPLogger.logSignupIntent(),document.addEventListener("click",this.handleResendClick)}componentWillUnmount(){this.mounted=!1,document.removeEventListener("click",this.handleResendClick)}get shouldDisableForm(){return!!this.props.disabled||this.state.shouldDisableForm}render(){const{marketingOptInProps:e={},variant:t,emailProps:s,maestroStyle:o,className:r,combinedName:i,fnameProps:n,lnameProps:c,passwordProps:u,tosCheckboxProps:d,submitButtonProps:m,googleRegisterProps:g,showSplitSignupFlow:h,loginBasicSignupsVariant:f}=this.props;return a.default.createElement(p.RegisterFormView,{ref:this.setViewComponent,variant:t||l.AuthFormVariant.STANDARD,maestroStyle:!!o,disabled:this.shouldDisableForm,className:r,combinedName:!!i,fnameProps:n||{},fnameValue:this.state.fname,fnameError:this.state.localErrors.fname,lnameProps:c||{},lnameValue:this.state.lname,emailProps:s||{},emailValue:this.state.email,emailError:this.state.localErrors.email,passwordProps:u||{},passwordValue:this.state.password,passwordError:this.state.localErrors.password,tosCheckboxProps:d||{},tosChecked:this.state.tosAgree,tosError:this.state.localErrors.tos,submitButtonProps:m||{},googleRegisterProps:g,thirdPartyInitiatedSignup:this.thirdPartySignupInitiated,isSubmitting:this.state.isSubmitting,onClickSignUp:this.onClickSignUp,onInputChange:this.onInputChange,onSubmit:this.onSubmit,onCaptchaReady:this.onCaptchaReady,onGoogleRegisterClick:this.onGoogleRegisterClick,showMarketingOptIn:!!e.show,marketingOptInChecked:this.state.marketingOptIn,splitSignupEnabled:h,loginBasicSignupsVariant:f})}}function w(e,t,s,a,r){if(!0===t)return void e.preventDefault();const i=new E.NoAuthApiV2Client;a(),i.ns("team").rpc("logged_out_resend_pending_invite_email",{email:s},{}).then(()=>{b.Notify.success(o.intl.formatMessage({id:"un5VKD",defaultMessage:"Invite resent to {email}"},{email:s})),r()}).catch(e=>{b.Notify.error(o.intl.formatMessage({id:"yqLGvW",defaultMessage:"Failed to resend invite."})),r()}),e.preventDefault()}t.TestOnlyRegisterFormComponent=y,y.displayName="RegisterFormComponent",t.handleInviteResendImpl=w,t.RegisterForm=h.requireCssWithComponent(y,["/static/css/login_or_register-vfl4OKtQr.css","/static/css/components/login_form-vflPyw88n.css","/static/css/components/button-vfllw60O5.css"])})),define("modules/clean/auth/register/google_register_button",["require","exports","tslib","classnames","react","modules/core/i18n"],(function(e,t,s,a,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GoogleRegisterButton=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.GoogleRegisterButton=e=>{const t=e.buttonProps||{},s=a.default("auth-google","button-primary",t.className,{[`button-${t.variant}`]:"standard"!==t.variant}),i=t.text||r.intl.formatMessage({id:"M4SS1n",defaultMessage:"Sign up with Google"});return o.default.createElement("button",{className:s,type:"button",onClick:e.onClick,disabled:e.disabled||t.disabled,"data-uxa-log":"google_signup_start"},o.default.createElement("span",{className:"sign-up-text"},i))}})),define("modules/clean/auth/register/name_fields",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/text","modules/clean/auth/common/types","modules/clean/auth/common/utils"],(function(e,t,s,a,o,r,i,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormNameFields=void 0,a=s.__importDefault(a),o=s.__importDefault(o),t.RegisterFormNameFields=e=>{const t=e.fnameProps||{};if(e.combinedName){const s=a.default("exp-input-combined-name","clearfix",t.className);return o.default.createElement("div",{className:"register-form__name-fields"},o.default.createElement(i.AuthTextField,{placeholder:t.placeholder||(e.maestroStyle?r.intl.formatMessage({id:"yse7tr",defaultMessage:"Jane Doe"}):r.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"})),name:"fname",value:e.fnameValue,onChange:e.onInputChange,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?r.intl.formatMessage({id:"7raSCH",defaultMessage:"Full name"}):void 0),error:e.fnameError,maestroStyle:e.maestroStyle,className:s,variant:e.variant,type:n.AuthTextInputType.TEXT}))}const s=e.lnameProps||{},c=["first","text-input__margin-right"],u=["second"];let p=["input-fname",t.className],d=["input-lname",s.className];l.lastNameGoesFirst()?(d=[...d,...c],p=[...p,...u]):(p=[...p,...c],d=[...d,...u]);const m=o.default.createElement(i.AuthTextField,{className:a.default(p),name:"fname",value:e.fnameValue,onChange:e.onInputChange,error:e.fnameError,maestroStyle:e.maestroStyle,disabled:e.disabled||t.readonly||!1,label:t.label||(e.maestroStyle?r.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"}):void 0),placeholder:t.placeholder||(e.maestroStyle?r.intl.formatMessage({id:"G3gJf8",defaultMessage:"Jane"}):r.intl.formatMessage({id:"flaKkC",defaultMessage:"First name"})),variant:e.variant,type:n.AuthTextInputType.TEXT}),g=o.default.createElement(i.AuthTextField,{className:a.default(d),name:"lname",value:e.lnameValue,onChange:e.onInputChange,error:e.lnameError,disabled:e.disabled||s.readonly||!1,label:s.label||(e.maestroStyle?r.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"}):void 0),placeholder:s.placeholder||(e.maestroStyle?r.intl.formatMessage({id:"yUetMg",defaultMessage:"Doe"}):r.intl.formatMessage({id:"rew2qC",defaultMessage:"Last name"})),maestroStyle:e.maestroStyle,variant:e.variant,type:n.AuthTextInputType.TEXT});return l.lastNameGoesFirst()?o.default.createElement("div",{className:"register-form__name-fields"},g,m):o.default.createElement("div",{className:"register-form__name-fields"},m,g)}})),define("modules/clean/auth/register/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormEvent=void 0,(function(e){e.GOOGLE_REGISTER_CLICK="GOOGLE_REGISTER_CLICK",e.GOOGLE_REGISTER_SUCCESS="GOOGLE_REGISTER_SUCCESS",e.REGISTER_CLICK="REGISTER_CLICK",e.REGISTER_IMMEDIATE_SUCCESS="REGISTER_IMMEDIATE_SUCCESS"})(t.RegisterFormEvent||(t.RegisterFormEvent={}))})),define("modules/clean/auth/register/view",["require","exports","tslib","classnames","react","modules/core/i18n","modules/clean/auth/common/inputs/checkbox","modules/clean/auth/common/inputs/text","modules/clean/auth/common/captcha","modules/clean/auth/common/types","modules/clean/auth/register/google_register_button","modules/clean/auth/register/name_fields","modules/clean/auth/common/stats"],(function(e,t,s,a,o,r,i,n,l,c,u,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterFormView=void 0,a=s.__importDefault(a),o=s.__importDefault(o);class m extends o.default.Component{constructor(){super(...arguments),this.state={splitSignupStep:0},this.setCaptchaComponent=e=>{this.captchaComponent=e}}handleCaptchaErrors(e){return l.handle_captcha_errors(this.captchaComponent,e)}getCaptchaComponent(){return this.captchaComponent}getCaptchaResponses(){return l.get_captcha_responses(this.captchaComponent)}onContinue(){this.setState({splitSignupStep:1}),d.EmailAuthUXAnalyticsLogger.logSplitSignupContinue()}render(){const{className:e,variant:t,thirdPartyInitiatedSignup:s,tosCheckboxProps:d,onGoogleRegisterClick:m,disabled:g,isSubmitting:h,maestroStyle:f,onInputChange:_,showMarketingOptIn:S,marketingOptInChecked:E,splitSignupEnabled:b,loginBasicSignupsVariant:y}=this.props,w=a.default("form_shown","login-form-container","register",e,t,{third_party_auth:s,"login-form-container--maestro":f}),C=d||{};let T=void 0;C.unsafeLabelHTML||(T=r.intl.formatMessage({id:"QECDJM",defaultMessage:"I agree to the <a>Dropbox Terms</a>. Learn about how we use and protect your data in our <b>Privacy Policy</b>."},{a:e=>o.default.createElement("a",{href:"/terms",target:"_blank",rel:"noreferrer noopener"},e),b:e=>o.default.createElement("a",{href:"/privacy",target:"_blank",rel:"noreferrer noopener"},e)}));const v=this.props.submitButtonProps||{},R=a.default("login-button","button-primary",v.className,{"button-small":v.variant===c.AuthButtonVariant.SMALL,"button-big":v.variant===c.AuthButtonVariant.BIG}),L=a.default("continue-button","button-primary",v.className,{"button-small":v.variant===c.AuthButtonVariant.SMALL,"button-big":v.variant===c.AuthButtonVariant.BIG}),M=this.props.thirdPartyInitiatedSignup,A=!!this.props.googleRegisterProps&&!M,N=this.props.googleRegisterProps||{},I=o.default.createElement(u.GoogleRegisterButton,{onClick:m,disabled:g||h,buttonProps:N.buttonProps}),O=o.default.createElement("div",{className:"hr-label"},o.default.createElement("span",{className:"hr-label__text"},r.intl.formatMessage({id:"F1g1bb",defaultMessage:"or"}))),F=!!y&&["V1"].includes(y),k=this.props.emailProps||{},P=a.default("input-email","text-input__margin-right",k.className),x=this.props.passwordProps||{},D=a.default("input-password",x.className);let U=this.props.maestroStyle||!!y&&["V2"].includes(y);"TOP"===N.position?U=!0:"BOTTOM"===N.position&&(U=!1);const G=C.variant||t,H=void 0===C.inline||C.inline,q=M?r.intl.formatMessage({id:"j7O6M6",defaultMessage:"Create and continue"}):v.text||r.intl.formatMessage({id:"P09UfX",defaultMessage:"Create an account"}),V=r.intl.formatMessage({id:"pV/Btf",defaultMessage:"Continue"}),K=o.default.createElement(n.AuthTextField,{value:this.props.emailValue,className:P,onChange:_,disabled:g||k.readonly||!1,label:k.label||(f?r.intl.formatMessage({id:"ZuKPpH",defaultMessage:"Email"}):void 0),placeholder:k.placeholder||(this.props.maestroStyle?r.intl.formatMessage({id:"87vAZJ",defaultMessage:"you@mail.com"}):r.intl.formatMessage({id:"ZbTBdC",defaultMessage:"Email"})),error:this.props.emailError,maestroStyle:f,name:"email",type:c.AuthTextInputType.EMAIL,variant:t});return b&&0===this.state.splitSignupStep?o.default.createElement("div",{className:w},o.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},o.default.createElement("div",{className:"credentials-form__fields"},o.default.createElement("div",{className:"register-form__credential-fields"}),o.default.createElement("div",{className:"split-signup-fields"},K,o.default.createElement("button",{className:L,type:"submit","data-uxa-log":"register_form_continue_button",onClick:()=>this.onContinue()},o.default.createElement("span",null,V)))),A&&o.default.createElement("div",{className:"hr-split-signup"}),A&&I,A&&o.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"}))):o.default.createElement("div",{className:w},o.default.createElement("form",{className:"clearfix credentials-form register-form",onSubmit:this.props.onClickSignUp,method:"post"},U&&A&&I,U&&A&&O,o.default.createElement("div",{className:"credentials-form__fields"},o.default.createElement(p.RegisterFormNameFields,{maestroStyle:f,onInputChange:_,combinedName:this.props.combinedName,fnameError:this.props.fnameError,fnameProps:this.props.fnameProps,lnameProps:this.props.lnameProps,fnameValue:this.props.fnameValue,lnameValue:this.props.lnameValue,disabled:g,variant:t}),o.default.createElement("div",{className:"register-form__credential-fields"},K,!this.props.thirdPartyInitiatedSignup&&o.default.createElement(n.AuthTextField,{value:this.props.passwordValue,placeholder:x.placeholder||(this.props.maestroStyle?r.intl.formatMessage({id:"klwYHA",defaultMessage:"Minimum 6 characters"}):r.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"})),name:"password",className:D,inputClassName:"password-input",onChange:_,measureStrength:x.measureStrength,label:x.label||(f?r.intl.formatMessage({id:"i+PJQ7",defaultMessage:"Password"}):void 0),error:this.props.passwordError,maestroStyle:f,disabled:g,variant:t,passwordStrengthProps:x.strengthMeterProps,type:c.AuthTextInputType.PASSWORD}))),o.default.createElement(i.AuthCheckbox,{variant:G,className:"agree",disabled:C.disabled||g,maestroStyle:f,error:this.props.tosError,inline:H,onChange:_,name:"tos_agree",checked:this.props.tosChecked,label:C.label||T,unsafeLabelHTML:C.unsafeLabelHTML}),S&&o.default.createElement(i.AuthCheckbox,{variant:G,className:"agree marketing-opt-in-checkbox",disabled:g,maestroStyle:f,inline:H,onChange:_,checked:E,name:"marketing_opt_in",label:r.intl.formatMessage({id:"vRE9NS",defaultMessage:"I’d like to receive direct marketing email updates from Dropbox"})}),o.default.createElement("button",{className:R,type:"submit","data-uxa-log":"register_form_submit_button",disabled:this.props.disabled||v.disabled||this.props.isSubmitting},o.default.createElement("span",null,q)),F&&!U&&A&&O,!U&&A&&I,o.default.createElement(l.Captcha,{ref:this.setCaptchaComponent,email:this.props.emailValue,onSubmit:this.props.onSubmit,onReady:this.props.onCaptchaReady,source:"REGISTER"})))}}t.RegisterFormView=m,m.displayName="RegisterFormView"})),define("modules/clean/components/password_strength_meter",["require","exports","tslib","react","classnames","modules/core/i18n","modules/clean/react/components/css","modules/clean/react/bubble_dropdown_v2","modules/clean/web_timing_logger","modules/core/cancelable_promise","modules/clean/react/sticky_position","dig-components/tooltips"],(function(e,t,s,a,o,r,i,n,l,c,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PasswordStrengthMeter=void 0,a=s.__importDefault(a),o=s.__importDefault(o);class d extends a.default.Component{constructor(t){super(t),this.setZxcvbn=({default:e})=>{this.setState({zxcvbn:e})},this.getPasswordScore=e=>this.state.zxcvbn?this.state.zxcvbn(e).score:0,this.renderPasswordDots=(e,t)=>{const{isDigEnabled:s,bubblePosition:o,bubbleClassName:i,bubbleDescription:l}=this.props,c=r.intl.formatMessage({id:"6SDr7W",defaultMessage:"Passwords must be 6 characters or more. Good passwords are hard to guess and use uncommon words, numbers, symbols, and uppercase letters."}),p=l||c;return s?a.default.createElement(g,{score:e,title:t,description:p,className:i}):a.default.createElement(a.default.Fragment,null,a.default.createElement(m,{score:e}),a.default.createElement(n.BubbleDropdown,{position:o||u.StickyPosition.RIGHT,targetButton:a.default.createElement("button",{className:"password-bubble__button"}),className:i},a.default.createElement("div",{className:"password-bubble__content"},a.default.createElement("div",{className:"password-bubble__title"},t||""),a.default.createElement("div",{className:"password-bubble__desc"},p))))},this.state={},t.zxcvbnPostTti?l.waitForTTI().then(()=>{this.zxcvbnPromise=c.makeCancelable(new Promise((t,s)=>{e(["zxcvbn"],t,s)}).then(s.__importStar)),this.zxcvbnPromise.then(this.setZxcvbn)}):(this.zxcvbnPromise=c.makeCancelable(new Promise((t,s)=>{e(["zxcvbn"],t,s)}).then(s.__importStar)),this.zxcvbnPromise.then(this.setZxcvbn))}componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()}getTitle(e){return["",r.intl.formatMessage({id:"i/ragh",defaultMessage:"Weak"}),r.intl.formatMessage({id:"GwYES8",defaultMessage:"So-so"}),r.intl.formatMessage({id:"Yd7c8F",defaultMessage:"Good"}),r.intl.formatMessage({id:"kbsmZh",defaultMessage:"Great!"})][e]}render(){const{password:e,className:t}=this.props,s=e.length?Math.max(1,this.getPasswordScore(e)):0,i=this.getTitle(s);return a.default.createElement("div",{className:o.default("password-input-meter",{[`${t}`]:t}),tabIndex:-1,"aria-label":r.intl.formatMessage({id:"7h/xn+",defaultMessage:"Password strength"})},this.renderPasswordDots(s,i))}}d.displayName="PasswordStrengthMeterComponent";const m=({score:e})=>a.default.createElement(a.default.Fragment,null,[4,3,2,1].map(t=>{const s=o.default({"password-input-dot":!0,"password-input-dot-selected--weak":e>=t&&e<=2,"password-input-dot-selected":e>=t});return a.default.createElement("div",{key:"password-input-dot-"+t,className:s})})),g=({score:e,description:t,title:s,className:o})=>{const r=s?`(${s}) ${t}`:`${t}`;return a.default.createElement(p.Tooltip,{title:r,placement:"right",className:o},a.default.createElement("span",null,a.default.createElement(m,{score:e})))};t.PasswordStrengthMeter=i.requireCssWithComponent(d,["/static/css/components/password_strength_meter-vfljnpJyO.css"])})),define("modules/clean/form_util/name_parser",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static splitFullName(e){const t=e.split(" ");return[t[0],t.slice(1).join(" ")]}}}));
//# sourceMappingURL=pkg-login-and-register-pages.min.js-vflTgMryY.map
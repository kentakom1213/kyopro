define("modules/clean/react/action_bar/action_bar_upload_menu",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/core/browser_detection","modules/core/i18n","modules/clean/react/browse/data/store","modules/clean/react/browse/data/selectors","modules/clean/react/action_bar/cloud_imports_icon"],(function(e,t,o,n,i,a,s,c,r,l,d,_){"use strict";var A;function p(e){if(!c.is_input_webkitdirectory_supported())return;const t=[{value:{type:s.ActionBarActionTypes.UPLOAD,menuItem:A.UPLOAD_FILES},description:(null==e?void 0:e.isInConsolidatedMenu)?r.intl.formatMessage({id:"qERWX+",defaultMessage:"Upload files"}):r.intl.formatMessage({id:"LNFEFg",defaultMessage:"Files"}),icon:n.default.createElement(i.UIIcon,{src:a.UploadFileLine})},{value:{type:s.ActionBarActionTypes.UPLOAD,menuItem:A.UPLOAD_FOLDER},description:(null==e?void 0:e.isInConsolidatedMenu)?r.intl.formatMessage({id:"ZYcSxL",defaultMessage:"Upload folder"}):r.intl.formatMessage({id:"kMDxiK",defaultMessage:"Folder"}),icon:n.default.createElement(i.UIIcon,{src:a.UploadFolderLine})}],o=l.getStoreForBrowse(),{expContentIngestTeamCloudImportsEntryPoint:p}=d.browsePostTTIExperiments(o.getState());return p&&t.push({value:{type:s.ActionBarActionTypes.UPLOAD,menuItem:A.UPLOAD_FROM_GOOGLE_DRIVE},description:r.intl.formatMessage({id:"bkJiHu",defaultMessage:"From Google Drive"}),icon:n.default.createElement(i.UIIcon,{src:_.GoogleDriveIcon})}),{menuItems:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadMenu=t.getUploadMenuSection=t.isUploadAction=t.UploadAction=void 0,n=o.__importDefault(n),c=o.__importStar(c),(function(e){e.UPLOAD_FILES="upload-files",e.UPLOAD_FOLDER="upload-folder",e.UPLOAD_FROM_GOOGLE_DRIVE="upload-from-google-drive"})(A=t.UploadAction||(t.UploadAction={})),t.isUploadAction=e=>Boolean(e)&&Object.values(A).includes(e),t.getUploadMenuSection=p,t.getUploadMenu=function(e){const t=p(e);if(t)return{type:s.ActionBarMenuType.DROPDOWN,menuSections:[t]}}})),define("modules/clean/react/action_bar/action_bar_create_menu",["require","exports","tslib","classnames","react","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/cloud_docs/constants","modules/clean/react/new_file_menu/new_file_icon","modules/clean/react/new_file_menu/new_file_util","modules/clean/react/onboarding_survey/lib/oa_pulsar_campaigns","modules/core/i18n","modules/clean/react/flows/browse_actions/create_automated_folder_action"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateMenu=t.getCreateSectionWithSubmenus=void 0,n=o.__importDefault(n),i=o.__importDefault(i),(function(e){e[e.FOLDER=0]="FOLDER",e[e.SHARED_FOLDER=1]="SHARED_FOLDER",e[e.TEAM_FOLDER=2]="TEAM_FOLDER",e[e.AUTOMATED_FOLDER=3]="AUTOMATED_FOLDER",e[e.PAPER=4]="PAPER",e[e.PAPER_TEMPLATE=5]="PAPER_TEMPLATE",e[e.PAPER_BINDER=6]="PAPER_BINDER",e[e.SIMPLE_POINTER=7]="SIMPLE_POINTER",e[e.MICROSOFT_WORD=8]="MICROSOFT_WORD",e[e.MICROSOFT_EXCEL=9]="MICROSOFT_EXCEL",e[e.MICROSOFT_POWERPOINT=10]="MICROSOFT_POWERPOINT",e[e.GOOGLE_DOC=11]="GOOGLE_DOC",e[e.GOOGLE_SHEET=12]="GOOGLE_SHEET",e[e.GOOGLE_SLIDE=13]="GOOGLE_SLIDE"})(p||(p={}));const u={[p.FOLDER]:{description:_.intl.formatMessage({id:"0BBLF2",defaultMessage:"Create folder"})},[p.SHARED_FOLDER]:{description:_.intl.formatMessage({id:"XAZ1S7",defaultMessage:"Create shared folder"})},[p.TEAM_FOLDER]:{description:_.intl.formatMessage({id:"AW6z8T",defaultMessage:"Create team folder"})},[p.AUTOMATED_FOLDER]:{description:_.intl.formatMessage({id:"n4wpHJ",defaultMessage:"Create automated folder"})}},S={[p.FOLDER]:{menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:s.FolderCreationAction.FOLDER},description:_.intl.formatMessage({id:"RW4ijB",defaultMessage:"Folder"}),icon:a.FolderLine}},[p.SHARED_FOLDER]:{condition:({showSharedFolderCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:s.FolderCreationAction.SHARED_FOLDER},className:n.default(d.OA_PULSAR_CLASS,d.OAPulsarAction.SHARED_FOLDER),description:_.intl.formatMessage({id:"7nnCz9",defaultMessage:"Shared folder"}),icon:a.AddFolderLine}},[p.TEAM_FOLDER]:{condition:({showTeamFolderCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:s.FolderCreationAction.TEAM_FOLDER},description:_.intl.formatMessage({id:"mfWC8r",defaultMessage:"New team folder"}),icon:a.TeamLine}},[p.AUTOMATED_FOLDER]:{condition:({showAutomatedFolderCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:s.FolderCreationAction.AUTOMATED_FOLDER},description:_.intl.formatMessage(A.CREATE_AUTOMATED_FOLDER_STRING),icon:a.AutomationLine,menuItem:i.default.createElement(A.CreateAutomatedFolderAction,null)}},[p.PAPER]:{condition:({showPaperCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.PaperNewFileTypes.PAPER},description:l.NewPaperDocLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewPaperDocLabel,iconName:"dropbox_paper"})}},[p.PAPER_TEMPLATE]:{condition:({showPaperCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.PaperNewFileTypes.PAPER_TEMPLATE},description:l.NewPaperTemplateLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewPaperTemplateLabel,iconName:"dropbox_paper_template"})}},[p.PAPER_BINDER]:{condition:({showBinderCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.PaperNewFileTypes.PAPER_BINDER},description:l.NewPaperBinderDocLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewPaperBinderDocLabel,iconName:"dropbox_paper_binder"})}},[p.SIMPLE_POINTER]:{menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.PointerFileTypes.SIMPLE_POINTER},description:l.NewSimplePointerLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewSimplePointerLabel,iconName:"shortcut"})}},[p.MICROSOFT_WORD]:{menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.MicrosoftFileTypes.WORD},description:l.NewMicrosoftWordDocLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewMicrosoftWordDocLabel,iconName:"microsoft_docx"})}},[p.MICROSOFT_EXCEL]:{menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.MicrosoftFileTypes.EXCEL},description:l.NewMicrosoftExcelWorkbookLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewMicrosoftExcelWorkbookLabel,iconName:"microsoft_xlsx"})}},[p.MICROSOFT_POWERPOINT]:{menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.MicrosoftFileTypes.POWERPOINT},description:l.NewMicrosoftPowerPointPresentationLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewMicrosoftPowerPointPresentationLabel,iconName:"microsoft_pptx"})}},[p.GOOGLE_DOC]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.GoogleFileTypes.GOOGLE_DSS_DOC},description:l.NewGoogleDocsLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewGoogleDocsLabel,iconName:"google_gdoc"})}},[p.GOOGLE_SHEET]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.GoogleFileTypes.GOOGLE_DSS_SHEET},description:l.NewGoogleSheetsLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewGoogleSheetsLabel,iconName:"google_gsheet"})}},[p.GOOGLE_SLIDE]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:s.ActionBarActionTypes.CREATE,menuItem:c.GoogleFileTypes.GOOGLE_DSS_SLIDES},description:l.NewGoogleSlidesLabel,icon:i.default.createElement(r.NewFileIcon,{displayName:l.NewGoogleSlidesLabel,iconName:"google_gslides"})}}},T=(e,t)=>e.map(e=>{var o;const n=S[e],{menuItem:i}=n,a=t.showCreateFileSubmenu&&(null===(o=u[e])||void 0===o?void 0:o.description)||i.description;return Object.assign(Object.assign({},n),{menuItem:Object.assign(Object.assign({},i),{description:a})})}).filter(({condition:e})=>!e||e(t)).map(({menuItem:e})=>e);t.getCreateSectionWithSubmenus=e=>{const{showCreateFileSubmenu:t,showOnlyFolderCreation:o}=e,n=(e=>({menuItems:T([p.FOLDER,p.SHARED_FOLDER,p.TEAM_FOLDER,p.AUTOMATED_FOLDER],e)}))(e).menuItems;if(!o){if(t){const t=[];e.showPaperCreate&&t.push({menuItems:T([p.PAPER],e)}),e.showGoogleCreate&&t.push({menuItems:T([p.GOOGLE_DOC,p.GOOGLE_SLIDE,p.GOOGLE_SHEET],e)}),t.push({menuItems:T([p.MICROSOFT_WORD,p.MICROSOFT_POWERPOINT,p.MICROSOFT_EXCEL],e)}),n.unshift({description:_.intl.formatMessage({id:"gyCTcZ",defaultMessage:"Create file"}),icon:a.FileLine,submenuSections:t})}else n.push({description:_.intl.formatMessage({id:"oKv5aq",defaultMessage:"Document"}),submenuSections:[{menuItems:T([p.PAPER,p.MICROSOFT_WORD,p.GOOGLE_DOC],e)}]},{description:_.intl.formatMessage({id:"/JpyiR",defaultMessage:"Presentation"}),submenuSections:[{menuItems:T([p.MICROSOFT_POWERPOINT,p.GOOGLE_SLIDE],e)}]},{description:_.intl.formatMessage({id:"9xjlyh",defaultMessage:"Spreadsheet"}),submenuSections:[{menuItems:T([p.MICROSOFT_EXCEL,p.GOOGLE_SHEET],e)}]});n.push({description:_.intl.formatMessage({id:"rSeA97",defaultMessage:"More"}),submenuSections:[{menuItems:T([p.PAPER_TEMPLATE,p.PAPER_BINDER,p.SIMPLE_POINTER],e)}]})}return{label:void 0,menuItems:n}},t.getCreateMenu=function(e){const o=[t.getCreateSectionWithSubmenus(e)];return{type:s.ActionBarMenuType.DROPDOWN,menuSections:o}}})),define("modules/clean/react/action_bar/file_actions/archive_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/action_bar/action_bar_strings"],(function(e,t,o,n,i,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createArchiveActionSelector=t.archiveActionHandler=void 0,t.archiveActionHandler=(e,t)=>{s.handleArchive(a.getActionHandlerArgs(e,t))};const r={actionType:i.ActionBarActionTypes.ARCHIVE,isEnabled:!0,text:c.ARCHIVE_ACTION_STRING,icon:n.ArchiveLine},l=(e,t)=>a.hasContentManagerAndSuperAdmin(e,t)&&a.isSingleSelectionFolder(e,t)&&a.isLiveFilesOnly(e,t)&&a.isTeamSharedFolderSelected(e,t);t.createArchiveActionSelector=()=>o.createSelector(l,e=>e?r:void 0)})),define("modules/clean/react/action_bar/file_actions/comment_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/action_bar/action_bar_strings"],(function(e,t,o,n,i,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCommentActionSelector=t.commentActionHandler=void 0,t.commentActionHandler=(e,t)=>{s.handleComment(a.getActionHandlerArgs(e,t))};const r=(e,t)=>a.isSingleSelectionFile(e,t)&&a.isLiveFilesOnly(e,t)&&!a.isCloudDocSelected(e,t)&&!a.isPnmLinkNodeSelected(e,t);t.createCommentActionSelector=()=>o.createSelector(r,e=>e?{actionType:i.ActionBarActionTypes.COMMENT,isEnabled:!0,text:c.COMMENT_ACTION_STRING,icon:n.CommentLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/copy_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/action_bar/file_actions/copy","modules/clean/react/browse/models"],(function(e,t,o,n,i,a,s,c,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCopyActionSelector=t.copyActionHandler=void 0,t.copyActionHandler=(e,t)=>{var o,n;const i=s.context(e,t),{isOverFreeQuota:a,hasExcludedNsIds:r}=s.overQuotaData(e,t);c.handleCopy(Object.assign(Object.assign({},s.getActionHandlerArgs(e,t)),{synchronousSingleFileActions:Boolean(null===(n=null===(o=t.browsePostTTIExperiments)||void 0===o?void 0:o.call(t,e))||void 0===n?void 0:n.expSynchronousSingleFileActions)}),i,{isOverFreeQuota:a,hasExcludedNsIds:r})};const l=(e,t)=>s.isLiveFilesOnly(e,t)&&!s.isFileSharedWithMeSelected(e,t)&&!s.isTeamSharedFolderSelected(e,t)&&!s.isTeamMemberFolderSelected(e,t)&&!s.isPnmLinkNodeSelected(e,t)&&!s.isFamilySharedFolderSelected(e,t)&&!s.isVaultFolderSelected(e,t);t.createCopyActionSelector=()=>o.createSelector(s.selectedFiles,l,(e,t)=>t?{actionType:i.ActionBarActionTypes.COPY,isEnabled:e.some(e=>!r.File.isNoAccessSharedFolder(e)),text:a.COPY_ACTION_STRING,icon:n.CopyLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/delete_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/pnm/constants","modules/clean/pnm/utils","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,n,i,a,s,c,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRemoveActionSelector=t.createDeleteActionSelector=t.deleteActionHandler=void 0,t.deleteActionHandler=(e,t)=>{const o=r.context(e,t);l.handleDelete(r.getActionHandlerArgs(e,t),o)};const d=(e,t)=>{const o=t.selectedFilesSelector(e);return 1===o.count()&&s.getLinkNodeAction(o.first().per_node_metadata)===a.PASSWORDS_POST_SETUP_ACTION},_=(e,t)=>!d(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.isTeamSharedFolderSelected(e,t)&&!r.isTeamMemberFolderSelected(e,t)&&!r.isPnmSuppressDeleteSelected(e,t)&&!r.isVaultFolderSelected(e,t);t.createDeleteActionSelector=()=>o.createSelector(r.context,r.selectedFiles,_,(e,t,o)=>o?{actionType:i.ActionBarActionTypes.DELETE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:c.DELETE_ACTION_STRING,icon:n.DeleteLine}:void 0),t.createRemoveActionSelector=()=>o.createSelector(r.context,r.selectedFiles,d,(e,t,o)=>o?{actionType:i.ActionBarActionTypes.REMOVE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:c.REMOVE_ACTIION_STRING,icon:n.DeleteLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/download_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/browse/models"],(function(e,t,o,n,i,a,s,c,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDownloadActionSelector=t.downloadActionHandler=void 0,r=o.__importStar(r),t.downloadActionHandler=(e,t)=>{const o=c.context(e,t);r.handleDownload(c.getActionHandlerArgs(e,t),o)};const d=(e,t)=>c.isLiveFilesOnly(e,t)&&!c.isPnmLinkNodeSelected(e,t)&&(c.isSingleSelection(e,t)?!c.isCloudDocSelected(e,t):!c.isFileSharedWithMeSelected(e,t)&&!c.isCloudDocFileSharedWithMeSelected(e,t));t.createDownloadActionSelector=()=>n.createSelector(c.selectedFiles,d,(e,t)=>t?{actionType:a.ActionBarActionTypes.DOWNLOAD,isEnabled:e.some(e=>!l.File.isNoAccessSharedFolder(e)),text:s.DOWNLOAD_ACTION_STRING,icon:i.DownloadLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/events_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/filetypes","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/browse/models"],(function(e,t,o,n,i,a,s,c,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEventsActionSelector=t.eventsActionHandler=void 0,l=o.__importStar(l),t.eventsActionHandler=(e,t)=>{l.handleEvents(r.getActionHandlerArgs(e,t))};const _=(e,t)=>{const o=r.selectedFiles(e,t).first();return r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&(o.type===s.FileTypes.SHARED_FOLDER||o.type===s.FileTypes.TEAM_SHARED_FOLDER)};t.createEventsActionSelector=()=>n.createSelector(r.context,r.selectedFiles,_,(e,t,o)=>o?{actionType:a.ActionBarActionTypes.EVENTS,isEnabled:t.every(t=>d.File.canViewFileMembers(t,e)),text:c.EVENTS_ACTION_STRING,icon:i.ActivityLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/file_actions",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/memoize","modules/clean/react/action_bar/file_actions/archive_action","modules/clean/react/action_bar/file_actions/automated_folder_action","modules/clean/react/action_bar/file_actions/comment_action","modules/clean/react/action_bar/file_actions/convert_to_pdf_action","modules/clean/react/action_bar/file_actions/copy_action","modules/clean/react/action_bar/file_actions/delete_action","modules/clean/react/action_bar/file_actions/download_action","modules/clean/react/action_bar/file_actions/events_action","modules/clean/react/action_bar/file_actions/file_conversion_action","modules/clean/react/action_bar/file_actions/go_to_folder_action","modules/clean/react/action_bar/file_actions/manage_as_admin_action","modules/clean/react/action_bar/file_actions/move_action","modules/clean/react/action_bar/file_actions/open_action","modules/clean/react/action_bar/file_actions/convert_to_archive_action","modules/clean/react/action_bar/file_actions/open_desktop_action","modules/clean/react/action_bar/file_actions/permanent_delete_action","modules/clean/react/action_bar/file_actions/rename_action","modules/clean/react/action_bar/file_actions/request_files_action","modules/clean/react/action_bar/file_actions/restore_action","modules/clean/react/action_bar/file_actions/share_action","modules/clean/react/action_bar/file_actions/share_copy_link_action","modules/clean/react/action_bar/file_actions/share_modal_action","modules/clean/react/action_bar/file_actions/star_action","modules/clean/react/action_bar/file_actions/unstar_action","modules/clean/react/action_bar/file_actions/version_history_action","modules/clean/react/action_bar/file_actions/send_for_signature_action","modules/clean/react/action_bar/file_actions/activity_action","modules/clean/react/browse/browse_actions/browse_spaces_dropdown_action","modules/clean/shallow_equal","modules/clean/web_user_action_events","modules/clean/react/action_bar/file_actions/request_approval_action"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p,u,S,T,E,O,m,I,f,N,R,y,g,M,F,b,v,C,h,L,D,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActionBarActionSelector=t.actionMenuToggleHandler=t.actionHandler=t.ActionMenuToggleHandlersMap=t.FileActionsHandlersMap=t.getTabletSidebarFileActionSelectors=t.getSidebarFileActionSelectors=t.getMobileFileActionsSelectors=t.getTabletFileActionsSelectors=t.getInlineFileActionsSelectors=t.getFileActionsSelectorsMap=void 0,t.getFileActionsSelectorsMap=()=>({[o.ActionBarActionTypes.RENAME]:I.createRenameActionSelector(),[o.ActionBarActionTypes.DOWNLOAD]:d.createDownloadActionSelector(),[o.ActionBarActionTypes.COMMENT]:s.createCommentActionSelector(),[o.ActionBarActionTypes.EVENTS]:_.createEventsActionSelector(),[o.ActionBarActionTypes.VERSION_HISTORY]:b.createVersionHistoryActionSelector(),[o.ActionBarActionTypes.COPY]:r.createCopyActionSelector(),[o.ActionBarActionTypes.MOVE]:S.createMoveActionSelector(),[o.ActionBarActionTypes.DELETE]:l.createDeleteActionSelector(),[o.ActionBarActionTypes.REMOVE]:l.createRemoveActionSelector(),[o.ActionBarActionTypes.RESTORE]:N.createRestoreActionSelector(),[o.ActionBarActionTypes.PERMANENT_DELETE]:m.createPermanentDeleteActionSelector(),[o.ActionBarActionTypes.STAR]:M.createStarActionSelector(),[o.ActionBarActionTypes.UNSTAR]:F.createUnstarActionSelector(),[o.ActionBarActionTypes.OPEN]:T.createOpenActionSelector(),[o.ActionBarActionTypes.ARCHIVE]:i.createArchiveActionSelector(),[o.ActionBarActionTypes.GO_TO_FOLDER]:p.createGoToFolderActionSelector(),[o.ActionBarActionTypes.MANAGE_AS_ADMIN]:u.createManageAsAdminActionSelector(),[o.ActionBarActionTypes.REQUEST_FILES]:f.createRequestFilesActionSelector(),[o.ActionBarActionTypes.OPEN_MAC_DESKTOP]:O.createOpenMacDesktopActionSelector(),[o.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP]:O.createOpenWindowsDesktopActionSelector(),[o.ActionBarActionTypes.CONVERT_TO_PDF]:c.createConvertToPdfActionSelector(),[o.ActionBarActionTypes.SAVE_AS]:A.createFileConversionActionSelector(),[o.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION]:a.createAutomationFolderActionSelector("edit"),[o.ActionBarActionTypes.ADD_FOLDER_AUTOMATION]:a.createAutomationFolderActionSelector("add"),[o.ActionBarActionTypes.CONVERT_TO_ARCHIVE]:E.createConvertToArchiveActionSelector(),[o.ActionBarActionTypes.SHARE]:R.createShareActionSelector(!0,!1),[o.ActionBarActionTypes.SHARE_COPY_LINK]:y.createShareCopyLinkActionSelector(!1),[o.ActionBarActionTypes.REQUEST_APPROVAL]:w.createRequestApprovalActionSelector(),[o.ActionBarActionTypes.ACTIVITY]:C.createActivityActionSelector()}),t.getInlineFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[o.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelector(),[o.ActionBarActionTypes.SHARE_COPY_LINK]:y.createShareCopyLinkActionSelector(),[o.ActionBarActionTypes.SEND_FOR_SIGNATURE]:v.createSendForSignatureActionSelector()}),t.getTabletFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[o.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelectorForTabletView()}),t.getMobileFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[o.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelector()}),t.getSidebarFileActionSelectors=()=>({[o.ActionBarActionTypes.SHARE]:R.createShareActionSelector()}),t.getTabletSidebarFileActionSelectors=()=>({[o.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelector()}),t.FileActionsHandlersMap={[o.ActionBarActionTypes.RENAME]:I.renameActionHandler,[o.ActionBarActionTypes.DOWNLOAD]:d.downloadActionHandler,[o.ActionBarActionTypes.COMMENT]:s.commentActionHandler,[o.ActionBarActionTypes.EVENTS]:_.eventsActionHandler,[o.ActionBarActionTypes.VERSION_HISTORY]:b.versionHistoryActionHandler,[o.ActionBarActionTypes.COPY]:r.copyActionHandler,[o.ActionBarActionTypes.MOVE]:S.moveActionHandler,[o.ActionBarActionTypes.DELETE]:l.deleteActionHandler,[o.ActionBarActionTypes.REMOVE]:l.deleteActionHandler,[o.ActionBarActionTypes.RESTORE]:N.restoreActionHandler,[o.ActionBarActionTypes.PERMANENT_DELETE]:m.permanentDeleteActionHandler,[o.ActionBarActionTypes.STAR]:M.starActionHandler,[o.ActionBarActionTypes.UNSTAR]:F.unstarActionHandler,[o.ActionBarActionTypes.OPEN]:T.openActionHandler,[o.ActionBarActionTypes.SHARE_MODAL]:g.shareModalActionHandler,[o.ActionBarActionTypes.ARCHIVE]:i.archiveActionHandler,[o.ActionBarActionTypes.GO_TO_FOLDER]:p.goToFolderActionHandler,[o.ActionBarActionTypes.MANAGE_AS_ADMIN]:u.manageAsAdminActionHandler,[o.ActionBarActionTypes.REQUEST_FILES]:f.requestFilesActionHandler,[o.ActionBarActionTypes.OPEN_MAC_DESKTOP]:O.openDesktopActionHandler,[o.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP]:O.openDesktopActionHandler,[o.ActionBarActionTypes.SHARE_COPY_LINK]:y.shareCopyLinkActionHandler,[o.ActionBarActionTypes.CONVERT_TO_PDF]:c.convertToPdfActionHandler,[o.ActionBarActionTypes.SAVE_AS]:A.fileConversionActionHandler,[o.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION]:a.editAutomationFolderActionHandler,[o.ActionBarActionTypes.ADD_FOLDER_AUTOMATION]:a.addAutomationFolderActionHandler,[o.ActionBarActionTypes.CONVERT_TO_ARCHIVE]:E.convertToArchiveActionHandler,[o.ActionBarActionTypes.SEND_FOR_SIGNATURE]:v.sendForSignatureActionHandler,[o.ActionBarActionTypes.REQUEST_APPROVAL]:w.requestApprovalActionHandler},t.ActionMenuToggleHandlersMap={[o.ActionBarActionTypes.OPEN]:T.openActionMenuToggleHandler,[o.ActionBarActionTypes.SPACES_DROPDOWN]:h.spacesDropdownActionMenuToggleHandler,[o.ActionBarActionTypes.ACTIVITY]:C.openActivityMenuToggleHandler};const P={[o.ActionBarActionEventSource.BUTTON]:D.ActionSourceValue.BUTTON,[o.ActionBarActionEventSource.BUTTON_MENU]:D.ActionSourceValue.BUTTON_MENU,[o.ActionBarActionEventSource.OVERFLOW_MENU]:D.ActionSourceValue.OVERFLOW_MENU};t.actionHandler=(e,t,o,n)=>(i,a)=>{const s=o[e.type];if(s){s(a(),Object.assign(Object.assign({},t),{actionSource:P[e.source]}),{menuValue:e.menuItem,anchorRef:e.anchorRef,onHoverLocked:null==n?void 0:n.onHoverLocked,onActionFlowComplete:e.onActionFlowComplete})}},t.actionMenuToggleHandler=({type:e,isOpen:t},o,n)=>(i,a)=>{const s=n[e];if(s){s(a(),o,t)}},t.createActionBarActionSelector=()=>n.dedupe(B,(e,t,o,n)=>{const i={},{alwaysAtTopLevel:a,atTopLevelIfSpace:s,alwaysInOverflow:c}=n(e,t);return i.alwaysAtTopLevel=a?G(e,t,o,a):[],i.atTopLevelIfSpace=s?G(e,t,o,s):[],i.alwaysInOverflow=c?c.map(n=>G(e,t,o,n)):[[]],i});const B=(e,t)=>{var o;return L.shallowEqualArray(e.alwaysAtTopLevel,t.alwaysAtTopLevel)&&L.shallowEqualArray(e.atTopLevelIfSpace,t.atTopLevelIfSpace)&&!!(null===(o=e.alwaysInOverflow)||void 0===o?void 0:o.every((e,o)=>L.shallowEqualArray(e,t.alwaysInOverflow?t.alwaysInOverflow[o]:[])))},G=(e,t,o,n)=>{const i=[];return n.forEach(n=>{const a=o[n],s=a&&a(e,t);s&&i.push(s)}),i}})),define("modules/clean/react/action_bar/file_actions/file_actions_selectors",["require","exports","tslib","reselect","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/filepath/filepath","modules/clean/filetypes","modules/clean/react/action_bar/file_actions/file_actions_types","modules/clean/react/browse/constants","modules/clean/react/browse/models","modules/clean/react/files_view/data/selectors/instance_selectors","modules/clean/react/files_view/util","modules/clean/search/constants","modules/clean/sharing/gating_util","modules/clean/unity/check_file_cache","modules/clean/unity/features","modules/clean/react/browse/data/selectors","modules/clean/react/flows/types"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p,u,S,T,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoFolderEligibility=t.swapFollowAndTidy=t.isFolderTidyable=t.showTransferInShareDropdown=t.searchSidebarActionsMap=t.expSearchActionsMap=t.searchActionsMap=t.createSearchActionBarAccessibilityConfigSelector=t.copyActionBarActions=t.getSearchSidebarScenarioActions=t.getSearchInlineOverflowMenuActions=t.getSearchInlineScenarioActions=t.getInlineScenarioActions=t.getSearchScenarioActions=t.getActionHandlerArgs=t.expMultiObjectSharingRedesignIsOn=t.expActionBarRedesignIsOn=t.isRightRailCollapsed=t.accessibilityConfig=t.hasLinkedMobile=t.browsePostTTIData=t.isSameDirectory=t.isCdmRoot=t.getFlowsFolderRule=t.flowsFolderRule=t.isVaultFolderSelected=t.isUnityOpenAvailable=t.isTeamSharedFolderSelected=t.isTeamMemberFolderSelected=t.isSingleSelectionFolder=t.isSingleSelectionFile=t.isSingleSelection=t.isSelectionWritable=t.isSelectionFoldersOnly=t.isSelectionFilesOnly=t.isSelectionFetchFolderSizeStatusOnly=t.isRestrictedPathSelected=t.isPnmSuppressShareSelected=t.isPnmSuppressMoveSelected=t.isPnmSuppressDeleteSelected=t.isPnmLinkNodeSelected=t.isPermanentDeleteDisabled=t.isNothingSelected=t.isLiveFilesOnly=t.isFileSharedWithMeSelected=t.isFamilySharedFolderSelected=t.isDeletedFilesOnly=t.isCloudDocSelected=t.isCloudDocFileSharedWithMeSelected=t.isAppFolderSelected=t.isNoAccessSharedFolderSelected=t.hasUnmountedOrMultipleNamespaces=t.hasNewOwnershipModel=t.hasContentManagerAndSuperAdmin=t.actionBarSelectionType=t.isSelectedBackupFolder=t.isInsideBackupFolder=t.isCreatingSharedLink=t.experiments=t.overQuotaData=t.isGridView=t.viewType=t.currentFolderInfo=t.context=t.selectedFiles=t.user=t.actionSource=t.actionSurface=t.isSearchMode=t.defaultExperiments=t.defaultOverQuotaData=void 0,u=o.__importDefault(u),t.defaultOverQuotaData={isOverFreeQuota:!1,hasExcludedNsIds:!1},t.defaultExperiments={expVaultEnableViewOnlySharing:!1,expSpacesFssDropdown:!1,expManualPdfConversion:!1,expShowTransferInShare:!1,expTidyUpBrowse:!1,expTidyUpSmartPocEnabled:!1,expTidyUpIATester:!1,expFlowsAutomatedFolderUI:!1,expFlowsFileConversionUI:!1,expActionBarRedesign:"OFF",expFlowsManualArchive:!1,expFlowsManualVideoRemuxUi:!1,expFlowsManualVideoGifUi:!1,expFssEntryPointForSpaces:!1,expPgEsignDiscoveryFileHover:!1,expFlowsApprovalFlow:!1,expSynchronousSingleFileActions:!1,expEnableSharingNSF:!1,expIsTransferEnabled:!1,expMultiObjectSharingRedesign:"OFF",expFlowsAudioConversionUi:!1},t.isSearchMode=(e,t)=>t.isSearchMode,t.actionSurface=(e,t)=>t.actionSurface,t.actionSource=(e,t)=>t.actionSource,t.user=(e,t)=>t.userSelector(e),t.selectedFiles=(e,t)=>t.selectedFilesSelector(e),t.context=(e,t)=>t.contextSelector(e),t.currentFolderInfo=(e,t)=>t.currentFolderInfo(e),t.viewType=(e,t)=>d.selectViewType(e,{instanceId:t.isSearchMode?A.SEARCH_FILES_VIEW_ID:r.BROWSE_FILES_VIEW_ID}),t.isGridView=(e,t)=>{const o=t.isSearchMode?A.SEARCH_FILES_VIEW_ID:r.BROWSE_FILES_VIEW_ID;return d.selectIsGridView(e,{instanceId:o})},t.overQuotaData=(e,t)=>t.overQuotaDataSelector(e),t.experiments=(e,t)=>t.experimentSelector(e),t.isCreatingSharedLink=(e,t)=>Boolean(t.isCreatingSharedLinkSelector),t.isInsideBackupFolder=(e,t)=>t.isInsideBackupFolder(e),t.isSelectedBackupFolder=(e,t)=>t.isSelectedBackupFolder(e),t.actionBarSelectionType=n.createSelector(t.selectedFiles,t.isInsideBackupFolder,t.isSelectedBackupFolder,(e,t,o)=>t?c.ActionBarSelectionType.BACKUP_CONTENT:o?c.ActionBarSelectionType.BACKUP_FOLDER:0===e.count()?c.ActionBarSelectionType.NONE:e.some(e=>e.type===s.FileTypes.VAULT_FOLDER)?c.ActionBarSelectionType.VAULT:1===e.count()?e.first().is_dir?c.ActionBarSelectionType.FOLDER:c.ActionBarSelectionType.FILE:c.ActionBarSelectionType.MULTIPLE),t.hasContentManagerAndSuperAdmin=n.createSelector(t.user,e=>p.GoldenGate.hasContentManagerAndSuperAdmin(e.id)),t.hasNewOwnershipModel=n.createSelector(t.user,e=>p.GoldenGate.hasNewOwnershipModel(e.id)),t.hasUnmountedOrMultipleNamespaces=n.createSelector(t.selectedFiles,e=>{const t=e.first();return e.some(e=>e.is_unmounted||e.ns_id!==t.ns_id)}),t.isNoAccessSharedFolderSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>l.File.isNoAccessSharedFolder(e))),t.isAppFolderSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.type===s.FileTypes.SANDBOX)),t.isCloudDocFileSharedWithMeSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.is_cloud_doc&&e instanceof l.FileSharedWithMe)),t.isCloudDocSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.is_cloud_doc)),t.isDeletedFilesOnly=n.createSelector(t.selectedFiles,e=>e.every(e=>e.isDeleted||e.is_unmounted)),t.isFamilySharedFolderSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.type===s.FileTypes.FAMILY_SHARED_FOLDER)),t.isFileSharedWithMeSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e instanceof l.FileSharedWithMe)),t.isLiveFilesOnly=n.createSelector(t.selectedFiles,e=>e.every(e=>!e.isDeleted&&!e.is_unmounted)),t.isNothingSelected=n.createSelector(t.selectedFiles,e=>0===e.count()),t.isPermanentDeleteDisabled=n.createSelector(t.selectedFiles,t.context,(e,t)=>t.permanentDeletionDisabledStateByNSID[t.currentNSID]||!1),t.isPnmLinkNodeSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.link_node)})),t.isPnmSuppressDeleteSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_delete)})),t.isPnmSuppressMoveSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_move)})),t.isPnmSuppressShareSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>{var t,o;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_ns_partition)||!!(null===(o=e.per_node_metadata)||void 0===o?void 0:o.suppress_shared_link)})),t.isRestrictedPathSelected=n.createSelector(t.selectedFiles,t.context,(e,t)=>e.some(e=>!l.File.canViewFileMembers(e,t))),t.isSelectionFetchFolderSizeStatusOnly=n.createSelector(t.selectedFiles,e=>e.every(e=>null==e.fetchFolderSizesStatus)),t.isSelectionFilesOnly=n.createSelector(t.selectedFiles,e=>e.every(e=>e.type===s.FileTypes.FILE)),t.isSelectionFoldersOnly=n.createSelector(t.selectedFiles,e=>e.every(e=>e.is_dir)),t.isSelectionWritable=n.createSelector(t.selectedFiles,t.context,(e,t)=>t.isCurrentPathWriteable()&&!e.some(e=>e.read_only)),t.isSingleSelection=n.createSelector(t.selectedFiles,e=>1===e.count()),t.isSingleSelectionFile=n.createSelector(t.selectedFiles,e=>1===e.count()&&!e.first().is_dir),t.isSingleSelectionFolder=n.createSelector(t.selectedFiles,e=>1===e.count()&&e.first().is_dir),t.isTeamMemberFolderSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.type===s.FileTypes.TEAM_MEMBER_FOLDER)),t.isTeamSharedFolderSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.type===s.FileTypes.TEAM_SHARED_FOLDER)),t.isUnityOpenAvailable=(e,o)=>{const n=t.selectedFiles(e,o).first();return t.isSingleSelection(e,o)&&!t.isFileSharedWithMeSelected(e,o)&&S.UnityFeatures.isUnitySupported()&&(null===u.default||void 0===u.default?void 0:u.default.is_cached_and_locally_available(n.ns_id,n.ns_path))},t.isVaultFolderSelected=n.createSelector(t.selectedFiles,e=>e.some(e=>e.type===s.FileTypes.VAULT_FOLDER)),t.flowsFolderRule=(e,t,o)=>t.flowsFolderRule(e,o),t.getFlowsFolderRule=(e,o)=>{const n=t.selectedFiles(e,o).first(),i=t.currentFolderInfo(e,o);return n&&t.flowsFolderRule(e,o,n.fq_path)||!n&&i&&t.flowsFolderRule(e,o,i.fq_path)||E.FlowsRuleType.None},t.isCdmRoot=n.createSelector(t.user,t.context,(e,t)=>e.is_cdm_member&&"/"===t.currentFQPath),t.isSameDirectory=n.createSelector(t.selectedFiles,e=>{const t=e.toArray().map(e=>e.fq_path);return a.inSameDirectory(t)}),t.browsePostTTIData=(e,t)=>{if(t.browsePostTTIData)return t.browsePostTTIData(e)},t.hasLinkedMobile=(e,t)=>{if(t.hasLinkedMobile)return t.hasLinkedMobile(e)},t.accessibilityConfig=(e,t)=>{if(t.accessibilityConfig)return t.accessibilityConfig(e)},t.isRightRailCollapsed=(e,t)=>t.rightRailCollapsedState(e),t.expActionBarRedesignIsOn=n.createSelector(t.experiments,e=>"OFF"!==e.expActionBarRedesign&&"CONTROL"!==e.expActionBarRedesign),t.expMultiObjectSharingRedesignIsOn=n.createSelector(t.experiments,e=>"ON"===e.expMultiObjectSharingRedesign),t.getActionHandlerArgs=n.createSelector(t.user,t.selectedFiles,t.viewType,t.isSearchMode,t.actionSurface,t.actionSource,t.context,t.isRightRailCollapsed,(e,t,o,n,i,a,s,c)=>({user:e,files:t,isSearchMode:n,viewType:o,actionSurface:i,actionSource:a,context:s,rightRailState:c?"collapsed":"opened"})),t.getSearchScenarioActions=n.createSelector(t.actionBarSelectionType,t.expActionBarRedesignIsOn,(e,o)=>o?t.expSearchActionsMap[e]:t.searchActionsMap[e]),t.getInlineScenarioActions=(e,t,o=!1,n=!1)=>{const a={};if(n)a.alwaysInOverflow=e.alwaysInOverflow;else{const t=(e.alwaysAtTopLevel||[]).concat(e.atTopLevelIfSpace||[]).concat([].concat.apply([],e.alwaysInOverflow)).filter(e=>e!==i.ActionBarActionTypes.CREATE);a.alwaysInOverflow=[t]}if(!t){const e=[];o?e.push(i.ActionBarActionTypes.SHARE_COPY_LINK,i.ActionBarActionTypes.MANAGE_FOLDER_RULES,i.ActionBarActionTypes.SHARE_MODAL):e.push(i.ActionBarActionTypes.MANAGE_FOLDER_RULES,i.ActionBarActionTypes.SHARE_MODAL,i.ActionBarActionTypes.SHARE_COPY_LINK),a.alwaysAtTopLevel=e}return a},t.getSearchInlineScenarioActions=n.createSelector(t.actionBarSelectionType,t.expActionBarRedesignIsOn,(e,o)=>t.getInlineScenarioActions(o?t.expSearchActionsMap[e]:t.searchActionsMap[e],!1,!0,o)),t.getSearchInlineOverflowMenuActions=n.createSelector(t.actionBarSelectionType,t.expActionBarRedesignIsOn,(e,o)=>t.getInlineScenarioActions(o?t.expSearchActionsMap[e]:t.searchActionsMap[e],!0,!1,o)),t.getSearchSidebarScenarioActions=n.createSelector(t.actionBarSelectionType,e=>t.searchSidebarActionsMap[e]),t.copyActionBarActions=e=>{const{alwaysAtTopLevel:t,atTopLevelIfSpace:o,alwaysInOverflow:n}=e,i={};return i.alwaysAtTopLevel=null==t?void 0:t.slice(),i.atTopLevelIfSpace=null==o?void 0:o.slice(),i.alwaysInOverflow=null==n?void 0:n.map(e=>e.slice()),i},t.createSearchActionBarAccessibilityConfigSelector=()=>n.createSelector(t.selectedFiles,e=>{if(0!==e.size)return{primaryActionContext:void 0,secondaryActionsContext:{firstEntryAccessibilityHint:_.getFilename(e.first()),noOfEntries:e.size}}}),t.searchActionsMap={[c.ActionBarSelectionType.NONE]:{},[c.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[i.ActionBarActionTypes.SHARE,i.ActionBarActionTypes.SHARE_MODAL,i.ActionBarActionTypes.SHARE_COPY_LINK,i.ActionBarActionTypes.OPEN,i.ActionBarActionTypes.SEND_FOR_SIGNATURE,i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.GO_TO_FOLDER,i.ActionBarActionTypes.MOVE,i.ActionBarActionTypes.COPY,i.ActionBarActionTypes.RENAME,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.REMOVE,i.ActionBarActionTypes.COMMENT,i.ActionBarActionTypes.STAR,i.ActionBarActionTypes.UNSTAR,i.ActionBarActionTypes.REQUEST_APPROVAL,i.ActionBarActionTypes.CONVERT_TO_PDF,i.ActionBarActionTypes.VERSION_HISTORY,i.ActionBarActionTypes.OPEN_MAC_DESKTOP,i.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP,i.ActionBarActionTypes.MANAGE_AS_ADMIN]]},[c.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[i.ActionBarActionTypes.SHARE,i.ActionBarActionTypes.SHARE_MODAL,i.ActionBarActionTypes.SHARE_COPY_LINK,i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.GO_TO_FOLDER,i.ActionBarActionTypes.MOVE,i.ActionBarActionTypes.COPY,i.ActionBarActionTypes.RENAME,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.REQUEST_FILES,i.ActionBarActionTypes.STAR,i.ActionBarActionTypes.UNSTAR,i.ActionBarActionTypes.EVENTS,i.ActionBarActionTypes.OPEN_MAC_DESKTOP,i.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP,i.ActionBarActionTypes.MANAGE_AS_ADMIN]]},[c.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.GO_TO_FOLDER,i.ActionBarActionTypes.MOVE,i.ActionBarActionTypes.COPY,i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE],alwaysInOverflow:[[i.ActionBarActionTypes.MANAGE_AS_ADMIN]]},[c.ActionBarSelectionType.VAULT]:{},[c.ActionBarSelectionType.BACKUP_CONTENT]:{alwaysAtTopLevel:[i.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[i.ActionBarActionTypes.REWIND,i.ActionBarActionTypes.VERSION_HISTORY]},[c.ActionBarSelectionType.BACKUP_FOLDER]:{alwaysAtTopLevel:[i.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[i.ActionBarActionTypes.REWIND,i.ActionBarActionTypes.DELETE]}},t.expSearchActionsMap={[c.ActionBarSelectionType.NONE]:{},[c.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.OPEN,i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE,i.ActionBarActionTypes.VAULT_LOCK,i.ActionBarActionTypes.VAULT_UNLOCK,i.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[i.ActionBarActionTypes.SHARE,i.ActionBarActionTypes.SHARE_COPY_LINK,i.ActionBarActionTypes.OPEN,i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.REQUEST_APPROVAL,i.ActionBarActionTypes.CONVERT_TO_PDF,i.ActionBarActionTypes.SAVE_AS],[i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE,i.ActionBarActionTypes.REMOVE,i.ActionBarActionTypes.RENAME,i.ActionBarActionTypes.MOVE,i.ActionBarActionTypes.COPY],[i.ActionBarActionTypes.STAR,i.ActionBarActionTypes.UNSTAR,i.ActionBarActionTypes.PIN_TO,i.ActionBarActionTypes.PIN_TO_ROOT,i.ActionBarActionTypes.UNPIN],[i.ActionBarActionTypes.VERSION_HISTORY,i.ActionBarActionTypes.FILE_LOCK,i.ActionBarActionTypes.FILE_UNLOCK,i.ActionBarActionTypes.FILE_REQUEST_UNLOCK]]},[c.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.OPEN,i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE,i.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[i.ActionBarActionTypes.SHARE,i.ActionBarActionTypes.SHARE_COPY_LINK,i.ActionBarActionTypes.OPEN,i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.CHANGE_TO_PDF_FOLDER,i.ActionBarActionTypes.CHANGE_TO_UNZIP_FOLDER,i.ActionBarActionTypes.MANAGE_FOLDER_RULES,i.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,i.ActionBarActionTypes.ADD_FOLDER_AUTOMATION],[i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RENAME,i.ActionBarActionTypes.MOVE,i.ActionBarActionTypes.COPY],[i.ActionBarActionTypes.STAR,i.ActionBarActionTypes.UNSTAR,i.ActionBarActionTypes.UNPIN,i.ActionBarActionTypes.PIN_TO,i.ActionBarActionTypes.PIN_TO_ROOT],[i.ActionBarActionTypes.SPACES_REDIRECT,i.ActionBarActionTypes.FOLLOW,i.ActionBarActionTypes.FOLLOWING,i.ActionBarActionTypes.TIDY_UP,i.ActionBarActionTypes.REQUEST_FILES,i.ActionBarActionTypes.REWIND]]},[c.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE,i.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[i.ActionBarActionTypes.SHARE,i.ActionBarActionTypes.DOWNLOAD,i.ActionBarActionTypes.DELETE,i.ActionBarActionTypes.RESTORE,i.ActionBarActionTypes.PERMANENT_DELETE,i.ActionBarActionTypes.MOVE,i.ActionBarActionTypes.COPY]]},[c.ActionBarSelectionType.VAULT]:{}},t.searchSidebarActionsMap={[c.ActionBarSelectionType.NONE]:{},[c.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[i.ActionBarActionTypes.SHARE]},[c.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[i.ActionBarActionTypes.SHARE]},[c.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[i.ActionBarActionTypes.SHARE]},[c.ActionBarSelectionType.VAULT]:{}},t.showTransferInShareDropdown=(e,o)=>t.experiments(e,o).expShowTransferInShare,t.isFolderTidyable=n.createSelector(t.isNothingSelected,T.unsortedFiles,(e,t)=>{if(e){const e=t,o=0===e.count(),n=e.every(e=>e.is_dir);return!o&&!n}return!1}),t.swapFollowAndTidy=n.createSelector(t.isFolderTidyable,t.experiments,(e,t)=>!!t.expTidyUpBrowse&&e),t.getAutoFolderEligibility=n.createSelector(t.context,t.currentFolderInfo,(e,t)=>({isCurrentFolderEligibleForAutomation:t&&e.isInFolderMode&&!e.isCurrentlyInRoot&&!e.isInsideTeamFolderRoot&&!e.isInsideVaultFolder&&t.type!==s.FileTypes.TEAM_MEMBER_FOLDER&&!l.File.isReadOnlySharedFolder(t),isSubfolderEligibleForAutomation:t&&!e.isInsideVaultFolder&&!l.File.isReadOnlySharedFolder(t)}))})),define("modules/clean/react/action_bar/file_actions/move_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/action_bar/file_actions/move"],(function(e,t,o,n,i,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMoveActionSelector=t.moveActionHandler=void 0,t.moveActionHandler=(e,t)=>{var o,n;const i=s.context(e,t),{isOverFreeQuota:a,hasExcludedNsIds:r}=s.overQuotaData(e,t),{expEnableSharingNSF:l}=s.experiments(e,t);c.handleMove(Object.assign(Object.assign({},s.getActionHandlerArgs(e,t)),{synchronousSingleFileActions:Boolean(null===(n=null===(o=t.browsePostTTIExperiments)||void 0===o?void 0:o.call(t,e))||void 0===n?void 0:n.expSynchronousSingleFileActions)}),i,{isOverFreeQuota:a,hasExcludedNsIds:r,expEnableSharingNSF:l})};const r=(e,t)=>s.isLiveFilesOnly(e,t)&&!s.isFileSharedWithMeSelected(e,t)&&!s.isTeamSharedFolderSelected(e,t)&&!s.isTeamMemberFolderSelected(e,t)&&!s.isPnmLinkNodeSelected(e,t)&&!s.isPnmSuppressMoveSelected(e,t)&&!s.isVaultFolderSelected(e,t);t.createMoveActionSelector=()=>o.createSelector(s.context,s.selectedFiles,r,(e,t,o)=>o?{actionType:i.ActionBarActionTypes.MOVE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:a.MOVE_ACTION_STRING,icon:n.MoveLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/open_action",["require","exports","tslib","react","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/file_store/utils","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/extensions/extensions_menu_component_v2","modules/clean/react/file_viewer/unity/with_unity","modules/clean/web_user_action_events","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/action_bar/file_actions/open_desktop_action","modules/clean/react/action_bar/file_actions/go_to_folder_action","modules/clean/reel/lib/utils"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p,u,S,T,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openActionMenuToggleHandler=t.createOpenActionSelector=t.openActionHandler=void 0,n=o.__importDefault(n),d=o.__importStar(d);const O={surface:"action-bar"};t.openActionHandler=(e,t,o)=>{const n=null==o?void 0:o.menuValue;d.handleExtensionClick(l.getActionHandlerArgs(e,t),t.actionSurface,(null==n?void 0:n.actionName)||(null==n?void 0:n.userAction)),null==n||n.handler()};const m=(e,t)=>()=>{T.goToFolderActionHandler(e,t)},I=i.createSelector(l.getActionHandlerArgs,e=>({openInNewTabActionHandler:()=>{d.handleOpenInNewTab(e)},openDesktopActionHandler:()=>{u.handleOpenInDesktop(e)},replayActionHandler:()=>{d.handleReplay(e)},previewActionHandler:()=>{d.handlePreview(e,p.ActionSourceValue.OVERFLOW_MENU)}})),f=(e,t)=>l.isSingleSelection(e,t)&&l.isLiveFilesOnly(e,t)&&!l.isFileSharedWithMeSelected(e,t)&&!l.isTeamSharedFolderSelected(e,t)&&!l.isTeamMemberFolderSelected(e,t)&&!l.isPnmLinkNodeSelected(e,t)&&!l.context(e,t).isInsideVaultFolder,N=[".aac",".aif",".aiff",".flac",".m4a",".m4r",".mp3",".oga",".ogg",".wav",".wma"].concat([".3gp",".3gpp",".3gpp2",".asf",".avi",".dv",".flv",".m2t",".m2ts",".m4v",".mkv",".mov",".mp4",".mpeg",".mpg",".mts",".mxf",".oggtheora",".ogv",".rm",".ts",".vob",".webm",".wmv"]);t.createOpenActionSelector=()=>i.createSelector(l.user,l.selectedFiles,f,S.showOpenDesktopAction,I,m,l.expActionBarRedesignIsOn,T.goToFolderAction,l.isSearchMode,l.getAutoFolderEligibility,(e,t,o,i,c,l,d,_,A,p)=>{const u=t.first(),S=o&&!u.is_dir?c.previewActionHandler:void 0,T=E.reelOpenWithEnabled()&&o&&N.includes(u.ext)?c.replayActionHandler:void 0,m=d&&o&&i?c.openDesktopActionHandler:void 0,I=d&&o&&_&&A?l:void 0,f=o?c.openInNewTabActionHandler:void 0;return o?{actionType:s.ActionBarActionTypes.OPEN,isEnabled:!0,text:d?A?r.EXP_OPEN_ACTION_STRING:r.EXP_OPEN_IN_ACTION_STRING:r.OPEN_ACTION_STRING,icon:a.OpenLine,menu:{type:s.ActionBarMenuType.CUSTOM_DROPDOWN,menuContent:n.default.createElement(R,{user:e,file:u,telemetryContext:O,isInActionBar:!0,previewActionHandler:S,replayActionHandler:T,openInNewTabActionHandler:f,openDesktopActionHandler:m,goToFolderActionHandler:I,isCurrentFolderEligibleForAutomation:p.isCurrentFolderEligibleForAutomation,isSubfolderEligibleForAutomation:p.isSubfolderEligibleForAutomation})}}:void 0});const R=e=>c.isBrowseFile(e.file)?n.default.createElement(A.WithUnity,{file:e.file,user:e.user,render:t=>n.default.createElement(_.ExtensionsPopoverContent,Object.assign({},e,{unityInfo:t}))}):n.default.createElement(_.ExtensionsPopoverContent,Object.assign({},e));R.displayName="OpenMenuContent",t.openActionMenuToggleHandler=(e,t,o)=>{o&&d.handleExtensionDropdownOpen(l.getActionHandlerArgs(e,t),t.actionSurface)}})),define("modules/clean/react/action_bar/file_actions/permanent_delete_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,n,i,a,s,c,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPermanentDeleteActionSelector=t.permanentDeleteActionHandler=void 0,r=o.__importStar(r),t.permanentDeleteActionHandler=(e,t)=>{const o=c.context(e,t);r.handlePermanentDelete(c.getActionHandlerArgs(e,t),o)};const l=(e,t)=>c.isDeletedFilesOnly(e,t)&&!c.hasUnmountedOrMultipleNamespaces(e,t)&&!c.isPermanentDeleteDisabled(e,t),d={actionType:a.ActionBarActionTypes.PERMANENT_DELETE,isEnabled:!0,text:s.PERMANENT_DELETE_ACTION_STRING,icon:i.DeleteForeverLine};t.createPermanentDeleteActionSelector=()=>n.createSelector(l,e=>e?d:void 0)})),define("modules/clean/react/action_bar/file_actions/rename_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/filetypes","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,n,i,a,s,c,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRenameActionSelector=t.renameActionHandler=void 0,l=o.__importStar(l),t.renameActionHandler=(e,t)=>{r.selectedFiles(e,t).first().type===s.FileTypes.TEAM_SHARED_FOLDER?l.handleRenameTeamFolder(r.getActionHandlerArgs(e,t)):l.handleRename(r.getActionHandlerArgs(e,t))};const d=(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&(r.isTeamSharedFolderSelected(e,t)?r.hasContentManagerAndSuperAdmin(e,t):!(r.isPnmSuppressMoveSelected(e,t)||r.isPnmLinkNodeSelected(e,t)||r.isVaultFolderSelected(e,t)||r.isFileSharedWithMeSelected(e,t)));t.createRenameActionSelector=()=>n.createSelector(d,r.context,r.selectedFiles,(e,t,o)=>e?{actionType:a.ActionBarActionTypes.RENAME,isEnabled:t.isCurrentPathWriteable()&&!o.some(e=>e.read_only),text:c.RENAME_ACTION_STRING,icon:i.EditLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/restore_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers"],(function(e,t,o,n,i,a,s,c,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRestoreActionSelector=t.showRestoreAction=t.restoreActionHandler=void 0,r=o.__importStar(r),t.restoreActionHandler=(e,t)=>{const o=c.context(e,t);r.handleRestore(c.getActionHandlerArgs(e,t),o)},t.showRestoreAction=(e,t)=>{if(c.isNothingSelected(e,t)||!c.isDeletedFilesOnly(e,t)||c.hasUnmountedOrMultipleNamespaces(e,t))return!1;const o=c.selectedFiles(e,t).first().target_ns;return!(c.isSingleSelectionFolder(e,t)&&o&&0!==o)||c.context(e,t).currentNSAllowsNesting},t.createRestoreActionSelector=()=>n.createSelector(t.showRestoreAction,c.context,c.selectedFiles,(e,t,o)=>e?{actionType:a.ActionBarActionTypes.RESTORE,isEnabled:t.isCurrentPathWriteable()&&!o.some(e=>e.read_only),text:s.RESTORE_ACTION_STRING,icon:i.RestoreLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/share_action",["require","exports","tslib","react","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/action_bar/file_actions/share","modules/clean/react/browse/global_actions/browse_global_actions_handlers","modules/clean/react/browse/global_actions/browse_global_actions_helpers","modules/clean/react/browse/models","modules/clean/react/extensions/data/types","modules/clean/react/extensions/split_share_button","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/browse/browse_actions/browse_add_to_transfer_action","modules/clean/web_user_action_events"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p,u,S,T,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createShareActionSelector=t.shouldShowShareAction=t.isFssShareEnabled=void 0,n=o.__importDefault(n),d=o.__importStar(d);const O={surface:"action-bar"};t.isFssShareEnabled=(e,t)=>m(e,t),t.shouldShowShareAction=(e,t)=>{const{expMultiObjectSharingRedesign:o}=r.experiments(e,t);return m(e,t,"ON"===o)};const m=(e,t,o=!1)=>{const n=r.context(e,t),{expVaultEnableViewOnlySharing:i}=r.experiments(e,t);return!r.isInsideBackupFolder(e,t)&&(r.isNothingSelected(e,t)?!(r.isCdmRoot(e,t)||n.isCurrentlyInRoot||n.isInsideSandboxFolder||n.isInsideVaultFolder||n.isInFamilySharedFolder):(o||r.isSingleSelection(e,t))&&r.isLiveFilesOnly(e,t)&&!r.isPnmSuppressShareSelected(e,t)&&!r.isPnmLinkNodeSelected(e,t)&&!r.isVaultFolderSelected(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&(!n.isInsideVaultFolder||i)&&!r.isTeamMemberFolderSelected(e,t)&&!r.isAppFolderSelected(e,t))};t.createShareActionSelector=(e=!1,o=!0)=>i.createSelector(t.shouldShowShareAction,r.user,r.selectedFiles,r.context,r.getActionHandlerArgs,r.showTransferInShareDropdown,T.showAddToTransferAction,r.currentFolderInfo,r.isRightRailCollapsed,r.expActionBarRedesignIsOn,r.expMultiObjectSharingRedesignIsOn,(t,i,r,T,m,I,f,N,R,y,g)=>{if(!t||!y&&!o)return;if(0===r.count()&&!N)return;const M=0===r.count()?{files:N?[N]:[],logShareButtonClick:_.getLogSplitShareButtonFunction(i,R),onShowShare:()=>{d.handleSharedFolderClick(i,T)},onDropdownOpen:_.getLogOpenSplitShareFunction(i,R)}:{files:r.toArray(),onShowShare:l.handleSplitShareClick(m,T),onDropdownOpen:l.handleSplitShareOpen(m),logShareButtonClick:l.handleSplitShareLogging(m),onPresentInZoom:l.handlePresentInZoom(m)},F={files:M.files,user:i,variant:"opacity",triggerType:p.TriggerType.SidebarPrimaryButton,onShowShare:M.onShowShare,onDropdownOpen:M.onDropdownOpen,logShareButtonClick:M.logShareButtonClick,onPresentInZoom:M.onPresentInZoom,context:O,shouldUsePortalPopover:!0,showLeftDigIcon:!0,showTransferButton:I&&!!f,onAddToTransfer:()=>S.handleAddToTransfer(m),retrievalSource:m.isSearchMode?E.RetrievalSourceValue.SEARCH:E.RetrievalSourceValue.BROWSE,actionSurface:m.actionSurface},b=e&&r.count()>1&&g;return{actionType:s.ActionBarActionTypes.SHARE,isEnabled:0===r.count()||r.every(e=>A.File.canViewFileMembers(e,T)),text:b?c.SHARE_ALL_SELECTED_ACTION_STRING:c.SHARE_ACTION_STRING,icon:a.ShareArrowLine,button:e?void 0:n.default.createElement(u.SplitShareButton,Object.assign({},F,{renderMenuOnly:!1,expActionBarRedesignEnabled:y})),menu:e?{type:s.ActionBarMenuType.CUSTOM_DROPDOWN,menuContent:n.default.createElement(u.SplitShareButton,Object.assign({},F,{renderMenuOnly:!0}))}:void 0}})})),define("modules/clean/react/action_bar/file_actions/star_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/starred/browse_exports","modules/clean/react/browse/models"],(function(e,t,o,n,i,a,s,c,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStarActionSelector=t.starActionHandler=void 0,r=o.__importStar(r),t.starActionHandler=(e,t)=>{r.handleStar(c.getActionHandlerArgs(e,t))};const _=(e,t)=>c.isSingleSelection(e,t)&&c.isLiveFilesOnly(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&!c.context(e,t).isInsideVaultFolder&&!l.StarredStore.getIsStarred({id:c.selectedFiles(e,t).first().file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID});t.createStarActionSelector=()=>n.createSelector(_,c.selectedFiles,(e,t)=>e?{actionType:a.ActionBarActionTypes.STAR,isEnabled:!d.File.isNoAccessSharedFolder(t.first()),text:s.STAR_ACTION_STRING,icon:i.StarLine}:void 0)})),define("modules/clean/react/action_bar/file_actions/unstar_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/clean/react/starred/browse_exports"],(function(e,t,o,n,i,a,s,c,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnstarActionSelector=t.unstarActionHandler=void 0,r=o.__importStar(r),t.unstarActionHandler=(e,t)=>{r.handleUnstar(c.getActionHandlerArgs(e,t))};const d={actionType:a.ActionBarActionTypes.UNSTAR,isEnabled:!0,text:s.UNSTAR_ACTION_STRING,icon:i.StarFill},_=(e,t)=>c.isSingleSelection(e,t)&&c.isLiveFilesOnly(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&!c.context(e,t).isInsideVaultFolder&&l.StarredStore.getIsStarred({id:c.selectedFiles(e,t).first().file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID});t.createUnstarActionSelector=()=>n.createSelector(_,e=>e?d:void 0)})),define("modules/clean/react/action_bar/file_actions/version_history_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/cloud_docs/constants","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/file_actions_selectors","modules/clean/react/browse/file_actions/action_handlers","modules/core/i18n","modules/clean/react/action_bar/action_bar_activity_menu"],(function(e,t,o,n,i,a,s,c,r,l,d,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVersionHistoryActionMenuItem=t.createVersionHistoryActionSelector=t.showVersionHistoryAction=t.versionHistoryActionHandler=void 0,l=o.__importStar(l),t.versionHistoryActionHandler=(e,t)=>{l.handleVersions(r.getActionHandlerArgs(e,t))};const A={actionType:a.ActionBarActionTypes.VERSION_HISTORY,isEnabled:!0,text:c.VERSION_HISTORY_ACTION_STRING,icon:i.ClockLine};t.showVersionHistoryAction=(e,t)=>{const o=r.selectedFiles(e,t).first();return r.isSingleSelectionFile(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&(!r.isCloudDocSelected(e,t)||!s.isPointerByExtension(o.ns_path))&&!r.isPnmLinkNodeSelected(e,t)},t.createVersionHistoryActionSelector=()=>n.createSelector(t.showVersionHistoryAction,e=>e?A:void 0),t.createVersionHistoryActionMenuItem=(e,o)=>t.showVersionHistoryAction(e,o)?{value:{type:a.ActionBarActionTypes.VERSION_HISTORY,menuItem:_.ActivityAction.VERSION_HISTORY},description:d.intl.formatMessage(c.VERSION_HISTORY_ACTION_STRING),icon:i.ClockLine,isEnabled:!0}:void 0})),define("modules/clean/react/action_bar/action_bar_strings",["require","exports","react-intl"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACTION_DISABLED_STRING=t.ACTIVITY_ACTION_STRING=t.REQUEST_APPROVAL_STRING=t.SEND_FOR_SIGNATURE_ACTION_STRING=t.APPLY_NAMING_CONVENTION_ACTION_STRING=t.EDIT_FOLDER_AUTOMATION_STRING=t.ADD_FOLDER_AUTOMATION_STRING=t.FOLDER_RULES_SETTINGS=t.TIDY_UP_ACTION_STRING=t.CHANGE_TO_UNZIP_FOLDER_STRING=t.ADD_AUTOMATED_STRING=t.CHANGE_TO_PDF_FOLDER_STRING=t.CONVERT_TO_PDF_ACTION_STRING=t.CONVERT_TO_ARCHIVE_ACTION_STRING=t.FILE_CONVERSION_STRING=t.FOLLOWING_ACTION_STRING=t.FOLLOW_ACTION_STRING=t.SHARE_COPY_LINK_ACTION_TOOLTIP=t.SHARE_COPY_LINK_ACTION_STRING=t.EXP_OPEN_IN_APP_ACTION_STRING=t.OPEN_IN_APP_ACTION_STRING=t.OPEN_WINDOWS_DESKTOP_ACTION_STRING=t.OPEN_MAC_DESKTOP_ACTION_STRING=t.PREVIEW_ACTION_STRING=t.ADD_CONTENT_ACTION_STRING=t.GO_TO_FOLDER_ACTION_STRING=t.SHARE_ALL_SELECTED_ACTION_STRING=t.SHARE_ACTION_STRING=t.SPACES_PROJECTS_RENAME_DROPDOWN_ACTION_STRING=t.ADD_TO_TRANSFER_ACTION_STRING=t.HIDE_DELETED_FILES_ACTION_STRING=t.SHOW_DELETED_FILES_ACTION_STRING=t.RE_ADD_SHARED_FOLDER_ACTION_STRING=t.UNSTAR_ACTION_STRING=t.STAR_ACTION_STRING=t.PERMANENT_DELETE_ACTION_STRING=t.RESTORE_ACTION_STRING=t.PIN_TO_ROOT_ACTION_STRING=t.PIN_TO_ACTION_STRING=t.UNPIN_ACTION_STRING=t.VERSION_HISTORY_ACTION_STRING=t.MANAGE_AS_ADMIN_ACTION_STRING=t.CALCULATE_FOLDER_SIZE_ACTION_STRING=t.EVENTS_ACTION_STRING=t.FILE_REQUEST_UNLOCK_ACTION_STRING=t.FILE_UNLOCK_ACTION_STRING=t.FILE_LOCK_ACTION_STRING=t.VAULT_LOCK_STRING=t.VAULT_UNLOCK_STRING=t.COMMENT_ACTION_STRING=t.ARCHIVE_ACTION_STRING=t.REWIND_ACTION_STRING=t.FOLDER_HISTORY_ACTION_STRING=t.COPY_ACTION_STRING=t.REMOVE_ACTIION_STRING=t.DELETE_ACTION_STRING=t.RENAME_ACTION_STRING=t.MOVE_ACTION_STRING=t.PASTE_ACTION_STRING=t.EXP_OPEN_IN_NEW_TAB_ACTION_STRING=t.EXP_OPEN_IN_ACTION_STRING=t.EXP_OPEN_ACTION_STRING=t.OPEN_ACTION_STRING=t.REQUEST_FILES_ACTION_STRING=t.DOWNLOAD_ACTION_STRING=t.UPLOAD_ACTION_STRING=t.NEW_ACTION_STRING=t.ADD_ACTION_STRING=t.CREATE_ACTION_STRING=void 0,t.CREATE_ACTION_STRING=o.defineMessage({id:"nMBhV+",defaultMessage:"Create"}),t.ADD_ACTION_STRING=o.defineMessage({id:"/6ordy",defaultMessage:"Add"}),t.NEW_ACTION_STRING=o.defineMessage({id:"5o4J9F",defaultMessage:"New"}),t.UPLOAD_ACTION_STRING=o.defineMessage({id:"yZqpE+",defaultMessage:"Upload"}),t.DOWNLOAD_ACTION_STRING=o.defineMessage({id:"3xAi9D",defaultMessage:"Download"}),t.REQUEST_FILES_ACTION_STRING=o.defineMessage({id:"67epwi",defaultMessage:"Request files"}),t.OPEN_ACTION_STRING=o.defineMessage({id:"alhtiG",defaultMessage:"Open"}),t.EXP_OPEN_ACTION_STRING=o.defineMessage({id:"alhtiG",defaultMessage:"Open"}),t.EXP_OPEN_IN_ACTION_STRING=o.defineMessage({id:"MysX8v",defaultMessage:"Open in"}),t.EXP_OPEN_IN_NEW_TAB_ACTION_STRING=o.defineMessage({id:"N6Txco",defaultMessage:"Open in new tab"}),t.PASTE_ACTION_STRING=o.defineMessage({id:"eF4sif",defaultMessage:"Paste"}),t.MOVE_ACTION_STRING=o.defineMessage({id:"GtD4wV",defaultMessage:"Move"}),t.RENAME_ACTION_STRING=o.defineMessage({id:"DyrBQI",defaultMessage:"Rename"}),t.DELETE_ACTION_STRING=o.defineMessage({id:"nOBhEP",defaultMessage:"Delete"}),t.REMOVE_ACTIION_STRING=o.defineMessage({id:"efT3qC",defaultMessage:"Remove"}),t.COPY_ACTION_STRING=o.defineMessage({id:"6MJeaA",defaultMessage:"Copy"}),t.FOLDER_HISTORY_ACTION_STRING=o.defineMessage({id:"hunQnq",defaultMessage:"Folder history"}),t.REWIND_ACTION_STRING=o.defineMessage({id:"e3V4bo",defaultMessage:"Rewind this folder"}),t.ARCHIVE_ACTION_STRING=o.defineMessage({id:"uH1oiy",defaultMessage:"Archive"}),t.COMMENT_ACTION_STRING=o.defineMessage({id:"XAo7sk",defaultMessage:"Add comment"}),t.VAULT_UNLOCK_STRING=o.defineMessage({id:"7KlMwN",defaultMessage:"Unlock vault"}),t.VAULT_LOCK_STRING=o.defineMessage({id:"LQt5WS",defaultMessage:"Lock vault"}),t.FILE_LOCK_ACTION_STRING=o.defineMessage({id:"ljfv4E",defaultMessage:"Lock editing"}),t.FILE_UNLOCK_ACTION_STRING=o.defineMessage({id:"lIUM0e",defaultMessage:"Unlock editing"}),t.FILE_REQUEST_UNLOCK_ACTION_STRING=o.defineMessage({id:"lIkHQt",defaultMessage:"Ask to unlock"}),t.EVENTS_ACTION_STRING=o.defineMessage({id:"kLiPVQ",defaultMessage:"Events"}),t.CALCULATE_FOLDER_SIZE_ACTION_STRING=o.defineMessage({id:"W7oflT",defaultMessage:"Calculate size"}),t.MANAGE_AS_ADMIN_ACTION_STRING=o.defineMessage({id:"vECsXs",defaultMessage:"View in admin console"}),t.VERSION_HISTORY_ACTION_STRING=o.defineMessage({id:"T/KgJj",defaultMessage:"Version history"}),t.UNPIN_ACTION_STRING=o.defineMessage({id:"UPrzRq",defaultMessage:"Unpin"}),t.PIN_TO_ACTION_STRING=o.defineMessage({id:"BgBbVR",defaultMessage:"Pin to..."}),t.PIN_TO_ROOT_ACTION_STRING=o.defineMessage({id:"XGL6ZT",defaultMessage:"Pin"}),t.RESTORE_ACTION_STRING=o.defineMessage({id:"GQqYaL",defaultMessage:"Restore"}),t.PERMANENT_DELETE_ACTION_STRING=o.defineMessage({id:"KkjU0R",defaultMessage:"Permanently delete"}),t.STAR_ACTION_STRING=o.defineMessage({id:"0BUrj7",defaultMessage:"Star"}),t.UNSTAR_ACTION_STRING=o.defineMessage({id:"5e94v2",defaultMessage:"Unstar"}),t.RE_ADD_SHARED_FOLDER_ACTION_STRING=o.defineMessage({id:"O0cs6d",defaultMessage:"Re-add shared folder"}),t.SHOW_DELETED_FILES_ACTION_STRING=o.defineMessage({id:"SH7HST",defaultMessage:"Show deleted files"}),t.HIDE_DELETED_FILES_ACTION_STRING=o.defineMessage({id:"3H2+TZ",defaultMessage:"Hide deleted files"}),t.ADD_TO_TRANSFER_ACTION_STRING=o.defineMessage({id:"mjG96z",defaultMessage:"Transfer"}),t.SPACES_PROJECTS_RENAME_DROPDOWN_ACTION_STRING=o.defineMessage({id:"0tQPtN",defaultMessage:"Add to project"}),t.SHARE_ACTION_STRING=o.defineMessage({id:"Wi4w+P",defaultMessage:"Share"}),t.SHARE_ALL_SELECTED_ACTION_STRING=o.defineMessage({id:"M9tYme",defaultMessage:"Share all selected"}),t.GO_TO_FOLDER_ACTION_STRING=o.defineMessage({id:"mppZEu",defaultMessage:"Go to folder"}),t.ADD_CONTENT_ACTION_STRING=o.defineMessage({id:"SzVUpr",defaultMessage:"Add"}),t.PREVIEW_ACTION_STRING=o.defineMessage({id:"L+ww/y",defaultMessage:"Preview"}),t.OPEN_MAC_DESKTOP_ACTION_STRING=o.defineMessage({id:"x31E2S",defaultMessage:"Show in Finder"}),t.OPEN_WINDOWS_DESKTOP_ACTION_STRING=o.defineMessage({id:"knPNIT",defaultMessage:"Show in File Explorer"}),t.OPEN_IN_APP_ACTION_STRING=o.defineMessage({id:"dvphCf",defaultMessage:"Open"}),t.EXP_OPEN_IN_APP_ACTION_STRING=o.defineMessage({id:"iJWsRK",defaultMessage:"Open in"}),t.SHARE_COPY_LINK_ACTION_STRING=o.defineMessage({id:"pIM+Sj",defaultMessage:"Copy link"}),t.SHARE_COPY_LINK_ACTION_TOOLTIP=o.defineMessage({id:"z1g0V5",defaultMessage:"Copy shared link"}),t.FOLLOW_ACTION_STRING=o.defineMessage({id:"GNolQQ",defaultMessage:"Follow"}),t.FOLLOWING_ACTION_STRING=o.defineMessage({id:"spCwO+",defaultMessage:"Following"}),t.FILE_CONVERSION_STRING=o.defineMessage({id:"MhWh/C",defaultMessage:"Save as..."}),t.CONVERT_TO_ARCHIVE_ACTION_STRING=o.defineMessage({id:"vruy3+",defaultMessage:"Zip"}),t.CONVERT_TO_PDF_ACTION_STRING=o.defineMessage({id:"hUmw6N",defaultMessage:"Save as PDF"}),t.CHANGE_TO_PDF_FOLDER_STRING=o.defineMessage({id:"EZalFg",defaultMessage:"Change to Auto-PDF folder"}),t.ADD_AUTOMATED_STRING=o.defineMessage({id:"ixEpII",defaultMessage:"Add automation"}),t.CHANGE_TO_UNZIP_FOLDER_STRING=o.defineMessage({id:"slr5SC",defaultMessage:"Change to auto-unzip folder"}),t.TIDY_UP_ACTION_STRING=o.defineMessage({id:"x1f5gL",defaultMessage:"Multi-file organize"}),t.FOLDER_RULES_SETTINGS=o.defineMessage({id:"+ou8Af",defaultMessage:"Folder settings"}),t.ADD_FOLDER_AUTOMATION_STRING=o.defineMessage({id:"0gE6qt",defaultMessage:"Add automation"}),t.EDIT_FOLDER_AUTOMATION_STRING=o.defineMessage({id:"Xrep7o",defaultMessage:"Edit automation"}),t.APPLY_NAMING_CONVENTION_ACTION_STRING=o.defineMessage({id:"zlxWBG",defaultMessage:"Set naming convention"}),t.SEND_FOR_SIGNATURE_ACTION_STRING=o.defineMessage({id:"L7z983",defaultMessage:"Send for signature"}),t.REQUEST_APPROVAL_STRING=o.defineMessage({id:"TF0lEa",defaultMessage:"Request approval"}),t.ACTIVITY_ACTION_STRING=o.defineMessage({id:"hkINWZ",defaultMessage:"Activity"}),t.ACTION_DISABLED_STRING=o.defineMessage({id:"0IftsN",defaultMessage:"You don't have permission to make changes to this file"})})),define("modules/clean/react/action_bar/file_actions/portable/copy",["require","exports","tslib","apex-metrics/index","lodash","modules/clean/file_actions/metrics","modules/clean/logging/hive/schemas/web-modal-activity","modules/clean/metrics/index","modules/clean/react/async_fileops_modals","modules/clean/react/async_overquota_modal_controller","modules/clean/react/fileops_actions","modules/clean/react/folder_dialog/api","modules/clean/react/folder_dialog/constants","modules/clean/viewer"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.portableCopy=void 0,i=o.__importStar(i),r=o.__importStar(r),l=o.__importStar(l),d=o.__importStar(d),t.portableCopy=({currentFQPath:e,exceptions:t,filesPath:u,source:S,user:T,synchronousSingleFileActions:E,createNewFolderInMoveDialog:O},m={})=>o.__awaiter(void 0,void 0,void 0,(function*(){if(t.isOverFreeQuota&&!t.hasExcludedNsIds)return void l.showOverquota("wb_oq_mv_cp");const o=c.getMetricsReporter(),I={surface:S,batchSizeBucket:a.bucketForBatchSize(u.length),contentType:a.batchContentType(u),synchronousSingleFileActions:Boolean(E).toString()},f={totalLatency:o.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"copy/batch/latency_total_ms"},I),averageLatency:o.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"copy/batch/latency_average_ms"},I),completed:o.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"copy/batch/completed"},I)};let N=0;const R=(e,t)=>{var o;null===(o=m.onSuccess)||void 0===o||o.call(m,e,t),f.totalLatency.recordDuration(Date.now()-N,n.TimeUnit.MILLISECONDS),f.averageLatency.recordDuration((Date.now()-N)/u.length,n.TimeUnit.MILLISECONDS),f.completed.record(1)},y=()=>{var e;null===(e=m.onError)||void 0===e||e.call(m),f.totalLatency.recordDuration(Date.now()-N,n.TimeUnit.MILLISECONDS),f.averageLatency.recordDuration((Date.now()-N)/u.length,n.TimeUnit.MILLISECONDS),f.completed.record(0)},g=()=>{var e;return null===(e=m.onRequestNotSent)||void 0===e?void 0:e.call(m)},M=()=>{var e;return null===(e=m.onUndo)||void 0===e?void 0:e.call(m)};r.showMoveDialog({operation:A.Operation.COPY,modalName:s.ModalName.COPY,user:T,apiClient:{moveToFolder:(e,t,o)=>(N=Date.now(),d.copyFiles({user:T,files:u,onSuccess:R,onRequestNotSent:g,onUndo:M,onError:y,newPath:e,checkFSWs:!0,useApiV2:!0,isLockedVaultFolder:o,synchronousSingleFileActions:E}),Promise.resolve()),getFolderContents:p.Viewer.get_viewer().is_team_assume_user_session?_.getFolderContents:_.getFolderContentsAPIv2,getFolderSuggestion:_.getFolderSuggestion},entries:u,initialFolderSelection:e,onSuccess:i.noop,onCancel:i.noop,showFolderSuggestion:!0,createNewFolderInMoveDialog:O})}))})),define("modules/clean/react/action_bar/file_actions/portable/delete/delete",["require","exports","tslib","modules/clean/react/action_bar/file_actions/portable/delete/delete_modal","modules/clean/react/files_view/file_actions/api_v2"],(function(e,t,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.portableDelete=void 0,t.portableDelete=({user:e,filesPath:t,fq_path:a},{onSuccess:s,onError:c,onNetworkRequest:r})=>{n.showDeleteFileModal({onConfirm:()=>o.__awaiter(void 0,void 0,void 0,(function*(){null==r||r();const o=yield i.deleteFiles(t,e.id,!0);o.isError||"success"!==o.result.entries[0][".tag"]?null==c||c(o.isError?o:i.createUndefinedRpcResult()):null==s||s()})),fq_path:a,totalFilesCount:t.length,user:e})}})),define("modules/clean/react/action_bar/file_actions/portable/delete/delete_modal",["require","exports","tslib","dig-components/modal","modules/clean/react/components/modal","react","modules/core/i18n","dig-components/typography","dig-components/buttons","modules/clean/filepath/filepath","modules/clean/react/action_bar/action_bar_strings"],(function(e,t,o,n,i,a,s,c,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDeleteFileModal=t.DeleteFileModal=void 0,a=o.__importDefault(a),l=o.__importStar(l),t.DeleteFileModal=({user:e,fq_path:t,totalFilesCount:o,onConfirm:i})=>{const[_,A]=a.default.useState(!0),p=()=>A(!1),u=e.is_cdm_member,S=s.intl.formatMessage({id:"FMtrmh",defaultMessage:"{fileCount, plural, one {# file} few {# files} many {# files} other {# files}}"},{fileCount:o}),T=1===o?l.filename(t):S,E=s.intl.formatMessage({id:"yDuoGW",defaultMessage:"Cancel"}),O=s.intl.formatMessage(d.DELETE_ACTION_STRING);return a.default.createElement(n.Modal,{open:_,isCentered:!0,onRequestClose:p},a.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},a.default.createElement(c.Title,null,s.intl.formatMessage(d.DELETE_ACTION_STRING))),a.default.createElement(n.Modal.Body,{hasVerticalSpacing:!1,className:"uxa-modal",id:"delete-file-modal"},a.default.createElement(c.Text,null,(()=>{const e={filename:T,b:e=>a.default.createElement(c.Text,{isBold:!0},e)};return u?s.intl.formatMessage({id:"emsobI",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your team member folder?"},e):s.intl.formatMessage({id:"8TOnv7",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your Dropbox?"},e)})())),a.default.createElement(n.Modal.Footer,null,a.default.createElement(r.Button,{variant:"opacity",onClick:p},E),a.default.createElement(r.Button,{variant:"primary",onClick:()=>{i(),p()}},O)))},t.showDeleteFileModal=function(e){i.Modal.showInstance(a.default.createElement(t.DeleteFileModal,Object.assign({},e)))}})),define("modules/clean/react/action_bar/file_actions/portable/delete/snackbars",["require","exports","modules/clean/react/files_view/file_actions/snackbars","modules/clean/react/snackbar"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFailedSnackBar=t.deleteCompleteSnackBar=t.deleteSnackBarInProgress=void 0,t.deleteSnackBarInProgress=(e,t=1)=>n.Snackbar.sync(o.deleteInProgress(t),!1,e,!0),t.deleteCompleteSnackBar=(e,t=1)=>n.Snackbar.complete(o.deleteCompleteSuccess(t,t),e,!0),t.deleteFailedSnackBar=(e,t,i=1)=>{e.error&&n.Snackbar.fail(o.deleteError(i,e.error),t,!0)}})),define("modules/clean/react/action_bar/file_actions/portable/move",["require","exports","tslib","apex-metrics/index","lodash","modules/clean/file_actions/metrics","modules/clean/logging/hive/schemas/web-modal-activity","modules/clean/metrics/index","modules/clean/react/async_fileops_modals","modules/clean/react/async_overquota_modal_controller","modules/clean/react/fileops_actions","modules/clean/react/folder_dialog/api","modules/clean/react/folder_dialog/constants","modules/clean/viewer"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.portableMove=void 0,i=o.__importStar(i),r=o.__importStar(r),l=o.__importStar(l),d=o.__importStar(d),t.portableMove=({currentFQPath:e,exceptions:t,filesPath:u,source:S,user:T,synchronousSingleFileActions:E,createNewFolderInMoveDialog:O,expEnableSharingNSF:m},I={})=>o.__awaiter(void 0,void 0,void 0,(function*(){if(t.isOverFreeQuota&&!t.hasExcludedNsIds)return void l.showOverquota("wb_oq_mv_cp");const o=c.getMetricsReporter(),f={surface:S,batchSizeBucket:a.bucketForBatchSize(u.length),contentType:a.batchContentType(u),synchronousSingleFileActions:Boolean(E).toString()},N={totalLatency:o.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"move/batch/latency_total_ms"},f),averageLatency:o.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"move/batch/latency_average_ms"},f),completed:o.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"move/batch/completed"},f)};let R=0;const y=(e,t)=>{var o;null===(o=I.onSuccess)||void 0===o||o.call(I,e,t),N.totalLatency.recordDuration(Date.now()-R,n.TimeUnit.MILLISECONDS),N.averageLatency.recordDuration((Date.now()-R)/u.length,n.TimeUnit.MILLISECONDS),N.completed.record(1)},g=()=>{var e;null===(e=I.onError)||void 0===e||e.call(I),N.totalLatency.recordDuration(Date.now()-R,n.TimeUnit.MILLISECONDS),N.averageLatency.recordDuration((Date.now()-R)/u.length,n.TimeUnit.MILLISECONDS),N.completed.record(0)},M=()=>{var e;return null===(e=I.onRequestNotSent)||void 0===e?void 0:e.call(I)},F=I.onUndo;r.showMoveDialog({operation:A.Operation.MOVE,modalName:s.ModalName.MOVE,user:T,apiClient:{moveToFolder:(t,o,n)=>(R=Date.now(),d.moveFiles({user:T,files:u,path:"browse"===S?e:void 0,onSuccess:y,onRequestNotSent:M,onUndo:F,onError:g,newPath:t,checkFSWs:!0,isLockedVaultFolder:n,synchronousSingleFileActions:E,expEnableSharingNSF:m}),Promise.resolve()),getFolderContents:p.Viewer.get_viewer().is_team_assume_user_session?_.getFolderContents:_.getFolderContentsAPIv2,getFolderSuggestion:_.getFolderSuggestion},entries:u,initialFolderSelection:e,onSuccess:i.noop,onCancel:i.noop,showFolderSuggestion:!0,createNewFolderInMoveDialog:O})}))})),define("modules/clean/react/browse/browse_action_toolbar_v2",["require","exports","tslib","react","classnames","react-redux","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/file_actions/file_actions","modules/clean/react/browse/action_logger","modules/clean/react/browse/browse_actions/browse_actions","modules/clean/react/browse/browse_upload_controller","modules/clean/react/browse/data/selectors","modules/clean/react/browse/logger_util","modules/clean/web_user_action_events","modules/core/i18n","modules/clean/react/folder_subscriptions/data/folder_subscription_controller","modules/clean/react/browse/browse_view_mode_toggle","modules/clean/react/browse/browse_sharing_view","modules/clean/react/growth/open_in_mobile_modal_controller","modules/clean/react/file_info/utils","modules/clean/react/browse/selection_indicator","modules/clean/react/browse/data/action_creators/index","modules/constants/global_file_upload"],(function(e,t,o,n,i,a,s,c,r,l,d,_,A,p,u,S,T,E,O,m,I,f,N,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowseActionToolbarV2=t.getActionBarActions=void 0,n=o.__importDefault(n),i=o.__importDefault(i),l=o.__importStar(l),A=o.__importStar(A);const y=d.createBrowseActionBarAccessibilityConfigSelector(),g={selectedFilesSelector:A.selectedFiles,userSelector:A.user,contextSelector:A.context,overQuotaDataSelector:d.overQuotaDataSelector,experimentSelector:d.experimentSelector,isSearchMode:!1,actionSurface:u.ActionSurfaceLogValue.ACTION_BAR,currentFolderInfo:A.getCurrentFolderInfo,flowsFolderRule:A.flowsFolderRule,browsePostTTIData:A.browsePostTTIData,browsePostTTIExperiments:A.browsePostTTIExperiments,hasLinkedMobile:A.hasLinkedMobile,accessibilityConfig:e=>y(e,g),rightRailCollapsedState:A.isRightRailCollapsed,isInsideBackupFolder:A.isInsideBackupFolder,isSelectedBackupFolder:A.isSelectedBackupFolder},M=d.getBrowseFileActionSelectors();t.getActionBarActions=r.createActionBarActionSelector();const F={handleAction:r.actionHandler,handleActionMenuToggle:r.actionMenuToggleHandler,setOverflowMenuCoordinates:N.setOverflowMenuCoordinates,setOverflowMenuOpenRequest:N.setOverflowMenuOpenRequest,setOverflowMenuCloseRequest:N.setOverflowMenuCloseRequest,setCreateMenuOpenRequest:N.setCreateMenuOpenRequest};class b extends n.default.Component{constructor(){super(...arguments),this.state={overflowMenuOpenRequest:void 0},this.actionHandler={handleAction:(e,t)=>{e.event.stopPropagation(),g.actionSurface=t?u.ActionSurfaceLogValue.RIGHT_CLICK_MENU:u.ActionSurfaceLogValue.OVERFLOW_MENU,this.props.handleAction(e,g,d.BrowseFileActionHandlers)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},g,d.BrowseActionMenuToggleHandlers)}},this.onOverflowMenuToggle=e=>{if(e.isOpen){const{num_files_selected:e,num_folders_selected:t}=p.countFilesAndFolders(this.props.selectedFiles);l.logBrowseAction({uid:this.props.user.id,action:u.WebUserActionLogEvent.OPEN_OVERFLOW_MENU,num_files_selected:e,num_folders_selected:t,action_surface:this.props.overflowMenuCoordinates?u.ActionSurfaceLogValue.RIGHT_CLICK_MENU:u.ActionSurfaceLogValue.ACTION_BAR}),this.props.setOverflowMenuCloseRequest()}else this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest()},this.resetOverflowMenuCoordinates=e=>{this.props.overflowMenuCoordinates&&(this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest({autoFocus:!1}))}}render(){const{browseActionBarActions:e,uploadAjaxInterceptor:t,accessibilityConfig:o,responsive:a,path:r,selectedFiles:l,user:d,showSharingView:A,withoutFolderOverviewAbove:p,selectedOrCurrentFolder:u,showBrowseViewToggle:I,overflowMenuTitle:N,expActionBarRedesignVariant:y,canShowSelectionIndicatorInToolbar:g,isRightRailCollapsed:M,overflowMenuOpenRequest:F,overflowMenuCloseRequest:b,overflowMenuCoordinates:v,createMenuOpenRequest:C,setCreateMenuOpenRequest:h}=this.props,L=a.isResponsive?a.isMatchedLarge?c.ResponsiveSize.DESKTOP:a.isMatchedMedium?c.ResponsiveSize.TABLET:c.ResponsiveSize.MOBILE:c.ResponsiveSize.DESKTOP,D=g?n.default.createElement("div",{className:"family-brws-selection-view-mode-container"},n.default.createElement(f.SelectionIndicator,{responsive:a,selectedFilesCount:l.size,rightRailCollapsed:M}),n.default.createElement(E.BrowseViewModeToggle,{user:d,className:"brws-action-toolbar-view-mode-toggle"})):n.default.createElement(E.BrowseViewModeToggle,{user:d,className:"brws-action-toolbar-view-mode-toggle"}),w="OFF"!==R.FILE_UPLOAD_VARIANT&&"CONTROL"!==R.FILE_UPLOAD_VARIANT,P=L===c.ResponsiveSize.MOBILE,B=!w||P;return n.default.createElement("div",{className:i.default("brws-action-toolbar",{"brws-action-toolbar--without-folder-overview":p}),style:{width:this.props.fixedWidth},onClick:this.resetOverflowMenuCoordinates},B&&n.default.createElement(_.BrowseUploadController,{uploadAjaxInterceptor:t}),n.default.createElement(T.FolderSubscriptionController,{path:r,selectedFiles:l}),n.default.createElement(s.ActionBar,{className:"brws-action-toolbar-actionbar",actionHandler:this.actionHandler,actions:e,intl:S.intl,responsive:!0,responsiveSize:L,accessibilityConfig:o,handleOverflowMenuToggle:this.onOverflowMenuToggle,overflowMenuOpenRequest:F,overflowMenuCloseRequest:b,overflowMenuTitle:N,expActionBarRedesignVariant:y,overflowMenuCoordinates:v,hideOverflowMenuHeader:!1,resolveOverflowMenuOpenRequest:()=>{this.props.setOverflowMenuOpenRequest(void 0)},canShowSelectionIndicatorInToolbar:g,createMenuOpenRequest:C,resolveCreateMenuOpenRequest:()=>{h()}}),A&&n.default.createElement("div",{className:"brws-action-toolbar-sharing-view-container"},n.default.createElement(O.BrowseSharingView,{useCompactMode:L!==c.ResponsiveSize.DESKTOP})),I&&D,n.default.createElement(m.OpenInMobileModalController,{folder:u}))}}b.displayName="BrowseActionToolbarController";const v=a.connect((e,o)=>{const n=A.user(e),i=A.context(e),a=A.selectedFiles(e).toList(),s=I.getTitle(a,n,i,S.intl),c=o.responsive.isResponsive&&!o.responsive.isMatchedLarge&&!o.responsive.isMatchedMedium,r=o.responsive.isResponsive&&!o.responsive.isMatchedLarge&&o.responsive.isMatchedMedium,l=c?d.BrowseMobileFileActionSelectors:r?d.BrowseTabletFileActionSelectors:M,_=g.accessibilityConfig?g.accessibilityConfig(e):void 0,p=g.selectedFilesSelector(e),u=1===p.count()&&p.first().is_dir?p.first():g.currentFolderInfo(e);return{browseActionBarActions:t.getActionBarActions(e,g,l,d.getBrowseScenarioActions),user:n,accessibilityConfig:_,selectedFiles:A.selectedFiles(e),path:A.path(e),showBrowseViewToggle:A.showBrowseViewToggleInToolbar(e),showSharingView:A.showShareViewInToolbar(e,o.responsive),fileActionsExperiments:g.experimentSelector(e),selectedOrCurrentFolder:u,overflowMenuTitle:s,expActionBarRedesignVariant:A.expActionBarRedesignVariant(e),canShowSelectionIndicatorInToolbar:A.showSelectionIndicatorInToolbar(e),isRightRailCollapsed:A.isRightRailCollapsed(e),overflowMenuOpenRequest:A.overflowMenuOpenRequest(e),overflowMenuCloseRequest:A.overflowMenuCloseRequest(e),overflowMenuCoordinates:A.overflowMenuCoordinates(e),createMenuOpenRequest:A.createMenuOpenRequest(e)}},F);t.BrowseActionToolbarV2=v(b)})),define("modules/clean/react/maestro_nav/files_nav/nav_with_upload_provider",["require","exports","tslib","react","modules/clean/flux/dispatcher","modules/clean/react/file_uploader/constants","modules/clean/react/file_uploader/upload_controller","modules/clean/react/file_uploader/upload_kit_provider","modules/clean/react/maestro_nav/files_nav/nav_action_bar","modules/clean/web_timing_logger","modules/clean/react/home/post_tti/props_post_tti"],(function(e,t,o,n,i,a,s,c,r,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavWithUploadProvider=void 0,n=o.__importDefault(n);t.NavWithUploadProvider=t=>{((e=(()=>{}))=>{const[t,o]=n.default.useState(!1);t||(e(),o(!0))})(()=>{i.Dispatcher.dispatch({type:a.UploaderActionType.SET_USER,data:{user:t.user}})});const[_,A]=n.default.useState(!1),[p,u]=n.default.useState(void 0),[S,T]=n.default.useState(""),E=window.RUNNING_IN_EDISON;return n.default.useEffect(()=>{o.__awaiter(void 0,void 0,void 0,(function*(){yield l.waitForTTI();const t=yield new Promise((t,o)=>{e(["modules/clean/react/maestro_nav/post_tti/interface"],t,o)}).then(o.__importStar);let n;n=E?yield d.getPostTTIPropsInEdison():yield t.getPostTTIProps();const{uploaderPostTTIExperiments:i,permissionsAtUploadModalProps:a}=n;A(!0),u(i),T(a.autoTeamGroupId)}))},[]),n.default.createElement(c.UploadKitProvider,{user:t.user,chooseDestination:!0},n.default.createElement(s.UploadController,{autoTeamGroupId:S,isPostTTI:_,uploaderPostTTIExperiments:p,user:t.user}),n.default.createElement("div",{className:"maestro-nav__action-bar"},n.default.createElement(r.NavActionBar,{isEnabled:!0,showAutomatedFolderCreate:!0,showOnlyFolderCreation:!1,showSharedFolderCreate:!0,showTeamFolderCreate:!1,user:t.user})),t.navElement)}}));
//# sourceMappingURL=pkg-action-bar.min.js-vflTRGuxP.map
define(["require","exports","tslib","react","react-intl","dig-components/icons","dig-components/icons/src","dig-components/badges","typescript/component_libraries/files_components/src/right-rail/index","typescript/component_libraries/files_components/src/blades/comments/component/meatball_menu","react-redux","typescript/component_libraries/files_components/src/blades/comments/data/selectors","typescript/component_libraries/files_components/src/blades/comments/data/types","dig-components/typography"],(function(e,t,s,a,n,o,r,l,i,d,m,c,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsedCommentsBladeButton=t.CommentsBlade=void 0,a=s.__importStar(a);const g=n.defineMessage({id:"5PJLxb",defaultMessage:"{unreadCount} unread"}),h=n.defineMessage({id:"ZKwnCD",defaultMessage:"An error occurred."}),f=e=>m.useSelector(t=>e?c.getUnreadThreadCount(t,e):0);class C extends a.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){const{intl:e}=this.props;return this.state.hasError?a.createElement(u.Text,null,e.formatMessage(h)):this.props.children}}C.displayName="CommentsBladeErrorBoundary";const v=({fileId:e,sharedLinkURL:t,showOverflowMenu:s,showApproval:o,approvalsLogger:r})=>{const i=f(p.createCommentFileIdentifier(e,t)),m=n.useIntl();return a.createElement("div",{className:"comments-blade-header-accessory-wrapper"},i>0?a.createElement("div",{className:"comments-blade-header-badge"},a.createElement(l.NotificationBadge,{status:"attention"},m.formatMessage(g,{unreadCount:i}))):null,s&&a.createElement("div",{className:"comments-blade-header-menu"},a.createElement(d.CommentsMeatball,{fileId:e,sharedLinkURL:t,size:"small",showApproval:o,approvalsLogger:r})))};v.displayName="CommentsBladeRightAccessory",t.CommentsBlade=({id:e,intl:t,children:s,fileId:l,sharedLinkURL:d,showApproval:m,approvalsLogger:c})=>{const p=i.useIsExpanded(e);return a.createElement(n.RawIntlProvider,{value:t},a.createElement(i.RightRail.Blade,{withTitle:t.formatMessage({id:"TxGYML",defaultMessage:"Comments"}),withIcon:a.createElement(o.UIIcon,{src:r.CommentLine}),id:e,withTitleRightAccessory:a.createElement(v,{fileId:l,sharedLinkURL:d,showOverflowMenu:p,showApproval:m,approvalsLogger:c})},a.createElement(C,{intl:t},s)))},t.CommentsBlade.displayName="CommentsBlade",t.CollapsedCommentsBladeButton=({id:e,intl:t,fileId:s,sharedLinkURL:n})=>{const l=f(s?p.createCommentFileIdentifier(s,n):void 0);return a.createElement(i.RightRail.CollapsedBladeIcon,{id:e,withIcon:a.createElement(o.UIIcon,{src:r.CommentLine,"aria-label":t.formatMessage({id:"JrjHYo",defaultMessage:"Open comments panel"})}),tooltip:t.formatMessage({id:"GSZlCi",defaultMessage:"Comments"}),withNotificationBadge:l})},t.CollapsedCommentsBladeButton.displayName="CollapsedCommentsBladeButton"}));
//# sourceMappingURL=comments_blade.amd.min.js-vflfkF_ll.map
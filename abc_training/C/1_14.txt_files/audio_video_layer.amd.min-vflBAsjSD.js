define(["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/css/layer.css","typescript/libraries/file-viewer/src/comments2/plugin/types","typescript/component_libraries/files_components/src/blades/comments/data/actions","react-intl","typescript/libraries/file-viewer/src/comments2/plugin/utils"],(function(e,t,a,i,r,n,o,s,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AudioVideoAnnotationLayer=void 0,i=a.__importStar(i),o=a.__importStar(o);const u=c.defineMessage({id:"coi4rz",defaultMessage:"Currently selecting {timestamp}"});t.AudioVideoAnnotationLayer=i.memo(e=>{var t;const{context:{fileViewerId:a},platform:{intl:c},children:p,navigation:m,ui:f,file:y}=e,v=null!==(t=i.useMemo(()=>d.getFrameRateFromMetadata(y.contentMetadata),[y]))&&void 0!==t?t:10,g=r.useSelector(e=>e.annotationState),b=r.useDispatch(),A=n.useStabilizedCallback(e=>{"annotating-ax"===g&&("ArrowLeft"===e.key&&(e.stopImmediatePropagation(),e.preventDefault(),null!=v&&e.shiftKey?m.seekRelative(-1/v):m.seekRelative(-1)),"ArrowRight"===e.key&&(e.stopImmediatePropagation(),e.preventDefault(),null!=v&&e.shiftKey?m.seekRelative(1/v):m.seekRelative(1)),"Enter"===e.key&&b(l.confirmDraftAnnotation(a))," "===e.key&&(e.stopImmediatePropagation(),e.preventDefault()))}),M=i.useRef(),k=i.useCallback(e=>{null==e||e.addEventListener("keydown",A),M.current=e||void 0},[A]),S=i.useRef();i.useEffect(()=>("annotating-ax"===g&&"annotating-ax"!==S.current&&(M.current&&M.current.focus(),m.overrideFloatingToolbar(s.COMMENTS_PLUGIN_ID,"shown")),S.current=g,()=>{m.overrideFloatingToolbar(s.COMMENTS_PLUGIN_ID,void 0)}),[g]);const _=(e=>{const t=Math.round(e),a=String(Math.round(t%60)).padStart(2,"0"),i=String(Math.floor(t/60)%60).padStart(2,"0"),r=Math.floor(t/3600);return r>0?`${r}:${i}:${a}`:`${i}:${a}`})(f.currentTimestamp),h="annotating-ax"===g?c.formatMessage(u,{timestamp:_}):"";return i.createElement("div",{className:o.layer,ref:k,"aria-label":h,tabIndex:-1},p)}),t.AudioVideoAnnotationLayer.displayName="AudioVideoAnnotationLayer",t.AudioVideoAnnotationLayer.displayName="AudioVideoAnnotationLayer"}));
//# sourceMappingURL=audio_video_layer.amd.min.js-vflfCn3dK.map
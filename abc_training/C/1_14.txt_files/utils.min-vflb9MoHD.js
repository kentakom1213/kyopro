define(["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","modules/clean/cloud_docs/open_with_utils","modules/clean/file_store/utils","modules/clean/open_with","modules/clean/react/extensions/connect_flow","modules/clean/react/extensions/utils","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/data/actions","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/open_with_helpers","modules/clean/react/file_viewer/unity/unity_utils","modules/clean/react/paper/utils","modules/core/i18n","modules/clean/react/file_viewer/logging","modules/clean/react/flows/conversions/actions/unzip","modules/core/browser_detection"],(function(e,t,n,i,o,s,r,l,a,u,p,c,d,f,O,h,m,_,A,g,y){"use strict";function w(e,t,n,i){let o;if(i.provider===r.OpenWithCloudDocProvider.GoogleDSS)o={type:f.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:c.UserAction.OpenWithCloudDocEditor};else{if(i.provider!==r.OpenWithCloudDocProvider.OfficeOnline)return null;o={type:f.OpenButtonAction.OPEN_WITH,userAction:c.UserAction.OpenInOfficeOnline}}return Object.assign({handler:()=>i.handler(e,t,n),spriteName:i.spriteName||null,iconUrl:i.iconUrl,text:i.text},o)}function E(e){const{file:t,user:n,isOpenWithDisabled:i}=e,o=[],s={gdd:!e.isCloudEditorDisabled,wopi:I({file:t,isOpenWithDisabled:i,user:n})},l=e.actionSource,a=r.getOpenWithCloudEditorInfo(t,n,s,l);for(const e of a){const i=w(t,n,l,e);i&&o.push(i)}return o}function I({file:e,isOpenWithDisabled:t,user:n}){return!t&&O.OpenWithHelpers.canOpenWith(e,n)}function U(e,t){const n=(e?e.open_application_name:void 0)||_.intl.formatMessage({id:"Uyxn/h",defaultMessage:"Desktop"});return t?n:_.intl.formatMessage({id:"KtD8FA",defaultMessage:"Open in {app_name}"},{app_name:n})}function b(e){const t=(null!==e?e.file_browser_display_name:void 0)||_.intl.formatMessage({id:"Bbnzjx",defaultMessage:"File Browser"});return _.intl.formatMessage({id:"suwlZc",defaultMessage:"Show in {file_browser}"},{file_browser:t})}function D({file:e,isFolder:t,user:n}){return()=>{h.UnityHelpers.openFile(e.ns_id,e.ns_path,n.id,t)}}function F({file:e,user:t}){return()=>{m.openFileInPaper({file:e,user:t})}}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowCoachmark=t.getOpenOptionsSharedFile=t.convertOpenWithCloudEditorInfo=t.getOpenOptions=void 0,i=n.__importDefault(i),a=n.__importDefault(a),t.getOpenOptions=function(e){const{file:t}=e,a=n.__rest(e,["file"]);return l.isBrowseFile(t)?(function({file:e,hasOpenInPaperSupport:t,isUnityDisabled:n,isOpenWithDisabled:l,isCloudEditorDisabled:a,unityInfo:O,extraOptions:m,user:E,sharingServiceInfo:N,refreshSharingServiceInfo:M,showOpenWithShare:S,onPresentInZoom:v,isCloudBasedDoc:P,actionSource:x,landingPagesEnabled:B,isInActionBar:W,previewActionHandler:C,openDesktopActionHandler:T,openInNewTabActionHandler:H,goToFolderActionHandler:k,isCurrentFolderEligibleForAutomation:L,isSubfolderEligibleForAutomation:R,hideZipAction:Z,replayActionHandler:z}){const Y=[];!Z&&g.UnzipAction.selector([e])&&Y.push({handler:()=>{g.UnzipAction.convert([e],E,{isCurrentFolderEligibleForAutomation:L,isSubfolderEligibleForAutomation:R,source:"browse"}),A.logUserAction(c.UserAction.DecompressFile,c.UserActionContext.TitleBarSplitButton)},spriteName:null,iconElement:i.default.createElement(s.UIIcon,{src:o.ZipPictogram}),text:g.UnzipAction.actionText,type:f.OpenButtonAction.DECOMPRESS_FILE,userAction:c.UserAction.DecompressFile});z&&Y.push({handler:z,spriteName:null,text:_.intl.formatMessage({id:"9saYUt",defaultMessage:"Replay"}),type:f.OpenButtonAction.OPEN_IN_REPLAY,userAction:c.UserAction.OpenInReplay});C&&Y.push({handler:C,spriteName:null,text:_.intl.formatMessage({id:"wHolW4",defaultMessage:"Preview (Dropbox)"}),type:f.OpenButtonAction.PREVIEW_FILE,userAction:c.UserAction.PreviewFile});if(T){const e=y.mac?_.intl.formatMessage({id:"3KanyU",defaultMessage:"Finder"}):_.intl.formatMessage({id:"kJ3mnY",defaultMessage:"File Explorer"});Y.push({handler:T,spriteName:null,text:e,type:f.OpenButtonAction.OPEN_IN_DESKTOP,userAction:c.UserAction.OpenInDesktop})}H&&Y.push({handler:H,spriteName:null,text:_.intl.formatMessage({id:"HE6Ges",defaultMessage:"Open in new tab"}),type:f.OpenButtonAction.OPEN_IN_NEW_TAB,userAction:c.UserAction.OpenInNewTab});k&&Y.push({handler:k,spriteName:null,text:_.intl.formatMessage({id:"mppZEu",defaultMessage:"Go to folder"}),type:f.OpenButtonAction.GO_TO_FOLDER,userAction:c.UserAction.GoToFolder});if(!O)return Y;t&&Y.push({handler:F({file:e,user:E}),spriteName:"paper",text:_.intl.formatMessage({id:"MhNU0E",defaultMessage:"Copy to Paper"}),type:f.OpenButtonAction.OPEN_IN_PAPER,userAction:c.UserAction.CopyToPaper});!P&&(function({isUnityDisabled:e,unityInfo:t}){return null!=t&&!e&&h.UnityHelpers.isUnityFileSupported(t)})({isUnityDisabled:n,unityInfo:O})&&Y.push({handler:D({file:e,user:E,isFolder:!1}),spriteName:"ow_desktop",text:U(O,W),type:f.OpenButtonAction.UNITY_FILE,userAction:c.UserAction.OpenInUnity});const j=I({file:e,isOpenWithDisabled:l,user:E}),G={gdd:!a,wopi:j},K=r.getOpenWithCloudEditorInfo(e,E,G,x);for(const t of K){const n=w(e,E,x,t);n&&Y.push(n)}!W&&(function({isUnityDisabled:e,unityInfo:t}){return null!=t&&!e&&h.UnityHelpers.isUnityFolderSupported(t)})({isUnityDisabled:n,unityInfo:O})&&Y.push({handler:D({file:e,user:E,isFolder:!0}),spriteName:"ow_folder",text:b(O),type:f.OpenButtonAction.UNITY_FOLDER,userAction:c.UserAction.OpenInUnityFolder});m&&m.forEach(e=>{e&&Y.push(e)});W||Y.length||P||Y.push({handler:()=>d.download(e),spriteName:null,text:_.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"}),type:f.OpenButtonAction.DOWNLOAD,userAction:c.UserAction.Download});let J=!1,q=!1;S&&N&&(J=p.isSlackAvailable(N),q=p.isZoomAvailable(N));J&&N&&M&&Y.push({handler:()=>u.shareInSlackFlow(E,N,M,e,"open_with_button",void 0!==B?B:null),spriteName:null,text:_.intl.formatMessage({id:"Qws4v2",defaultMessage:"Slack"}),type:f.OpenButtonAction.SHARE_TO_SLACK,userAction:c.UserAction.ShareToSlack});q&&N&&v&&M&&Y.push({handler:()=>u.presentInZoomFlow(E,N,M,v,"open_with_button",void 0!==B?B:null),spriteName:null,text:_.intl.formatMessage({id:"mzy+1c",defaultMessage:"Zoom"}),type:f.OpenButtonAction.PRESENT_IN_ZOOM,userAction:c.UserAction.PresentInZoom});return Y})(Object.assign({file:t},a)):l.isSharedFile(t)?E(Object.assign({file:t},a)):[]},t.convertOpenWithCloudEditorInfo=w,t.getOpenOptionsSharedFile=E,t.shouldShowCoachmark=function(e,t){const n=e.map(e=>e.type).includes(f.OpenButtonAction.UNITY_FILE),i=t&&a.default.is_adobe_app(t.open_application_identifier),o=e.map(e=>e.type).includes(f.OpenButtonAction.OPEN_WITH);return n&&i||o}}));
//# sourceMappingURL=utils.min.js-vflCGNKmD.map
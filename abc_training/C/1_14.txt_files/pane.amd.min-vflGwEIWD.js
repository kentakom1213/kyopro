define(["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/comments2.css","classnames","typescript/component_libraries/files_components/src/blades/comments/index","typescript/libraries/comments2/src/components/comment/index","react-redux","typescript/libraries/file-viewer/src/plugins/index","typescript/libraries/file-viewer/src/comments2/plugin/editor_multiplexor","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/comments2/plugin/utils"],(function(e,t,i,r,n,o,a,s,l,d,m,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CommentsPluginPane=void 0,r=i.__importStar(r),n=i.__importStar(n),o=i.__importDefault(o),t.CommentsPluginPane=r.memo(e=>{const{previewType:t,file:i,sharedLinkInfo:p,config:f,context:v,intl:g,getAccountData:w}=e,I=l.useDispatch(),y=(null==p?void 0:p.url)||i.fileId,P=l.useSelector(e=>{var t,i;return null!==(i=null===(t=e.mediaAddonFeatures)||void 0===t?void 0:t.frame_precise_comments)&&void 0!==i&&i}),h=l.useSelector(e=>e.supportedEnhancements[y]),b=l.useSelector(e=>e.draftAnnotation[v.fileViewerId]),C=l.useSelector(e=>Boolean(e.editorFocusRequest[v.fileViewerId])),T=r.useMemo(()=>e=>{switch(t){case d.PreviewType.Video:case d.PreviewType.Audio:const t=u.getFrameRateFromMetadata(i.contentMetadata);return r.createElement(s.TimeCodedComment,Object.assign({},e,{playerIntegrationEnabled:!1},m.toFramePrecisionProps(P,t)));case d.PreviewType.Image:case d.PreviewType.SsrDoc:case d.PreviewType.CloudDoc:return r.createElement(s.NumberedComment,Object.assign({},e));default:return r.createElement(s.Comment,Object.assign({},e))}},[t,i.contentMetadata,P]),M=r.useMemo(()=>t=>r.createElement(m.CommentEditorMultiplexor,Object.assign({},e,{commentEditorProps:t,framePreciseCommentsEnabled:P,supportedEnhancements:h,draftNumberedAnnotation:b,editorFocusRequested:C})),[C,b,P,h,e]),E=r.useMemo(()=>{if(e.previewType===d.PreviewType.Audio||e.previewType===d.PreviewType.Video)return{type:"av",seek:e.navigation.seek,pause:e.navigation.pause}},[e.previewType,e.navigation]),_=null==p?void 0:p.url,A=r.useCallback(e=>{I(a.activateThread({fileId:i.fileId,sharedLinkURL:_,threadId:e.threadID,fileViewerId:v.fileViewerId,isThirdParty:!1}))},[i.fileId,_,v.fileViewerId,I]);return r.createElement(a.CommentsBladePane,{className:o.default(n.contentBoxReset,{[n.commentsPaneBlade]:f.isInBladeRightRail}),fileId:i.fileId,editorComponent:M,commentComponent:T,commentsBladeId:v.fileViewerId,intl:g,showAuthModal:()=>{var t;if(!e.navigation.showAuthModal)throw new Error("showAuthModal must be passed for logged out user");return e.navigation.showAuthModal({sharedLinkUrl:null===(t=e.sharedLinkInfo)||void 0===t?void 0:t.url,mode:c.AuthMode.REGISTER,kind:c.LoginOrRegisterKind.COMMENT,commentParams:{variant:c.CommentTextVariant.POST,stream:{type:"file",id:i.fileId,ns_id:i.nsId,sjid:i.sjId,linkUrl:i.url,isVersionHistoryMode:!1,bytes:i.size,filename:i.name}}})},config:f,sharedLinkInfo:p,getAccountData:w,navigation:E,approvalIOClient:e.approvalIOClient,onClickAnnotation:A})}),t.CommentsPluginPane.displayName="CommentsPluginPane"}));
//# sourceMappingURL=pane.amd.min.js-vflxB2FrO.map
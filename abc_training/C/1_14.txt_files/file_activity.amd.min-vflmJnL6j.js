define(["require","exports","tslib","react","react-redux","typescript/component_libraries/files_components/src/blades/utils","dig-components/typography","dig-components/progress_indicators","typescript/component_libraries/files_components/src/blades/file_activity/data/selectors","typescript/component_libraries/files_components/src/blades/file_activity/component/activity_list","react-intl","typescript/component_libraries/files_components/src/blades/file_activity/utils","typescript/component_libraries/files_components/src/blades/file_activity/data/types","api_v2/redux/file_activity_stream","typescript/component_libraries/files_components/src/blades/file_activity/component/filter","typescript/component_libraries/files_components/src/blades/file_activity/data/actions"],(function(e,t,i,s,a,l,r,o,c,n,p,d,f,m,u,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileActivity=void 0,s=i.__importDefault(s),t.FileActivity=s.default.memo(({fileId:e,onLogComponentTTI:t,user:i,rootNamespaceName:_="Dropbox",logFilterChange:v})=>{const g=p.useIntl(),b=a.useDispatch(),E=s.default.useMemo(()=>c.createGetFilteredEvents(),[]),F=a.useSelector(t=>E(t,{fileId:e})),h=a.useSelector(c.getFilter),A=a.useSelector(t=>c.areApiActivitiesPresent(t,{fileId:e})),S=s.default.useMemo(()=>d.processEvents(F,{intl:g,viewingUserId:i.account_id,rootNamespaceName:_}),[F,g,i,_]);s.default.useEffect(()=>{b(m.getActivityStreamAction({arg:{file_path_or_id:e},params:{subjectUserId:String(i.id)}}))},[e,i,b]);const I=s.default.useCallback(e=>{b({type:y.FileActivityActionTypes.SET_FILTER,filter:e})},[b]);return l.useLogComponentTTI(t),s.default.createElement("div",{className:"activity-history-container"},F.status===f.EventState.loading?s.default.createElement("div",{className:"event-history-loading-indicator-container"},s.default.createElement(o.Spinner,{size:"standard","aria-valuetext":g.formatMessage({id:"csFB2E",defaultMessage:"Loading"})})):F.status===f.EventState.error?s.default.createElement(r.Text,{color:"faint",size:"small"},F.errorString):A?s.default.createElement(s.default.Fragment,null,s.default.createElement(u.ActivityFilter,{filter:h,setFilter:I,logFilterChange:v}),s.default.createElement(n.ActivityList,{activity:S})):s.default.createElement(r.Text,{size:"small",color:"faint"},g.formatMessage({id:"E5o8M1",defaultMessage:"When people work with this file, you'll see their activity here."})))}),t.FileActivity.displayName="FileActivity"}));
//# sourceMappingURL=file_activity.amd.min.js-vflRWkcha.map
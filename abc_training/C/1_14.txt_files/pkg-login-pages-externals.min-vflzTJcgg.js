define("modules/clean/abuse/funcaptcha_modal",["require","exports","tslib","react","modules/clean/deprecated_ajax/ajax_jquery","classnames","modules/clean/flux/base_store","modules/clean/flux/dispatcher","modules/clean/flux/store_listener","modules/constants/env","modules/constants/login_and_register","modules/core/browser_detection","modules/core/uri","react-dom","modules/core/dom","modules/clean/metrics/index","modules/core/exception","modules/clean/react/components/css"],(function(e,t,r,o,n,s,i,a,c,u,d,p,_,l,h,g,f,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordFunCaptchaLoadingStats=t.openFuncaptchaModal=t.loadFuncaptchaModal=void 0,o=r.__importDefault(o),n=r.__importStar(n),s=r.__importDefault(s),d=r.__importStar(d),p=r.__importStar(p),l=r.__importStar(l),h=r.__importStar(h),f=r.__importStar(f);const E=(e,t)=>{a.Dispatcher.dispatch({type:e,data:t})},S=(e,t,r,o)=>{n.BackgroundRequest({url:"/log_invisible_recaptcha_event",data:{event:e,email:t,source:r,captcha_session_token:o}})};t.loadFuncaptchaModal=()=>{const e=new O,t=c.listenToStores(T,{fs:e},()=>({show:e.show,email:e.email,firstTime:e.firstTime,onSuccess:e.onSuccess,onReady:e.onReady,runningFuncaptcha:e.runningFuncaptcha,source:e.source})),r=document.createElement("div");document.body.insertBefore(r,document.body.firstChild||null),l.render(o.default.createElement(t,null),r)},t.openFuncaptchaModal=(e,t,r,o)=>{S("FUNCAPTCHA_START",e,t,""),E("FUNCAPTCHA_START",{email:e,source:t,onSuccess:r,onReady:o})},t.recordFunCaptchaLoadingStats=(e,t,r,o)=>{g.getMetricsReporter().createStats({ns:"abuse",name:`funcaptcha/${e}`},{is_success:String(r)}).record(t),r||null==o||f.reportException({err:new Error(o),severity:f.SEVERITY.CRITICAL,tags:["content-abuse","funcaptcha"]})};class O extends i.Store{constructor(){super(...arguments),this.show=!1,this.email="",this.runningFuncaptcha=!1,this.firstTime=!0,this.source=""}_new_payload(e){if(e&&e.action&&e.action.type)switch(e.action.type){case"FUNCAPTCHA_START":{this.runningFuncaptcha=!0,this.firstTime=!1;const t=e.action.data;this.email=t.email,this.onSuccess=t.onSuccess,this.onReady=t.onReady,this.source=t.source,this.emit_change();break}case"FUNCAPTCHA_OPEN_MODAL":this.show=!0,this.emit_change();break;case"FUNCAPTCHA_FINISH":this.show=!1,this.runningFuncaptcha=!1,this.onSuccess=void 0,this.onReady=void 0,this.emit_change()}}}class R extends o.default.Component{getIFrame(){return l.findDOMNode(this.refs.iframe)}componentDidMount(){window.addEventListener("message",e=>{if(e.data&&"funcaptcha-component"===e.data.origin&&_.URI.parse(e.origin).getAuthority()===u.FUNCAPTCHA_SERVER)if("invoked"===e.data.event)this.props.onReady&&this.props.onReady();else if("loaded"===e.data.event)S("FUNCAPTCHA_CHALLENGE_SHOWN",this.props.email,this.props.source,e.data.fc_token||""),E("FUNCAPTCHA_OPEN_MODAL");else if("played"===e.data.event){const t=this.props.show?"FUNCAPTCHA_SOLVED":"FUNCAPTCHA_SUCCESS";S(t,this.props.email,this.props.source,e.data.fc_token||""),this.props.onSuccess(e.data.fc_token),E("FUNCAPTCHA_FINISH")}else"executed"===e.data.event&&t.recordFunCaptchaLoadingStats("funcaptcha_api_loading",e.data.latency,e.data.is_success,e.data.err_msg)})}componentWillReceiveProps(e){if(!this.props.runningFuncaptcha&&e.runningFuncaptcha){const t=this.props.firstTime?"load":"play",r=e.source;let o;o="LOGIN"===r?d.FUNCAPTCHA_PUBLIC_KEY:"BUY_PURCHASE_FORM"===r?d.FUNCAPTCHA_PAYMENT_PUBLIC_KEY:d.FUNCAPTCHA_REGISTER_PUBLIC_KEY;const n="funcaptcha-component";this.getIFrame().contentWindow.postMessage({event:t,origin:n,public_key:o,source:r},"*")}}componentDidUpdate(e,t){!e.show&&this.props.show?h.scroll_lock_document():e.show&&!this.props.show&&h.scroll_unlock_document()}render(){const e=new _.URI({scheme:"https",authority:u.FUNCAPTCHA_SERVER,query:{fc_nosuppress:_.URI.parse(window.location.href).getQuery().fc_nosuppress}}).toString(),t=o.default.createElement("iframe",{frameBorder:0,height:"100%",width:"100%",sandbox:"allow-scripts allow-same-origin allow-forms",className:"funcaptcha-frame",src:e,ref:"iframe",key:"iframe-id"});return o.default.createElement("div",{className:s.default({"funcaptcha-modal--hidden-firefox":!this.props.show&&p.mozilla,"funcaptcha-modal--hidden-non-firefox":!this.props.show&&!p.mozilla,"funcaptcha-modal":!0})},o.default.createElement("div",{className:"funcaptcha-div"},t))}}R.displayName="FuncaptchaComponent";const T=m.requireCssWithComponent(R,["/static/css/abuse/funcaptcha_modal-vfl6bl9tt.css"])})),define("modules/clean/auth/u2f",["require","exports","tslib","u2f-api","modules/core/browser_detection"],(function(e,t,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=t.FidoU2f=void 0,o=r.__importDefault(o),n=r.__importStar(n),(function(e){let t,r;(function(e){e.bt="bt",e.ble="ble",e.nfc="nfc",e.usb="usb"})(t||(t={})),(function(e){e[e.OK=0]="OK",e[e.OTHER_ERROR=1]="OTHER_ERROR",e[e.BAD_REQUEST=2]="BAD_REQUEST",e[e.CONFIGURATION_UNSUPPORTED=3]="CONFIGURATION_UNSUPPORTED",e[e.DEVICE_INELIGIBLE=4]="DEVICE_INELIGIBLE",e[e.TIMEOUT=5]="TIMEOUT"})(r=e.ErrorCode||(e.ErrorCode={}))})(t.FidoU2f||(t.FidoU2f={})),t.PROTOCOLS={"u2f_js1.1":""},t.LATEST_PROTOCOL="u2f_js1.1";const s=window.u2f;function i(){return!0===n.chrome&&parseInt(n.version,10)>=38&&!n.is_mobile_or_tablet()||Boolean(s)}t.isSupportedOnBrowser=i,t.canRegisterAuthenticator=function(e){return!!e&&i()},t.canUseAuthenticator=function(e){return!!e&&i()},t.register=function(e){return new Promise((t,r)=>{(s||o.default).register(e.appId,e.registerRequests,e.registeredKeys,t,e.opt_timeoutSeconds)})},t.sign=function(e){return new Promise((t,r)=>{(s||o.default).sign(e.appId,e.challenge,e.registeredKeys,t,e.opt_timeoutSeconds)})}})),define("modules/clean/auth/authenticator",["require","exports","tslib","modules/clean/auth/u2f","modules/clean/auth/webauthn"],(function(e,t,r,o,n){"use strict";function s(e){return n.canRegisterAuthenticator(e[n.LATEST_PROTOCOL])?n.LATEST_PROTOCOL:o.canRegisterAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:null}function i(e){return n.canUseAuthenticator(e[n.LATEST_PROTOCOL])?n.LATEST_PROTOCOL:o.canUseAuthenticator(e[o.LATEST_PROTOCOL])?o.LATEST_PROTOCOL:null}Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isWebAuthnEnabled=t.PROTOCOLS=void 0,o=r.__importStar(o),n=r.__importStar(n),t.PROTOCOLS=Object.assign(Object.assign({},o.PROTOCOLS),n.PROTOCOLS),t.isWebAuthnEnabled=function(e){return!!e&&!!e[n.LATEST_PROTOCOL]},t.canRegisterAuthenticator=function(e){return void 0===e?o.isSupportedOnBrowser():null!==s(e)},t.canUseAuthenticator=function(e){return null!==i(e)};const a={error:"Authenticator devices are not supported on this browser"},c={error:"Authenticator protocol not supported"};function u(e,t){let r;return r="register"===e?s(t):i(t),null!==r?Promise.resolve(r):o.isSupportedOnBrowser()||n.isSupportedOnBrowser()?Promise.reject(c):Promise.reject(a)}t.register=function(e){return u("register",e).then((function(t){return t in n.PROTOCOLS?n.register(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):t in o.PROTOCOLS?o.register(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):Promise.reject(c)}))},t.sign=function(e){return u("sign",e).then((function(t){return t in n.PROTOCOLS?n.sign(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):t in o.PROTOCOLS?o.sign(e[t]).then(r=>({protocol:t,challenge_id:e.challenge_id,response:r})):Promise.reject(c)}))}})),define("modules/clean/auth/webauthn",["require","exports","tslib","modules/core/browser_detection","modules/clean/security/util"],(function(e,t,r,o,n){"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.sign=t.register=t.canUseAuthenticator=t.canRegisterAuthenticator=t.isSupportedOnBrowser=t.LATEST_PROTOCOL=t.PROTOCOLS=void 0,o=r.__importStar(o),t.PROTOCOLS={webauthn_wd07:""},t.LATEST_PROTOCOL="webauthn_wd07",(function(e){e[e.OtherError=1]="OtherError",e[e.SecurityError=2]="SecurityError",e[e.NotAllowedError=3]="NotAllowedError",e[e.InvalidStateError=4]="InvalidStateError",e[e.Canceled=5]="Canceled",e[e.Timeout=6]="Timeout",e[e.NotSupportedError=7]="NotSupportedError"})(s||(s={}));const i={SecurityError:s.SecurityError,NotAllowedError:s.NotAllowedError,InvalidStateError:s.InvalidStateError,AbortError:s.Canceled,TimeoutError:s.Timeout,NotSupportedError:s.NotSupportedError};var a;function c(){return window.PublicKeyCredential&&(!0===o.mozilla&&parseInt(o.version,10)>=60||!0===o.chrome&&parseInt(o.version,10)>=66||!0===o.edge&&parseFloat(o.version)>=17.17682||!0===o.safari&&parseFloat(o.version)>=12.2)}function u(e){return!(!e||!c())&&((!0!==o.edge||!0!==e.disable_on_edge)&&(!0!==o.safari||!0!==e.disable_on_safari))}function d(e){if(e instanceof DOMException){const t=i[e.name];if(void 0!==t)return{errorCode:t,errorData:e.toString&&e.toString()}}return{errorCode:s.OtherError,errorData:e.toString&&e.toString()}}(function(e){e[e.COSE=0]="COSE",e[e.DER=1]="DER"})(a||(a={})),t.isSupportedOnBrowser=c,t.canRegisterAuthenticator=function(e){return u(e)},t.canUseAuthenticator=function(e){return u(e)&&(function(e){if(!0===o.edge&&parseFloat(o.version)>=17.17682&&parseFloat(o.version)<17.17713||!0===o.chrome&&69===parseInt(o.version,10)||!0===o.safari&&parseFloat(o.version)<13.1){if(e.allowCredentials)for(const t of e.allowCredentials)if(t.key_format===a.COSE)return!0;return!1}return!0})(e)},t.register=function(e){const t={challenge:n.b64urldecode(e.challenge),timeout:e.timeout,rp:{id:e.rp.id,name:e.rp.name,icon:e.rp.icon},user:{id:n.b64urldecode(e.user.id),name:e.user.name,displayName:e.user.displayName,icon:e.user.icon},authenticatorSelection:e.authenticatorSelection};return void 0!==e.excludeCredentials&&(t.excludeCredentials=e.excludeCredentials.map(e=>({type:e.type,id:n.b64urldecode(e.id),transports:e.transports}))),void 0!==e.pubKeyCredParams&&(t.pubKeyCredParams=e.pubKeyCredParams.map(e=>({type:e.type,alg:e.alg}))),void 0===e.attestation&&(t.attestation="direct"),navigator.credentials.create({publicKey:t}).then(e=>({response:{clientDataJSON:n.b64urlencode(e.response.clientDataJSON),attestationObject:n.b64urlencode(e.response.attestationObject)}})).catch(e=>d(e))},t.sign=function(e){const t={challenge:n.b64urldecode(e.challenge),timeout:e.timeout,rpId:e.rpId,userVerification:e.userVerification,extensions:e.extensions};return void 0!==e.allowCredentials&&(t.allowCredentials=e.allowCredentials.map(e=>{let t=void 0;return e.transports&&e.transports.length>0&&(t=e.transports),{type:e.type,id:n.b64urldecode(e.id),transports:t}})),navigator.credentials.get({publicKey:t}).then(e=>({id:e.id,response:{clientDataJSON:n.b64urlencode(e.response.clientDataJSON),authenticatorData:n.b64urlencode(e.response.authenticatorData),signature:n.b64urlencode(e.response.signature),userHandle:e.response.userHandle&&n.b64urlencode(e.response.userHandle)}})).catch(e=>d(e))}})),define("modules/clean/sso_login_checks",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery"],(function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SsoLoginChecks=void 0,o=r.__importStar(o);class n{constructor(e,t,r,o=!0){this._trigger_check_sso_state=this._trigger_check_sso_state.bind(this),this.check_sso_state=this.check_sso_state.bind(this),this.$email_input=e,this.show_sso_fn=t,this.hide_sso_fn=r,this.should_trigger_check=o,this.should_trigger_check&&(this._trigger_check_sso_state(),this.$email_input.on("input keyup change",this._trigger_check_sso_state))}static initClass(){this._sso_check_in_flight={},this._sso_check_cache={}}_trigger_check_sso_state(){const e=this.$email_input.val();return this.check_sso_state(e)}check_sso_state(e){const t=e.trim();if(!t.match(/^[^@\s]+@[^@\s]+\.[A-Za-z]{2,}$/))return this.hide_sso_fn();{const r=t.toLowerCase();if(r in n._sso_check_cache)return this._handle_sso_state(n._sso_check_cache[r]);if(!n._sso_check_in_flight[r])return n._sso_check_in_flight[r]=!0,o.WebRequest({url:"/sso_state",data:{email:t},success:t=>(t=JSON.parse(t),delete n._sso_check_in_flight[r],n._sso_check_cache[r]=t.user_sso_state,this.should_trigger_check&&this.$email_input.val()!==e?this._trigger_check_sso_state():this._handle_sso_state(t.user_sso_state)),error:()=>(delete n._sso_check_in_flight[r],this.hide_sso_fn())})}}_handle_sso_state(e){return"required"===e?this.show_sso_fn(!1):"optional"===e?this.show_sso_fn(!0):this.hide_sso_fn()}}t.SsoLoginChecks=n,n.initClass()})),define("modules/clean/web_register_logging_data",["require","exports","tslib","modules/core/browser","modules/core/transport/query_string_helpers"],(function(e,t,r,o,n){"use strict";function s(){return{signupUrl:o.get_href(),signupReferrer:document.referrer,trackingParams:n.getTrackingParamsAsJSON()}}Object.defineProperty(t,"__esModule",{value:!0}),t.setWebRegisterLoggingData=t.getWebRegisterLoggingData=void 0,o=r.__importStar(o),t.getWebRegisterLoggingData=s,t.setWebRegisterLoggingData=function(e={}){const{signupUrl:t,signupReferrer:r,trackingParams:o}=s(),n={signup_url:t,signup_referrer:r,tracking_params:o};return Object.assign(Object.assign({},e),n)}})),define("modules/clean/react/fedramp/fedramp_util",["require","exports","modules/core/uri"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFedrampRedirectUrlIfApplicable=void 0,t.getFedrampRedirectUrlIfApplicable=function(e,t){return e?String(new r.URI({path:"/fedramp_message"}).updateQuery({cont:t})):t}})),define("prod_assets_web_modules/u2f-api",["./common/_commonjsHelpers"],(function(e){"use strict";var t,r={},o={},n=n||{},s=n;return n.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",n.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_SIGN_RESPONSE:"u2f_sign_response",U2F_GET_API_VERSION_REQUEST:"u2f_get_api_version_request",U2F_GET_API_VERSION_RESPONSE:"u2f_get_api_version_response"},n.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},n.U2fRequest,n.U2fResponse,n.Error,n.Transport,n.Transports,n.SignRequest,n.SignResponse,n.RegisterRequest,n.RegisterResponse,n.RegisteredKey,n.GetJsApiVersionResponse,n.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:n.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(n.EXTENSION_ID,t,(function(){chrome.runtime.lastError?n.getIframePort_(e):n.getChromeRuntimePort_(e)}))}else n.isAndroidChrome_()?n.getAuthenticatorPort_(e):n.isIosChrome_()?n.getIosPort_(e):n.getIframePort_(e)},n.isAndroidChrome_=function(){var e=navigator.userAgent;return-1!=e.indexOf("Chrome")&&-1!=e.indexOf("Android")},n.isIosChrome_=function(){return["iPhone","iPad","iPod"].indexOf(navigator.platform)>-1},n.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(n.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout((function(){e(new n.WrappedChromeRuntimePort_(t))}),0)},n.getAuthenticatorPort_=function(e){setTimeout((function(){e(new n.WrappedAuthenticatorPort_)}),0)},n.getIosPort_=function(e){setTimeout((function(){e(new n.WrappedIosPort_)}),0)},n.WrappedChromeRuntimePort_=function(e){this.port_=e},n.formatSignRequest_=function(e,r,o,s,i){if(void 0===t||t<1.1){for(var a=[],c=0;c<o.length;c++)a[c]={version:o[c].version,challenge:r,keyHandle:o[c].keyHandle,appId:e};return{type:n.MessageTypes.U2F_SIGN_REQUEST,signRequests:a,timeoutSeconds:s,requestId:i}}return{type:n.MessageTypes.U2F_SIGN_REQUEST,appId:e,challenge:r,registeredKeys:o,timeoutSeconds:s,requestId:i}},n.formatRegisterRequest_=function(e,r,o,s,i){if(void 0===t||t<1.1){for(var a=0;a<o.length;a++)o[a].appId=e;var c=[];for(a=0;a<r.length;a++)c[a]={version:r[a].version,challenge:o[0],keyHandle:r[a].keyHandle,appId:e};return{type:n.MessageTypes.U2F_REGISTER_REQUEST,signRequests:c,registerRequests:o,timeoutSeconds:s,requestId:i}}return{type:n.MessageTypes.U2F_REGISTER_REQUEST,appId:e,registerRequests:o,registeredKeys:r,timeoutSeconds:s,requestId:i}},n.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},n.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var r=e.toLowerCase();"message"==r||"onmessage"==r?this.port_.onMessage.addListener((function(e){t({data:e})})):console.error("WrappedChromeRuntimePort only supports onMessage")},n.WrappedAuthenticatorPort_=function(){this.requestId_=-1,this.requestObject_=null},n.WrappedAuthenticatorPort_.prototype.postMessage=function(e){var t=n.WrappedAuthenticatorPort_.INTENT_URL_BASE_+";S.request="+encodeURIComponent(JSON.stringify(e))+";end";document.location=t},n.WrappedAuthenticatorPort_.prototype.getPortType=function(){return"WrappedAuthenticatorPort_"},n.WrappedAuthenticatorPort_.prototype.addEventListener=function(e,t){"message"==e.toLowerCase()?window.addEventListener("message",this.onRequestUpdate_.bind(this,t),!1):console.error("WrappedAuthenticatorPort only supports message")},n.WrappedAuthenticatorPort_.prototype.onRequestUpdate_=function(e,t){var r=JSON.parse(t.data);r.intentURL,r.errorCode;var o=null;r.hasOwnProperty("data")&&(o=JSON.parse(r.data)),e({data:o})},n.WrappedAuthenticatorPort_.INTENT_URL_BASE_="intent:#Intent;action=com.google.android.apps.authenticator.AUTHENTICATE",n.WrappedIosPort_=function(){},n.WrappedIosPort_.prototype.postMessage=function(e){var t=JSON.stringify(e),r="u2f://auth?"+encodeURI(t);location.replace(r)},n.WrappedIosPort_.prototype.getPortType=function(){return"WrappedIosPort_"},n.WrappedIosPort_.prototype.addEventListener=function(e,t){"message"!==e.toLowerCase()&&console.error("WrappedIosPort only supports message")},n.getIframePort_=function(e){var t="chrome-extension://"+n.EXTENSION_ID,r=document.createElement("iframe");r.src=t+"/u2f-comms.html",r.setAttribute("style","display:none"),document.body.appendChild(r);var o=new MessageChannel,s=function(t){"ready"==t.data?(o.port1.removeEventListener("message",s),e(o.port1)):console.error('First event on iframe port was not "ready"')};o.port1.addEventListener("message",s),o.port1.start(),r.addEventListener("load",(function(){r.contentWindow.postMessage("init",t,[o.port2])}))},n.EXTENSION_TIMEOUT_SEC=30,n.port_=null,n.waitingForPort_=[],n.reqCounter_=0,n.callbackMap_={},n.getPortSingleton_=function(e){n.port_?e(n.port_):(0==n.waitingForPort_.length&&n.getMessagePort((function(e){for(n.port_=e,n.port_.addEventListener("message",n.responseHandler_);n.waitingForPort_.length;)n.waitingForPort_.shift()(n.port_)})),n.waitingForPort_.push(e))},n.responseHandler_=function(e){var t=e.data,r=t.requestId;if(r&&n.callbackMap_[r]){var o=n.callbackMap_[r];delete n.callbackMap_[r],o(t.responseData)}else console.error("Unknown or missing requestId in response.")},n.isSupported=function(e){var r=!1;function o(t){r||(r=!0,e(t))}n.getApiVersion((function(e){t=void 0===e.js_api_version?0:e.js_api_version,o(!0)})),setTimeout(o.bind(null,!1),500)},n.sign=function(e,r,o,s,i){void 0===t?n.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),n.sendSignRequest(e,r,o,s,i)})):n.sendSignRequest(e,r,o,s,i)},n.sendSignRequest=function(e,t,r,o,s){n.getPortSingleton_((function(i){var a=++n.reqCounter_;n.callbackMap_[a]=o;var c=void 0!==s?s:n.EXTENSION_TIMEOUT_SEC,u=n.formatSignRequest_(e,t,r,c,a);i.postMessage(u)}))},n.register=function(e,r,o,s,i){void 0===t?n.getApiVersion((function(a){t=void 0===a.js_api_version?0:a.js_api_version,console.log("Extension JS API Version: ",t),n.sendRegisterRequest(e,r,o,s,i)})):n.sendRegisterRequest(e,r,o,s,i)},n.sendRegisterRequest=function(e,t,r,o,s){n.getPortSingleton_((function(i){var a=++n.reqCounter_;n.callbackMap_[a]=o;var c=void 0!==s?s:n.EXTENSION_TIMEOUT_SEC,u=n.formatRegisterRequest_(e,r,t,c,a);i.postMessage(u)}))},n.getApiVersion=function(e,t){n.getPortSingleton_((function(r){if(r.getPortType){var o;switch(r.getPortType()){case"WrappedIosPort_":case"WrappedAuthenticatorPort_":o=1.1;break;default:o=0}e({js_api_version:o})}else{var s=++n.reqCounter_;n.callbackMap_[s]=e;var i={type:n.MessageTypes.U2F_GET_API_VERSION_REQUEST,timeoutSeconds:void 0!==t?t:n.EXTENSION_TIMEOUT_SEC,requestId:s};r.postMessage(i)}}))},(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=s,r="undefined"!=typeof navigator&&!!navigator.userAgent,o=r&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//),n=r&&navigator.userAgent.match(/Edge\/1[2345]/),i=null;function a(){return i||(i=new Promise((function(e,s){function i(){e({u2f:null})}return r?o?i():void 0!==window.u2f&&"function"==typeof window.u2f.sign?e({u2f:window.u2f}):n||"http:"===location.protocol||"undefined"==typeof MessageChannel?i():void t.isSupported((function(r){r?e({u2f:t}):i()})):i()}))),i}function c(t,r){var o=null!=r?r.errorCode:1,n=e.ErrorNames[""+o],s=new Error(t);return s.metaData={type:n,code:o},s}function u(e){if(!e.u2f){if("http:"===location.protocol)throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}e.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},e.ErrorNames={0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"},e.isSupported=function(){return a().then((function(e){return!!e.u2f}))},e.ensureSupport=function(){return a().then(u)},e.register=function(e,t,r){return Array.isArray(e)||(e=[e]),"number"==typeof t&&void 0===r&&(r=t,t=null),t||(t=[]),a().then((function(o){u(o);var n=o.u2f;return new Promise((function(o,s){var i=e[0].appId;n.register(i,e,t,(function(e){e.errorCode?s(c("Registration failed",e)):(delete e.errorCode,o(e))}),r)}))}))},e.sign=function(e,t){return Array.isArray(e)||(e=[e]),a().then((function(r){u(r);var o=r.u2f;return new Promise((function(r,n){var s=e[0].appId,i=e[0].challenge;o.sign(s,i,e,(function(e){e.errorCode?n(c("Sign failed",e)):(delete e.errorCode,r(e))}),t)}))}))}})(o),(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=o;!(function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])})(o),e.default=t})(r),e.getDefaultExportFromCjs(r)}));
//# sourceMappingURL=pkg-login-pages-externals.min.js-vflzVwWuQ.map
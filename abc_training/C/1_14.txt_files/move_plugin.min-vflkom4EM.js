define(["require","exports","tslib","react","modules/core/i18n","modules/clean/react/action_bar/file_actions/portable/utils","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/portable/move","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/clean/file_store/utils","dig-components/icons/src","dig-components/icons"],(function(e,i,o,t,n,s,a,l,c,r,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeMoveActionLoader=i.MOVE_ACTION_PLUGIN_ID=void 0,t=o.__importDefault(t),i.MOVE_ACTION_PLUGIN_ID="MOVE_ACTION",i.makeMoveActionLoader=(e,i,o,_,f)=>()=>Promise.resolve(class{constructor(e){this.lifecycle={previewWillInitialize:()=>{this.actionDefinitions.alwaysInOverflow=[this.actionToDisplay()]}},this.actionDefinitions={alwaysInOverflow:[this.actionToDisplay()]},this.context=e}actionToDisplay(){const{file:i}=e();if(!c.isLiveFile(i)||r.isSharedFile(i)||c.isInsideVaultFolder(i)||c.isPnmLinkNodeSelected(i)||c.isPnmSuppressMoveSelected(i))return[];const o=this.moveDefinition();return o?[o]:[]}moveDefinition(){const{file:c}=e();if("fq_path"in c)return s.makePluginActionDefinition({label:n.intl.formatMessage(a.MOVE_ACTION_STRING),icon:t.default.createElement(u.UIIcon,{src:d.MoveLine}),disabled:c.read_only?{disabled:!0,tooltipMessage:n.intl.formatMessage(a.ACTION_DISABLED_STRING)}:{disabled:!1},action:()=>{let e;this.context.logUserAction({action:"move",context:"overflow_menu"}),l.portableMove({user:i,source:"preview",filesPath:[c],exceptions:_||{isOverFreeQuota:!1,hasExcludedNsIds:!1},currentFQPath:o,createNewFolderInMoveDialog:!0},{onSuccess:(i,o)=>{f&&o&&(e=o[0],f(c,o[0]))},onUndo:i=>{f&&i&&e&&f(e,c)}})}})}})}));
//# sourceMappingURL=move_plugin.min.js-vfls_7LBv.map
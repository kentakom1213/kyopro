define(["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/pass.css","typescript/libraries/file-viewer/src/pass/reducer","typescript/libraries/dbx-i18n/src/index","typescript/libraries/comments2/src/components/rich_facepile/index"],(function(e,t,i,s,a,r,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RichFacepileContainer=void 0,s=i.__importStar(s),a=i.__importStar(a);const o=e=>e.split(/\s+/g).slice(0,2).map(e=>e[0]).join("").toLocaleUpperCase(),c=({name:e,ts:t,intl:i,active:r})=>s.createElement("article",{className:a.avatarTooltipPadded},s.createElement("header",null,s.createElement("h3",null,e)),r?i.formatMessage({id:"cSWjTH",defaultMessage:"Viewing now"}):t?i.formatMessage({id:"lWGuPm",defaultMessage:"Viewed {ago}"},{ago:n.timeSince(i,t,{displayLocation:"label",displayContext:"sentence-middle"})}):null),p=e=>e.startsWith("dbafvid:"),m=({name:{display_name:e},account_id:t,profile_photo_url:i},a)=>({present:!0,displayName:e,initials:o(e),avatarColorSeed:t,memberKey:t,photoUrl:i||"",passiveTooltipContent:s.createElement(c,{name:e,active:!0,intl:a})}),d=({currentUser:e,viewingUserIds:t,users:i,seenStates:a,fileMembers:r,intl:n})=>{const l=[m(e,n),...t.filter(t=>t!==e.account_id&&(p(t)||i[t])).slice(0,3).map(e=>p(e)?((e,t)=>{const i=t.formatMessage({id:"uxSU4g",defaultMessage:"Guest"});return{present:!0,displayName:i,initials:o(i),avatarColorSeed:e,memberKey:e,photoUrl:"",passiveTooltipContent:s.createElement(c,{name:i,active:!0,intl:t})}})(e,n):m(i[e],n))];return l.length<4&&l.push(...a.order.filter(i=>!t.includes(i)&&i!==e.account_id).slice(0,4-l.length).map(e=>((e,t,i=!1)=>{const{when_last_seen:a,seen_state_user:{display_name:r,user_id:n,photo_circle_url:l}}=e;return{present:i,displayName:r,initials:o(r),avatarColorSeed:n,memberKey:n,photoUrl:l||"",passiveTooltipContent:s.createElement(c,{name:r,active:!1,ts:a,intl:t})}})(a.infos[e],n))),l.length<4&&l.push(...r.order.filter(i=>!(i===e.account_id||t.includes(i)||i in a.infos)).slice(0,4-l.length).map(e=>r.users[e]?(({user:{display_name:e,account_id:t}},i)=>({present:!1,displayName:e,initials:o(e),avatarColorSeed:t,memberKey:t,photoUrl:"",passiveTooltipContent:s.createElement(c,{name:e,intl:i})}))(r.users[e],n):(({user:e,invitee:t},i)=>{if(e){const{display_name:t,account_id:a}=e;return{present:!1,displayName:t,initials:o(t),avatarColorSeed:a,memberKey:a,photoUrl:"",passiveTooltipContent:s.createElement(c,{name:t,intl:i})}}if("email"===t[".tag"])return{present:!1,displayName:t.email,initials:o(t.email),avatarColorSeed:t.email,memberKey:t.email,photoUrl:"",passiveTooltipContent:s.createElement(c,{name:t.email,intl:i})}})(r.invitees[e],n)).filter(e=>!!e)),l};t.RichFacepileContainer=e=>{const{seenStates:t=r.DEFAULT_SEEN_STATES,intl:i,fileMemberCounts:a=r.DEFAULT_FILE_MEMBER_COUNTS,fileMembers:n=r.DEFAULT_FILE_MEMBERS,currentUser:o,users:c,viewingUserIds:p=r.DEFAULT_VIEWING_USER_IDS}=e;let m=0,u=[];return o&&(m=(function(e,t,i,s){return e.count+t.order.filter(e=>!(e in i.users||e in i.invitees)).length+s.filter(e=>!(e in t.infos||e in i.users||e in i.invitees)).length})(a,t,n,p),u=d({currentUser:o,viewingUserIds:p,users:c,seenStates:t,fileMembers:n,intl:i})),s.createElement(l.RichFacepile,{avatarSize:32,sizeClass:l.SizeClass.Large,sizeClassToCircleCountOverrides:{[l.SizeClass.Large]:4,[l.SizeClass.ExtraLarge]:4},avatarInfoList:u,intl:i,overflowBasis:m,tooltipComponent:l.UtilTooltip})},t.RichFacepileContainer.displayName="RichFacepileContainer"}));
//# sourceMappingURL=rich_container.amd.min.js-vflzxCFTP.map
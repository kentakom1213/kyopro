define(["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","modules/core/i18n","modules/clean/react/action_bar/file_actions/portable/utils","modules/clean/react/action_bar/file_actions/portable/rename/rename","modules/clean/react/action_bar/file_actions/portable/rename/snackbars","modules/clean/file_store/utils","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/clean/react/action_bar/action_bar_strings"],(function(e,i,a,t,n,o,r,s,l,c,_,f,m){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeRenameActionLoader=i.RENAME_ACTION_PLUGIN_ID=void 0,t=a.__importDefault(t),i.RENAME_ACTION_PLUGIN_ID="RENAME_ACTION",i.makeRenameActionLoader=(e,i,a)=>()=>Promise.resolve(class{constructor(e){this.lifecycle={previewWillInitialize:()=>{this.actionDefinitions.alwaysInOverflow=[this.actionToDisplay()]}},this.actionDefinitions={alwaysInOverflow:[this.actionToDisplay()]},this.context=e}actionToDisplay(){const{file:i}=e();if(_.isSharedFile(i)||f.isPnmLinkNodeSelected(i)||!f.isLiveFile(i))return[];const a=this.renameDefinition();return a?[a]:[]}renameDefinition(){const{file:d}=e();if("fq_path"in d)return s.makePluginActionDefinition({label:r.intl.formatMessage(m.RENAME_ACTION_STRING),icon:t.default.createElement(o.UIIcon,{src:n.EditLine}),disabled:d.read_only?{disabled:!0,tooltipMessage:r.intl.formatMessage(m.ACTION_DISABLED_STRING)}:{disabled:!1},action:()=>{this.context.logUserAction({action:"rename",context:"overflow_menu"}),l.portableRename({currentName:_.getFilename(d),user:i,fq_path:d.fq_path},{onNetworkRequest:()=>c.renameSnackBarInProgress(f.PREVIEWS_SNACKBAR_ID),onSuccess:e=>{c.renameCompleteSnackBar(f.PREVIEWS_SNACKBAR_ID),a&&e&&"file"===e[".tag"]&&a(d,{fq_path:e.path_display||d.fq_path,revision_id:e.rev,file_id:e.id})},onError:e=>c.renameFailedSnackBar(e,d.fq_path,f.PREVIEWS_SNACKBAR_ID)})}})}})}));
//# sourceMappingURL=rename_plugin.min.js-vfloowSEy.map
define("prod_assets_web_modules/dig-components/typeahead",["exports","../tslib","../focus-visible","react","./click_outside","./hooks","../classnames","./motion","./overlay","./progress_indicators","./icons","./icons/src","./typography","./buttons","../common/_commonjsHelpers","./layer","react-dom","../resize-observer-polyfill","../common/Transition","../@popperjs/core","../react-transition-group/CSSTransition","../common/extends"],(function(e,t,n,o,a,s,r,i,l,c,u,d,m,p,g,v,f,h,y,w,_,E){"use strict";var T=['.dig-Typeahead-row--interactive[role="option"]','.dig-Typeahead-row--interactive[role="menuitemcheckbox"]',".dig-Typeahead-results--show-more"],x={value:void 0,setSelected:function(){return!1},setFocused:function(){return!1},closeMenu:function(){return!1},isPortaled:!0,menuRows:s.createMenuRows(),containerId:"",setIsTypeaheadDropdownVisible:function(){}},R=o.createContext(x),b=o.createContext({}),C=o.createContext({}),M=function(e){var n=e.children,r=e.isPortaled,i=e.closeOnSelection,l=void 0===i||i,c=e.inlineProps,u=e.openMenuOnFocus,d=void 0===u||u,m=e.containerId,p=e.hasMaxHeight,g=void 0!==p&&p,v=e.onSelection,f=e.onBlur,h=e.onToggle,y=t.__rest(e,["children","isPortaled","closeOnSelection","inlineProps","openMenuOnFocus","containerId","hasMaxHeight","onSelection","onBlur","onToggle"]),w=o.useRef(null),_=o.useState(!1),E=_[0],x=_[1],b=o.useState(!1),C=b[0],M=b[1],N=o.useRef(null),P=o.useRef(null),S=s.useUniqueId({prefix:"dig-Typeahead",idOverride:m}),k=o.useCallback((function(e){C!==e&&M(e)}),[C]),I=o.useCallback((function(e,t){v&&v(e,t),l&&(P&&P.current&&P.current(void 0),w&&s.returnFocus(w))}),[l,v,P]),F=s.useMenu({triggerRef:w,contentRef:N,onSelection:I,onToggle:h,closeOnSelection:l,shouldFocusDisabledRows:!0,interactiveRowSelectors:T,allowLetterNavigation:!1,focusMenuRowTriggerKey:"ArrowDown",allowSpaceBarToOpenMenu:!1,focusNextItemImmediately:!1}),O=F.isOpen,D=F.openMenu,B=F.closeMenu,A=F.toggleMenu,K=F.value,H=F.setSelected,z=F.setFocused,L=F.getRootProps,U=F.getTriggerProps,j=F.getContentProps,V=F.menuRows,W=F.isFocusing;P.current=z;var Q=o.useCallback((function(){x(!1),document.removeEventListener("mouseup",Q)}),[]);o.useEffect((function(){return E&&document.addEventListener("mouseup",Q),function(){return document.removeEventListener("mouseup",Q)}}),[E,Q]);var q={getContentProps:function(e){return t.__assign(t.__assign({open:Boolean(O),triggerRef:w},j(t.__assign({tabIndex:void 0},e))),{role:"listbox"})},getTriggerProps:function(e){return t.__assign(t.__assign({},U(t.__assign(t.__assign({},e),{onKeyDown:function(t){if(c){var n=c.customOpenKey,o=c.onCustomOpenKeyTrigger,a=c.customCloseKey;t.key===n.key?(D({autoFocus:!1}),o&&o(t)):a&&t.key===a.key&&B({autoFocus:!1})}e&&e.onKeyDown&&e.onKeyDown(t)}}))),{"aria-autocomplete":"list","aria-controls":S,onChange:function(t){c||D({autoFocus:!1}),e&&e.onChange&&e.onChange(t)},onMouseDown:function(t){e&&e.onMouseDown&&e.onMouseDown(t),x(!0)},onClick:e?e.onClick:void 0,onKeyUp:e?e.onKeyUp:void 0,onFocus:function(t){d&&D({autoFocus:!1}),z(void 0),e&&e.onFocus&&e.onFocus(t)}})},openMenu:D,closeMenu:B,toggleMenu:A,triggerRef:w},G=o.useCallback((function(e){K||W||B({autoFocus:!1}),f&&f(e)}),[K,W,B,f]),J={isPortaled:r,contentRef:N,value:K,setSelected:H,setFocused:z,closeMenu:B,inlineProps:c,menuRows:V,containerId:S,hasMaxHeight:g,setIsTypeaheadDropdownVisible:k},X=o.useCallback((function(){B({autoFocus:!1})}),[B]),Y=c?n&&n(q):o.createElement(a.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:X,shouldPropagateMouseEvents:!1,isClickThroughPortaled:r,isActive:Boolean(O)&&!E&&C},n&&n(q));return o.createElement(R.Provider,{value:J},o.createElement("div",t.__assign({className:"dig-Typeahead",role:"combobox","aria-haspopup":"listbox","aria-owns":S,"aria-expanded":Boolean(O)},L(t.__assign(t.__assign({},y),{onBlur:G}))),Y))};M.displayName="Wrapper";var N=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),i=r("dig-Typeahead-row-accessory",n);return o.createElement("div",t.__assign({className:i},s),a)};N.displayName="RowAccessory";var P=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),i=r("dig-Typeahead-row-content",n);return o.createElement("div",t.__assign({className:i},s),a)};P.displayName="RowContent";var S=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),i=r("dig-Typeahead-row-subtitle",n);return o.createElement("div",t.__assign({className:i},s),a)};S.displayName="RowSubtitle";var k=function(e){var n=e.className,a=e.children,s=t.__rest(e,["className","children"]),i=r("dig-Typeahead-row-title",n);return o.createElement("div",t.__assign({className:i},s),a)};k.displayName="RowTitle";var I=o.forwardRef((function(e,n){var a=e.tagName,i=void 0===a?"li":a,l=e.role,c=void 0===l?"option":l,u=e.disabled,d=void 0!==u&&u,m=e.interactive,p=void 0===m||m,g=e.className,v=e.withLeftAccessory,f=e.withRightAccessory,h=e.withSubtitle,y=e.withTitle,w=e.onFocus,_=e.onMouseDown,E=e.value;e.tabIndex;var T=e.children,x=t.__rest(e,["tagName","role","disabled","interactive","className","withLeftAccessory","withRightAccessory","withSubtitle","withTitle","onFocus","onMouseDown","value","tabIndex","children"]),M=o.useRef(null),I=o.useContext(R),F=I.menuRows,O=I.setSelected,D=I.setFocused,B=o.useContext(C).resultIndex,A=o.useContext(b),K=A.rowIndex,H=A.focusIndex,z=100*(B||0)+(K||0),L=s.useMenuItem({interactive:p,disabled:d,ref:M,role:c,index:z},F).getItemProps;o.useEffect((function(){void 0!==H&&H===K&&setTimeout((function(){M.current&&M.current.focus()}),0)}),[H,K]);var U=r("dig-Typeahead-row",{"dig-Typeahead-row--disabled":d,"dig-Typeahead-row--interactive":p},g);return o.useImperativeHandle(n,(function(){return{getBoundingClientRect:function(){if(M.current)return M.current.getBoundingClientRect()}}})),o.createElement(i,t.__assign({onMouseDown:function(e){e.preventDefault(),O(E,e),D(void 0),_&&_(e)},onFocus:function(e){D(E),w&&w(e)},className:U,ref:M},L(t.__assign({},x))),T||o.createElement(o.Fragment,null,v&&o.createElement(N,null,v),o.createElement(P,null,o.createElement(k,null,y),h&&o.createElement(S,null,h)),f&&o.createElement(N,null,f)))}));I.displayName="Row";var F=function(e){var t=e.children;return o.createElement("div",{className:"dig-Typeahead-prompt"},t)};F.displayName="Prompt";var O=function(e){var n=e.open,r=e.triggerRef,u=e.emptyState,d=e.emptyPrompt,m=e.isEmptyQuery,p=void 0!==m&&m,g=e.loading,v=e.children,f=e.auto,h=void 0===f||f,y=e.positioningStrategy,w=void 0===y?"absolute":y,_=e.placement,E=void 0===_?"bottom-start":_,T=e.omitOverlay,x=void 0!==T&&T,b=t.__rest(e,["open","triggerRef","emptyState","emptyPrompt","isEmptyQuery","loading","children","auto","positioningStrategy","placement","omitOverlay"]),M=o.useContext(R),N=M.menuRows,P=M.closeMenu,S=M.contentRef,k=M.isPortaled,I=M.containerId,O=M.inlineProps,D=M.hasMaxHeight,B=M.setIsTypeaheadDropdownVisible,A=o.useCallback((function(){P({autoFocus:!1})}),[P]),K=s.useMaxHeight({hasMaxHeight:D,contentRef:S}).styles,H=u||d;if(o.useEffect((function(){void 0===u||console.warn("dig-components:","emptyState is deprecated. Please use emptyPrompt for empty prompts.")}),[]),o.useEffect((function(){var e=!0;g||p&&H||0!==N.items.size||(e=!1),B(e)}),[g,H,p,N.items.size,B]),!n||!v)return null;var z=void 0,L={};if(g?z=o.createElement(F,null,o.createElement(c.Spinner,null)):p&&H?z=d||u:0===N.items.size?(z=v,L={display:"none"}):z=o.Children.map(v,(function(e,t){return o.createElement(C.Provider,{value:{resultIndex:t}},e)})),x)return o.createElement(o.Fragment,null,z);var U=(function(e){switch(e){default:return"up";case"bottom":case"bottom-start":case"bottom-end":return"down"}})(E),j=o.createElement(i.Motion,{transitionIn:{transitions:[{property:U,value:0},{property:"opacity",value:1}],easing:"enter",duration:125},transitionOut:{transitions:[{property:"opacity",value:0}],easing:"leave",duration:125},style:{opacity:0},in:n,mountOnEnter:!0,unmountOnExit:!0},(function(e){var a=e.state,s=e.style;return(n||"exited"!==a)&&o.createElement(l.Overlay,{anchorRef:r,auto:h,isPortaled:k,placement:E,positioningStrategy:w,offsetDistance:4,setWidthSameAsAnchor:!Boolean(O)},o.createElement("ul",t.__assign({className:"dig-Typeahead-container",ref:S,id:I,style:L},b),o.createElement("div",{className:"dig-Typeahead-container--canvas",style:t.__assign(t.__assign({},s),K)},z)))}));return O?o.createElement(a.ClickOutside,{className:"dig-Typeahead-backdrop",isBlock:!0,onClickOutside:A,shouldPropagateMouseEvents:!1,isClickThroughPortaled:k,isActive:Boolean(n)},j):j};O.displayName="Container";var D=function(e){var t=e.placeholderText;return o.createElement(F,null,o.createElement(u.UIIcon,{size:"large",src:d.SearchLine}),o.createElement(m.Text,{color:"faint"},t))};D.displayName="EmptyPrompt";var B=function(e){var n=e.onShowMoreClick,a=e.showMoreButtonText,r=void 0===a?"Show more":a,i=o.useRef(null),l=o.useContext(R),c=l.menuRows,u=l.setFocused,d=100*(o.useContext(C).resultIndex||0)+(o.useContext(b).rowIndex||0),m=s.useMenuItem({interactive:!0,disabled:!0,ref:i,role:"option",index:d},c).getItemProps,g=function(e){e.stopPropagation(),e.preventDefault(),n()};return o.createElement(p.Button,t.__assign(t.__assign({className:"dig-Typeahead-results--show-more",variant:"transparent",ref:i,type:"button",onClick:g,onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.stopPropagation(),e.preventDefault(),n())},onMouseDown:g,onFocus:function(){u(void 0)}},m()),{disabled:!1,"aria-disabled":!1}),r)};function A(e){var t=e.results,n=e.title,a=e.renderRow,s=e.initialResults,i=void 0===s?4:s,l=e.maxResults,c=void 0===l?8:l,u=e.showMoreButtonText,d=e.size,p=void 0===d?"standard":d,g=o.useContext(R).setFocused,v=o.useState(Math.min(t.length,i)),f=v[0],h=v[1],y=o.useState(),w=y[0],_=y[1];if(o.useEffect((function(){h(Math.min(t.length,i))}),[t,i]),!t||0===t.length)return null;var E=r("dig-Typeahead-results",{"dig-Typeahead-results--standard":"standard"===p,"dig-Typeahead-results--large":"large"===p});return o.createElement("div",{className:E},n?o.createElement(m.Text,{className:"dig-Typeahead-results--title",color:"faint",isBold:!0,size:"small"},n):o.createElement("div",{className:"dig-Typeahead-results--title-spacer"}),t.slice(0,f).map((function(e,t){return o.createElement(b.Provider,{key:t,value:{rowIndex:t,focusIndex:w}},a(e))})),f<t.length&&f!==c&&o.createElement(b.Provider,{value:{rowIndex:f+100}},o.createElement(B,{showMoreButtonText:u,onShowMoreClick:function(){f<t.length&&(g(t[f]),_(f),h(Math.min(t.length,c)))}})))}B.displayName="ShowMore",A.displayName="Results";var K={Row:I,RowAccessory:N,RowContent:P,RowSubtitle:S,RowTitle:k,Wrapper:M,Container:O,Prompt:F,EmptyState:D,EmptyPrompt:D,Results:A};e.Typeahead=K,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-dig-f.min.js-vflHg03io.map
define(["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","dig-components/buttons","dig-components/menu","react-redux","react-intl","typescript/component_libraries/files_components/src/blades/comments/data/actions","typescript/component_libraries/files_components/src/blades/comments/data/selectors","typescript/component_libraries/files_components/src/blades/comments/data/transform","api_v2/redux/comments2","typescript/component_libraries/files_components/src/blades/comments/data/types","typescript/component_libraries/flows/src/components/approval-forms/index"],(function(e,s,t,a,n,o,l,r,i,c,m,d,u,p,b,f){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.CommentsMeatball=void 0,a=t.__importStar(a);const g=c.defineMessage({id:"U75RtN",defaultMessage:"Hide resolved comments"}),M=c.defineMessage({id:"fKXJUR",defaultMessage:"Show resolved comments"}),v=c.defineMessage({id:"w904jy",defaultMessage:"Unsubscribe"}),C=c.defineMessage({id:"cnLKs9",defaultMessage:"Subscribe"}),_=c.defineMessage({id:"/XlCxM",defaultMessage:"Disable comments"}),S=c.defineMessage({id:"bppWf8",defaultMessage:"Enable comments"}),k=c.defineMessage({id:"o2BfZf",defaultMessage:"Request approval"});s.CommentsMeatball=a.default.memo(({className:e,fileId:s,sharedLinkURL:t,size:E,showApproval:h,approvalsLogger:A})=>{const I=i.useDispatch(),y=c.useIntl(),w=u.createStreamFromFileOrSharedLink(s,t),F=b.createCommentFileIdentifier(s,t),L=i.useSelector(e=>e.showResolvedComments),O=i.useSelector(e=>{var s;return null===(s=e.permissions[F])||void 0===s?void 0:s.can_enable_commenting}),R=i.useSelector(e=>d.areCommentsEnabled(e,F)),U=i.useSelector(e=>{var s;return null===(s=e.permissions[F])||void 0===s?void 0:s.can_subscribe}),x=i.useSelector(e=>d.isUserSubscribed(e,F)),j=a.useCallback(()=>{I(m.updateShowResolvedComments(!L))},[I,L]),q=a.useCallback(()=>I(p.subscribeAction({arg:{stream:w}})),[I,w]),z=a.useCallback(()=>I(p.unsubscribeAction({arg:{stream:w}})),[I,w]),N=a.useCallback(()=>I(p.enableCommentingAction({arg:{stream:w}})),[I,w]),D=a.useCallback(()=>I(p.disableCommentingAction({arg:{stream:w}})),[I,w]),P=a.useCallback(()=>{A&&A(),I(f.setApprovalForm({[F]:{activeForm:"request",threadId:void 0}}))},[I,F,A]);return R||O?a.default.createElement(r.Menu.Wrapper,{className:e},({getContentProps:e,getTriggerProps:s})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(l.IconButton,Object.assign({variant:"transparent"},s(),{size:E,"aria-label":y.formatMessage({id:"OD3YF0",defaultMessage:"Other actions"})}),a.default.createElement(o.UIIcon,{src:n.MoreHorizontalLine,size:E})),a.default.createElement(r.Menu.Content,Object.assign({},e()),a.default.createElement(r.Menu.Segment,null,a.default.createElement(r.Menu.ActionItem,{value:L?"hide-resolve-comments":"show-resolve-comments",onClick:j,disabled:!R},L?y.formatMessage(g):y.formatMessage(M)),U?a.default.createElement(r.Menu.ActionItem,{value:x?"unsubscribe":"subscribe",onClick:x?z:q,disabled:!R},x?y.formatMessage(v):y.formatMessage(C)):null,O?a.default.createElement(r.Menu.ActionItem,{value:x?"enableComments":"disableComments",onClick:R?D:N},R?y.formatMessage(_):y.formatMessage(S)):null,h&&a.default.createElement(r.Menu.ActionItem,{value:"requestApproval",onClick:P},y.formatMessage(k)))))):null}),s.CommentsMeatball.displayName="CommentsMeatball"}));
//# sourceMappingURL=meatball_menu.amd.min.js-vflS8kOhY.map
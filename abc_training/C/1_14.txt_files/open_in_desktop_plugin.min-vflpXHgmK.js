define(["require","exports","tslib","react","modules/core/i18n","modules/core/browser_detection","modules/clean/react/action_bar/file_actions/portable/utils","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/portable/open_desktop","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/clean/unity/features","modules/clean/unity/check_file_cache","modules/clean/file_store/utils","dig-components/icons/src","dig-components/icons"],(function(e,i,t,n,o,s,l,a,c,r,_,u,d,p,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeOpenInDesktopActionLoader=i.OPEN_IN_DESKTOP_ACTION_PLUGIN_ID=void 0,n=t.__importDefault(n),u=t.__importDefault(u),i.OPEN_IN_DESKTOP_ACTION_PLUGIN_ID="OPEN_IN_DESKTOP_ACTION",i.makeOpenInDesktopActionLoader=(e,i,t)=>()=>Promise.resolve(class{constructor(e){this.lifecycle={previewWillInitialize:()=>{this.actionDefinitions.alwaysInOverflow=[this.actionToDisplay()]}},this.actionDefinitions={alwaysInOverflow:[this.actionToDisplay()]},this.context=e}actionToDisplay(){const{file:i}=e();return r.isLiveFile(i)&&!d.isSharedFile(i)&&!r.isInsideVaultFolder(i)&&_.UnityFeatures.isUnitySupported()&&"ns_path"in i&&(null===u.default||void 0===u.default?void 0:u.default.is_cached_and_locally_available(i.ns_id,i.ns_path))?[this.openInDesktopDefinition()]:[]}openInDesktopDefinition(){const{file:r}=e();return l.makePluginActionDefinition({label:o.intl.formatMessage(s.mac?a.OPEN_MAC_DESKTOP_ACTION_STRING:a.OPEN_WINDOWS_DESKTOP_ACTION_STRING),icon:n.default.createElement(f.UIIcon,{src:s.mac?p.FinderLine:p.FileExplorerLine}),action:()=>{this.context.logUserAction({action:"open_desktop_click",context:"overflow_menu"});const e=r.ns_id||(null==t?void 0:t.currentNSID),n="ns_path"in r?r.ns_path:null==t?void 0:t.currentNSPath;c.portableOpenInDesktop({user:i,nsPath:n,nsId:e},{})}})}})}));
//# sourceMappingURL=open_in_desktop_plugin.min.js-vfl6_8WAT.map
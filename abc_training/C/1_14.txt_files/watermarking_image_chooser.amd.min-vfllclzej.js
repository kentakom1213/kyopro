define(["require","exports","tslib","react","classnames","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/watermarking/plugin/utils/getImageFromFile","typescript/libraries/file-viewer/src/css/watermarking_plugin.css"],(function(e,a,t,r,i,n,o,m,l,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.WatermarkingImageChooser=a.VALID_MIME_TYPES=void 0,r=t.__importStar(r),i=t.__importDefault(i),s=t.__importStar(s),a.VALID_MIME_TYPES=["image/png","image/jpeg","image/jpg","image/gif","image/bmp"],a.WatermarkingImageChooser=({image:e,onImageChange:d,intl:g})=>{const c=r.useRef(null),[u,f]=r.useState(!1),p=r.useCallback(({image:e})=>{d(e)},[d]);return r.useEffect(()=>{const e=e=>{e.preventDefault(),f(!0)},r=e=>{e.preventDefault(),f(!1)},i=e=>t.__awaiter(void 0,void 0,void 0,(function*(){var t;e.preventDefault(),f(!1);const r=null===(t=null==e?void 0:e.dataTransfer)||void 0===t?void 0:t.files[0];r&&a.VALID_MIME_TYPES.includes(r.type)&&p({image:yield l.getImageFromFile(r),filename:r.name,source:"dragdrop"})}));return document.addEventListener("dragover",e),document.addEventListener("dragleave",r),document.addEventListener("drop",i),()=>{document.removeEventListener("dragover",e),document.removeEventListener("dragleave",r),document.removeEventListener("drop",i)}},[p]),r.default.createElement(r.default.Fragment,null,r.default.createElement("div",{className:i.default(s.watermarkingDropZone,{[s.watermarkingDropZoneActive]:u})},u&&r.default.createElement("p",{className:s.watermarkingDropZoneText},g.formatMessage({id:"m5kdkX",defaultMessage:"Drop image here"}))),r.default.createElement("div",{className:s.watermarkingImageChooser,onClick:()=>{var e;null===(e=null==c?void 0:c.current)||void 0===e||e.click()}},e?r.default.createElement("img",{className:s.watermarkingImageChooserPreview,src:e.src,alt:g.formatMessage({id:"xX2p4m",defaultMessage:"Preview of image watermark option"})}):r.default.createElement(r.default.Fragment,null,r.default.createElement(n.IconButton,{className:s.watermarkingAddImageButton,variant:"outline",inverse:!0},r.default.createElement(o.UIIcon,{src:m.AddLine})),g.formatMessage({id:"m5kdkX",defaultMessage:"Drop image here"})),r.default.createElement("input",{id:"watermarking-image-input",ref:c,accept:a.VALID_MIME_TYPES.join(", "),type:"file",onChange:e=>t.__awaiter(void 0,void 0,void 0,(function*(){if(e.currentTarget.files){const t=Array.from(e.currentTarget.files).pop();if(!t)return;if(!a.VALID_MIME_TYPES.includes(t.type))return;p({image:yield l.getImageFromFile(t),filename:t.name,source:"computer"})}})),hidden:!0})))},a.WatermarkingImageChooser.displayName="WatermarkingImageChooser"}));
//# sourceMappingURL=watermarking_image_chooser.amd.min.js-vflO8jBNl.map
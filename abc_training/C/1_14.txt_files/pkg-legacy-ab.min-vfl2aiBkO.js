define("modules/clean/deprecated_pyxl/controllers/tooltip",["require","exports","tslib","lodash","modules/clean/deprecated_pyxl/controller_helpers","modules/clean/analytics"],(function(t,e,o,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InfoTooltip=e.DBTooltip=void 0,i=o.__importStar(i),n=o.__importStar(n);const a=[];class l{constructor(t,e,o,r,a){this.$wrapper=t,this.prompt=this.$wrapper.find(".tooltip-prompt"),this.tooltip=this.$wrapper.find(".tooltip-tooltip"),this.hover_target=this.find_hover_target(),this.hover_log_event_name=a,this.position_global=e,this.tooltip_location=o,this.listen();const l=n.clone_element(this.tooltip).appendTo("body");l.css({position:"static",display:"inline-block"});const s=r||500;let u=l.width()+1;if(u>s&&(u=s),this.tooltip.css({width:u,position:"absolute",display:"none"}),l.remove(),this.position_global&&this.tooltip.remove().appendTo("body"),this.is_focusable()){const t=i.uniqueId("tooltip-tooltip-");this.tooltip.attr({role:"tooltip",id:t}),this.hover_target.attr({tabindex:0,"aria-describedby":t})}}static initClass(){this.prototype.tooltip_shown=!1,this.prototype.position_global=!1}listen(){return(()=>{const t=[];for(const e of[this.hover_target,this.tooltip])e.mouseenter(()=>(clearTimeout(this.tooltip.data("timeout_id")),this.show_tooltip())),e.mouseleave(()=>{const t=setTimeout(()=>this.hide_tooltip(),200);return this.tooltip.data("timeout_id",t)}),this.is_focusable()?(e.focusin(()=>(clearTimeout(this.tooltip.data("timeout_id")),this.show_tooltip())),t.push(e.focusout(()=>{const t=setTimeout(()=>this.hide_tooltip(),200);return this.tooltip.data("timeout_id",t)}))):t.push(void 0);return t})()}find_hover_target(){return this.prompt}is_focusable(){return!1}show_tooltip(t){let e,o,i,n;if(!this.tooltip_shown){i=this.position_global?this.hover_target.offset():this.hover_target.position();for(const t of Array.from(a))t.hide_tooltip();return a.push(this),"top"===this.tooltip_location?(n=i.top-this.tooltip.outerHeight()-this.hover_target.height()/2,o=i.left-this.tooltip.outerWidth()/2,e={top:"-=7"}):"left"===this.tooltip_location?(n=i.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,o=i.left-this.tooltip.outerWidth()-2,e={left:"-=7"}):"bottom"===this.tooltip_location?(n=i.top+this.hover_target.outerHeight(),o=i.left-this.tooltip.outerWidth()/2+this.hover_target.outerWidth()/2,e={top:"+=7"}):(n=i.top-this.tooltip.outerHeight()/2+this.hover_target.outerHeight()/2,o=i.left+this.hover_target.width()+2,e={left:"+=7"}),this.tooltip.css({top:n,left:o}).show().animate(e,50),this.hover_log_event_name&&r.TeamsWebActionsLogger.log(this.hover_log_event_name),this.tooltip_shown=!0}}hide_tooltip(){if(!this.tooltip_shown)return;clearTimeout(this.tooltip.data("timeout_id")),this.tooltip.hide(),this.tooltip_shown=!1;const t=a.indexOf(this);return-1!==t?a.splice(t,1):void 0}}e.DBTooltip=l,l.initClass();e.InfoTooltip=class extends l{find_hover_target(){return this.prompt.find(".sprite")}is_focusable(){return!0}}})),define("modules/clean/legacy_ui_button",["require","exports","tslib","jquery"],(function(t,e,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i=o.__importDefault(i);e.default=function(){const t=i.default(document);return i.default(document).on("mouseover.ui-button",".ui-button",(function(){return i.default(this).addClass("over")})).on("mouseout.ui-button",".ui-button",(function(){return i.default(this).removeClass("over")})).on("mousedown.ui-button",".ui-button",(function(){return i.default(this).addClass("down")})).on("click.ui-button",".ui-button",(function(){const e=i.default(this);return e.hasClass("ui-button-dropdown")&&(e.hasClass("active")?t.trigger("dropdownClosed",[1]):t.trigger("dropdownOpened",[1])),e.toggleClass("active")})),t.on("click.ui-button",(function(e){const o=i.default(e.target).closest(".ui-button.active");let n=0;i.default(".ui-button.active").not(o).each((function(){const t=i.default(this);t.hasClass("active")&&t.hasClass("ui-button-dropdown")&&(n+=1),t.removeClass("active")})),t.trigger("dropdownClosed",[n])})).on("mouseup.ui-button",()=>i.default(".ui-button.down").removeClass("down"))}})),define("modules/clean/photos/legacy_thumb_loader",["require","exports","tslib","jquery","modules/clean/photos/batch_thumb_loader","modules/clean/sprite"],(function(t,e,o,i,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LegacyBatchThumbLoader=void 0,i=o.__importDefault(i),r=o.__importDefault(r),e.LegacyBatchThumbLoader={MAX_THUMB_BATCH_REQUESTS:24,batch_load_thumbs(t,e,o,a){const l=t.filter(t=>i.default(t).data("src")),s={};for(const t of l){const e=String(i.default(t).data("src"));s[e]||(s[e]=[]),s[e].push(t)}this.instance?this.instance.reset({batch_size:e,batch_logger:a}):this.instance=new n.BatchThumbLoader({batch_size:e,max_parallel_requests:this.MAX_THUMB_BATCH_REQUESTS,on_batch:t=>{for(const e of t){const t=[],o=i.default(s[e]);o.data("src",null),t.push(o.data("loading-src",e))}},batch_logger:a});for(const t of l){const e=i.default(t),n=e.data("src");this.instance.queue_thumb(n,function(t,e,i,n){if(n||e.data("loading-src")){if(e.data("loading-src",null),0===i.indexOf("data:image"))return e.attr("src",i),"function"==typeof o?o(e[0]):void 0;e.error(()=>e.attr("src",e.data("fail-src")||r.default.SPACER)),e.load(()=>"function"==typeof o?o(e[0]):void 0),e.attr("src",i)}}.bind(this,n,e))}return this.instance.flush(),l.length},clear_all_pending_batches(){this.instance&&this.instance.clear()}}})),define("modules/clean/marketing_tracker",["require","exports","tslib","modules/core/assert","modules/core/exception","proto_utils/unpack","dropbox/proto/js_init_data/marketing_tracker/marketing_tracker"],(function(t,e,o,i,n,r,a){"use strict";var l;Object.defineProperty(e,"__esModule",{value:!0}),e.moduleInit=e.MarketingTracker=e.getGAViewData=e.getGAEventData=e.EventTypeEnum=e.MARKETING_REGISTER_EVENT=e.MARKETING_LOGIN_EVENT=e.MARKETING_URI=void 0,n=o.__importStar(n),e.MARKETING_URI="https://marketing.dropbox.com",e.MARKETING_LOGIN_EVENT="user_login",e.MARKETING_REGISTER_EVENT="user_register",(function(t){t.Link="link",t.View="view"})(l=e.EventTypeEnum||(e.EventTypeEnum={}));class s{constructor(){if(this.el=null,this.ready=!1,this.readyTimeout=null,this.push=({src:t,dataLayer:o,config:r,eventType:a})=>{const s=Object.assign(Object.assign({},o),{_config:r||{},_eventType:a||l.Link});i.assert(!!t,"MarketingTracker.push requires src"),this.ready?this.el&&this.el.contentWindow&&this.el.contentWindow.postMessage(s,e.MARKETING_URI):(this.el||(this.el=this.load(t),this.src=t,r&&(this.config=r),this.readyTimeout=setTimeout(()=>{n.reportException({err:new Error("Timed-out while waiting for marketing_tracker iframe load event"),severity:"non-critical"})},3e4)),this.el.addEventListener("load",()=>{null!==this.readyTimeout&&(clearTimeout(this.readyTimeout),this.readyTimeout=null),this.el&&this.el.contentWindow?(this.ready=!0,this.el.contentWindow.postMessage(s,e.MARKETING_URI)):n.reportException({err:new Error("Could not find contentWindow on marketing_tracker iframe element"),severity:"non-critical"})}))},this.load=t=>{const e=document.createElement("iframe");return e.style.display="none",e.hidden=!0,e.src=t,e.setAttribute("sandbox","allow-scripts allow-same-origin"),document.body.appendChild(e),e},this.pushWithDefaults=(t,e)=>{const{config:o,src:i}=this;if(o){const n={config:o,dataLayer:Object.assign(Object.assign({},this.config.default_marketing_data),t),src:i,eventType:e};this.push(n)}else n.reportStack("MarketingTracker.pushWithDefaults requires config, which is undefined. This probably           means there is no MarketingTracker instance on the page.")},this.pushEvent=(t,e,o)=>{const i=Object.assign({event:t,tealium_event:t},o);this.pushWithDefaults(i,e)},this.tryPushEvent=(t,e,o)=>{const{config:i,src:n}=this,r={event:t,tealium_event:t};if(o=o||{},i){const t={config:i,dataLayer:Object.assign(Object.assign(Object.assign({},this.config.default_marketing_data),r),o),src:n,eventType:e||l.Link};this.push(t)}},s.instance)return s.instance;s.instance=this}}e.getGAEventData=function(t,e,o,i){const n={ga_eventaction:e,ga_eventCategory:t};return o&&(n.ga_eventLabel=o),i&&(n.ga_eventValue=i),n},e.getGAViewData=function(t,e,o){const n={};return i.assert(!o||o.startsWith("/virtual"),"virtual pageview page should start with virtual"),t&&(n.title=t),e&&(n.ga_pageview_location=e),o&&(n.ga_pageview_page=o),n},e.MarketingTracker=new s;const u=t=>{const e={},{fields:o}=t;for(const t of Object.keys(o)){const i=o[t];e[t]=i[i.kind]}return e};e.moduleInit=function(t){const o=r.unpackProto(t,a.marketing_tracker.MarketingTrackerData),{src:i}=o,n={tealium_enabled:o.config.tealiumEnabled,tealium_env:o.config.tealiumEnv,tealium_profile:o.config.tealiumProfile,default_marketing_data:u(o.config.defaultMarketingData),privacy_consent_enabled:o.config.privacyConsentEnabled},l=u(o.dataLayer);e.MarketingTracker.push({src:i,config:n,dataLayer:l})}})),define("dropbox/proto/js_init_data/marketing_tracker/marketing_tracker",["require","exports","tslib","protobufjs/minimal","google/protobuf/struct"],(function(t,e,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.marketing_tracker=void 0;const n=(i=o.__importStar(i)).Reader,r=i.Writer,a=(i.util,i.roots.default||(i.roots.default={}));var l;e.default=a,e.marketing_tracker=a.marketing_tracker=((l=a.marketing_tracker||{}).Config=(function(t){function t(t){if(t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.tealiumEnabled=!1,t.prototype.tealiumEnv="",t.prototype.tealiumProfile="",t.prototype.defaultMarketingData=null,t.prototype.privacyConsentEnabled=!1,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=r.create()),null!=t.tealiumEnabled&&Object.hasOwnProperty.call(t,"tealiumEnabled")&&e.uint32(24).bool(t.tealiumEnabled),null!=t.tealiumEnv&&Object.hasOwnProperty.call(t,"tealiumEnv")&&e.uint32(34).string(t.tealiumEnv),null!=t.tealiumProfile&&Object.hasOwnProperty.call(t,"tealiumProfile")&&e.uint32(42).string(t.tealiumProfile),null!=t.defaultMarketingData&&Object.hasOwnProperty.call(t,"defaultMarketingData")&&a.google.protobuf.Struct.encode(t.defaultMarketingData,e.uint32(50).fork()).ldelim(),null!=t.privacyConsentEnabled&&Object.hasOwnProperty.call(t,"privacyConsentEnabled")&&e.uint32(56).bool(t.privacyConsentEnabled),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));let o=void 0===e?t.len:t.pos+e,i=new a.marketing_tracker.Config;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 3:i.tealiumEnabled=t.bool();break;case 4:i.tealiumEnv=t.string();break;case 5:i.tealiumProfile=t.string();break;case 6:i.defaultMarketingData=a.google.protobuf.Struct.decode(t,t.uint32());break;case 7:i.privacyConsentEnabled=t.bool();break;default:t.skipType(7&e)}}return i},t.getTypeUrl=function(){return"type.googleapis.com/marketing_tracker.Config"},t})(l.Config||{}),l.MarketingTrackerData=(function(t){function t(t){if(t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.src="",t.prototype.config=null,t.prototype.dataLayer=null,t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=r.create()),null!=t.src&&Object.hasOwnProperty.call(t,"src")&&e.uint32(10).string(t.src),null!=t.config&&Object.hasOwnProperty.call(t,"config")&&a.marketing_tracker.Config.encode(t.config,e.uint32(18).fork()).ldelim(),null!=t.dataLayer&&Object.hasOwnProperty.call(t,"dataLayer")&&a.google.protobuf.Struct.encode(t.dataLayer,e.uint32(26).fork()).ldelim(),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));let o=void 0===e?t.len:t.pos+e,i=new a.marketing_tracker.MarketingTrackerData;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 1:i.src=t.string();break;case 2:i.config=a.marketing_tracker.Config.decode(t,t.uint32());break;case 3:i.dataLayer=a.google.protobuf.Struct.decode(t,t.uint32());break;default:t.skipType(7&e)}}return i},t.getTypeUrl=function(){return"type.googleapis.com/marketing_tracker.MarketingTrackerData"},t})(l.MarketingTrackerData||{}),l)})),define("google/protobuf/struct",["require","exports","tslib","protobufjs/minimal"],(function(t,e,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.google=void 0;const n=(i=o.__importStar(i)).Reader,r=i.Writer,a=i.util,l=i.roots.default||(i.roots.default={});var s,u;e.default=l,e.google=l.google=((s=l.google||{}).protobuf=((u=s.protobuf||{}).Struct=(function(t){function t(t){if(this.fields={},t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.fields=a.emptyObject,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=r.create()),null!=t.fields&&Object.hasOwnProperty.call(t,"fields"))for(let o=Object.keys(t.fields),i=0;i<o.length;++i)e.uint32(10).fork().uint32(10).string(o[i]),l.google.protobuf.Value.encode(t.fields[o[i]],e.uint32(18).fork()).ldelim().ldelim();return e},t.decode=function(t,e){t instanceof n||(t=n.create(t));let o,i,r=void 0===e?t.len:t.pos+e,s=new l.google.protobuf.Struct;for(;t.pos<r;){let e=t.uint32();switch(e>>>3){case 1:{s.fields===a.emptyObject&&(s.fields={});let e=t.uint32()+t.pos;for(o="",i=null;t.pos<e;){let e=t.uint32();switch(e>>>3){case 1:o=t.string();break;case 2:i=l.google.protobuf.Value.decode(t,t.uint32());break;default:t.skipType(7&e)}}s.fields[o]=i;break}default:t.skipType(7&e)}}return s},t.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.Struct"},t})(u.Struct||{}),u.Value=(function(t){function t(t){if(t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}let e;return t.prototype.nullValue=0,t.prototype.numberValue=0,t.prototype.stringValue="",t.prototype.boolValue=!1,t.prototype.structValue=null,t.prototype.listValue=null,Object.defineProperty(t.prototype,"kind",{get:a.oneOfGetter(e=["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]),set:a.oneOfSetter(e)}),t.create=function(e){return new t(e)},t.encode=function(t,e){return e||(e=r.create()),null!=t.nullValue&&Object.hasOwnProperty.call(t,"nullValue")&&e.uint32(8).int32(t.nullValue),null!=t.numberValue&&Object.hasOwnProperty.call(t,"numberValue")&&e.uint32(17).double(t.numberValue),null!=t.stringValue&&Object.hasOwnProperty.call(t,"stringValue")&&e.uint32(26).string(t.stringValue),null!=t.boolValue&&Object.hasOwnProperty.call(t,"boolValue")&&e.uint32(32).bool(t.boolValue),null!=t.structValue&&Object.hasOwnProperty.call(t,"structValue")&&l.google.protobuf.Struct.encode(t.structValue,e.uint32(42).fork()).ldelim(),null!=t.listValue&&Object.hasOwnProperty.call(t,"listValue")&&l.google.protobuf.ListValue.encode(t.listValue,e.uint32(50).fork()).ldelim(),e},t.decode=function(t,e){t instanceof n||(t=n.create(t));let o=void 0===e?t.len:t.pos+e,i=new l.google.protobuf.Value;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 1:i.nullValue=t.int32();break;case 2:i.numberValue=t.double();break;case 3:i.stringValue=t.string();break;case 4:i.boolValue=t.bool();break;case 5:i.structValue=l.google.protobuf.Struct.decode(t,t.uint32());break;case 6:i.listValue=l.google.protobuf.ListValue.decode(t,t.uint32());break;default:t.skipType(7&e)}}return i},t.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.Value"},t})(u.Value||{}),u.NullValue=(function(){const t={},e=Object.create(t);return e[t[0]="NULL_VALUE"]=0,e})(),u.ListValue=(function(t){function t(t){if(this.values=[],t)for(let e=Object.keys(t),o=0;o<e.length;++o)null!=t[e[o]]&&(this[e[o]]=t[e[o]])}return t.prototype.values=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=r.create()),null!=t.values&&t.values.length)for(let o=0;o<t.values.length;++o)l.google.protobuf.Value.encode(t.values[o],e.uint32(10).fork()).ldelim();return e},t.decode=function(t,e){t instanceof n||(t=n.create(t));let o=void 0===e?t.len:t.pos+e,i=new l.google.protobuf.ListValue;for(;t.pos<o;){let e=t.uint32();switch(e>>>3){case 1:i.values&&i.values.length||(i.values=[]),i.values.push(l.google.protobuf.Value.decode(t,t.uint32()));break;default:t.skipType(7&e)}}return i},t.getTypeUrl=function(){return"type.googleapis.com/google.protobuf.ListValue"},t})(u.ListValue||{}),u),s)}));
//# sourceMappingURL=pkg-legacy-ab.min.js-vfl9xJQ6z.map
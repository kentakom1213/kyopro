define("modules/clean/react/file_viewer/constants",["require","exports","modules/clean/react/size_class/constants"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOCSEND_PROD_APP_ID=t.HELLOSIGN_PROD_APP_ID=t.OverflowMenuDirection=t.DocType=t.PreviewsUpsellUrl=t.UnsupportedExtensionHelpLink=t.PageQueryKey=t.SubpathQueryKey=t.ResponsiveClassName=t.SizeClassFilenameLengthMap=t.SplitButtonActionLocation=t.UserActionContext=t.UserAction=t.FileViewerPane=t.FileViewerInterfaceType=t.CannedTestFilename=t.EventType=t.PreviewRenderStatus=t.ActionType=void 0,(function(e){e.Setup="SETUP",e.Cleanup="CLEANUP",e.UpdateFiles="UPDATE_FILES",e.FlipNext="FLIP_NEXT",e.FlipPrevious="FLIP_PREVIOUS",e.OpenFullscreen="OPEN_FULLSCREEN",e.CloseFullscreen="CLOSE_FULLSCREEN",e.SwitchRevision="SWITCH_REVISION",e.RestoreRevision="RESTORE_REVISION",e.SaveForwardRevision="SAVE_FORWARD_REVISION",e.BroadcastRenderStatus="BROADCAST_RENDER_STATUS",e.HideOpenInAppBanner="HIDE_OPEN_IN_APP_BANNER"})(t.ActionType||(t.ActionType={})),(function(e){e[e.Unknown=0]="Unknown",e[e.Loading=1]="Loading",e[e.Succeeded=2]="Succeeded"})(t.PreviewRenderStatus||(t.PreviewRenderStatus={})),(function(e){e.FileViewerOpened="FILE_VIEWER_OPENED",e.FilePreviewSessionEnded="FILE_PREVIEW_SESSION_ENDED",e.FilePreviewAttemptStarted="FILE_PREVIEW_ATTEMPT_STARTED",e.FilePreviewSupportConfirmed="FILE_PREVIEW_SUPPORT_CONFIRMED",e.FilePreviewSupportDenied="FILE_PREVIEW_SUPPORT_DENIED",e.FilePreviewDownloadAttempted="FILE_PREVIEW_DOWNLOAD_ATTEMPTED",e.FilePreviewDownloadSucceeded="FILE_PREVIEW_DOWNLOAD_SUCCEEDED",e.FilePreviewDownloadFailed="FILE_PREVIEW_DOWNLOAD_FAILED",e.FilePreviewRenderSucceeded="FILE_PREVIEW_RENDER_SUCCEEDED",e.FilePreviewRenderFailed="FILE_PREVIEW_RENDER_FAILED",e.FilePreviewPASSShown="FILE_PREVIEW_PASS_SHOWN",e.FilePreviewPASSHover="FILE_PREVIEW_PASS_HOVER",e.FilePreviewPASSClick="FILE_PREVIEW_PASS_CLICK",e.BrowsePASSShown="BROWSE_PASS_SHOWN",e.BrowsePASSHover="BROWSE_PASS_HOVER",e.BrowsePASSClick="BROWSE_PASS_CLICK",e.FilePreviewFidelitySurveyAsked="FILE_PREVIEW_FIDELITY_SURVEY_ASKED",e.FilePreviewFidelitySurveyAnswered="FILE_PREVIEW_FIDELITY_SURVEY_ANSWERED",e.FilePreviewFidelitySurveyDismissed="FILE_PREVIEW_FIDELITY_SURVEY_DISMISSED",e.FilePreviewUserAction="FILE_PREVIEW_USER_ACTION",e.FilePreviewVideoStalled="FILE_PREVIEW_VIDEO_STALLED",e.FilePreviewVideoToggled="FILE_PREVIEW_VIDEO_TOGGLED",e.FilePreviewVideoTruncated="FILE_PREVIEW_VIDEO_TRUNCATED",e.ArchivePreviewContentsScanned="ARCHIVE_PREVIEW_CONTENTS_SCANNED",e.FilePreviewModeDetermined="FILE_PREVIEW_MODE_DETERMINED",e.FilePreviewModeBounce="FILE_PREVIEW_MODE_BOUNCE",e.SidebarPaneSelected="SIDEBAR_PANE_SELECTED",e.SidebarModeSelected="SIDEBAR_MODE_SELECTED",e.SidebarOpened="SIDEBAR_OPENED",e.SidebarClosed="SIDEBAR_CLOSED",e.SidebarCollapsedShareClicked="SIDEBAR_COLLAPSED_SHARE_CLICKED",e.SidebarOpenedShareClicked="SIDEBAR_OPENED_SHARE_CLICKED",e.FilePreviewUpsellExposed="FILE_PREVIEW_UPSELL_EXPOSED",e.FilePreviewUpsellClicked="FILE_PREVIEW_UPSELL_CLICKED",e.PersistentFooterShown="PERSISTENT_FOOTER_SHOWN",e.DecompressInitiated="DECOMPRESS_INITIATED",e.DecompressSucceeded="DECOMPRESS_SUCCEEDED",e.DecompressFailed="DECOMPRESS_FAILED"})(t.EventType||(t.EventType={})),(function(e){e.ExcelHTML="test-workbook.html"})(t.CannedTestFilename||(t.CannedTestFilename={})),(function(e){e[e.Frame=0]="Frame",e[e.Window=1]="Window"})(t.FileViewerInterfaceType||(t.FileViewerInterfaceType={})),(function(e){e[e.TitleBar=0]="TitleBar",e[e.PreviewContent=1]="PreviewContent",e[e.Sidebar=2]="Sidebar"})(t.FileViewerPane||(t.FileViewerPane={})),(function(e){e.AppDownloadInterstitialClose="app_download_interstitial_close",e.AppDownloadInterstitialContinue="app_download_interstitial_continue",e.AppDownloadInterstitialInstall="app_download_interstitial_install",e.AppDownloadInterstitialView="app_download_interstitial_view",e.ArchiveNavigation="archive_navigation",e.CopyToPaper="copy_to_paper",e.Share="share",e.Download="download",e.AddToDropbox="add_to_dropbox",e.SaveToDropbox="save_to_dropbox",e.SaveToDropboxPersonal="save_to_dropbox_personal",e.SaveToDropboxWork="save_to_dropbox_work",e.SaveToDropboxApprove="save_to_dropbox_approve",e.SaveToDropboxCancel="save_to_dropbox_cancel",e.RequestAccess="request_access",e.RequestAccessSend="request_access_send",e.RequestAccessCancel="request_access_cancel",e.OpenInApp="open_in_app",e.OpenInNewTab="open_in_new_tab",e.OpenInOfficeOnline="open_in_office_online",e.OpenInUnity="open_in_unity",e.OpenInUnityFolder="open_in_unity_folder",e.OpenWithAppAction="open_with_app_action",e.OpenWithCloudDocEditor="open_with_cloud_doc_editor",e.OpenPrepareForSignature="open_prepare_for_signature",e.ModeChange="mode_change",e.PageChange="page_change",e.PageUp="page_up",e.PageDown="page_down",e.PresentInZoom="present_in_zoom",e.RemoveLink="remove_link",e.ShareToSlack="share_to_slack",e.ShareToTrello="share_to_trello",e.ShareToAction="share_to_action",e.SendForSignatureAction="send_for_signature",e.InviteViaEmail="invite_via_email",e.ViewRevisions="view_revisions",e.ClickDropboxLogo="click_dropbox_logo",e.ClickCustomLogo="click_custom_logo",e.ToggleCommentsOn="toggle_comments_on",e.ToggleCommentsOff="toggle_comments_off",e.SignIn="sign_in",e.SignUp="sign_up",e.ClickNotifications="click_notifications",e.ClickAccountMenu="click_account_menu",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.ToggleSidebarOn="toggle_sidebar_on",e.ToggleSidebarOff="toggle_sidebar_off",e.Print="print",e.InlineSearch="inline_search",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.ZoomIn="zoom_in",e.ZoomOut="zoom_out",e.VideoPlaybackRateChanged="playback_rate_changed",e.OpenMoreApps="open_more_apps",e.OpenAddApps="open_add_apps",e.OpenInDesktop="open_in_desktop",e.SelectShowMore="select_show_more",e.SelectAddApp="select_add_app",e.ScrollUp="scroll_up",e.ScrollDown="scroll_down",e.Dismiss="dismiss",e.LearnMore="learn_more",e.AddSuggestedComment="add_suggested_comment",e.SwitchWorkbookTab="switch_workbook_tab",e.SelectWorkbookContent="select_workbook_content",e.ClickSocialShareButton="click_social_share_button",e.ToggleShareRecept="toggle_share_receipt",e.DecompressFile="decompress_file",e.GoToFolder="go_to_folder",e.DecompressCloseSnackbar="decompress_close_snackbar",e.DecompressRetry="decompress_retry",e.ConvertToPdf="convert_to_pdf",e.ConvertFile="convert_file",e.SaveAs="save_as",e.PreviewFile="preview_file",e.Transfer="transfer",e.FileConversionInitiated="file_conversion_initiated",e.FileConversionRetry="file_conversion_retry",e.FileConversionCloseSnackbar="file_conversion_close_snackbar",e.OpenInReplay="open_in_replay"})(t.UserAction||(t.UserAction={})),(function(e){e.AppDownloadInterstitial="app_download_interstitial",e.TitleBarMain="title_bar_main",e.TitleBarSplitButton="title_bar_open_split_button",e.TitleBarMore="title_bar_more",e.TitleBarBackButton="title_bar_back_button",e.TitleBarSecondaryButton="title_bar_secondary_button",e.PreviewContentMain="preview_content_main",e.PreviewContentSplitButton="preview_content_open_split_button",e.Toolbar="toolbar",e.VideoPlayer="video_player",e.OpenInAppBanner="open_in_app_banner",e.LightboxFrame="lightbox_frame",e.LightboxToolbar="lightbox_toolbar",e.LightboxCloseButton="lightbox_close_button",e.Sidebar="sidebar",e.Keyboard="keyboard",e.Browser="browser",e.Unknown="unknown",e.PersistentFooter="persistent_footer",e.Snackbar="snackbar"})(t.UserActionContext||(t.UserActionContext={})),(function(e){e[e.Main=0]="Main",e[e.Split=1]="Split"})(t.SplitButtonActionLocation||(t.SplitButtonActionLocation={}));t.SizeClassFilenameLengthMap={[i.SizeClass.Small]:12,[i.SizeClass.Medium]:25,[i.SizeClass.Large]:35,[i.SizeClass.ExtraLarge]:45},t.ResponsiveClassName="responsive-enabled",t.SubpathQueryKey="file_subpath",t.PageQueryKey="page",t.UnsupportedExtensionHelpLink="https://www.dropbox.com/help/files-folders/file-types-that-preview",t.PreviewsUpsellUrl="/pro?_tk=autocad_modal",(function(e){e.default="default",e.html="html",e.pdf="pdf",e.ppt="ppt",e.spreadsheet="spreadsheet",e.image="image"})(t.DocType||(t.DocType={})),(function(e){e[e.ABOVE=0]="ABOVE",e[e.BELOW=1]="BELOW"})(t.OverflowMenuDirection||(t.OverflowMenuDirection={})),t.HELLOSIGN_PROD_APP_ID="dbaid:AAA8M7BsKD8QVXgtkUl5Rs7oFykwEx3Vm7U",t.DOCSEND_PROD_APP_ID="dbaid:AAA6hDRnKKWTEvY7Xb4xVXwWZA8c8Af3GOM"})),define("modules/clean/react/file_viewer/file_preview_event_emitter",["require","exports","tslib","eventemitter3"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filePreviewEventEmitter=void 0,n=i.__importDefault(n),t.filePreviewEventEmitter=new n.default})),define("modules/clean/react/file_viewer/models",["require","exports","tslib","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/previews/constants","modules/clean/uuid/uuid","modules/clean/web_timing_logger","modules/core/assert","modules/core/browser","modules/core/browser_detection"],(function(e,t,i,n,a,r,o,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilePreviewSession=t.FileViewerSession=void 0,d=i.__importStar(d);const u={};u[n.EventType.FilePreviewAttemptStarted]=null,u[n.EventType.FilePreviewSupportConfirmed]=n.EventType.FilePreviewAttemptStarted,u[n.EventType.FilePreviewSupportDenied]=n.EventType.FilePreviewAttemptStarted,u[n.EventType.FilePreviewDownloadAttempted]=n.EventType.FilePreviewSupportConfirmed,u[n.EventType.FilePreviewDownloadSucceeded]=n.EventType.FilePreviewDownloadAttempted,u[n.EventType.FilePreviewDownloadFailed]=n.EventType.FilePreviewDownloadAttempted,u[n.EventType.FilePreviewRenderSucceeded]=n.EventType.FilePreviewDownloadSucceeded,u[n.EventType.FilePreviewRenderFailed]=n.EventType.FilePreviewDownloadSucceeded;class m{constructor(e){this.id=e||o.UUID.v4({allowInsecure:!0}),this.deviceType=this._deviceTypeString()}_deviceTypeString(){return c.is_supported_mobile_browser()?"mobile":c.is_tablet()?"tablet":"desktop"}}t.FileViewerSession=m,m.currentSession=null;class p{constructor({id:e,fileViewerSession:t,file:i,previewType:n,sourceContext:a,sourceAction:r,extra:s}){this.passwordNeeded=!1,l.assert(!!t,"FileViewerSession required"),l.assert(!!i,"File required"),this.id=e||o.UUID.v4({allowInsecure:!0}),this.fileViewerSession=t,this.file=i,this.previewType=n,this.sourceContext=a,this.sourceAction=r,this.previewTimeline={},this.lastEvent=null,this.extra=s||{}}recordEvent(e,t={}){if(!(t instanceof Object))throw new Error("extra param of recordEvent should be an object.");this.isEventInTimeline(e)||u.hasOwnProperty(e)&&this.lastEvent!==u[e]||(this.addToTimeline(e),a.filePreviewEventEmitter.emit(e,this,Object.assign(Object.assign({},this.extra),t)),this.lastEvent=e)}markPrimaryEvent(){let e;e=window._timingData&&window._timingData.tti?window._timingData.tti.getTime():d.now(),this.primaryMarkTs||(this.primaryMarkTs=e)}timeToPrimaryMark(){return this.timeToMark(this.primaryMarkTs)}timeToMark(e){if(void 0!==e)switch(this.sourceAction){default:return;case r.PreviewSourceAction.Visit:const t=s.start_time();return void 0!==t?e-t:void 0;case r.PreviewSourceAction.Click:const i=this.previewTimeline[n.EventType.FilePreviewAttemptStarted];if(!i)return;const a=i.timestamp;if(void 0===a)return;return e-a}}isEventInTimeline(e){return e in this.previewTimeline}addToTimeline(e){this.previewTimeline[e]={timestamp:d.now()}}}t.FilePreviewSession=p,p.currentSession=null})),define("modules/clean/react/file_viewer/logging",["require","exports","modules/clean/react/file_viewer/models","modules/clean/react/file_viewer/file_preview_event_emitter","modules/clean/react/file_viewer/constants","modules/constants/file_viewer"],(function(e,t,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapKeyboardActionWithLogging=t.wrapToolbarActionWithLogging=t.logUserAction=void 0,t.logUserAction=(e,t,o={})=>{null!=i.FilePreviewSession.currentSession&&n.filePreviewEventEmitter.emit(a.EventType.FilePreviewUserAction,i.FilePreviewSession.currentSession,e,t,Object.assign(Object.assign({},o),{preview_page_revamp:r.PREVIEW_PAGE_REVAMP?r.PREVIEW_PAGE_REVAMP:"NULL"}))},t.wrapToolbarActionWithLogging=function(e,i){return(...n)=>{const r=e(...n);return t.logUserAction(i,a.UserActionContext.Toolbar),r}},t.wrapKeyboardActionWithLogging=function(e,i){return(...n)=>{const r=e(...n);return t.logUserAction(i,a.UserActionContext.Keyboard),r}}})),define("modules/clean/react/previews/toolbar_flip_buttons",["require","exports","tslib","react","lodash","classnames","typescript/libraries/file-viewer/src/toolbar/index","modules/clean/react/file_viewer/logging","modules/clean/react/file_viewer/constants","modules/core/i18n"],(function(e,t,i,n,a,r,o,s,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarFlipButtons=void 0,n=i.__importDefault(n),a=i.__importStar(a),r=i.__importDefault(r),t.ToolbarFlipButtons=({className:e,count:t,index:i,onClickNext:c=a.noop,onClickPrevious:u=a.noop})=>null==t||null==i||t<1?null:n.default.createElement(o.ToolbarFlipButtons,{buttonClassName:"toolbar-button-entry",className:r.default("flip-buttons","image-toolbar__item",e),count:t,intl:d.intl,index:i,onClickPrevious:s.wrapToolbarActionWithLogging(u,l.UserAction.FlipPrevious),onClickNext:s.wrapToolbarActionWithLogging(c,l.UserAction.FlipNext)})})),define("modules/clean/react/previews/preview_linkfile",["require","exports","tslib","classnames","react","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/em_string","modules/clean/filepath/filepath","modules/clean/react/components/css","modules/clean/react/file_viewer/constants","modules/clean/referrer_cleansing_redirect","modules/clean/web_timing_logger","modules/clean/static_urls","modules/core/i18n","modules/clean/react/previews/preview_toolbar","modules/clean/react/previews/toolbar_flip_buttons"],(function(e,t,i,n,a,r,o,s,l,d,c,u,m,p,f,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewLinkfile=t._PreviewLinkfile=void 0,n=i.__importDefault(n),a=i.__importDefault(a),r=i.__importStar(r),c=i.__importStar(c),u=i.__importStar(u);class g extends a.default.Component{constructor(){super(...arguments),this.state={description:null,hadError:!1,link:null,isMounted:!1},this.requestLinkfileData=e=>{this.logFilePreviewEvent(d.EventType.FilePreviewDownloadAttempted);const t={url:e,dataType:"json",success:this.handleLinkDataSuccess,error:this.handleLinkDataError,xhrFields:{withCredentials:!1}};this.props.data.authenticated?(t.xhrFields={withCredentials:!0},r.SilentBackgroundRequest(t)):r.Request(t)},this.handleLinkDataSuccess=e=>{null!=e.uri?(this.logFilePreviewEvent(d.EventType.FilePreviewDownloadSucceeded),this.markWebTiming(),this.setState({description:e.uri,hadError:!1,link:e.uri}),this.logFilePreviewEvent(d.EventType.FilePreviewRenderSucceeded),this.props.setRenderStatusSuccess()):this.handleLinkDataError()},this.handleLinkDataError=()=>{this.logFilePreviewEvent(d.EventType.FilePreviewDownloadFailed),this.markWebTiming(),this.state.isMounted&&this.setState({description:p.intl.formatMessage({id:"DX7rMh",defaultMessage:"Can’t show link. Something’s wrong with this file."}),hadError:!0,link:null})},this.handleClickOpenLinkButton=e=>{if(null==this.state.link)return;const t=c.get_redirect_uri(this.state.link);window.open(t.toString(),"_blank")}}logFilePreviewEvent(e){this.props.filePreviewSession&&this.props.filePreviewSession.recordEvent(e)}markWebTiming(){u.mark_time_to_view(),u.mark_time_to_interactive()}isFileDataFetched(){return null==this.state.description}componentDidMount(){this.logFilePreviewEvent(d.EventType.FilePreviewSupportConfirmed),this.state.isMounted=!0,this.requestLinkfileData(this.props.data.url)}componentWillUnmount(){this.state.isMounted=!1}render(){const e={"preview-linkfile-content":!0,"loading-content":this.isFileDataFetched()},t={"preview-linkfile-button-openlink":!0,"button-primary":!0,"has-link":null!=this.state.link};let i="-",r="";null!=this.props.filename&&(i=s.filename_without_extension(this.props.filename),r=s.file_extension(this.props.filename),""!==r&&(r="."+r));const l=g.MAX_DISPLAYED_FILENAME_CHARS-r.length,d=o.Emstring.em_snippet(i,l);let c="-";null!=this.state.description&&(c=this.state.description);const u={"preview-linkfile-description":!0,"force-show-all-text":this.state.hadError},v=m.static_url("/static/images/icons128/page_white_linkfile-vfloEntlU.png");return a.default.createElement("div",{className:"flex-preview-container"},a.default.createElement("div",{className:"preview-content preview-content--center"},a.default.createElement("div",{className:"preview-linkfile-box"},a.default.createElement("div",{className:n.default(e)},a.default.createElement("div",{className:"preview-linkfile-icon"},a.default.createElement("img",{src:v,alt:""})),a.default.createElement("div",{className:"preview-linkfile-title"},a.default.createElement("span",{className:"preview-linkfile-filebase"},d),a.default.createElement("span",{className:"preview-linkfile-fileext"},r)),a.default.createElement("div",{className:"preview-linkfile-info"},a.default.createElement("div",{className:n.default(u)},c),a.default.createElement("button",{className:n.default(t),onMouseUp:this.handleClickOpenLinkButton,ref:"openLinkButton"},p.intl.formatMessage({id:"cb9Hpy",defaultMessage:"Open in new tab"}))))),void 0!==this.props.index&&void 0!==this.props.count&&a.default.createElement("div",{className:"preview-toolbar-container"},a.default.createElement(f.PreviewToolbar,{isFullscreen:!1},a.default.createElement(_.ToolbarFlipButtons,{index:this.props.index,count:this.props.count,onClickPrevious:this.props.onPrevious,onClickNext:this.props.onNext})))))}}t._PreviewLinkfile=g,g.SPINNER_FADE_DELAY_MSEC=150,g.MAX_DISPLAYED_FILENAME_CHARS=21,g.displayName="PreviewLinkfile";const v=l.requireCssWithComponent(g,["/static/css/preview_linkfile-vflQapELU.css"]);t.PreviewLinkfile=v})),define("typescript/libraries/comments2/src/components/annotation_utils",["require","exports","typescript/libraries/comments2/src/components/utils/to_percent"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoAnnotation=t.toRectangleStyle=void 0,t.toRectangleStyle=function({x:e,y:t,width:n,height:a}){return{top:i.toPercent(t),left:i.toPercent(e),width:i.toPercent(n),height:i.toPercent(a)}},t.isVideoAnnotation=function(e){return void 0!==e&&"video"===e.type}})),define("typescript/libraries/comments2/src/components/utils/throttle-debounce",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=t.throttle=void 0,t.throttle=function(e,t){let i=!0,n=null;function a(){i=!0,null!==n&&(e(...n),n=null)}return function(...r){i?(i=!1,e(...r),setTimeout(a,t)):n=r}},t.debounce=function(e,t,i=!1){let n;return function(...a){const r=this,o=i&&void 0===n;void 0!==n&&window.clearTimeout(n),n=window.setTimeout((function(){n=void 0,i||e.apply(r,a)}),t),o&&e.apply(r,a)}}})),define("typescript/libraries/comments2/src/components/utils/to_percent",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPercent=void 0,t.toPercent=function(e){return`${100*e}%`}})),define("typescript/libraries/comments2/src/transforms/index",["require","exports","typescript/libraries/comments2/src/transforms/comments","typescript/libraries/comments2/src/transforms/threads","typescript/libraries/comments2/src/transforms/users","typescript/libraries/comments2/src/transforms/revisions","typescript/libraries/comments2/src/transforms/annotations","typescript/libraries/comments2/src/transforms/third_party_source"],(function(e,t,i,n,a,r,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thirdPartySourceToIThirdPartySource=t.iInteractionAnnotationToNumberedAnnotation=t.numberedAnnotationToIInteractionAnnotation=t.streamToRevision=t.userToIUser=t.usersToIUserMap=t.threadToIThread=t.threadsToIThreadMap=t.iCommentContentToUserSubmittedComment=void 0,Object.defineProperty(t,"iCommentContentToUserSubmittedComment",{enumerable:!0,get:function(){return i.iCommentContentToUserSubmittedComment}}),Object.defineProperty(t,"threadsToIThreadMap",{enumerable:!0,get:function(){return n.threadsToIThreadMap}}),Object.defineProperty(t,"threadToIThread",{enumerable:!0,get:function(){return n.threadToIThread}}),Object.defineProperty(t,"usersToIUserMap",{enumerable:!0,get:function(){return a.usersToIUserMap}}),Object.defineProperty(t,"userToIUser",{enumerable:!0,get:function(){return a.userToIUser}}),Object.defineProperty(t,"streamToRevision",{enumerable:!0,get:function(){return r.streamToRevision}}),Object.defineProperty(t,"numberedAnnotationToIInteractionAnnotation",{enumerable:!0,get:function(){return o.numberedAnnotationToIInteractionAnnotation}}),Object.defineProperty(t,"iInteractionAnnotationToNumberedAnnotation",{enumerable:!0,get:function(){return o.iInteractionAnnotationToNumberedAnnotation}}),Object.defineProperty(t,"thirdPartySourceToIThirdPartySource",{enumerable:!0,get:function(){return s.thirdPartySourceToIThirdPartySource}})})),define("typescript/libraries/comments2/src/transforms/annotations",["require","exports"],(function(e,t){"use strict";function i(e,t){return e[".tag"]===t}Object.defineProperty(t,"__esModule",{value:!0}),t.iInteractionAnnotationToNumberedAnnotation=t.numberedAnnotationToIInteractionAnnotation=t.iAnnotationToAnnotation=t.annotationToIAnnotation=void 0,t.annotationToIAnnotation=function(e){if(i(e,"video"))return{type:"video",time:e.time||0,timeSec:e.time_sec||0};if(i(e,"audio"))return{type:"audio",time:e.time};if(i(e,"document"))return{type:"document",regionType:e.region_type[".tag"],label:e.label,regions:e.regions};if(i(e,"image"))return{type:"image",region:e.region,label:e.label};throw new Error("Attempted to convert an annotation type that does not yet exist.")},t.iAnnotationToAnnotation=function(e){return"video"===e.type?{".tag":"video",time:e.time,time_sec:e.timeSec}:"audio"===e.type?{".tag":"audio",time:e.time}:"document"===e.type?{".tag":"document",regions:e.regions,region_type:{".tag":e.regionType}}:{".tag":"image",region:Object.assign(Object.assign({},e.region),{page:1})}},t.numberedAnnotationToIInteractionAnnotation=function(e){return"image"===e.type?{type:"rnd",regions:[e.region]}:"highlight"===e.regionType?{type:"highlight",regions:e.regions}:{type:"rnd",regions:e.regions}},t.iInteractionAnnotationToNumberedAnnotation=function({type:e,regions:t},i){return void 0===i?{type:"image",region:t[0]}:{type:"document",regionType:"rnd"===e?"rectangle":"highlight",regions:t.map(e=>(function(e,t){return Object.assign(Object.assign({},e),{page:t})})(e,i))}}})),define("typescript/libraries/comments2/src/transforms/comments",["require","exports","typescript/libraries/comments2/src/transforms/annotations","typescript/libraries/comments2/src/transforms/metadata","typescript/libraries/comments2/src/transforms/revisions"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iCommentContentToUserSubmittedComment=t.commentToIComment=void 0,t.commentToIComment=function(e,t,i,r){return{author:i[e.author_id],content:{metadata:n.metadataToIMetadata(e.metadata),text:e.content},deleted:e.deleted,id:e.id,threadId:t,timestamp:new Date(e.timestamp),revisionInfo:r&&e.revision?a.revisionInfoToIRevisionInfo(r,e.revision):{isCurrent:!0},userPermissions:{canDelete:e.permissions.can_delete,canEdit:e.permissions.can_edit}}},t.iCommentContentToUserSubmittedComment=function({annotation:e,content:t,stream:r}){return{annotation_data:e?i.iAnnotationToAnnotation(e):void 0,content:t.text,metadata:n.iCommentMetadataToUserSubmittedMetadata(t.metadata),revision:a.streamToRevision(r)}}})),define("typescript/libraries/comments2/src/transforms/metadata",["require","exports"],(function(e,t){"use strict";function i(e,t){return e.type===t}function n(e){return i(e,"mention")}function a(e){return i(e,"style")}function r(e){return i(e,"sticker")}function o(e){return i(e,"guest")}function s(e){return i(e,"reel")}function l(e){const t=e.format[".tag"];if("other"===t)throw new Error('"other" is not a valid format block');return{location:e.location,style:t,type:"style"}}function d(e){const t=e.user.type[".tag"];if("other"===t)throw new Error('"other" is not a valid user type');const i={identifier:e.user.identifier,type:t};return{location:e.location,type:"mention",user:i}}function c(e){var t,i;if(e.status&&e.approver_email&&e.requester_email)return{type:"approval",status:e.status[".tag"],approver_email:e.approver_email,requester_email:e.requester_email,approval_type:null===(t=e.approval_type)||void 0===t?void 0:t[".tag"],actor:null===(i=e.actor)||void 0===i?void 0:i[".tag"],approver_display_name:e.approver_display_name}}Object.defineProperty(t,"__esModule",{value:!0}),t.iCommentMetadataToUserSubmittedMetadata=t.metadataToIMetadata=t.approvalMetadataToIApprovalMetadata=t.isReelMetadata=t.isGuestMetadata=t.isStickerMetadata=t.isStyleMetadata=t.isMentionMetadata=void 0,t.isMentionMetadata=n,t.isStyleMetadata=a,t.isStickerMetadata=r,t.isGuestMetadata=o,t.isReelMetadata=s,t.approvalMetadataToIApprovalMetadata=c,t.metadataToIMetadata=function(e){const t=[...e.formatting.map(l),...e.mentions.map(d)];if(e.sticker){const i=(function(e){if(e.url&&e.name&&e.description)return{type:"sticker",id:e.id,url:e.url,name:e.name,description:e.description}})(e.sticker);i&&t.push(i)}if(e.guest){const i=(function(e){if(e.first_name||e.last_name)return{type:"guest",first_name:e.first_name,last_name:e.last_name}})(e.guest);i&&t.push(i)}if(e.reel){const i=(function(e){if(e.annotation_data)return{type:"reel",annotation_data:e.annotation_data}})(e.reel);i&&t.push(i)}if(e.approval){const i=c(e.approval);i&&t.push(i)}return t},t.iCommentMetadataToUserSubmittedMetadata=function(e){const t=e.filter(a).map(e=>({format:{".tag":e.style},location:e.location})),i=e.filter(n).map(e=>({user:{type:{".tag":e.user.type},identifier:e.user.identifier},location:e.location})),l=e.find(r),d=l?{id:l.id}:void 0,c=e.find(o),u=c?{first_name:c.first_name,last_name:c.last_name}:void 0,m=e.find(s);return{formatting:t,mentions:i,sticker:d,guest:u,reel:m?{annotation_data:m.annotation_data}:void 0}}})),define("typescript/libraries/comments2/src/transforms/revisions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.streamToRevision=t.revisionInfoToIRevisionInfo=void 0,t.revisionInfoToIRevisionInfo=function(e,t){const i=t.timestamp?new Date(t.timestamp):void 0;return{isCurrent:e.ns_id===t.ns_id&&e.sjid===t.sjid,revision:{nsId:t.ns_id,sjId:t.sjid},timestamp:i}},t.streamToRevision=function(e){return e&&"file"===e.type?{ns_id:e.ns_id,sjid:e.sjid}:void 0}})),define("typescript/libraries/comments2/src/transforms/third_party_source",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thirdPartySourceToIThirdPartySource=void 0,t.thirdPartySourceToIThirdPartySource=function(e){return e[".tag"]}})),define("typescript/libraries/comments2/src/transforms/threads",["require","exports","lodash","typescript/libraries/comments2/src/transforms/annotations","typescript/libraries/comments2/src/transforms/comments"],(function(e,t,i,n,a){"use strict";function r(e,t){if("resolved_no_details"===e[".tag"])return{type:"no_details"};if((function(e){return"resolved_with_details"===e[".tag"]})(e))return{type:"with_details",resolver:t[e.resolver_id],resolvedTimestamp:new Date(e.resolved_timestamp)};throw new Error("Not a valid type for ResolvedInfo.")}function o(e,t,i){const o=e.comments.map(n=>a.commentToIComment(n,e.id,t,i)),s=e.resolved_info?{resolved:!0,resolvedInfo:r(e.resolved_info,t)}:{resolved:!1};return Object.assign(Object.assign({annotation:e.annotation_data?n.annotationToIAnnotation(e.annotation_data):void 0,comments:o,id:e.id,read:e.read,readonly:e.readonly,isThirdParty:e.is_third_party},s),{timestamp:o[0].timestamp})}Object.defineProperty(t,"__esModule",{value:!0}),t.threadsToIThreadMap=t.threadToIThread=t.resolvedInfoToIResolvedInfo=void 0,t.resolvedInfoToIResolvedInfo=r,t.threadToIThread=o,t.threadsToIThreadMap=function(e,t,n){const a=e.map(e=>o(e,t,n));return i.keyBy(a,"id")}})),define("typescript/libraries/comments2/src/transforms/users",["require","exports","lodash"],(function(e,t,i){"use strict";function n(e){return{id:e.id,name:{display:e.display_name,initials:e.initials,public:e.public_name},photoUrl:e.photo_url}}Object.defineProperty(t,"__esModule",{value:!0}),t.usersToIUserMap=t.userToIUser=void 0,t.userToIUser=n,t.usersToIUserMap=function(e){const t=e.map(n);return i.keyBy(t,"id")}})),define("modules/clean/cloud_docs/shared_components/dynamic_routing_modal",["require","exports","tslib","modules/clean/react/components/modal","modules/clean/cloud_docs/open_with_utils","modules/clean/static_urls","modules/clean/react/components/css","modules/clean/cloud_docs/constants","react","modules/core/i18n","spectrum/button/index","modules/clean/cloud_docs/event_logging","modules/clean/cloud_docs/types","modules/clean/metrics/index"],(function(e,t,i,n,a,r,o,s,l,d,c,u,m,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDynamicRoutingModal=t.DynamicRoutingModal=void 0,l=i.__importStar(l);class f extends l.Component{constructor(e){super(e),this.editorToString={preview:d.intl.formatMessage({id:"N5Byoz",defaultMessage:"Dropbox Preview"}),word:d.intl.formatMessage({id:"Y9FcUQ",defaultMessage:"Word for the web"}),excel:d.intl.formatMessage({id:"o3mRdr",defaultMessage:"Excel for the web"}),powerpoint:d.intl.formatMessage({id:"RTj2SO",defaultMessage:"PowerPoint for the web"}),gdoc:d.intl.formatMessage({id:"+HsOFj",defaultMessage:"Google Docs"}),gsheet:d.intl.formatMessage({id:"cpuRML",defaultMessage:"Google Sheets"}),gslides:d.intl.formatMessage({id:"PcJCVL",defaultMessage:"Google Slides"})},this.state={set_routing_dest:!1}}componentDidMount(){u.logUserAction({actionEvent:m.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor}})}componentWillUnmount(){if(!this.state.set_routing_dest){const e="Dismissed";u.logUserAction({actionEvent:m.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor,routingDest:e}});const t=p.getMetricsReporter(),i={origin:this.props.currentEditor,destination:e};t.createStats({ns:s.CLOUD_DOCS_AMP_NAMESPACE,name:"web/dynamicRoutingEvent"},i).record(1),this.setState({set_routing_dest:!1})}}render(){const e=this.editorToString[this.props.editorWithLock],t=this.editorToString[this.props.currentEditor];let i,o,f,_=d.intl.formatMessage({id:"ILSqGs",defaultMessage:"Want to see the latest version and edit?"});"preview"===this.props.currentEditor?(o=d.intl.formatMessage({id:"vX9MC5",defaultMessage:"Open in {editor_with_lock_string}"},{editor_with_lock_string:e}),i=d.intl.formatMessage({id:"MaUI+x",defaultMessage:"Right now people are working on this file in {editor_with_lock_string}. You can see updates and edit there."},{editor_with_lock_string:e})):this.props.isLockEditorEnabled?(o=d.intl.formatMessage({id:"jpCK4T",defaultMessage:"Edit in {editor_with_lock_string}"},{editor_with_lock_string:e}),i=d.intl.formatMessage({id:"1Y/1oL",defaultMessage:"Because this file is already open in {editor_with_lock_string}, you can only see updates and edit there."},{editor_with_lock_string:e})):(_=d.intl.formatMessage({id:"RtkW2p",defaultMessage:"You can’t edit this file right now"}),i=d.intl.formatMessage({id:"yOUn8S",defaultMessage:"Someone is working on this file in {editor_with_lock_string}. However, your admin has disabled access to {editor_with_lock_string} in your organization."},{editor_with_lock_string:e}));const g=(e,t)=>{u.logUserAction({actionEvent:m.UserActionEventType.DYNAMIC_ROUTING_MODAL_IMPRESSION,userId:this.props.user.id,docPathOrId:this.props.file.file_id,data:{webOpenId:this.props.openId,origDest:this.props.currentEditor,routingDest:e}});const i=p.getMetricsReporter(),n={origin:this.props.currentEditor,destination:e};i.createStats({ns:s.CLOUD_DOCS_AMP_NAMESPACE,name:"web/dynamicRoutingEvent"},n).record(1),this.setState({set_routing_dest:!0});const r=window.self;a.getCloudEditorUrl(this.props.user.id,this.props.file.file_id).then(i=>{a.openCloudEditorUrl(i,r,this.props.file.file_id,this.props.user.id,e,t)}).catch(e=>{a.handleError(e)})},v=()=>{g(this.props.editorWithLock,!1)};if(this.props.showViewOnlyMode){const e=()=>{g(this.props.currentEditor,!0)},i=d.intl.formatMessage({id:"nLLL8d",defaultMessage:"View-Only in {current_editor}"},{current_editor:t});f=l.createElement("div",{className:"link-text"},l.createElement("span",{role:"link",className:"link-span",tabIndex:0,onClick:e},i))}else if(!this.props.isLockEditorEnabled){const e=d.intl.formatMessage({id:"DWwxhG",defaultMessage:"View-Only in Preview"});f=l.createElement("div",{className:"link-text"},l.createElement("span",{role:"link",className:"link-span",tabIndex:0,onClick:()=>n.Modal.close()},e))}let h;return h=this.props.isLockEditorEnabled?l.createElement("div",{className:"edit-buttons"},l.createElement(c.Button,{className:"main-button",onClick:v},o),f):l.createElement("div",{className:"edit-buttons"},f),l.createElement(n.Modal,{id:"dynamic-routing",className:"dynamic-routing-modal",buttonComponent:h,displayCloseButton:!0,style:"clean"},l.createElement("div",{className:"default-dyn-routing-modal"},l.createElement("img",{className:"traffic-u-turn",alt:"",src:r.static_url("/static/images/cloud_docs/dynamic_routing/traffic-u-turn-vfloJCN2K.png")}),l.createElement("div",{className:"main-text"},_),l.createElement("div",{className:"sub-text"},i)))}}f.displayName="DynamicRoutingModalWithoutCss",t.DynamicRoutingModal=o.requireCssWithComponent(f,["/static/css/cloud_docs/dynamic_routing-vflMtrZmT.css"]),t.showDynamicRoutingModal=function(e){n.Modal.showInstance(l.createElement(t.DynamicRoutingModal,Object.assign({},e)))}})),define("modules/clean/cloud_docs/shared_components/routing",["require","exports","tslib","modules/clean/cloud_docs/constants","modules/clean/previews/util","modules/clean/previews/util","modules/clean/cloud_docs/shared_components/dynamic_routing_modal","modules/clean/cloud_docs/cloud_doc_api_client","modules/clean/file_store/utils","modules/core/browser","modules/clean/cloud_docs/types"],(function(e,t,i,n,a,r,o,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCloudEditorString=t.maybeShowDynamicRoutingModal=void 0,r=i.__importStar(r),d=i.__importStar(d);const u={[n.MicrosoftEditors.WORD]:!0,[n.MicrosoftEditors.EXCEL]:!0,[n.MicrosoftEditors.POWERPOINT]:!1,[n.GoogleFileTypes.GOOGLE_DSS_SLIDES]:!1,[n.GoogleFileTypes.GOOGLE_DSS_DOC]:!1,[n.GoogleFileTypes.GOOGLE_DSS_SHEET]:!1,preview:!1};var m;(function(e){e.pptx="pptx",e.docx="docx",e.xlsx="xlsx"})(m||(m={}));const p={3503728:{[m.pptx]:n.GoogleFileTypes.GOOGLE_DSS_SLIDES,[m.docx]:n.GoogleFileTypes.GOOGLE_DSS_DOC,[m.xlsx]:n.GoogleFileTypes.GOOGLE_DSS_SHEET},661085:{[m.pptx]:n.MicrosoftEditors.POWERPOINT,[m.docx]:n.MicrosoftEditors.WORD,[m.xlsx]:n.MicrosoftEditors.EXCEL}},f={3503728:c.CloudDocProviderIntegration.GDD_INTEGRATION};function _(e,t){if(e)switch(e.toLowerCase()){case"google_docs":case"gdoc":return n.GoogleFileTypes.GOOGLE_DSS_DOC;case"google_slides":case"gslides":return n.GoogleFileTypes.GOOGLE_DSS_SLIDES;case"google_sheets":case"gsheet":return n.GoogleFileTypes.GOOGLE_DSS_SHEET;case"wopi":return a.isPptExtension(t)?n.MicrosoftEditors.POWERPOINT:r.isWordDocExtension(t)?n.MicrosoftEditors.WORD:n.MicrosoftEditors.EXCEL;case"paper":return t;case"word":case"excel":case"powerpoint":return e;default:return}}t.maybeShowDynamicRoutingModal=function(e,t,n){return i.__awaiter(this,void 0,void 0,(function*(){const i=n;s.getLockProviderAsync(e.id,t.file_id).then(a=>{const r=a.app_id;if(r&&p[r][i]&&(l.isBrowseFile(t)||l.isSharedFile(t))){const a=d.get_uri().getQuery().web_open_id,l=_(d.get_uri().getQuery().from_editor,n)||"preview",m={editorWithLock:p[r][i],currentEditor:l,file:t,user:e,showViewOnlyMode:u[l],openId:a,isLockEditorEnabled:!0};e.is_team?s.getTeamSettings(e.id).then(e=>{const t=e.settings;if(f.hasOwnProperty(r)){const e=f[r];m.isLockEditorEnabled=t[e][".tag"]===c.IntegrationCreateAndEdit[".tag"]}("preview"!==m.currentEditor||m.isLockEditorEnabled)&&o.showDynamicRoutingModal(m)}):o.showDynamicRoutingModal(m)}})}))},t.getCloudEditorString=_})),define("modules/clean/i18n/formatters",["require","exports","modules/core/i18n"],(function(e,t,i){"use strict";function n(e,t){return Object.assign(Object.assign({},i.intl),{formatMessage:(e,n)=>i.intl.formatMessage(t[e.id]||e,n)})}Object.defineProperty(t,"__esModule",{value:!0}),t.dummyI18nFormatters=t.createFormatters=void 0,t.createFormatters=n,t.dummyI18nFormatters=n(0,{})})),define("modules/clean/image_preview_util",["require","exports","tslib","jquery"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=i.__importDefault(n);const a={PREVIEW_IMAGE_CONTAINER:"preview-image-container",PREVIEW_IMAGE_WRAPPER:"preview-image-wrapper",PREVIEW_IMAGE:"preview-image",getPreviewImageContainer(){return n.default(`.${this.PREVIEW_IMAGE_CONTAINER}`)},getPreviewImageWrapper(){return n.default(`.${this.PREVIEW_IMAGE_WRAPPER}`)},getPreviewImage(){return this.getPreviewImageContainer().find(`.${this.PREVIEW_IMAGE}`)},getPreviewImageElement(){return this.getPreviewImage()[0]}};t.default=a})),define("modules/clean/image_size",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.imageBestFitSize=void 0;const i=[["480x320",480,320],["640x480",640,480],["800x600",800,600],["1024x768",1024,768],["1280x960",1280,960],["1600x1200",1600,1200],["2048x1536",2048,1536]];t.imageBestFitSize=function(e,t){for(const n of i){const i=n[0],a=n[1],r=n[2];if(a>=e||r>=t)return i}return i[i.length-1][0]}})),define("modules/clean/loggers/file_preview_logger",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/react/file_viewer/constants","modules/clean/react/previews/constants","modules/clean/web_timing_logger","modules/constants/request","modules/core/browser"],(function(e,t,i,n,a,r,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilePreviewSidebarLogger=t.FilePreviewModeLogger=t.FilePreviewUserActionLogger=t.FilePreviewConversionLogger=t.FileConversionLogger=t.FilePreviewUpsellLogger=t.FilePreviewArchiveLogger=t.FilePreviewTimelineLogger=void 0,n=i.__importStar(n),o=i.__importStar(o),s=i.__importStar(s),l=i.__importStar(l);const d={};d[a.EventType.FilePreviewSessionEnded]="preview_session_ended",d[a.EventType.FilePreviewAttemptStarted]="preview_attempted",d[a.EventType.FilePreviewSupportConfirmed]="support_confirmed",d[a.EventType.FilePreviewSupportDenied]="support_denied",d[a.EventType.FilePreviewDownloadAttempted]="download_attempted",d[a.EventType.FilePreviewDownloadSucceeded]="download_succeeded",d[a.EventType.FilePreviewDownloadFailed]="download_failed",d[a.EventType.FilePreviewRenderSucceeded]="render_succeeded",d[a.EventType.FilePreviewRenderFailed]="render_failed",d[a.EventType.FilePreviewFidelitySurveyAsked]="fidelity_survey_asked",d[a.EventType.FilePreviewFidelitySurveyAnswered]="fidelity_survey_answered",d[a.EventType.FilePreviewFidelitySurveyDismissed]="fidelity_survey_dismissed",d[a.EventType.FilePreviewUserAction]="user_action",d[a.EventType.ArchivePreviewContentsScanned]="archive_contents_scanned",d[a.EventType.FilePreviewModeDetermined]="file_preview_mode_determined",d[a.EventType.FilePreviewModeBounce]="file_preview_mode_bounce",d[a.EventType.SidebarPaneSelected]="sidebar_pane_selected",d[a.EventType.SidebarModeSelected]="sidebar_mode_selected",d[a.EventType.SidebarOpened]="sidebar_opened",d[a.EventType.SidebarClosed]="sidebar_closed",d[a.EventType.SidebarCollapsedShareClicked]="sidebar_collapsed_share_clicked",d[a.EventType.SidebarOpenedShareClicked]="sidebar_opened_share_clicked",d[a.EventType.FilePreviewUpsellClicked]="preview_upsell_clicked",d[a.EventType.FilePreviewUpsellExposed]="preview_upsell_exposed",d[a.EventType.PersistentFooterShown]="persistent_footer_shown",d[a.EventType.DecompressInitiated]="decompress_initiated",d[a.EventType.DecompressSucceeded]="decompress_succeeded",d[a.EventType.DecompressFailed]="decompress_failed";class c{constructor(){this._eventHandlers={}}_getSerializedTimeline(e){return null}addEventHandlers(...e){for(const[t,i]of e)this._eventHandlers[t]=i}_log(e,t,i={}){const a=this._getSerializedTimeline(t),r={device_type:t.fileViewerSession.deviceType,event_name:d[e],extra:JSON.stringify(i),file_viewer_session_id:t.fileViewerSession.id,file_preview_session_id:t.id,file_ns_id:t.file.ns_id,file_sjid:t.file.sjid,file_preview_timeline:a?JSON.stringify(a):null,file_preview_size:t.previewSize};n.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:r})}listenTo(e){for(const t in this._eventHandlers)if(this._eventHandlers.hasOwnProperty(t)){const i=this._eventHandlers[t];e.addListener(t,i)}}unlistenTo(e){for(const t in this._eventHandlers)if(this._eventHandlers.hasOwnProperty(t)){const i=this._eventHandlers[t];e.removeListener(t,i)}}}t.FilePreviewTimelineLogger=class extends c{constructor(e){super(),this._handleFilePreviewAttemptStarted=(e,t)=>{this._handleEvent(a.EventType.FilePreviewAttemptStarted,e,t)},this._handleFilePreviewSupportConfirmed=(e,t)=>{this._handleEvent(a.EventType.FilePreviewSupportConfirmed,e,t)},this._handleFilePreviewSupportDenied=(e,t)=>{this._handleEvent(a.EventType.FilePreviewSupportDenied,e,t)},this._handleFilePreviewDownloadAttempted=(e,t)=>{this._handleEvent(a.EventType.FilePreviewDownloadAttempted,e,t)},this._handleFilePreviewDownloadSucceeded=(e,t)=>{this._handleEvent(a.EventType.FilePreviewDownloadSucceeded,e,t)},this._handleFilePreviewDownloadFailed=(e,t)=>{this._handleEvent(a.EventType.FilePreviewDownloadFailed,e,t)},this._handleFilePreviewRenderSucceeded=(e,t)=>{this._handleEvent(a.EventType.FilePreviewRenderSucceeded,e,t)},this._handleFilePreviewRenderFailed=(e,t)=>{this._handleEvent(a.EventType.FilePreviewRenderFailed,e,t)},this._handleFilePreviewSessionEnded=(e,t)=>{this._handleEvent(a.EventType.FilePreviewSessionEnded,e,t)},this._filePreviewSessionId=e,this.addEventHandlers([a.EventType.FilePreviewAttemptStarted,this._handleFilePreviewAttemptStarted],[a.EventType.FilePreviewSupportConfirmed,this._handleFilePreviewSupportConfirmed],[a.EventType.FilePreviewSupportDenied,this._handleFilePreviewSupportDenied],[a.EventType.FilePreviewDownloadAttempted,this._handleFilePreviewDownloadAttempted],[a.EventType.FilePreviewDownloadSucceeded,this._handleFilePreviewDownloadSucceeded],[a.EventType.FilePreviewDownloadFailed,this._handleFilePreviewDownloadFailed],[a.EventType.FilePreviewRenderSucceeded,this._handleFilePreviewRenderSucceeded],[a.EventType.FilePreviewRenderFailed,this._handleFilePreviewRenderFailed],[a.EventType.FilePreviewSessionEnded,this._handleFilePreviewSessionEnded])}_handleEvent(e,t,i={}){if(this._filePreviewSessionId!==t.id)return;i.preview_type=t.previewType,i.file_preview_timeline=JSON.stringify(this._getSerializedTimeline(t)),i.web_timing_logger_req_id=s.REQUEST_ID,i.source_context=t.sourceContext,i.source_action=t.sourceAction,null!=t.primaryMarkTs&&(i.primary_mark_ts=t.primaryMarkTs,i.time_to_primary_mark=t.timeToPrimaryMark());const n=o.start_time();if(null!=t.lastEvent&&(i.last_event=d[t.lastEvent]),t.sourceAction===r.PreviewSourceAction.Visit&&e===a.EventType.FilePreviewRenderSucceeded){const e=o.time_to_interactive();null!=e&&null!=n&&(i.time_to_interactive=e-n);const t=l.performance();if(null!=t){const e=t.timing;null!=e&&null!=n&&(i.time_to_first_byte=e.responseStart-n,i.web_timing_data=JSON.stringify(e))}window._timingData&&window._timingData.img&&(delete window._timingData.img.dl_error_finish,i.img_timing_data=JSON.stringify(window._timingData.img))}e===a.EventType.FilePreviewSessionEnded&&(i.password_needed=t.passwordNeeded),this._log(e,t,i)}_getSerializedTimeline(e){const t={};for(const i in e.previewTimeline)if(e.previewTimeline.hasOwnProperty(i)){const n=e.previewTimeline[i];t[this._timelineKey(i)]=n.timestamp}return t}_timelineKey(e){return d[e]+"_ts"}};t.FilePreviewArchiveLogger=class extends c{constructor(){super(),this.logContentsScanned=(e,t)=>{this._log(a.EventType.ArchivePreviewContentsScanned,e,t)},this.addEventHandlers([a.EventType.ArchivePreviewContentsScanned,this.logContentsScanned])}};t.FilePreviewUpsellLogger=class extends c{constructor(){super(),this._logUpsellExposed=e=>{this._log(a.EventType.FilePreviewUpsellExposed,e)},this._logUpsellClicked=e=>{this._log(a.EventType.FilePreviewUpsellClicked,e)},this.addEventHandlers([a.EventType.FilePreviewUpsellExposed,this._logUpsellExposed],[a.EventType.FilePreviewUpsellClicked,this._logUpsellClicked])}};t.FileConversionLogger=class extends c{constructor(){super(),this._logDecompressInitiated=e=>{this._log(a.EventType.DecompressInitiated,e)},this._logDecompressSucceeded=e=>{this._log(a.EventType.DecompressSucceeded,e)},this._logDecompressFailed=(e,t)=>{this._log(a.EventType.DecompressFailed,e,t)},this.addEventHandlers([a.EventType.DecompressInitiated,this._logDecompressInitiated],[a.EventType.DecompressSucceeded,this._logDecompressSucceeded],[a.EventType.DecompressFailed,this._logDecompressFailed])}};t.FilePreviewConversionLogger=class extends c{constructor(){super(),this._logPersistentFooterShown=e=>{this._log(a.EventType.PersistentFooterShown,e)},this.addEventHandlers([a.EventType.PersistentFooterShown,this._logPersistentFooterShown])}};t.FilePreviewUserActionLogger=class extends c{constructor(){super(),this._logUserAction=(e,t,i,n)=>{n.action=t,n.context=i,this._log(a.EventType.FilePreviewUserAction,e,n)},this.addEventHandlers([a.EventType.FilePreviewUserAction,this._logUserAction])}};t.FilePreviewModeLogger=class extends c{constructor(){super(),this.determinedTime=0,this.bounceLogged=!1,this.logDetermined=(e,t)=>{this.determinedTime=Date.now(),this._log(a.EventType.FilePreviewModeDetermined,e,t)},this.logBounce=e=>{if(this.bounceLogged||0===this.determinedTime)return;this.bounceLogged=!0;const t=Date.now()-this.determinedTime;this._log(a.EventType.FilePreviewModeBounce,e,{time:t})},this.addEventHandlers([a.EventType.FilePreviewModeDetermined,this.logDetermined],[a.EventType.FilePreviewModeBounce,this.logBounce])}};t.FilePreviewSidebarLogger=class extends c{constructor(){super(),this.logSidebarPaneSelected=(e,t)=>{this._log(a.EventType.SidebarPaneSelected,e,t)},this.logSidebarModeSelected=(e,t)=>{this._log(a.EventType.SidebarModeSelected,e,t)},this.logSidebarOpened=e=>{this._log(a.EventType.SidebarOpened,e)},this.logSidebarClosed=e=>{this._log(a.EventType.SidebarClosed,e)},this.logSidebarCollapsedShareClicked=e=>{this._log(a.EventType.SidebarCollapsedShareClicked,e)},this.logSidebarOpenedShareClicked=e=>{this._log(a.EventType.SidebarOpenedShareClicked,e)},this.addEventHandlers([a.EventType.SidebarPaneSelected,this.logSidebarPaneSelected],[a.EventType.SidebarModeSelected,this.logSidebarModeSelected],[a.EventType.SidebarOpened,this.logSidebarOpened],[a.EventType.SidebarClosed,this.logSidebarClosed],[a.EventType.SidebarCollapsedShareClicked,this.logSidebarCollapsedShareClicked],[a.EventType.SidebarOpenedShareClicked,this.logSidebarOpenedShareClicked])}}})),define("modules/clean/loggers/file_viewer_logger",["require","exports","tslib","modules/clean/analytics","modules/clean/file_store/utils","api_v2/user_client","api_v2/noauth_client"],(function(e,t,i,n,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logView=t.logPageRendered=void 0,n=i.__importStar(n);const s={Overall:"viewer_overall_time","Page Request":"viewer_page_request_time",Rendering:"viewer_rendering_time"};t.logPageRendered=function(e,t){e=e;const i=a.getExtension(e),r=Object.assign(Object.assign({},t.attributes),{total_time:-1,file_ext:i,source:"file-viewer",originalSize:null!=e.bytes?e.bytes:0});for(const e of t.stats){r[s[e.name]]=e.end-e.start}return n.UserActivityLogger.stop("web","file_view_first_page_rendered",r),n.PreviewActivityLogger.stop("file_view_first_page_rendered",{file_ext:i,extra:JSON.stringify(r)})},t.logView=function(e,t,i,n,a,s,l=!1,d=!1){const c=s?{url:s}:void 0,u={file_views:[{file_info:{file_identifier:e.file_id,shared_link_details:c},platform_type:{".tag":"web"},origin:n,action:a}]};return t?(new r.UserApiV2Client).ns("seen_state").rpc("log_file_view",u,{subjectUserId:t.id}):(new o.NoAuthApiV2Client).ns("seen_state").rpc("logged_out/log_file_view",u,{})}})),define("modules/clean/react/previews/video/video_preview_logger",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/clean/perf_tools/web_timing_utils"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPreviewLogger=void 0,n=i.__importStar(n);t.VideoPreviewLogger=class{constructor(e,t){this.videoTruncated=!1,this.filePreviewSessionId=t?t.id:"",this.videoFormat=e}populateVideoDuration(e){this.videoDuration=Math.round(e)}setVideoTruncated(){this.videoTruncated=!0}logEvent(e,t){const i={event_name:e,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:this.filePreviewSessionId,video_format:this.videoFormat,video_duration_seconds:this.videoDuration,video_truncated:this.videoTruncated,extra:JSON.stringify(Object.assign(Object.assign({},t),{FVSDK_ON:"false"}))};n.SilentBackgroundBeaconRequest({url:"/log/video_preview",data:i})}}})),define("modules/clean/logging/hive/schemas/web-comments2",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comments2LoggingTableRow=void 0;t.Comments2LoggingTableRow=class{constructor(e){this.category="web-comments2",this.active_user_id=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.event=e.event,this.comment_gid=e.comment_gid,this.thread_gid=e.thread_gid,this.stream_gid=e.stream_gid,this.timestamp=Math.floor(Date.now()/1e3),this.is_annotation=e.is_annotation,this.time_comment_offset=e.time_comment_offset,this.file_extension=e.file_extension,this.file_obj_id=e.file_obj_id,this.platform=e.platform,this.oref_name=e.oref_name,this.ns_id=e.ns_id,this.file_size=e.file_size,this.error_message=e.error_message,this.annotation_type=e.annotation_type,this.page=e.page,this.referral_source=e.referral_source,this.product_surface=e.product_surface,this.is_mobile=e.is_mobile,this.annotation_position=e.annotation_position,this.is_third_party=e.is_third_party,this.is_sticker=e.is_sticker,Object.seal(this)}}})),define("modules/clean/previews/actions",["require","exports","tslib","modules/clean/referrer_cleansing_redirect","modules/core/i18n"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.docPrint=t.imagePrint=void 0,n=i.__importStar(n),t.imagePrint=function(e){const t=window.open("about:blank");if(!t)throw new Error(a.intl.formatMessage({id:"X9xK6f",defaultMessage:"Could not open new window"}));window.setTimeout(()=>{const i=t.document.createElement("style");i.innerHTML="\n      @page { margin: 0;}\n      img { max-width: 100%; max-height: 100%}\n    ",t.document.head.appendChild(i);const n=t.document.createElement("img");n.src=e,n.onload=()=>{t.print()},n.onerror=()=>{t.close()},t.document.body.appendChild(n)},50)},t.docPrint=function(e){n.safe_open_tab_and_redirect(e)}})),define("modules/clean/previews/util",["require","exports","tslib","modules/core/browser","modules/clean/analytics","modules/clean/filepath/filepath","modules/clean/previews/constants","modules/clean/cloud_docs/constants","modules/clean/file_store/utils","modules/clean/react/previews/constants","typescript/libraries/file-viewer/src/file_extension/extension_constants","typescript/libraries/file-viewer/src/core/data/riviera/types","modules/constants/file_viewer","modules/core/uri","modules/core/i18n","typescript/libraries/dbx-i18n/src/index"],(function(e,t,i,n,a,r,o,s,l,d,c,u,m,p,f,_){"use strict";function g(e,t){const i={};return i._subject_uid=String(t),e.updateQuery(i)}function v(e,t){return g(new p.URI({path:"/history"+e.fq_path}),t.id)}function h(e){return c.PRESENTATION_EXTS.map(e=>e.slice(1)).includes(e)}function E(e){return["doc","docm","docx"].includes(e)}function y(e){return["odp","odt","rtf","wpd"].includes(e)}function S(e,t){let i=Number.MAX_VALUE;if("pdf"===e)i=Number("524288000");else if(E(e)||y(e))i=o.MAX_WORD_DOC_FILE_SIZE_B;else if(h(e))i=o.MAX_PPT_FILE_SIZE_B;else if(t===o.PreviewType.Archive)i=o.MAX_ARCHIVE_FILE_SIZE_B;else if(t===o.PreviewType.HTML||t===o.PreviewType.Text)i=Number("8388608");else{if(t!==o.PreviewType.Linkfile)return;i=Number("10485760")}return i}Object.defineProperty(t,"__esModule",{value:!0}),t.isCloudDocPreview=t.isSupportedBundleFile=t.isLimitedPreview=t.tagCriticalPathContentRequest=t.iOSIframeScrollStyles=t.mapRivieraStatusToErrorType=t.isEmptyFile=t.filesizeSupported=t.getFileSizeLimit=t.isLibreOfficeExtension=t.isWordDocExtension=t.isPptExtension=t.VALID_PREVIEW_TYPES=t.redirectToVersionHistory=t.getVersionHistoryUrl=t.update_url_with_user_id=t.update_url_for_annotation=t.getModifierString=t.normalize_extension=t.getWhitelistedExtensionFromFile=t.getWhitelistedExtension=t.is_excel2_file=t.getIframeQuery=void 0,n=i.__importStar(n),r=i.__importStar(r),m=i.__importStar(m),t.getIframeQuery=function(){return".react-file-viewer__preview iframe"},t.is_excel2_file=function(e){return["xls","csv","ods"].indexOf(e.substring(0,3))>-1},t.getWhitelistedExtension=function(e){const t=r.file_extension(e);return m.LOGGING_ALLOWED_EXTS.includes(`.${t}`)?t:m.LOGGING_EXT_PLACEHOLDER},t.getWhitelistedExtensionFromFile=function(e){const t=l.getExtension(e);return m.LOGGING_ALLOWED_EXTS.includes(`.${t}`)?t:m.LOGGING_EXT_PLACEHOLDER},t.normalize_extension=function(e){if("indd"===e)return e;const t=e.substring(0,3);switch(t){case"rtf":case"odt":case"wpd":return"doc";case"pps":case"odp":return"ppt";case"csv":case"ods":return"xls";default:return t}},t.getModifierString=function(e){if(e.ts)return _.timeSince(f.intl,1e3*e.ts,{displayLocation:"label"})},t.update_url_for_annotation=function(e){return e=(e=e.updateQuery({annotation_highlight:"1"})).updateQuery({annotation_region:"1"})},t.update_url_with_user_id=g,t.getVersionHistoryUrl=v,t.redirectToVersionHistory=function(e,t){a.UserActivityLogger.log("web","view_version_history");const i=v(e,t);n.redirect(i.toString())},t.VALID_PREVIEW_TYPES=[o.PreviewType.Archive,o.PreviewType.Audio,o.PreviewType.CloudDoc,o.PreviewType.Excel,o.PreviewType.HTML,o.PreviewType.Image,o.PreviewType.Linkfile,o.PreviewType.Other,o.PreviewType.SsrDoc,o.PreviewType.RawHTML,o.PreviewType.Restricted,o.PreviewType.Video,o.PreviewType.Doc,o.PreviewType.Photo,o.PreviewType.Text],t.isPptExtension=h,t.isWordDocExtension=E,t.isLibreOfficeExtension=y,t.getFileSizeLimit=S,t.filesizeSupported=function(e,t){const i=e.bytes;if(void 0===i)return!0;const n=S(l.getExtension(e),t);return!n||i<=n},t.isEmptyFile=function(e){return 0===e.bytes},t.mapRivieraStatusToErrorType=function(e){let t=d.ErrorType.LoadError;return e===u.RivieraStatus.TooBig?t=d.ErrorType.FileSizeError:e===u.RivieraStatus.PasswordProtected&&(t=d.ErrorType.PasswordProtectedError),t},t.iOSIframeScrollStyles=function(){return{overflow:"auto","-webkit-overflow-scrolling":"touch"}},t.tagCriticalPathContentRequest=function(e,t){return e&&t?p.URI.parse(e).updateQuery({psid:t.id}).toString():e},t.isLimitedPreview=function(e,t){return o.IworkExtensions.includes(l.getExtension(e))&&!e.is_dir&&t===o.PreviewType.Image},t.isSupportedBundleFile=function(e){return o.IworkExtensions.includes(l.getExtension(e))},t.isCloudDocPreview=function(e){return e.preview_type===o.PreviewType.CloudDoc||s.isCloudBasedFileByExtension(l.getExtension(e))}})),define("modules/clean/react/comments2/components/annotations/empty_layer",["require","exports","tslib","react"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmptyLayer=void 0,n=i.__importDefault(n),t.EmptyLayer=function(e){return n.default.createElement("div",{style:{position:"absolute",left:0,top:0,right:0,bottom:0}},e.children)}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/react/comments2/components/annotations/loadable",["require","exports","modules/clean/react/async/loadable","modules/clean/react/comments2/components/annotations/empty_layer"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationInstructionalTooltipPane=t.AnnotationConductorLayer=t.AnnotationViewLayer=void 0,t.AnnotationViewLayer=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/comments2/components/annotations/annotation_view_layer"],t,i)}).then(__importStar).then(({AnnotationViewLayer:e})=>e)}),t.AnnotationConductorLayer=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/comments2/components/annotations/annotation_conductor_layer"],t,i)}).then(__importStar).then(({AnnotationConductorLayer:e})=>e),loading:n.EmptyLayer}),t.AnnotationInstructionalTooltipPane=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/comments2/components/annotations/annotation_instructional_tooltip_pane"],t,i)}).then(__importStar).then(({AnnotationInstructionalTooltipPane:e})=>e),loading:n.EmptyLayer})})),define("modules/clean/react/comments2/components/snackbars",["require","exports","tslib","react","modules/clean/react/snackbar","modules/core/i18n"],(function(e,t,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showErrorSnackbar=t.showSuccessSnackbar=void 0,n=i.__importDefault(n);const o=r.intl.formatMessage({id:"JfgcFN",defaultMessage:"Close"}),s=r.intl.formatMessage({id:"IKXfnc",defaultMessage:"Retry"});t.showSuccessSnackbar=function({message:e}){const t=n.default.createElement(a.Snackbar,{title:e,variant:"complete",closeButtonText:o,id:"comments2"});a.Snackbar.show(t)},t.showErrorSnackbar=function({message:e,retryFn:t}){const i=t?n.default.createElement(a.Snackbar,{title:e,variant:"fail",closeButtonText:o,actionButtonText:s,onActionClick:()=>{t(),a.Snackbar.close()},id:"comments2"}):n.default.createElement(a.Snackbar,{title:e,variant:"fail",closeButtonText:o,id:"comments2"});a.Snackbar.show(i)}})),define("modules/clean/react/comments2/data/api",["require","exports","tslib","api_v2/error","api_v2/user_client","api_v2/noauth_client","modules/core/exception"],(function(e,t,i,n,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comments2Api=t.Comments2LoggedOutApi=t.ErrorCode=t.Comments2Error=void 0,o=i.__importStar(o);class s{constructor(e,t,i){this.code=e,this.message=t,this.apiError=i}}function l(e,t){if(e instanceof n.ApiError){let i=t;return e.message&&(i+=`. Detailed message: ${e.message.toString()}`),new s(e.error[".tag"],i,e)}return e}function d(e){if(e.reel_id){return{type:{".tag":"reel_video"},identifier:{".tag":"reel_video_id",reel_video_id:e.reel_id}}}const t={".tag":e.type};return e.linkUrl?{type:t,identifier:{".tag":"shared_link_details",url:e.linkUrl}}:{type:t,identifier:{".tag":"file_path_or_id",file_path_or_id:e.id}}}t.Comments2Error=s,(function(e){e.FILE_NOT_FOUND="file_not_found",e.PERMISSION_DENIED="permission_denied",e.BAD_REQUEST="bad_request"})(t.ErrorCode||(t.ErrorCode={}));t.Comments2LoggedOutApi=class{constructor(e){this.routes=(new r.NoAuthApiV2Client).ns("comments2"),this.params={},this.stream=d(e)}listComments(e=!1,t){return this.routes.rpc("logged_out/list_comments",{stream:this.stream,cursor:t,include_permissions:e},this.params).catch(e=>{throw l(e,"/logged_out/list_comments did not complete successfully")})}createThread(e,t){return this.routes.rpc("logged_out/add_comment",{stream:this.stream,comment:e,source:t},this.params).catch(e=>{throw l(e,"/logged_out/add_comment (new comment) did not complete successfully")})}logPerfEvent(e,t,i={}){return this.logPerfEventImpl(e,t,i)}logPerfEventImpl(e,t,{threadId:i,commentId:n,oref:a,errorMessage:r}){const s={event:e,value:t,stream:this.stream,thread_id:i,comment_id:n,error_message:r,oref:a};return this.routes.rpc("log_perf_event",s,this.params).catch(e=>{throw o.reportStack("comments2 perf logging failed",{severity:o.SEVERITY.NONCRITICAL,tags:["comments2_logging"],exc_extra:s}),l(e,"/log_perf_event did not complete successfully")})}};t.Comments2Api=class{constructor(e,t){const i=new a.UserApiV2Client;this.routes=i.ns("comments2"),this.stickerRoutes=i.ns("stickers"),this.filesRoutes=i.ns("files"),this.mediaAddonRoutes=i.ns("media_addon"),this.params={subjectUserId:e},this.stream=d(t)}getStickers(){return this.stickerRoutes.rpc("get_stickers",void 0,this.params).catch(e=>{throw l(e,"/get_stickers did not complete successfully")})}getMediaFeatures(){return this.mediaAddonRoutes.rpc("get_features",void 0,this.params).catch(e=>{throw l(e,"/get_features did not complete successfully")})}getFileMetadata(e,t){return this.filesRoutes.rpc("get_file_content_metadata",{file_path_or_id:e,url:t},this.params).catch(e=>{throw l(e,"/get_file_content_metadata did not complete successfully")})}checkOnboardingStatus(){return this.routes.rpc("check_onboarding_status",void 0,this.params).catch(e=>{throw l(e,"/check_onboarding_status did not complete successfully")})}createThread(e,t){return this.routes.rpc("add_comment",{stream:this.stream,comment:e,source:t},this.params).catch(e=>{throw l(e,"/add_comment (new comment) did not complete successfully")})}deleteComment(e){return this.routes.rpc("delete_comment",{stream:this.stream,id:e},this.params).catch(e=>{throw l(e,"/delete_comment did not complete successfully")})}disableCommenting(){return this.routes.rpc("disable_commenting",{stream:this.stream},this.params).catch(e=>{throw l(e,"/disable_commenting did not complete successfully")})}editComment(e,t){return this.routes.rpc("edit_comment",{stream:this.stream,id:e,comment:t},this.params).catch(e=>{throw l(e,"/edit_comment did not complete successfully")})}enableCommenting(){return this.routes.rpc("enable_commenting",{stream:this.stream},this.params).catch(e=>{throw l(e,"/enable_commenting did not complete successfully")})}listComments(e=!1,t){return this.routes.rpc("list_comments",{stream:this.stream,cursor:t,include_permissions:e},this.params).catch(e=>{throw l(e,"/list_comments did not complete successfully")})}logPerfEvent(e,t){return this.logPerfEventImpl(e,t)}logSimplePerfEvent(e,t){return this.logPerfEvent({".tag":e},t)}logPerfEventImpl(e,t){const i={event:e,value:t,stream:this.stream};return this.routes.rpc("log_perf_event",i,this.params).catch(e=>{throw o.reportStack("comments2 perf logging failed",{severity:o.SEVERITY.NONCRITICAL,tags:["comments2_logging"],exc_extra:i}),l(e,"/log_perf_event did not complete successfully")})}markHasOnboarded(e){const t={".tag":e};return this.routes.rpc("mark_has_onboarded",{type:t},this.params).catch(e=>{throw l(e,"/mark_has_onboarded did not complete successfully")})}markThreadRead(e){return this.routes.rpc("mark_thread_read",{stream:this.stream,id:e},this.params).catch(e=>{throw l(e,"/mark_thread_read did not complete successfully")})}markThreadUnread(e){return this.routes.rpc("mark_thread_unread",{stream:this.stream,id:e},this.params).catch(e=>{throw l(e,"/mark_thread_unread did not complete successfully")})}markThreadResolved(e){return this.routes.rpc("resolve_thread",{stream:this.stream,id:e},this.params).catch(e=>{throw l(e,"/resolve_thread did not complete successfully")})}markThreadUnresolved(e){return this.routes.rpc("unresolve_thread",{stream:this.stream,id:e},this.params).catch(e=>{throw l(e,"/unresolve_thread did not complete successfully")})}replyToThread(e,t){return this.routes.rpc("add_comment",{stream:this.stream,comment:e,thread_id:t},this.params).catch(e=>{throw l(e,"/add_comment (reply comment) did not complete successfully")})}subscribe(){return this.routes.rpc("subscribe",{stream:this.stream},this.params).catch(e=>{throw l(e,"/subscribe did not complete successfully")})}unsubscribe(){return this.routes.rpc("unsubscribe",{stream:this.stream},this.params).catch(e=>{throw l(e,"/unsubscribe did not complete successfully")})}}})),define("modules/clean/react/comments2/data/initial_state",["require","exports","modules/clean/react/comments2/data/types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.INITIAL_STATE=void 0,t.INITIAL_STATE={context:void 0,data:{editorIsEmpty:!0,threads:{},authors:{},activatedThreadId:void 0,documentRectangleToMakeVisible:void 0,hoverThreadId:void 0,cursor:void 0,modalVariantsShown:{[i.ModalVariant.EmailVerifyModal]:!1,[i.ModalVariant.SignUpModal]:!1},onboardingVariants:{premium_av_comments_pane_surface:!1,premium_av_preview_surface:!1,non_premium_av_comments_pane_surface:!1,not_annotatable_file_comments_pane_surface:!1,how_to_at_mention_comments_pane_surface:!1,image_preview_surface:!1,document_preview_surface:!1,share_as_comment:!1},framePreciseCommentsEnabled:!1,frameRate:void 0,pendingAnnotationInfo:{playerCurrentTime:0,playerCurrentTimeSec:0,annotationMayBeOffscreen:!1},showResolved:!1,canSeeCommentEditor:!1,playerIntegrationEnabled:!1,enabledStatus:{canEnable:!1},subscriptionStatus:{canSubscribe:!1,isSubscribed:!1},requestEditorFocus:!1,visibleInSidebar:!0,perfEvents:{},upsellTooltipVariant:void 0,thirdPartySource:void 0,stickers:void 0},statuses:{}}})),define("modules/clean/react/comments2/data/logger",["require","exports","tslib","lodash","modules/clean/logging/hive/schemas/web-comments2","modules/clean/logging/telemetry","modules/clean/previews/util","modules/clean/react/comments2/data/util","modules/clean/react/comments2/util","modules/constants/python","modules/core/browser","modules/core/browser_detection"],(function(e,t,i,n,a,r,o,s,l,d,c,u){"use strict";var m;function p(){const e=c.get_uri().getQuery().oref;let t=n.findKey(d.OREF_CONSTANTS,t=>t===e);t=t&&t.toLowerCase();const i={oref_name:t,platform:"web",is_mobile:u.is_mobile_or_tablet(),product_surface:"file_preview"};return e===d.OREF_CONSTANTS.DESKTOP_HARMONY&&(i.referral_source="badge"),i}Object.defineProperty(t,"__esModule",{value:!0}),t.logErrorEvent=t.logEvent=t.hiveLogger=void 0,n=i.__importStar(n),r=i.__importStar(r),c=i.__importStar(c),t.hiveLogger=new r.HiveLogger,(function(e){e.PageLevel="page-level",e.Targeted="targeted"})(m||(m={})),t.logEvent=function(e,i){const n=Object.assign({event:e},p());if(i){const{commentId:e,stream:t,thread:a,threadId:r,isSticker:d}=i;e&&(n.comment_gid=e),r&&(n.thread_gid=r),void 0!==d&&(n.is_sticker=d),a&&(n.thread_gid=a.id,n.is_annotation=!!a.annotation,n.is_third_party=a.isThirdParty,s.isThreadWithTimecodeAnnotation(a)&&(n.annotation_type="time",n.time_comment_offset=a.annotation.time),s.isThreadWithDocumentAnnotation(a)&&(n.annotation_type=a.annotation.regionType,n.page=a.annotation.regions[0].page,n.annotation_position=l.isFullPageAnnotation(a.annotation)?m.PageLevel:m.Targeted),s.isThreadWithImageAnnotation(a)&&(n.annotation_type="rectangle",n.annotation_position=l.isFullImageAnnotation(a.annotation)?m.PageLevel:m.Targeted)),t&&(n.stream_gid=t.id,n.file_obj_id=t.id,n.ns_id=t.ns_id,n.file_size=t.bytes,n.file_extension=o.getWhitelistedExtension(t.filename))}t.hiveLogger.log(new a.Comments2LoggingTableRow(n))},t.logErrorEvent=function(e,{stream:i}){const n=Object.assign({event:"comment_error",error_message:e},p());i&&(n.stream_gid=i.id,n.file_obj_id=i.id,n.ns_id=i.ns_id,n.file_size=i.bytes,n.file_extension=o.getWhitelistedExtension(i.filename)),t.hiveLogger.log(new a.Comments2LoggingTableRow(n))}})),define("modules/clean/react/comments2/data/perf_util",["require","exports"],(function(e,t){"use strict";function i(){return+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.withTiming=t.currentTime=t.mentionsQueryCompleted=t.commentActionCompleted=t.threadActionCompleted=void 0,t.threadActionCompleted=function(e,t){return{".tag":"thread_action_completed_ms",action:e,error_message:t}},t.commentActionCompleted=function(e,t){return{".tag":"comment_action_completed_ms",action:e,error_message:t}},t.mentionsQueryCompleted=function(){return{".tag":"mentions_query_completed_ms"}},t.currentTime=i,t.withTiming=function(e,t){const n=i();return a=>{e(a);const r=i()-n;t(r)}}})),define("modules/clean/react/comments2/data/reducer_helper",["require","exports","modules/clean/redux/constants"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createReducerFrom=t.createActionReducer=t.createStatusReducer=void 0,t.createStatusReducer=function(e){const t={};for(const n of Object.keys(e).map(t=>e[t]))"async"===n.type&&(t[n.actionTypes.request]={name:n.name,status:i.ApiClientStatus.Request},t[n.actionTypes.error]={name:n.name,status:i.ApiClientStatus.Error});return(e,i)=>{const n=t[i.type];return n&&(e=Object.assign(Object.assign({},e),{[n.name]:n.status})),e}},t.createActionReducer=function(){return function(e,t){switch(e.type){case"async":return"function"==typeof t?[[e.actionTypes.success,t]]:[t.Error&&[e.actionTypes.error,t.Error],t.Request&&[e.actionTypes.request,t.Request],t.Success&&[e.actionTypes.success,t.Success]].filter(e=>e);case"sync":if("function"==typeof t)return[[e.actionType,t]]}throw new Error}},t.createReducerFrom=function(...e){const t={};for(const i of e)for(const[e,n]of i)t[e]||(t[e]=[]),t[e].push(n);return(e,i)=>{const n=t[i.type];for(const t of n||[]){const n=i.meta&&i.meta.args;e=t(e,"payload"in i?i.payload:i.error,n)}return e}}})),define("modules/clean/react/comments2/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MarkThreadReadOrigin=t.SortType=t.ShowModalReason=t.ModalVariant=t.Comments2ContextStatus=void 0,(function(e){e[e.Pending=0]="Pending",e[e.Comments1=1]="Comments1",e[e.Disabled=2]="Disabled",e[e.ReadOnly=3]="ReadOnly",e[e.FullyEnabled=4]="FullyEnabled"})(t.Comments2ContextStatus||(t.Comments2ContextStatus={})),(function(e){e.EmailVerifyModal="EmailVerifyModal",e.SignUpModal="SignUpModal"})(t.ModalVariant||(t.ModalVariant={})),(function(e){e[e.EditorFocus=0]="EditorFocus",e[e.OnPost=1]="OnPost"})(t.ShowModalReason||(t.ShowModalReason={})),(function(e){e.Chronological="CHRONOLOGICAL",e.VideoTimeCode="VIDEO_TIME_CODE"})(t.SortType||(t.SortType={})),(function(e){e[e.ThreadActivated=0]="ThreadActivated",e[e.UIButtonClicked=1]="UIButtonClicked"})(t.MarkThreadReadOrigin||(t.MarkThreadReadOrigin={}))})),define("modules/clean/react/comments2/data/util",["require","exports","modules/clean/react/comments2/util"],(function(e,t,i){"use strict";function n(e){const{annotation:t}=e;return!!t&&"document"===t.type}Object.defineProperty(t,"__esModule",{value:!0}),t.documentRectangleFromThread=t.isThreadWithTimecodeAnnotation=t.isThreadWithImageAnnotation=t.isThreadWithDocumentAnnotation=void 0,t.isThreadWithDocumentAnnotation=n,t.isThreadWithImageAnnotation=function(e){const{annotation:t}=e;return!!t&&"image"===t.type},t.isThreadWithTimecodeAnnotation=function(e){const{annotation:t}=e;return!!t&&i.isTimecodeAnnotation(t)},t.documentRectangleFromThread=function(e){if(e&&n(e)){const t=e.annotation.regions[0];return Object.assign(Object.assign({},t),{page:t.page-1})}}})),define("modules/clean/react/comments2/util",["require","exports","tslib","lodash","modules/core/browser_detection","modules/constants/comments2","typescript/libraries/comments2/src/components/annotation_utils","modules/core/browser_detection","modules/core/browser"],(function(e,t,i,n,a,r,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseActiveCommentFromUrl=t.createFullRectangle=t.isFullImageAnnotation=t.isFullPageAnnotation=t.getThreadForNumberedAnnotationAtPoint=t.useBolt=t.isTimecodeAnnotation=t.canShowUnreadPill=t.isComments2Mobile=t.getAnnotationInfoForThread=t.findCommentThread=t.isContextSame=t.isStreamSame=t.isUserSame=t.createBackoff=void 0,n=i.__importStar(n),l=i.__importStar(l);function d(e){return(t,i)=>void 0===t||void 0===i?t===i:e(t,i)}function c(...e){return d((t,i)=>e.every(e=>t[e]===i[e]))}function u(e){return void 0!==e&&("audio"===e.type||"video"===e.type)}function m(e,t,i){return t<=e&&e<=i}t.createBackoff=function(e=1e3,t=3e5){let i,n=0;return{resetBackoff:()=>{n=0,null!=i&&clearTimeout(i)},backoff:a=>i=setTimeout(a,Math.random()*Math.min(e*(Math.pow(2,n++)-1),t))}},t.isUserSame=c("id"),t.isStreamSame=c("type","id"),t.isContextSame=d((e,i)=>t.isStreamSame(e.stream,i.stream)&&t.isUserSame(e.viewer,i.viewer)),t.findCommentThread=function(e,t){for(const i of e){const e=n.find(i.comments,{id:t});if(e)return{comment:e,thread:i}}return null},t.getAnnotationInfoForThread=function({annotation:e}){if(u(e))return{playerCurrentTime:e.time,playerCurrentTimeSec:o.isVideoAnnotation(e)?e.timeSec:void 0,annotationMayBeOffscreen:!1}},t.isComments2Mobile=a.is_mobile_or_tablet,t.canShowUnreadPill=function(){return!s.msie},t.isTimecodeAnnotation=u,t.useBolt=function(){return!r.COMMENTS2_DISABLE_BOLT};const p=(e,t,i)=>Math.min(...(e=>"image"===e.annotation.type?[e.annotation.region]:e.annotation.regions)(e).map(e=>(function(e,t,i){const n=e.x+e.width,a=e.y+e.height,r=(e,t)=>e<t?e:1/0;if(m(t.x,e.x,n)&&m(t.y,e.y,a)){const o=16/i.width,s=16/i.height;return Math.min(r(Math.min(t.x-e.x,n-t.x),o),r(Math.min(t.y-e.y,a-t.y),s))}return 1/0})(e,t,i)));function f({x:e,y:t,width:i,height:n}){return 0===e&&0===t&&1===i&&1===n}t.getThreadForNumberedAnnotationAtPoint=function(e,t,i){return n=t=>p(t,e,i),t.reduce(({minRank:e,minElem:t},i)=>{const a=n(i);return e<=a?{minRank:e,minElem:t}:{minRank:a,minElem:i}},{minRank:1/0,minElem:void 0}).minElem;var n},t.isFullPageAnnotation=function(e){return 1===e.regions.length&&f(e.regions[0])},t.isFullImageAnnotation=function(e){return f(e.region)},t.createFullRectangle=function(){return{x:0,y:0,width:1,height:1}},t.parseActiveCommentFromUrl=function(){const e=/comment_id=(.*)/.exec(l.get_uri().getFragment());return e?e[1]:void 0}})),define("modules/clean/react/comments2/video_annotations/annotation_helper",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoAnnotationHelper=void 0,(function(e){e.unitConvertSecondsToDomainObjectTime=function(e){return null!=e?Math.round(100*e):0},e.unitConvertDomainObjectTimeToSeconds=function(e){return null!=e?e/100:0}})(t.VideoAnnotationHelper||(t.VideoAnnotationHelper={}))})),define("modules/clean/react/comments2/video_annotations/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventTypes=void 0,t.EventTypes={PAUSE:"PAUSE",SEEK_POSITION_AND_PAUSE:"SEEK_POSITION_AND_PAUSE"}})),define("modules/clean/react/comments2/video_annotations/video_preview_event_emitter",["require","exports","tslib","eventemitter3"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoPreviewEventEmitter=void 0,n=i.__importDefault(n),t.videoPreviewEventEmitter=new n.default})),define("modules/clean/react/file_metadata/component/metadata_details_body",["require","exports","tslib","react","dig-components/typography"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataDetailsBody=t.FileMetadataField=void 0,n=i.__importDefault(n),t.FileMetadataField=e=>e.value?n.default.createElement("div",{className:"file-metadata__field"},n.default.createElement(a.Text,{tagName:"div",className:"file-metadata__field-name"},e.name),n.default.createElement(a.Text,{tagName:"div",className:"file-metadata__field-value",color:"faint"},e.value)):null,t.MetadataDetailsBody=e=>{const{title:i,fields:a}=e,r=a.map(e=>n.default.createElement(t.FileMetadataField,{key:e.name,name:e.name,value:e.value}));return n.default.createElement("div",{className:"file-metadata__section"},i&&n.default.createElement("div",{className:"file-metadata__section-header"},i),r)}})),define("modules/clean/react/file_metadata/component/metadata_details",["require","exports","tslib","react","modules/clean/react/file_metadata/data/actions","modules/clean/react/file_metadata/data/selectors","react-redux","modules/clean/file_store/utils","modules/clean/react/file_metadata/data/store","modules/clean/react/file_metadata/constants","modules/clean/react/file_metadata/component/metadata_details_body","modules/clean/react/file_metadata/strings","modules/clean/react/file_metadata/data/type_guards","modules/clean/redux/constants","modules/clean/components/loading_indicator","modules/clean/previews/constants","modules/clean/react/file_metadata/utils"],(function(e,t,i,n,a,r,o,s,l,d,c,u,m,p,f,_,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataDetails=t.ConnectedMetadataDetails=t.UnconnectedMetadataDetails=void 0,n=i.__importDefault(n);class v extends n.default.Component{componentDidMount(){this.fetchUploadInfoMetadata(),this.fetchFiletypeInfoMetadata()}componentDidUpdate(e){this.fetchUploadInfoMetadata(),this.fetchFiletypeInfoMetadata()}shouldShowLoadingSpinner(){const{isActiveTab:e,uploadInfo:t,filetypeInfo:i}=this.props,n=t&&t.apiStatus===p.ApiClientStatus.Fetch,a=i&&i.apiStatus===p.ApiClientStatus.Fetch;return e&&(n||a)}shouldFetchFiletypeInfoMetadata(){const{user:e,isActiveTab:t,filetypeInfo:i,previewType:n,file:a}=this.props,r=i&&void 0!==i.apiStatus,o=n===_.PreviewType.Image||d.SupportedOfficeExtensions.includes(s.getExtension(a))||"pdf"===s.getExtension(a)||n===_.PreviewType.Audio||n===_.PreviewType.Video;return null!=e&&t&&!r&&o}shouldFetchUploadInfoMetadata(){const{user:e,isActiveTab:t,uploadInfo:i}=this.props,n=i&&void 0!==i.apiStatus;return null!=e&&t&&!n}fetchUploadInfoMetadata(){if(!this.shouldFetchUploadInfoMetadata())return;const{fetchUploadInfo:e,file:t,user:i,sharedLinkInfo:n}=this.props,a=n?n.url:void 0;e({fileId:t.file_id,user:i,sharedLinkUrl:a})}fetchFiletypeInfoMetadata(){if(!this.shouldFetchFiletypeInfoMetadata())return;const{fetchFiletypeInfo:e,file:t,user:i,sharedLinkInfo:n}=this.props,a=n?n.url:void 0;e({fileId:t.file_id,user:i,sharedLinkUrl:a})}render(){const{uploadInfo:e,filetypeInfo:t,file:i,sharedLinkInfo:a}=this.props,r=t?t.metadata:void 0;let o;return m.isImageSpecificMetadata(r)?o=n.default.createElement(c.MetadataDetailsBody,{title:u.FileMetadataSectionHeaders.imageFiletypeInfo,fields:g.getImageSpecificDataFields(r)}):m.isOfficeSpecificMetadata(r)&&g.getOfficeSpecificDataFields(r).some(e=>!!e.value)?o=n.default.createElement(c.MetadataDetailsBody,{title:u.FileMetadataSectionHeaders.officeFiletypeInfo,fields:g.getOfficeSpecificDataFields(r)}):m.isPDFSpecificMetadata(r)?o=n.default.createElement(c.MetadataDetailsBody,{title:u.FileMetadataSectionHeaders.PdfFiletypeInfo,fields:g.getPDFSpecificDataFields(r)}):m.isAudioSpecificMetadata(r)?o=n.default.createElement(c.MetadataDetailsBody,{title:u.FileMetadataSectionHeaders.AudioFiletypeInfo,fields:g.getAudioSpecificDataFields(r)}):m.isVideoSpecificMetadata(r)&&(o=n.default.createElement(c.MetadataDetailsBody,{title:u.FileMetadataSectionHeaders.VideoFiletypeInfo,fields:g.getVideoSpecificDataFields(r)})),n.default.createElement("div",{className:"file-metadata"},n.default.createElement(c.MetadataDetailsBody,{fields:g.getUploadInfoDataFields(e,a,i)}),o,this.shouldShowLoadingSpinner()&&n.default.createElement("div",{className:"file-metadata__loading-indicator"},n.default.createElement(f.LoadingIndicator,{style:f.LoadingIndicator.LoadingIndicatorStyle.BLUE_SPINNER})))}}t.UnconnectedMetadataDetails=v,v.displayName="UnconnectedMetadataDetails";const h={fetchUploadInfo:a.fetchUploadInfo,fetchFiletypeInfo:a.fetchFiletypeInfo},E=o.connect((e,t)=>({uploadInfo:r.getUploadInfo(e,t.file.file_id),filetypeInfo:r.getFiletypeInfo(e,t.file.file_id)}),h);t.ConnectedMetadataDetails=E(v);const y=l.getStoreForPreviewMetadata();t.MetadataDetails=e=>n.default.createElement(o.Provider,{store:y},n.default.createElement(t.ConnectedMetadataDetails,Object.assign({},e)))})),define("modules/clean/react/file_metadata/data/actions",["require","exports","tslib","modules/clean/react/file_metadata/api","modules/clean/react/file_metadata/data/types"],(function(e,t,i,n,a){"use strict";function r(e){return{type:a.Actions.GetUploadInfoApiFetch,payload:{fileId:e}}}function o(e,t){return{type:a.Actions.GetUploadInfoApiSuccess,payload:{fileId:e,uploadInfo:l(t)}}}function s(e,t){return{type:a.Actions.GetUploadInfoApiError,payload:{fileId:e,error:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFiletypeInfo=t.fetchUploadInfo=t.getFileContentMetadataApiError=t.getFileContentMetadataApiSuccess=t.getFileContentMetadataApiFetch=t.getUploadInfoApiError=t.getUploadInfoApiSuccess=t.getUploadInfoApiFetch=void 0,n=i.__importStar(n),t.getUploadInfoApiFetch=r,t.getUploadInfoApiSuccess=o,t.getUploadInfoApiError=s;const l=e=>({uploadDate:e.uploaded,displayName:e.display_name});function d(e){return{type:a.Actions.GetFileContentMetadataApiFetch,payload:{fileId:e}}}function c(e,t){return{type:a.Actions.GetFileContentMetadataApiSuccess,payload:{fileId:e,filetypeInfo:m(t)}}}function u(e,t){return{type:a.Actions.GetFileContentMetadataApiError,payload:{fileId:e,error:t}}}t.getFileContentMetadataApiFetch=d,t.getFileContentMetadataApiSuccess=c,t.getFileContentMetadataApiError=u;const m=e=>({metadata:Object.assign({},e.metadata)});t.fetchUploadInfo=function({fileId:e,user:t,sharedLinkUrl:i}){return a=>{a(r(e));const l=n.fetchUploadInfo({fileId:e,user:t,sharedLinkUrl:i});return l.then(t=>(a(o(e,t)),t)).catch(t=>(a(s(e,t)),t)),l}},t.fetchFiletypeInfo=function({fileId:e,user:t,sharedLinkUrl:i}){return a=>{a(d(e));const r=n.fetchFileContentMetadata({fileId:e,user:t,sharedLinkUrl:i});return r.then(t=>(a(c(e,t)),t)).catch(t=>(a(u(e,t)),t)),r}}})),define("modules/clean/react/file_metadata/data/reducer",["require","exports","modules/clean/react/file_metadata/data/types","modules/clean/redux/constants"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileMetadataReducer=t.initialState=void 0,t.initialState={},t.fileMetadataReducer=function(e=t.initialState,a){switch(a.type){case i.Actions.GetUploadInfoApiFetch:return Object.assign(Object.assign({},e),{[a.payload.fileId]:Object.assign(Object.assign({},e[a.payload.fileId]),{uploadInfo:{apiStatus:n.ApiClientStatus.Fetch}})});case i.Actions.GetUploadInfoApiSuccess:return Object.assign(Object.assign({},e),{[a.payload.fileId]:Object.assign(Object.assign({},e[a.payload.fileId]),{uploadInfo:Object.assign(Object.assign({},a.payload.uploadInfo),{apiStatus:n.ApiClientStatus.Success})})});case i.Actions.GetUploadInfoApiError:return Object.assign(Object.assign({},e),{[a.payload.fileId]:Object.assign(Object.assign({},e[a.payload.fileId]),{uploadInfo:{apiStatus:n.ApiClientStatus.Error,error:a.payload.error}})});case i.Actions.GetFileContentMetadataApiFetch:return Object.assign(Object.assign({},e),{[a.payload.fileId]:Object.assign(Object.assign({},e[a.payload.fileId]),{filetypeInfo:{apiStatus:n.ApiClientStatus.Fetch}})});case i.Actions.GetFileContentMetadataApiSuccess:return Object.assign(Object.assign({},e),{[a.payload.fileId]:Object.assign(Object.assign({},e[a.payload.fileId]),{filetypeInfo:Object.assign(Object.assign({},a.payload.filetypeInfo),{apiStatus:n.ApiClientStatus.Success})})});case i.Actions.GetFileContentMetadataApiError:return Object.assign(Object.assign({},e),{[a.payload.fileId]:Object.assign(Object.assign({},e[a.payload.fileId]),{filetypeInfo:{apiStatus:n.ApiClientStatus.Error,error:a.payload.error}})});default:return e}}})),define("modules/clean/react/file_metadata/data/selectors",["require","exports","modules/clean/redux/namespaces","modules/clean/redux/selectors"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFiletypeInfo=t.getUploadInfo=void 0;const a=e=>n.getStateAtNamespace(e,i.PREVIEW_METADATA_NAMESPACE_KEY);t.getUploadInfo=(e,t)=>{const i=a(e)[t];return i?i.uploadInfo:void 0},t.getFiletypeInfo=(e,t)=>{const i=a(e)[t];return i?i.filetypeInfo:void 0}})),define("modules/clean/react/file_metadata/data/store",["require","exports","tslib","lodash","modules/clean/redux/namespaces","modules/clean/redux/store","modules/clean/react/file_metadata/data/reducer"],(function(e,t,i,n,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForPreviewMetadata=void 0,n=i.__importStar(n),t.getStoreForPreviewMetadata=n.once(()=>r.getStoreAndRegisterReducers({[a.PREVIEW_METADATA_NAMESPACE_KEY]:o.fileMetadataReducer}))})),define("modules/clean/react/file_metadata/data/type_guards",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoSpecificMetadata=t.isAudioSpecificMetadata=t.isPDFSpecificMetadata=t.isOfficeSpecificMetadata=t.isImageSpecificMetadata=void 0,t.isImageSpecificMetadata=function(e){return!!e&&"image"===e[".tag"]},t.isOfficeSpecificMetadata=function(e){return!!e&&"ms_office"===e[".tag"]},t.isPDFSpecificMetadata=function(e){return!!e&&"pdf"===e[".tag"]},t.isAudioSpecificMetadata=function(e){return!!e&&"audio"===e[".tag"]},t.isVideoSpecificMetadata=function(e){return!!e&&"video"===e[".tag"]}})),define("modules/clean/react/file_metadata/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(function(e){e.GetUploadInfoApiFetch="GetUploadInfoApiFetch",e.GetUploadInfoApiSuccess="GetUploadInfoApiSuccess",e.GetUploadInfoApiError="GetUploadInfoApiError",e.GetFileContentMetadataApiFetch="GetFileContentMetadataApiFetch",e.GetFileContentMetadataApiSuccess="GetFileContentMetadataApiSuccess",e.GetFileContentMetadataApiError="GetFileContentMetadataApiError"})(t.Actions||(t.Actions={}))})),define("modules/clean/react/file_metadata/api",["require","exports","api_v2/user_client"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFileContentMetadata=t.fetchUploadInfo=void 0,t.fetchUploadInfo=function({fileId:e,user:t,sharedLinkUrl:n}){const a={file_path_or_id:e,url:n};return(new i.UserApiV2Client).ns("files").rpc("get_upload_info",a,{subjectUserId:t.id})},t.fetchFileContentMetadata=function({fileId:e,user:t,sharedLinkUrl:n}){const a={file_path_or_id:e,url:n};return(new i.UserApiV2Client).ns("files").rpc("get_file_content_metadata",a,{subjectUserId:t.id})}})),define("modules/clean/react/file_metadata/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MONTHS_MAX=t.WEEKS_MAX=t.DAYS_MAX=t.HOURS_MAX=t.MINUTES_MAX=t.SECONDS_MAX=t.SupportedOfficeExtensions=t.ResolutionUnit=t.OrientationIdentifier=t.MeteringModeIdentifier=t.FlashSettingIdentifier=t.ColorSpaceIdentifier=t.WhiteBalanceIdentifier=void 0,(function(e){e[e.Unknown=0]="Unknown",e[e.Auto=1]="Auto",e[e.Manual=2]="Manual",e[e.Other=3]="Other"})(t.WhiteBalanceIdentifier||(t.WhiteBalanceIdentifier={})),(function(e){e[e.Unknown=0]="Unknown",e[e.SRgb=1]="SRgb",e[e.AdobeRgb=2]="AdobeRgb",e[e.WideGamutRgb=3]="WideGamutRgb",e[e.IccProfile=4]="IccProfile",e[e.Uncalibrated=5]="Uncalibrated",e[e.Other=6]="Other"})(t.ColorSpaceIdentifier||(t.ColorSpaceIdentifier={})),(function(e){e[e.Unknown=0]="Unknown",e[e.NoFlash=1]="NoFlash",e[e.Fired=2]="Fired",e[e.FiredReturnNotDetected=3]="FiredReturnNotDetected",e[e.FiredReturnDetected=4]="FiredReturnDetected",e[e.OnDidNotFire=5]="OnDidNotFire",e[e.OnFired=6]="OnFired",e[e.OnReturnNotDetected=7]="OnReturnNotDetected",e[e.OnReturnDetected=8]="OnReturnDetected",e[e.OffDidNotFire=9]="OffDidNotFire",e[e.OffDidNotFireReturnNotDetected=10]="OffDidNotFireReturnNotDetected",e[e.AutoDidNotFire=11]="AutoDidNotFire",e[e.AutoFired=12]="AutoFired",e[e.AutoFiredReturnNotDetected=13]="AutoFiredReturnNotDetected",e[e.AutoFiredReturnDetected=14]="AutoFiredReturnDetected",e[e.NoFlashFunction=15]="NoFlashFunction",e[e.OffNoFlashFunction=16]="OffNoFlashFunction",e[e.FiredRedEyeReduction=17]="FiredRedEyeReduction",e[e.FiredRedEyeReductionReturnNotDetected=18]="FiredRedEyeReductionReturnNotDetected",e[e.FiredRedEyeReductionReturnDetected=19]="FiredRedEyeReductionReturnDetected",e[e.OnRedEyeReduction=20]="OnRedEyeReduction",e[e.OnRedEyeReductionReturnNotDetected=21]="OnRedEyeReductionReturnNotDetected",e[e.OnRedEyeReductionReturnDetected=22]="OnRedEyeReductionReturnDetected",e[e.OffRedEyeReduction=23]="OffRedEyeReduction",e[e.AutoDidNotFireRedEyeReduction=24]="AutoDidNotFireRedEyeReduction",e[e.AutoFiredRedEyeReduction=25]="AutoFiredRedEyeReduction",e[e.AutoFiredRedEyeReductionReturnNotDetected=26]="AutoFiredRedEyeReductionReturnNotDetected",e[e.AutoFiredRedEyeReductionReturnDetected=27]="AutoFiredRedEyeReductionReturnDetected",e[e.Other=28]="Other"})(t.FlashSettingIdentifier||(t.FlashSettingIdentifier={})),(function(e){e[e.Unknown=0]="Unknown",e[e.Average=1]="Average",e[e.CenterWeightedAverage=2]="CenterWeightedAverage",e[e.Spot=3]="Spot",e[e.MultiSpot=4]="MultiSpot",e[e.MultiSegment=5]="MultiSegment",e[e.Partial=6]="Partial",e[e.Other=7]="Other"})(t.MeteringModeIdentifier||(t.MeteringModeIdentifier={})),(function(e){e[e.UnknownOrientation=0]="UnknownOrientation",e[e.Horizontal=1]="Horizontal",e[e.MirrorHorizontal=2]="MirrorHorizontal",e[e.Rotate180=3]="Rotate180",e[e.MirrorVertical=4]="MirrorVertical",e[e.MirrorHorizontalRotate270Cw=5]="MirrorHorizontalRotate270Cw",e[e.Rotate90Cw=6]="Rotate90Cw",e[e.MirrorHorizontalRotate90Cw=7]="MirrorHorizontalRotate90Cw",e[e.Rotate270Cw=8]="Rotate270Cw"})(t.OrientationIdentifier||(t.OrientationIdentifier={})),(function(e){e[e.UnknownResolutionUnit=0]="UnknownResolutionUnit",e[e.Inch=1]="Inch",e[e.CM=2]="CM"})(t.ResolutionUnit||(t.ResolutionUnit={})),t.SupportedOfficeExtensions=["docm","docx","ppsx","ppsm","pptx","pptm","xlsx","xlsm","dotx"],t.SECONDS_MAX=59.5,t.MINUTES_MAX=3570,t.HOURS_MAX=84600,t.DAYS_MAX=561600,t.WEEKS_MAX=2548800,t.MONTHS_MAX=29808e3})),define("modules/clean/react/file_metadata/strings",["require","exports","modules/core/i18n","modules/clean/react/file_metadata/constants"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileMetadataSectionHeaders=t.VideoMetadataNameFields=t.AudioMetadataNameFields=t.PdfMetadataNameFields=t.OfficeMetadataNameFields=t.ImageMetadataNameFields=t.UploadInfoNameFields=t.OrientationCopy=t.MeteringModeSetting=t.FlashSetting=t.ColorSpaceSetting=t.WhiteBalanceSetting=void 0;t.WhiteBalanceSetting={[n.WhiteBalanceIdentifier.Unknown]:i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),[n.WhiteBalanceIdentifier.Auto]:i.intl.formatMessage({id:"xhS6fE",defaultMessage:"Auto"}),[n.WhiteBalanceIdentifier.Manual]:i.intl.formatMessage({id:"ToNv3C",defaultMessage:"Manual"}),[n.WhiteBalanceIdentifier.Other]:i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"})},t.ColorSpaceSetting={[n.ColorSpaceIdentifier.Unknown]:i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),[n.ColorSpaceIdentifier.SRgb]:i.intl.formatMessage({id:"a0wUgp",defaultMessage:"sRGB"}),[n.ColorSpaceIdentifier.AdobeRgb]:i.intl.formatMessage({id:"B28Q5y",defaultMessage:"Adobe RGB"}),[n.ColorSpaceIdentifier.WideGamutRgb]:i.intl.formatMessage({id:"Kh3t+h",defaultMessage:"Wide Gamut RGB"}),[n.ColorSpaceIdentifier.IccProfile]:i.intl.formatMessage({id:"h4Q5SZ",defaultMessage:"ICC Profile"}),[n.ColorSpaceIdentifier.Uncalibrated]:i.intl.formatMessage({id:"/7omh+",defaultMessage:"Uncalibrated"}),[n.ColorSpaceIdentifier.Other]:i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"})},t.FlashSetting={[n.FlashSettingIdentifier.Unknown]:i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),[n.FlashSettingIdentifier.NoFlash]:i.intl.formatMessage({id:"CMxZBg",defaultMessage:"No flash"}),[n.FlashSettingIdentifier.Fired]:i.intl.formatMessage({id:"GxXK+Z",defaultMessage:"Fired"}),[n.FlashSettingIdentifier.FiredReturnNotDetected]:i.intl.formatMessage({id:"1aQhV4",defaultMessage:"Fired, return not detected"}),[n.FlashSettingIdentifier.FiredReturnDetected]:i.intl.formatMessage({id:"mxTse0",defaultMessage:"Fired, return detected"}),[n.FlashSettingIdentifier.OnDidNotFire]:i.intl.formatMessage({id:"VAQlMV",defaultMessage:"On, did not fire"}),[n.FlashSettingIdentifier.OnFired]:i.intl.formatMessage({id:"IfNe4i",defaultMessage:"On, fired"}),[n.FlashSettingIdentifier.OnReturnNotDetected]:i.intl.formatMessage({id:"xb3nZ7",defaultMessage:"On, return not detected"}),[n.FlashSettingIdentifier.OnReturnDetected]:i.intl.formatMessage({id:"GIkKlb",defaultMessage:"On, return detected"}),[n.FlashSettingIdentifier.OffDidNotFire]:i.intl.formatMessage({id:"hvSCzd",defaultMessage:"Off, did not fire"}),[n.FlashSettingIdentifier.OffDidNotFireReturnNotDetected]:i.intl.formatMessage({id:"O8+FbV",defaultMessage:"Off, did not fire, return not detected"}),[n.FlashSettingIdentifier.AutoDidNotFire]:i.intl.formatMessage({id:"KSJ3BI",defaultMessage:"Auto, did not fire"}),[n.FlashSettingIdentifier.AutoFired]:i.intl.formatMessage({id:"F0TcTd",defaultMessage:"Auto, fired"}),[n.FlashSettingIdentifier.AutoFiredReturnNotDetected]:i.intl.formatMessage({id:"rLeBiG",defaultMessage:"Auto, fired, return not detected"}),[n.FlashSettingIdentifier.AutoFiredReturnDetected]:i.intl.formatMessage({id:"qJftjl",defaultMessage:"Auto, fired, return detected"}),[n.FlashSettingIdentifier.NoFlashFunction]:i.intl.formatMessage({id:"jdWze8",defaultMessage:"No flash function"}),[n.FlashSettingIdentifier.OffNoFlashFunction]:i.intl.formatMessage({id:"THu+Iw",defaultMessage:"Off, no flash function"}),[n.FlashSettingIdentifier.FiredRedEyeReduction]:i.intl.formatMessage({id:"B0ZoP1",defaultMessage:"Fired, red-eye reduction"}),[n.FlashSettingIdentifier.FiredRedEyeReductionReturnNotDetected]:i.intl.formatMessage({id:"XrGwwy",defaultMessage:"Fired, red-eye reduction, return not detected"}),[n.FlashSettingIdentifier.FiredRedEyeReductionReturnDetected]:i.intl.formatMessage({id:"piA/mD",defaultMessage:"Fired, red-eye reduction, return detected"}),[n.FlashSettingIdentifier.OnRedEyeReduction]:i.intl.formatMessage({id:"VgJqkZ",defaultMessage:"On, red-eye reduction"}),[n.FlashSettingIdentifier.OnRedEyeReductionReturnNotDetected]:i.intl.formatMessage({id:"+TI9qg",defaultMessage:"On, red-eye reduction, return not detected"}),[n.FlashSettingIdentifier.OnRedEyeReductionReturnDetected]:i.intl.formatMessage({id:"j8jQAQ",defaultMessage:"On, red-eye reduction, return detected"}),[n.FlashSettingIdentifier.OffRedEyeReduction]:i.intl.formatMessage({id:"QLLQth",defaultMessage:"Off, red-eye reduction"}),[n.FlashSettingIdentifier.AutoDidNotFireRedEyeReduction]:i.intl.formatMessage({id:"AhpZjQ",defaultMessage:"Auto, did not fire, red-eye reduction"}),[n.FlashSettingIdentifier.AutoFiredRedEyeReduction]:i.intl.formatMessage({id:"Qv2qrm",defaultMessage:"Auto, fired, red-eye reduction"}),[n.FlashSettingIdentifier.AutoFiredRedEyeReductionReturnNotDetected]:i.intl.formatMessage({id:"gTPkua",defaultMessage:"Auto, fired, red-eye reduction, return not detected"}),[n.FlashSettingIdentifier.AutoFiredRedEyeReductionReturnDetected]:i.intl.formatMessage({id:"4Ty2Bk",defaultMessage:"Auto, fired, red-eye reduction, return detected"}),[n.FlashSettingIdentifier.Other]:i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"})},t.MeteringModeSetting={[n.MeteringModeIdentifier.Unknown]:i.intl.formatMessage({id:"vHgZs0",defaultMessage:"Unknown"}),[n.MeteringModeIdentifier.Average]:i.intl.formatMessage({id:"FfhsBR",defaultMessage:"Average"}),[n.MeteringModeIdentifier.CenterWeightedAverage]:i.intl.formatMessage({id:"FgYWQc",defaultMessage:"Center-weighted average"}),[n.MeteringModeIdentifier.Spot]:i.intl.formatMessage({id:"xcW6Wd",defaultMessage:"Spot"}),[n.MeteringModeIdentifier.MultiSpot]:i.intl.formatMessage({id:"RGJ4oA",defaultMessage:"Multi-spot"}),[n.MeteringModeIdentifier.MultiSegment]:i.intl.formatMessage({id:"iExd56",defaultMessage:"Multi-segment"}),[n.MeteringModeIdentifier.Partial]:i.intl.formatMessage({id:"Zd4uKj",defaultMessage:"Partial"}),[n.MeteringModeIdentifier.Other]:i.intl.formatMessage({id:"bmpvII",defaultMessage:"Other"})},t.OrientationCopy={[n.OrientationIdentifier.Horizontal]:i.intl.formatMessage({id:"7v6FH2",defaultMessage:"Horizontal (normal)"}),[n.OrientationIdentifier.MirrorHorizontal]:i.intl.formatMessage({id:"s1wRj/",defaultMessage:"Mirror horizontal"}),[n.OrientationIdentifier.Rotate180]:i.intl.formatMessage({id:"YxttK0",defaultMessage:"Rotate 180"}),[n.OrientationIdentifier.MirrorVertical]:i.intl.formatMessage({id:"ykfmPa",defaultMessage:"Mirror vertical"}),[n.OrientationIdentifier.MirrorHorizontalRotate270Cw]:i.intl.formatMessage({id:"GSAufA",defaultMessage:"Mirror horizontal and rotate 270 CW"}),[n.OrientationIdentifier.Rotate90Cw]:i.intl.formatMessage({id:"RUtOD3",defaultMessage:"Rotate 90 CW"}),[n.OrientationIdentifier.MirrorHorizontalRotate90Cw]:i.intl.formatMessage({id:"PzCdEi",defaultMessage:"Mirror horizontal and rotate 90 CW"}),[n.OrientationIdentifier.Rotate270Cw]:i.intl.formatMessage({id:"g6rS8+",defaultMessage:"Rotate 270 CW"})},t.UploadInfoNameFields={uploadedBy:i.intl.formatMessage({id:"bD4kqG",defaultMessage:"Uploaded by"}),dateUploaded:i.intl.formatMessage({id:"KMbzWs",defaultMessage:"Date uploaded"}),from:i.intl.formatMessage({id:"qfF5dJ",defaultMessage:"From"}),lastModified:i.intl.formatMessage({id:"cDIpW4",defaultMessage:"Last modified"}),extension:i.intl.formatMessage({id:"Y+MchP",defaultMessage:"Extension"}),size:i.intl.formatMessage({id:"Qze7Tm",defaultMessage:"Size"})},t.ImageMetadataNameFields={captureDate:i.intl.formatMessage({id:"54B7+u",defaultMessage:"Date taken"}),createDate:i.intl.formatMessage({id:"+OuHm4",defaultMessage:"Date created"}),credits:i.intl.formatMessage({id:"WU02lX",defaultMessage:"Credits"}),dimensions:i.intl.formatMessage({id:"5fgW0C",defaultMessage:"Dimensions"}),resolution:i.intl.formatMessage({id:"wscUVd",defaultMessage:"Dots per inch"}),resolution_in_cm:i.intl.formatMessage({id:"P23mCt",defaultMessage:"Dots per CM"}),colorSpace:i.intl.formatMessage({id:"SHDDoj",defaultMessage:"Color profile"}),deviceMake:i.intl.formatMessage({id:"GkqUJK",defaultMessage:"Camera brand"}),deviceModel:i.intl.formatMessage({id:"EPx9jS",defaultMessage:"Camera model"}),lensModel:i.intl.formatMessage({id:"8+mL18",defaultMessage:"Lens"}),apertureValue:i.intl.formatMessage({id:"Hv/B/8",defaultMessage:"Aperture"}),exposureTime:i.intl.formatMessage({id:"5JRhFM",defaultMessage:"Shutter speed"}),focalLength:i.intl.formatMessage({id:"hKz/tt",defaultMessage:"Focal length"}),isoSpeed:i.intl.formatMessage({id:"c7J2CV",defaultMessage:"ISO"}),flash:i.intl.formatMessage({id:"WIBZO6",defaultMessage:"Flash"}),meteringMode:i.intl.formatMessage({id:"WbVH1z",defaultMessage:"Metering"}),whiteBalance:i.intl.formatMessage({id:"USKkbD",defaultMessage:"White balance"}),copyright:i.intl.formatMessage({id:"qQhzrN",defaultMessage:"Copyright"}),keywords:i.intl.formatMessage({id:"jNkBVA",defaultMessage:"Keywords"}),title:i.intl.formatMessage({id:"YyhVRN",defaultMessage:"Title"}),caption:i.intl.formatMessage({id:"1vHwyl",defaultMessage:"Caption"}),creator:i.intl.formatMessage({id:"Z5ApwP",defaultMessage:"Creator"}),artist:i.intl.formatMessage({id:"2mALcS",defaultMessage:"Artist"}),description:i.intl.formatMessage({id:"6hvXWm",defaultMessage:"Description"}),headline:i.intl.formatMessage({id:"1Y0IbU",defaultMessage:"Headline"}),licensorUrl:i.intl.formatMessage({id:"j6C1Hk",defaultMessage:"Licensor URL"}),orientation:i.intl.formatMessage({id:"oDAo/S",defaultMessage:"Orientation"}),usageRights:i.intl.formatMessage({id:"VUwfxH",defaultMessage:"Usage rights"}),category:i.intl.formatMessage({id:"KP48oN",defaultMessage:"PS category"}),userComments:i.intl.formatMessage({id:"tcqDgZ",defaultMessage:"User comments"})},t.OfficeMetadataNameFields={title:i.intl.formatMessage({id:"Ed/RQ2",defaultMessage:"Title"}),creator:i.intl.formatMessage({id:"TpJn8o",defaultMessage:"Owner"}),company:i.intl.formatMessage({id:"WRzvI1",defaultMessage:"Company"}),subject:i.intl.formatMessage({id:"NL8ygk",defaultMessage:"Subject"}),keywords:i.intl.formatMessage({id:"a8+LVV",defaultMessage:"Keywords"}),description:i.intl.formatMessage({id:"yGgaIu",defaultMessage:"Description"}),totalEditTime:i.intl.formatMessage({id:"BLmrgy",defaultMessage:"Total edit time"}),pages:i.intl.formatMessage({id:"ZRy2A0",defaultMessage:"Pages"}),words:i.intl.formatMessage({id:"RLrbhp",defaultMessage:"Words"}),slides:i.intl.formatMessage({id:"2dpvY4",defaultMessage:"Slides"})},t.PdfMetadataNameFields={pages:i.intl.formatMessage({id:"359sgS",defaultMessage:"Pages"}),dimensions:i.intl.formatMessage({id:"/8h7s8",defaultMessage:"Dimensions"})},t.AudioMetadataNameFields={capture_date:i.intl.formatMessage({id:"u68XIJ",defaultMessage:"Creation Time"}),channels:i.intl.formatMessage({id:"0Fq1H6",defaultMessage:"Channels"}),codec:i.intl.formatMessage({id:"RNXXOq",defaultMessage:"Codec"}),duration:i.intl.formatMessage({id:"A4boBS",defaultMessage:"Duration"}),bit_rate:i.intl.formatMessage({id:"TtPMcl",defaultMessage:"Bit Rate"}),sampling_rate:i.intl.formatMessage({id:"Cwkfdc",defaultMessage:"Sampling Rate"}),bits_per_sample:i.intl.formatMessage({id:"lxspej",defaultMessage:"Bits Per Sample"})},t.VideoMetadataNameFields={creation_time:i.intl.formatMessage({id:"ACxSQZ",defaultMessage:"Creation Time"}),resolution:i.intl.formatMessage({id:"R+6yXm",defaultMessage:"Resolution"}),codec:i.intl.formatMessage({id:"H8C+fg",defaultMessage:"Codec"}),duration:i.intl.formatMessage({id:"loShlb",defaultMessage:"Duration"}),bit_rate:i.intl.formatMessage({id:"+GqSV/",defaultMessage:"Bit Rate"}),frame_rate:i.intl.formatMessage({id:"c9FloK",defaultMessage:"Frame Rate"}),audio:i.intl.formatMessage({id:"C1kd1L",defaultMessage:"Audio"}),color_space:i.intl.formatMessage({id:"y7aJQC",defaultMessage:"Color Space"}),device:i.intl.formatMessage({id:"3RkPzL",defaultMessage:"Capturing Device"}),aspect_ratio:i.intl.formatMessage({id:"RaCxiO",defaultMessage:"Aspect Ratio"})},t.FileMetadataSectionHeaders={uploadInfo:i.intl.formatMessage({id:"hPTQqd",defaultMessage:"Dropbox details"}),imageFiletypeInfo:i.intl.formatMessage({id:"BYkDpN",defaultMessage:"Image details"}),officeFiletypeInfo:i.intl.formatMessage({id:"ZkRFrQ",defaultMessage:"Microsoft details"}),PdfFiletypeInfo:i.intl.formatMessage({id:"0+1lU5",defaultMessage:"PDF details"}),AudioFiletypeInfo:i.intl.formatMessage({id:"Xti6fG",defaultMessage:"Audio details"}),VideoFiletypeInfo:i.intl.formatMessage({id:"2RxOOZ",defaultMessage:"Video details"})}})),define("modules/clean/react/file_metadata/utils",["require","exports","modules/core/i18n","modules/clean/file_store/utils","modules/clean/display_format","modules/clean/react/file_metadata/constants","modules/clean/react/file_metadata/strings","typescript/libraries/dbx-i18n/src/index","modules/constants/time"],(function(e,t,i,n,a,r,o,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAudioSpecificDataFields=t.getVideoSpecificDataFields=t.formatAudioforVideoMetadata=t.getPDFSpecificDataFields=t.getOfficeSpecificDataFields=t.getImageSpecificDataFields=t.getUploadInfoDataFields=t.getFileModifier=t.getSharedFileOwner=t.formatTotalEditTimeMinutes=t.formatMediaDuration=t.formatOriginalDate=t.formatFocalLength=t.formatAperture=t.formatExposureTime=t.formatImageResolutions=t.formatImageDimensions=void 0,t.formatImageDimensions=(e,t)=>{if(void 0!==e&&void 0!==t)return i.intl.formatMessage({id:"P63UMO",defaultMessage:"{width} x {height}"},{width:e,height:t})},t.formatImageResolutions=(e,t)=>{if(void 0!==e&&void 0!==t)return i.intl.formatMessage({id:"6A4kNh",defaultMessage:"{width} x {height}"},{width:e,height:t})},t.formatExposureTime=e=>{if(!e)return;let t=e;if(-1===e.indexOf("/")){const n=parseFloat(e);if(isNaN(n))return;t=n<1?i.intl.formatNumber(n,{minimumFractionDigits:2,maximumFractionDigits:2}):i.intl.formatNumber(n,{minimumFractionDigits:1,maximumFractionDigits:1})}return i.intl.formatMessage({id:"ZbTwYS",defaultMessage:"{exposure_time} s"},{exposure_time:t})},t.formatAperture=e=>{if(e){const t=i.intl.formatNumber(e,{minimumFractionDigits:1,maximumFractionDigits:1});return i.intl.formatMessage({id:"WOwRDU",defaultMessage:"f/{aperture}"},{aperture:t})}},t.formatFocalLength=e=>{if(!e)return;const t=parseFloat(e);if(isNaN(t))return;const n=i.intl.formatNumber(t,{minimumFractionDigits:1,maximumFractionDigits:1});return i.intl.formatMessage({id:"BTHLkw",defaultMessage:"{focal_length} mm"},{focal_length:n})},t.formatOriginalDate=e=>{if(e){const t=new Date(e);return i.intl.formatDate(t,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})}},t.formatMediaDuration=e=>{if(!e)return;if(isNaN(e)||e<=0)return;const t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=e-3600*t-60*i,a=e=>e<10?`0${e}`:String(e);return a(t)+":"+a(i)+":"+a(n)},t.formatTotalEditTimeMinutes=e=>{if(!e)return;if(isNaN(e)||e<=0)return;const t=60*e;let n;return t<r.SECONDS_MAX?(n=Math.round(t),i.intl.formatMessage({id:"ILTzDF",defaultMessage:"{count, plural, one{{count} second} other{{count} seconds}}"},{count:n})):t<r.MINUTES_MAX?(n=Math.round(t/60),i.intl.formatMessage({id:"wWAI7P",defaultMessage:"{count, plural, one{{count} minute} other{{count} minutes}}"},{count:n})):t<r.HOURS_MAX?(n=Math.round(t/3600),i.intl.formatMessage({id:"MVNTYK",defaultMessage:"{count, plural, one{{count} hour} other{{count} hours}}"},{count:n})):t<r.DAYS_MAX?(n=Math.round(t/86400),i.intl.formatMessage({id:"6xuQhu",defaultMessage:"{count, plural, one{{count} day} other{{count} days}}"},{count:n})):t<r.WEEKS_MAX?(n=Math.round(t/604800),i.intl.formatMessage({id:"Lpz5Sz",defaultMessage:"{count, plural, one{{count} week} other{{count} weeks}}"},{count:n})):t<r.MONTHS_MAX?(n=Math.round(t/2592e3),i.intl.formatMessage({id:"TQh9Oq",defaultMessage:"{count, plural, one{{count} month} other{{count} months}}"},{count:n})):(n=Math.round(t/31536e3),i.intl.formatMessage({id:"e6/qJD",defaultMessage:"{count, plural, one{{count} year} other{{count} years}}"},{count:n}))},t.getSharedFileOwner=e=>{const{ownerName:t,ownerTeamName:i}=e;if(i)return t?`${t} (${i})`:i},t.getFileModifier=e=>{const t=e.last_modified_name;if(e.ts){if(2===e.event_type){const n=s.timeSince(i.intl,1e3*e.ts,{displayLocation:"list",timeZone:l.TIMEZONE});return t?i.intl.formatMessage({id:"KzqBY1",defaultMessage:"{modifier} edited {time}"},{modifier:t,time:n}):i.intl.formatMessage({id:"NQz5Zf",defaultMessage:"You edited {time}"},{time:n})}return s.timeSince(i.intl,1e3*e.ts,{displayLocation:"list",timeZone:l.TIMEZONE})}},t.getUploadInfoDataFields=(e,r,d)=>[{name:o.UploadInfoNameFields.uploadedBy,value:e?e.displayName:void 0},{name:o.UploadInfoNameFields.dateUploaded,value:e&&e.uploadDate?s.timeSince(i.intl,new Date(e.uploadDate),{displayLocation:"list",timeZone:l.TIMEZONE}):void 0},{name:r?o.UploadInfoNameFields.from:o.UploadInfoNameFields.lastModified,value:r?t.getSharedFileOwner(r):t.getFileModifier(d)},{name:o.UploadInfoNameFields.extension,value:n.getExtension(d)},{name:o.UploadInfoNameFields.size,value:d.bytes?a.format_bytes(d.bytes):void 0}],t.getImageSpecificDataFields=e=>[{name:o.ImageMetadataNameFields.description,value:e.description},{name:o.ImageMetadataNameFields.copyright,value:e.copyright},{name:o.ImageMetadataNameFields.keywords,value:e.keywords},{name:o.ImageMetadataNameFields.captureDate,value:t.formatOriginalDate(e.date_time_original)},{name:o.ImageMetadataNameFields.createDate,value:t.formatOriginalDate(e.create_date)},{name:o.ImageMetadataNameFields.dimensions,value:t.formatImageDimensions(e.image_width,e.image_height)},{name:o.ImageMetadataNameFields.resolution,value:e.resolution_unit!==r.ResolutionUnit.CM?t.formatImageResolutions(e.x_resolution,e.y_resolution):void 0},{name:o.ImageMetadataNameFields.resolution_in_cm,value:e.resolution_unit===r.ResolutionUnit.CM?t.formatImageResolutions(e.x_resolution,e.y_resolution):void 0},{name:o.ImageMetadataNameFields.colorSpace,value:void 0!==e.colorspace?o.ColorSpaceSetting[e.colorspace]:void 0},{name:o.ImageMetadataNameFields.orientation,value:void 0!==e.orientation?o.OrientationCopy[e.orientation]:void 0},{name:o.ImageMetadataNameFields.title,value:e.title},{name:o.ImageMetadataNameFields.caption,value:e.caption},{name:o.ImageMetadataNameFields.creator,value:e.creator},{name:o.ImageMetadataNameFields.artist,value:e.credit},{name:o.ImageMetadataNameFields.headline,value:e.headline},{name:o.ImageMetadataNameFields.credits,value:e.credits},{name:o.ImageMetadataNameFields.licensorUrl,value:e.licensor_url},{name:o.ImageMetadataNameFields.usageRights,value:e.rights_usage_terms},{name:o.ImageMetadataNameFields.category,value:e.category},{name:o.ImageMetadataNameFields.userComments,value:e.user_comments},{name:o.ImageMetadataNameFields.deviceMake,value:e.camera_make},{name:o.ImageMetadataNameFields.deviceModel,value:e.camera_model},{name:o.ImageMetadataNameFields.lensModel,value:e.lens_model},{name:o.ImageMetadataNameFields.focalLength,value:t.formatFocalLength(e.focal_length)},{name:o.ImageMetadataNameFields.exposureTime,value:t.formatExposureTime(e.exposure_time)},{name:o.ImageMetadataNameFields.apertureValue,value:t.formatAperture(e.aperture_value)},{name:o.ImageMetadataNameFields.isoSpeed,value:void 0!==e.iso_speed?String(e.iso_speed):void 0},{name:o.ImageMetadataNameFields.meteringMode,value:void 0!==e.metering_mode?o.MeteringModeSetting[e.metering_mode]:void 0},{name:o.ImageMetadataNameFields.flash,value:void 0!==e.flash?o.FlashSetting[e.flash]:void 0},{name:o.ImageMetadataNameFields.whiteBalance,value:void 0!==e.white_balance?o.WhiteBalanceSetting[e.white_balance]:void 0}],t.getOfficeSpecificDataFields=e=>[{name:o.OfficeMetadataNameFields.title,value:e.title},{name:o.OfficeMetadataNameFields.creator,value:e.creator},{name:o.OfficeMetadataNameFields.company,value:e.company},{name:o.OfficeMetadataNameFields.subject,value:e.subject},{name:o.OfficeMetadataNameFields.keywords,value:e.keywords},{name:o.OfficeMetadataNameFields.description,value:e.description},{name:o.OfficeMetadataNameFields.totalEditTime,value:t.formatTotalEditTimeMinutes(e.total_edit_time_minutes)},{name:o.OfficeMetadataNameFields.pages,value:e.pages?i.intl.formatNumber(e.pages,{maximumFractionDigits:0}):void 0},{name:o.OfficeMetadataNameFields.words,value:e.words?i.intl.formatNumber(e.words,{maximumFractionDigits:0}):void 0},{name:o.OfficeMetadataNameFields.slides,value:e.slides?i.intl.formatNumber(e.slides,{maximumFractionDigits:0}):void 0}],t.getPDFSpecificDataFields=e=>[{name:o.PdfMetadataNameFields.pages,value:e.pages},{name:o.PdfMetadataNameFields.dimensions,value:`${e.width}x${e.height}`}],t.formatAudioforVideoMetadata=e=>e.audio_freq?`${Number(e.audio_freq)/1e3} kHz ${e.audio_chan_layout}`:e.audio_chan_layout?`${Number(e.audio_freq)/1e3} kHz`:void 0,t.getVideoSpecificDataFields=e=>[{name:o.VideoMetadataNameFields.creation_time,value:t.formatOriginalDate(e.capture_date)},{name:o.VideoMetadataNameFields.device,value:e.device},{name:o.VideoMetadataNameFields.resolution,value:`${e.resolution_width}x${e.resolution_height}`},{name:o.VideoMetadataNameFields.aspect_ratio,value:e.aspect_ratio},{name:o.VideoMetadataNameFields.duration,value:t.formatMediaDuration(e.duration)},{name:o.VideoMetadataNameFields.frame_rate,value:`${e.frame_rate} fps`},{name:o.VideoMetadataNameFields.color_space,value:e.color_space},{name:o.VideoMetadataNameFields.bit_rate,value:String(Math.floor(e.bit_rate/1e3))+" kb/s"},{name:o.VideoMetadataNameFields.audio,value:t.formatAudioforVideoMetadata(e)},{name:o.VideoMetadataNameFields.codec,value:e.codec}],t.getAudioSpecificDataFields=e=>[{name:o.AudioMetadataNameFields.codec,value:e.codec},{name:o.AudioMetadataNameFields.sampling_rate,value:`${Number(e.sampling_rate)/1e3} kHz`},{name:o.AudioMetadataNameFields.duration,value:t.formatMediaDuration(e.duration)},{name:o.AudioMetadataNameFields.channels,value:e.channels},{name:o.AudioMetadataNameFields.bit_rate,value:String(Math.floor(e.bit_rate/1e3))+" kb/s"}]})),define("modules/clean/react/file_sidebar/store/app/reducer",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.INITIAL_STATE=void 0,t.INITIAL_STATE={hideComments:!1,hidePageChrome:!1},t.reducer=function(e=t.INITIAL_STATE,i){switch(i.type){case"APP_SET_STATE":const{hideComments:t,hidePageChrome:n}=i;return Object.assign(Object.assign({},e),{hideComments:t,hidePageChrome:n})}return e}})),define("modules/clean/react/file_sidebar/store/file_activity/actions",["require","exports","tslib","modules/clean/react/file_sidebar/store/file_activity/selectors","modules/clean/react/file_sidebar/store/file_activity/api"],(function(e,t,i,n,a){"use strict";function r(e){return{type:"FILE_ACTIVITY|RECEIVE_STREAM_ERROR",error:e}}function o(e,t){return{type:"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY",activities:e,enabled:t}}function s(e,t){return{type:"FILE_ACTIVITY|LOADING_START",userId:e,file:t}}function l(e){return{type:"FILE_ACTIVITY|LOADING_END",state:e}}function d(){return{type:"FILE_ACTIVITY|RESET_FILE_STATE"}}function c(e,t){return(e.file?e.file.file_id:-1)!==(t.file?t.file.file_id:-1)||e.userId!==t.userId}Object.defineProperty(t,"__esModule",{value:!0}),t.getActivityStream=t.resetFileState=t.reset=t.loadingEnd=t.loadingStart=t.receiveFileActivity=t.receiveStreamError=t.api=void 0,n=i.__importStar(n),t.api={create:e=>new a.FileActivityStreamApi(e)},t.receiveStreamError=r,t.receiveFileActivity=o,t.loadingStart=s,t.loadingEnd=l,t.reset=function(){return{type:"FILE_ACTIVITY|RESET"}},t.resetFileState=d;let u=0;t.getActivityStream=function(e,i){return(a,d)=>{if(!c({file:i,userId:e},n.getContext(d())))return;const m=t.api.create(e);a({type:"FILE_ACTIVITY|RESET_FILE_STATE"}),a(s(e,i));const p=++u,f=i.file_id;return m.getActivityStream(f).then(({enabled:t,activity_group:r})=>{c({file:i,userId:e},n.getContext(d()))||a(o(r,t))}).catch(e=>{p===u&&a(r(e))}).then(()=>{p===u&&a(l(n.getState(d())))})}}})),define("modules/clean/react/file_sidebar/store/file_activity/activity_sorted_set",["require","exports","modules/clean/react/file_sidebar/store/file_activity/sorted_set"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivitySortedSet=void 0;class n extends i.SortedSet{static compare(e,t){return e.id===t.id?0:t.timestamp.getTime()-e.timestamp.getTime()}static equals(e,t){return e.id===t.id}constructor(e=[]){super(e,n.compare,n.equals)}}t.ActivitySortedSet=n})),define("modules/clean/react/file_sidebar/store/file_activity/api",["require","exports","tslib","lodash","api_v2/user_client"],(function(e,t,i,n,a){"use strict";function r(e,t,i,n){return".tag"===t?0===n?["type",i]:i in e?i:[null,i]:i}function o(e,t,i,n){return"string"==typeof i&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(i)?new Date(i):i}function s(e,t,i=0){return Array.isArray(e)?e.map(e=>s(e,t,i+1)):n.isObject(e)?Object.keys(e).reduce((a,r)=>{const o=e[r];if(Array.isArray(o)||n.isObject(o))a[r]=s(o,t,i+1);else{const n=t(e,r,o,i);if(Array.isArray(n)){if(null===n[0])return n[1];a[n[0]]=n[1]}else a[r]=n}return a},{}):t(null,"",e,i)}function l(e){return s(s(e,r),o)}function d(e){return Object.assign(Object.assign({},l(e.activities[0])),{groupActivities:e.activities.map(l),isGroup:!0})}Object.defineProperty(t,"__esModule",{value:!0}),t.FileActivityStreamApi=t.parseGroupActivity=t.parseActivity=void 0,n=i.__importStar(n),t.parseActivity=l,t.parseGroupActivity=d;t.FileActivityStreamApi=class{constructor(e){this.userId=e,this.client=new a.UserApiV2Client}getActivityStream(e){return this.client.ns("file_activity_stream").rpc("get_activity_stream",{file_path_or_id:e},{subjectUserId:this.userId}).then(e=>({enabled:e.enabled,activity_group:(e.activity_group||[]).map(d)}))}}})),define("modules/clean/react/file_sidebar/store/file_activity/reducer",["require","exports","modules/clean/react/file_sidebar/store/file_activity/activity_sorted_set"],(function(e,t,i){"use strict";function n(e){return e.map(e=>e.isGroup&&1===e.groupActivities.length?e.groupActivities[0]:e)}Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.ungroupSingleActivityGroups=t.INITIAL_STATE=void 0,t.INITIAL_STATE={activities:{error:void 0,loaded:!1,loading:!1,value:[]},enabled:!1,userId:-1},t.ungroupSingleActivityGroups=n,t.reducer=function(e=t.INITIAL_STATE,a){switch(a.type){case"FILE_ACTIVITY|RESET":return Object.assign({},t.INITIAL_STATE);case"FILE_ACTIVITY|RESET_FILE_STATE":return Object.assign(Object.assign({},e),{activities:t.INITIAL_STATE.activities});case"FILE_ACTIVITY|LOADING_START":return Object.assign(Object.assign({},e),{activities:Object.assign(Object.assign({},e.activities),{error:void 0,loading:!0}),userId:a.userId,file:a.file});case"FILE_ACTIVITY|LOADING_END":return Object.assign(Object.assign({},e),{activities:Object.assign(Object.assign({},e.activities),{loaded:!0,loading:!1})});case"FILE_ACTIVITY|RECEIVE_FILE_ACTIVITY":const r=a.enabled?new i.ActivitySortedSet([...e.activities.value,...n(a.activities)]).toArray():[];return Object.assign(Object.assign({},e),{activities:Object.assign(Object.assign({},e.activities),{value:r}),enabled:a.enabled});case"FILE_ACTIVITY|RECEIVE_STREAM_ERROR":return Object.assign(Object.assign({},e),{activities:Object.assign(Object.assign({},e.activities),{error:a.error})})}return e}})),define("modules/clean/react/file_sidebar/store/file_activity/selectors",["require","exports"],(function(e,t){"use strict";function i(e){return e.fileActivity}function n(e){return i(e).activities.value}function a(e){return i(e).file}function r(e){return i(e).userId}Object.defineProperty(t,"__esModule",{value:!0}),t.isActivityEnabled=t.getContext=t.getUserId=t.getFile=t.getVisibleActivityCount=t.getActivitiesMetadata=t.getActivities=t.getState=void 0,t.getState=i,t.getActivities=n,t.getActivitiesMetadata=function(e){return i(e).activities},t.getVisibleActivityCount=function(e){return n(e).length},t.getFile=a,t.getUserId=r,t.getContext=function(e){return{file:a(e),userId:r(e)}},t.isActivityEnabled=function(e){return i(e).enabled}})),define("modules/clean/react/file_sidebar/store/file_activity/sorted_set",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortedSet=void 0;t.SortedSet=class{constructor(e=[],t,i){this.items=[],this.compare=t,this.equals=i,this.add(e)}add(e){Array.isArray(e)||(e=[e]);const t=this.items.concat(e);return t.sort(this.compare),this.items=t.filter((e,t,i)=>0===t||!this.equals(e,i[t-1])),this}toArray(){return Array.prototype.slice.call(this.items)}}})),define("modules/clean/react/file_sidebar/store/middleware/reactor",["require","exports","modules/clean/shallow_equal"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reactor=void 0;const n=(e,t)=>i.shallowEqual(e,t);t.reactor=function(...e){const t=[];function i(e,i,a=n){let r;if((function(e){return"function"==typeof e.changes})(e))r=(t,i)=>({changed:e.changes(t,i)});else if((function(e){return"function"==typeof e.changesIn})(e))r=(t,i)=>{const n=e.changesIn(t),r=e.changesIn(i);return{prevValue:n,nextValue:r,changed:!a(n,r)}};else{if(!(function(e){return"function"==typeof e.changesFrom&&"function"==typeof e.changesTo})(e))throw new Error;r=(t,i)=>{const n=e.changesFrom(t),a=e.changesTo(i);return{changed:n&&a}}}t.push({checkForChange:r,onChange:i})}for(const t of e)t(i);return({getState:e})=>i=>n=>{const a=e(),r=i(n),o=e();for(const e of t){const{prevValue:t,nextValue:i,changed:n}=e.checkForChange(a,o);n&&e.onChange({nextValue:i,prevValue:t,nextState:o,prevState:a})}return r}}})),define("modules/clean/react/file_sidebar/store/middleware/thunk",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thunk=void 0,t.thunk=function(){return({dispatch:e,getState:t})=>i=>n=>"function"==typeof n?n(e,t):i(n)}})),define("modules/clean/react/file_sidebar/store/sidebar/helpers",["require","exports","modules/clean/file_store/utils"],(function(e,t,i){"use strict";function n(e,t){return!e&&!t||!!e&&!!t&&i.areFilesEqual(e,t)}function a(e,t){return!e&&!t||!!e&&!!t&&e.id===t.id}Object.defineProperty(t,"__esModule",{value:!0}),t.isContextChanged=t.isUserSame=t.isFileSame=void 0,t.isFileSame=n,t.isUserSame=a,t.isContextChanged=function(e,t){return!n(e.file,t.file)||!a(e.user,t.user)}})),define("modules/clean/react/file_sidebar/store/sidebar/reducer",["require","exports","modules/clean/react/file_sidebar/store/sidebar/types"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.INITIAL_STATE=void 0,t.INITIAL_STATE={activeTab:"comments",open:!0,openReason:void 0,ready:!1,context:{file:void 0,isVersionHistoryMode:void 0,user:void 0},tabs:{activity:{ready:!1,show:!1,count:0},comments:{ready:!1,show:!1,count:0,extra:{commentCount:0}},metadata:{ready:!1,show:!1}},hasOverride:!1,thirdpartyBlueDotOnboarded:!1},t.reducer=function(e=t.INITIAL_STATE,n){const a=(function(e,n){switch(n.type){case i.ActionType.SidebarOverrideInitialState:{const{open:t,tab:i}=n.payload;return Object.assign(Object.assign({},e),{open:t,activeTab:i,tabs:Object.assign(Object.assign({},e.tabs),{[i]:Object.assign(Object.assign({},e.tabs[i]),{show:!0})}),hasOverride:!0})}case i.ActionType.SidebarReset:return Object.assign(Object.assign({},t.INITIAL_STATE),{open:e.open});case i.ActionType.SidebarOpen:return Object.assign(Object.assign({},e),{open:!0,openReason:n.payload.reason});case i.ActionType.SidebarClose:return Object.assign(Object.assign({},e),{open:!1,openReason:void 0});case i.ActionType.SidebarSelectTab:return Object.assign(Object.assign({},e),{activeTab:n.payload.tabName});case i.ActionType.SidebarSetThirdPartyBlueDotOnboardState:return Object.assign(Object.assign({},e),{thirdpartyBlueDotOnboarded:!0});case i.ActionType.SidebarOpenFile:const{file:a,isVersionHistoryMode:r,user:o}=n.payload;return Object.assign(Object.assign({},e),{openReason:void 0,context:{file:a,isVersionHistoryMode:r,user:o},tabs:{activity:{ready:!o,show:!1===r&&e.tabs.activity.show,count:0},comments:{ready:!1,show:!1,count:0,extra:{commentCount:0}},metadata:{ready:!1,show:!0}}});case"FILE_ACTIVITY|LOADING_END":return Object.assign(Object.assign({},e),{tabs:Object.assign(Object.assign({},e.tabs),{activity:{ready:!0,show:!1===e.context.isVersionHistoryMode&&n.state.enabled,count:0}})});case i.ActionType.SidebarSetComments2DisabledState:return Object.assign(Object.assign({},e),{tabs:Object.assign(Object.assign({},e.tabs),{comments:{ready:!0,show:!1,count:0,extra:{commentCount:0}}})});case i.ActionType.SidebarSetComments2ShownState:return Object.assign(Object.assign({},e),{activeTab:e.hasOverride?e.activeTab:"comments",tabs:Object.assign(Object.assign({},e.tabs),{comments:{ready:!0,show:!e.hasOverride||e.tabs.comments.show,count:0,extra:{commentCount:n.payload.commentCount}}})});case i.ActionType.SidebarIndicateNewFileNav:return Object.assign(Object.assign({},e),{tabs:Object.assign(Object.assign({},e.tabs),{comments:{ready:!1,show:!0,count:0,extra:{commentCount:0}}})})}return e})(e,n);return a.ready=e.ready||a.tabs.activity.ready&&a.tabs.comments.ready,e.ready||!a.ready||e.hasOverride||(a.tabs.comments.show&&!a.tabs.activity.show?a.activeTab="comments":!a.tabs.comments.show&&a.tabs.activity.show&&(a.activeTab="activity"),a.tabs.comments.show&&a.tabs.comments.count>0&&(a.open=!0,a.openReason=a.openReason||"unread_comments",a.activeTab="comments"),a.tabs.comments.show&&a.tabs.comments.extra&&a.tabs.comments.extra.commentCount>0&&(a.open=!0,a.openReason=a.openReason||"comments2_unresolved_threads",a.activeTab="comments")),a.ready&&a.open&&!a.openReason&&(a.openReason="sticky_state"),a}})),define("modules/clean/react/file_sidebar/store/sidebar/selectors",["require","exports"],(function(e,t){"use strict";function i(e){return e.sidebar}function n(e){return i(e).tabs}Object.defineProperty(t,"__esModule",{value:!0}),t.getThirdPartyBlueDotOnboardedState=t.getTabState=t.getTabsState=t.getSidebarContext=t.getOpenReason=t.getSidebarState=t.getState=void 0,t.getState=i,t.getSidebarState=function(e){const{activeTab:t,open:n,openReason:a,ready:r}=i(e);return{activeTab:t,open:n,openReason:a,ready:r}},t.getOpenReason=function(e){return i(e).openReason},t.getSidebarContext=function(e){return i(e).context},t.getTabsState=n,t.getTabState=function(e,t){return n(e)[t]},t.getThirdPartyBlueDotOnboardedState=function(e){return i(e).thirdpartyBlueDotOnboarded}})),define("modules/clean/react/file_sidebar/store/sidebar/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionType=void 0,(function(e){e.SidebarOpen="SIDEBAR|OPEN",e.SidebarReset="SIDEBAR|RESET",e.SidebarClose="SIDEBAR|CLOSE",e.SidebarSelectTab="SIDEBAR|SELECT_TAB",e.SidebarOpenFile="SIDEBAR|OPEN_FILE",e.SidebarToggle="SIDEBAR|TOGGLE",e.SidebarIndicateNewFileNav="SIDEBAR|INDICATE_NEW_FILE_NAV",e.SidebarSetComments2DisabledState="SIDEBAR|SET_COMMENTS2_DISABLED_STATE",e.SidebarSetComments2ShownState="SIDEBAR|SET_COMMENTS2_SHOWN_STATE",e.SidebarSetThirdPartyBlueDotOnboardState="SIDEBAR|SET_THIRDPARTY_BLUEDOT_ONBOARDED_STATE",e.SidebarOverrideInitialState="SIDEBAR|OVERRIDE_INITIAL_STATE"})(t.ActionType||(t.ActionType={}))}));__createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/react/previews/archive/preview_archive_loadable",["require","exports","modules/clean/react/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewArchiveLoadable=void 0,t.PreviewArchiveLoadable=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/previews/archive/preview_archive"],t,i)}).then(__importStar).then(({PreviewArchive:e})=>e)})})),define("modules/clean/react/previews/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THRESHOLD_TEXT_SECOND_BATCH=t.TEXT_FIRST_BATCH_SIZE=t.PreviewToolbarButtonType=t.PreviewSessionEndReason=t.PreviewSourceAction=t.PreviewSourceContext=t.ErrorType=void 0,(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR",e.WatermarkingError="WATERMARKING_ERROR",e.UpsellError="UPSELL_ERROR",e.UnknownError="UNKNOWN_ERROR"})(t.ErrorType||(t.ErrorType={})),(function(e){e.Browse="browse",e.Home="home",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file",e.Workflow="workflow",e.TrelloPreview="trello_preview",e.FileLocking="file_locking",e.Search="search",e.Recents="recents",e.Starred="starred",e.StandalonePreview="standalone_preview",e.Photos="photos",e.Collections="collections",e.Hellosign="hellosign",e.Commerce="commerce",e.Transfer="transfer",e.PdfEditor="pdf_editor"})(t.PreviewSourceContext||(t.PreviewSourceContext={})),(function(e){e.Visit="visit",e.Click="click",e.FileViewerExit="file_viewer_exit"})(t.PreviewSourceAction||(t.PreviewSourceAction={})),(function(e){e.Unknown="unknown",e.NewFile="new_file",e.BeforeUnload="before_unload",e.Unmount="unmount"})(t.PreviewSessionEndReason||(t.PreviewSessionEndReason={})),(function(e){e.EnableRegionCreation="EnableRegionCreation",e.Fullscreen="Fullscreen",e.PageDown="PageDown",e.PageIndicator="PageIndicator",e.PageUp="PageUp",e.Print="Print",e.Sidebar="Sidebar",e.ZoomIn="ZoomIn",e.ZoomOut="ZoomOut",e.FlipControls="FlipControls"})(t.PreviewToolbarButtonType||(t.PreviewToolbarButtonType={})),t.TEXT_FIRST_BATCH_SIZE=10,t.THRESHOLD_TEXT_SECOND_BATCH=7})),define("modules/clean/react/previews/error/file_info",["require","exports","tslib","react","modules/clean/display_format"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewErrorFileInfo=void 0,n=i.__importDefault(n),t.PreviewErrorFileInfo=e=>{const{bytes:t,filename:i}=e;return n.default.createElement("div",{className:"preview-error__info"},i,void 0!==t?n.default.createElement("span",null,n.default.createElement("span",{className:"bottom-dot"}," · "),a.format_bytes(t)):null)}})),define("modules/clean/react/previews/error/image",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/components/css","modules/clean/react/previews/constants"],(function(e,t,i,n,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewErrorImage=void 0,n=i.__importDefault(n);const s=r.requireCssWithComponent(a.Loadable({loader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{BulletinBoardSpot:t}=yield new Promise((t,i)=>{e(["dig-illustrations/spot/bulletin-board"],t,i)}).then(i.__importStar);return t}))}),["/static/css/dig-illustrations/index.web-vflCpkDG_.css"]),l=r.requireCssWithComponent(a.Loadable({loader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{PasscodeLockSpot:t}=yield new Promise((t,i)=>{e(["dig-illustrations/spot/passcode-lock"],t,i)}).then(i.__importStar);return t}))}),["/static/css/dig-illustrations/index.web-vflCpkDG_.css"]),d=r.requireCssWithComponent(a.Loadable({loader:()=>i.__awaiter(void 0,void 0,void 0,(function*(){const{LookMagnifyingGlassSpot:t}=yield new Promise((t,i)=>{e(["dig-illustrations/spot/look-magnifying-glass"],t,i)}).then(i.__importStar);return t}))}),["/static/css/dig-illustrations/index.web-vflCpkDG_.css"]);t.PreviewErrorImage=e=>{const{errorType:t}=e;let i;switch(t){case o.ErrorType.PendingUploadError:i=n.default.createElement(s,null);break;case o.ErrorType.PasswordProtectedError:i=n.default.createElement(l,null);break;case o.ErrorType.ExtensionError:case o.ErrorType.FileSizeError:case o.ErrorType.NeedFlashError:case o.ErrorType.SymLinkError:case o.ErrorType.EmptyFileError:case o.ErrorType.WatermarkingError:case o.ErrorType.LoadError:default:i=n.default.createElement(d,null)}return n.default.createElement("div",{className:"u-mar-bottom-s preview-error__image"},i)},t.PreviewErrorImage.displayName="PreviewErrorImage"})),define("modules/clean/react/previews/error/message",["require","exports","tslib","react","react-intl","modules/clean/file_store/utils","modules/clean/react/previews/constants","modules/core/i18n","modules/clean/previews/data/preview_type_util","modules/clean/previews/util","modules/clean/display_format","modules/constants/trademark"],(function(e,t,i,n,a,r,o,s,l,d,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewErrorMessage=void 0,n=i.__importDefault(n),l=i.__importStar(l),t.PreviewErrorMessage=e=>{let t;const i=e.file?r.getExtension(e.file):void 0;if(e.message)t=e.message;else switch(e.errorType){case o.ErrorType.PendingUploadError:t=s.intl.formatMessage({id:"FMgHvt",defaultMessage:"File is uploading..."});break;case o.ErrorType.EmptyFileError:t=s.intl.formatMessage({id:"60uLrP",defaultMessage:"Empty files can’t be previewed"});break;case o.ErrorType.ExtensionError:if(!e.file)throw new Error("Extension error requires a file prop");if(i){const o=r.isArchiveFile(e.file)&&e.preview?a.defineMessage({id:"km+4dK",defaultMessage:"<span>.{extension}</span> files can’t be previewed from an archive file."}):a.defineMessage({id:"SCuIH+",defaultMessage:"<span>.{extension}</span> files can’t be previewed."});t=s.intl.formatMessage(o,{span:e=>n.default.createElement("span",{className:"preview-error__message--bold"},e),extension:i})}else t=s.intl.formatMessage({id:"8I3UCo",defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});break;case o.ErrorType.FileSizeError:const m=l.getPreviewType(e.preview),p=i&&m?d.getFileSizeLimit(i,m):void 0;t=p?s.intl.formatMessage({id:"SMqFsd",defaultMessage:"This file is too big to preview. {br} The maximum file size for <span>.{extension}</span> is <span>{limit}</span>"},{br:n.default.createElement("br",null),span:e=>n.default.createElement("span",{className:"preview-error__message--bold"},e),extension:i,limit:c.format_bytes(p)}):s.intl.formatMessage({id:"hhptWM",defaultMessage:"This file is too big to preview."});break;case o.ErrorType.PasswordProtectedError:t=i?s.intl.formatMessage({id:"mF3ymz",defaultMessage:"This <span>.{extension}</span> file is password-protected."},{span:e=>n.default.createElement("span",{className:"preview-error__message--bold"},e),extension:i}):s.intl.formatMessage({id:"ZwrDDI",defaultMessage:"This file is password-protected."});break;case o.ErrorType.NeedFlashError:t=s.intl.formatMessage({id:"GYFlxk",defaultMessage:"Install <a>Adobe Flash Player</a> to preview this video."},{a:e=>n.default.createElement("a",{href:"https://get.adobe.com/flashplayer/"},e)});break;case o.ErrorType.SymLinkError:t=s.intl.formatMessage({id:"VT66qw",defaultMessage:"SymLink files cannot be previewed."});break;case o.ErrorType.WatermarkingError:t=s.intl.formatMessage({id:"BahKtt",defaultMessage:"This file could not be watermarked."});break;case o.ErrorType.UpsellError:t=s.intl.formatMessage({id:"SRnMNM",defaultMessage:"<p>Can’t preview <span>.{extension}</span> files. {br}Upgrade to {trademark_professional} to preview more file types.</p>"},{br:n.default.createElement("br",null),p:e=>n.default.createElement("p",null,e),span:e=>n.default.createElement("span",{className:"preview-error__message--bold"},e),trademark_professional:u.TRADEMARK_PROFESSIONAL,extension:i});break;case o.ErrorType.LoadError:t=i?s.intl.formatMessage({id:"vpmO+U",defaultMessage:"<span>.{extension}</span> files are supported but something went wrong."},{span:e=>n.default.createElement("span",{className:"preview-error__message--bold"},e),extension:i}):s.intl.formatMessage({id:"L5RL4W",defaultMessage:"This file can’t be previewed."});break;default:t=s.intl.formatMessage({id:"PLJiGa",defaultMessage:"Something went wrong while previewing this file."})}return n.default.createElement("div",{className:"preview-error__message"},t)}})),define("modules/clean/react/previews/frame_messenger_host",["require","exports","typescript/libraries/file-viewer/src/libraries/frame_messenger/index"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewFrameMessengerHost=void 0;class n extends i.FrameMessengerHost{constructor(){const e=JSON.parse('["www.dropboxstatic.com", "cf.dropboxstatic.com", "cfl.dropboxstatic.com", "www.dropbox.com", "dl-web.dropbox.com", "dl.dropboxusercontent.com", "previews.dropboxusercontent.com", "previews.dropbox.com"]').map(e=>`https://${e}`);e.push("null"),e.push(RegExp(".*previews.*.dropboxusercontent.com")),super(e)}}t.PreviewFrameMessengerHost=n})),define("modules/clean/react/previews/image_helpers",["require","exports","tslib","modules/constants/python","modules/clean/photos/thumbnail_url_util"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.preloadImage=t.preloadResponsiveImage=t.getFallbackSrc=t.getSrcSet=t.IMG_SIZES_ATTR=void 0,n=i.__importStar(n);const r=[[480,320],[640,480],[800,600],[1024,768],[1280,960],[1600,1200],[2048,1536]];function o(e,t){let i;return i=t?r.filter(([e,i])=>e<=t[0]&&i<=t[1]):r,i.map(([t,i])=>a.thumbnailUrlForSize(e,t,i,n.THUMBNAIL_SIZE_MODE.ABSTRACT)+` ${t}w`).join(", ")}function s(e){return a.thumbnailUrlForSize(e,800,600,n.THUMBNAIL_SIZE_MODE.ABSTRACT)}function l(e,t){return new Promise((i,n)=>{const a=Date.now(),r=new Image;r.onload=()=>{i({started:a,completed:Date.now()})},r.onerror=()=>{n({started:a,failed:Date.now()})},t&&(t.srcset&&(r.srcset=t.srcset),t.sizes&&(r.sizes=t.sizes)),r.src=e})}t.IMG_SIZES_ATTR="90vw",t.getSrcSet=o,t.getFallbackSrc=s,t.preloadResponsiveImage=function(e){return l(s(e),{srcset:o(e),sizes:t.IMG_SIZES_ATTR})},t.preloadImage=l})),define("modules/clean/react/previews/loading_indicator",["require","exports","tslib","classnames","react"],(function(e,t,i,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingIndicator=void 0,n=i.__importDefault(n),a=i.__importDefault(a),t.LoadingIndicator=function(e){return a.default.createElement("div",{className:n.default("c-loader",e.className)})}})),define("modules/clean/react/previews/preview_pdf_loadable",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/components/css","modules/clean/react/previews/loading_indicator"],(function(e,t,i,n,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPDFLoadable=void 0,n=i.__importDefault(n);const s=a.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/previews/preview_pdf"],t,i)}).then(i.__importStar).then(({PreviewPDF:e})=>e),loading:({previewThumbnailUrl:e})=>e?n.default.createElement("div",{className:"preview-pdf-ssr"},n.default.createElement("div",{className:"preview-ssr-viewer"},n.default.createElement(o.LoadingIndicator,{className:"loading-indicator"}))):null}),l=r.requireCssWithComponent(s,["/static/css/preview_pdf-vfltZ12__.css","/static/css/snackbar-vfl4VTfgZ.css"]);t.PreviewPDFLoadable=l})),define("modules/clean/react/previews/preview_ppt_loadable",["require","exports","tslib","react","modules/clean/react/async/loadable","modules/clean/react/components/css","modules/clean/react/previews/loading_indicator"],(function(e,t,i,n,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewPPTLoadable=void 0,n=i.__importDefault(n);const s=a.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/previews/preview_ppt"],t,i)}).then(i.__importStar).then(({PreviewPPT:e})=>e),loading:({previewThumbnailUrl:e})=>e?n.default.createElement("div",{className:"preview-pdf-ssr"},n.default.createElement("div",{className:"preview-ssr-viewer"},n.default.createElement(o.LoadingIndicator,{className:"loading-indicator"}))):null}),l=r.requireCssWithComponent(s,["/static/css/preview_pdf-vfltZ12__.css","/static/css/snackbar-vfl4VTfgZ.css"]);t.PreviewPPTLoadable=l}));__createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/react/previews/preview_toolbar",["require","exports","modules/clean/react/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewToolbar=void 0,t.PreviewToolbar=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/previews/preview_toolbar_component"],t,i)}).then(__importStar).then(({PreviewToolbar:e})=>e)})})),define("modules/clean/react/previews/preview_toolbar_frame_messenger",["require","exports","tslib","react","modules/clean/react/previews/frame_messenger_host","modules/clean/previews/util"],(function(e,t,i,n,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewToolbarFrameMessenger=void 0,n=i.__importDefault(n),r=i.__importStar(r);const o=["idle-mouse","active-mouse"];class s extends n.default.Component{constructor(){super(...arguments),this.setupFrameMessenger=()=>{this.frameMessenger=new a.PreviewFrameMessengerHost,this.frameMessenger.configureChildMessaging(r.getIframeQuery(),this.handleMessageFromChild,o),this.frameMessenger.startListening(),this.frameMessenger.postMessageToChildren("preview-toolbar-mounted")},this.handleMessageFromChild=e=>{if((e=>o.includes(e.action))(e))switch(e.action){case"idle-mouse":this.props.idleMouse();break;case"active-mouse":this.props.activeMouse()}},this.teardownFrameMessenger=()=>{this.frameMessenger.resetOriginsForPosting(),this.frameMessenger.stopListening()}}componentDidMount(){this.setupFrameMessenger()}componentWillUnmount(){this.teardownFrameMessenger()}render(){return null}}t.PreviewToolbarFrameMessenger=s,s.displayName="PreviewToolbarFrameMessenger"})),define("modules/clean/react/previews/print_helpers",["require","exports","modules/core/i18n"],(function(e,t,i){"use strict";function n(e){return!(e&&e.canPrintRoles&&0===e.canPrintRoles.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrintTooltip=t.canPrint=void 0,t.canPrint=n,t.getPrintTooltip=function(e){return n(e)?i.intl.formatMessage({id:"WyIenC",defaultMessage:"Print"}):i.intl.formatMessage({id:"ZMJOlD",defaultMessage:"Printing is turned off for this file."})}})),define("modules/clean/react/previews/video/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QualityLabelOrder=t.HdLabels=void 0,t.HdLabels=["1080p","720p"],t.QualityLabelOrder=[...t.HdLabels,"480p","360p","240p","256k","192k","128k"].reverse()})),define("modules/clean/react/previews/video/utils",["require","exports","tslib","modules/core/browser_detection"],(function(e,t,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTechFromPlayer=t.video_type=t.showQualityNativeHls=void 0,n=i.__importStar(n),t.showQualityNativeHls=function(){return n.edge||n.safari};t.video_type=function(e){return"application/vnd.apple.mpegurl"},t.getTechFromPlayer=function(e){return e.tech({IWillNotUseThisInPlugins:!0})}}));__createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("modules/clean/react/share_download/button",["require","exports","modules/clean/react/async/loadable"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareDownloadButton=t.DownloadSimpleButton=void 0,t.DownloadSimpleButton=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/share_download/button_component"],t,i)}).then(__importStar).then(({DownloadSimpleButton:e})=>e)}),t.ShareDownloadButton=i.Loadable({loader:()=>new Promise((t,i)=>{e(["modules/clean/react/share_download/button_component"],t,i)}).then(__importStar).then(({ShareDownloadButton:e})=>e)})})),define("modules/clean/shallow_equal",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shallowEqualArray=t.shallowEqual=void 0;const i=Object.prototype.hasOwnProperty;function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.shallowEqual=function(e,t){if(n(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(let r=0;r<a.length;r++)if(!i.call(t,a[r])||!n(e[a[r]],t[a[r]]))return!1;return!0},t.shallowEqualArray=function(e,t){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}}));
//# sourceMappingURL=pkg-previews_core.min.js-vfldh2S1e.map
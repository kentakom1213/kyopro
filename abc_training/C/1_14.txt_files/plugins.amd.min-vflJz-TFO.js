define(["require","exports","typescript/libraries/file-viewer/src/plugins/shims","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/modes/types"],(function(e,i,t,r,s,l,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.pluginsMiddleware=void 0,i.pluginsMiddleware=e=>({dispatch:i,getState:o})=>c=>d=>{const a=e();if(0===a.length)return c(d);switch(d.type){case l.Action.ChangeMode:{const{fileViewerId:e,mode:r}=d.payload,u=o(),g=s.getCurrentPreviewKey(u,{fileViewerId:e}),p=t.getPluginFromMode(r),{sourceContext:w}=d.payload;return null!=p&&a.includes(p)?(i(l.setActiveRightRailPlugin({pluginId:p,fileViewerId:e,previewKey:g,sourceContext:w})),c(Object.assign(Object.assign({},d),{payload:Object.assign(Object.assign({},d.payload),{mode:n.FileViewerMode.Plugins})}))):(i(l.setActiveRightRailPlugin({pluginId:void 0,fileViewerId:e,previewKey:g,sourceContext:w})),c(d))}case l.Action.SetInitialFocus:{const{fileViewerId:e,mode:u}=d.payload,g=o(),p=s.getCurrentPreviewKey(g,{fileViewerId:e}),w=t.getPluginFromMode(u);return null!=w&&a.includes(w)?(i(l.setActiveRightRailPlugin({pluginId:w,fileViewerId:e,previewKey:p,sourceContext:r.UserActionContext.Sidebar})),c(l.setInitialFocus({previewKey:p,fileViewerId:e,mode:n.FileViewerMode.Plugins}))):c(d)}default:return c(d)}}}));
//# sourceMappingURL=plugins.amd.min.js-vfl-qNAtC.map
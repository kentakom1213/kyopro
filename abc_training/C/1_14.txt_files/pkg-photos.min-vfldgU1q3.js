define("dropbox/proto/js_init_data/photos_web/photos_web",["require","exports","tslib","protobufjs/minimal","dropbox/proto/js_init_data/web_timing_logger/web_timing_logger"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.photos_web=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s;t.default=a,t.photos_web=a.photos_web=((s=a.photos_web||{}).PhotosTimelinePageProps=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.blockHash="",e.prototype.isWebPhotosMultishare=!1,e.prototype.webTimingLoggerServerContext=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.blockHash&&Object.hasOwnProperty.call(e,"blockHash")&&t.uint32(18).string(e.blockHash),null!=e.isWebPhotosMultishare&&Object.hasOwnProperty.call(e,"isWebPhotosMultishare")&&t.uint32(24).bool(e.isWebPhotosMultishare),null!=e.webTimingLoggerServerContext&&Object.hasOwnProperty.call(e,"webTimingLoggerServerContext")&&a.web_timing_logger.WebTimingLoggerServerContext.encode(e.webTimingLoggerServerContext,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.photos_web.PhotosTimelinePageProps;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 2:n.blockHash=e.string();break;case 3:n.isWebPhotosMultishare=e.bool();break;case 4:n.webTimingLoggerServerContext=a.web_timing_logger.WebTimingLoggerServerContext.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/photos_web.PhotosTimelinePageProps"},e})(s.PhotosTimelinePageProps||{}),s)})),define("dropbox/proto/pap_events/photos/open_photo_preview",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Open_PhotoPreview=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Open_PhotoPreview;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Open_PhotoPreview"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e})(l.Open_PhotoPreview||{}),l),s)})),define("dropbox/proto/pap_events/photos/scroll_photos_page",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Scroll_PhotosPage=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.scrollDepth=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.scrollDepth&&Object.hasOwnProperty.call(e,"scrollDepth")&&t.uint32(16).int64(e.scrollDepth),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Scroll_PhotosPage;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;case 2:n.scrollDepth=e.int64();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Scroll_PhotosPage"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e})(l.Scroll_PhotosPage||{}),l),s)})),define("dropbox/proto/pap_events/photos/select_photo_action_bar",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Select_PhotoActionBar=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.photoActionSelection=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.photoActionSelection&&Object.hasOwnProperty.call(e,"photoActionSelection")&&t.uint32(16).int32(e.photoActionSelection),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Select_PhotoActionBar;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;case 2:n.photoActionSelection=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Select_PhotoActionBar"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e.PhotoActionSelection=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PHOTO_ACTION_SELECTION"]=0,t[e[1]="OPEN_PHOTO_ACTION_SELECTION"]=1,t[e[2]="DOWNLOAD_PHOTO_ACTION_SELECTION"]=2,t[e[3]="MOVE_PHOTO_ACTION_SELECTION"]=3,t[e[4]="COMMENT_PHOTO_ACTION_SELECTION"]=4,t[e[5]="ADD_COMMENTS_PHOTO_ACTION_SELECTION"]=5,t[e[6]="STAR_PHOTO_ACTION_SELECTION"]=6,t[e[7]="UNSTAR_PHOTO_ACTION_SELECTION"]=7,t[e[8]="VERSION_HISTORY_PHOTO_ACTION_SELECTION"]=8,t})(),e})(l.Select_PhotoActionBar||{}),l),s)})),define("dropbox/proto/pap_events/photos/select_photo_filter",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Select_PhotoFilter=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.photoFilterSelection=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.photoFilterSelection&&Object.hasOwnProperty.call(e,"photoFilterSelection")&&t.uint32(16).int32(e.photoFilterSelection),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Select_PhotoFilter;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;case 2:n.photoFilterSelection=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Select_PhotoFilter"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e.PhotoFilterSelection=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PHOTO_FILTER_SELECTION"]=0,t[e[1]="PHOTOS_PHOTO_FILTER_SELECTION"]=1,t[e[2]="VIDEOS_PHOTO_FILTER_SELECTION"]=2,t[e[3]="ALL_PHOTO_FILTER_SELECTION"]=3,t[e[4]="STARRED_PHOTO_FILTER_SELECTION"]=4,t})(),e})(l.Select_PhotoFilter||{}),l),s)})),define("dropbox/proto/pap_events/photos/select_photo_group_by",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Select_PhotoGroupBy=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.photoGroupBySelection=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.photoGroupBySelection&&Object.hasOwnProperty.call(e,"photoGroupBySelection")&&t.uint32(16).int32(e.photoGroupBySelection),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Select_PhotoGroupBy;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;case 2:n.photoGroupBySelection=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Select_PhotoGroupBy"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e.PhotoGroupBySelection=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PHOTO_GROUP_BY_SELECTION"]=0,t[e[1]="DAY_PHOTO_GROUP_BY_SELECTION"]=1,t[e[2]="MONTH_PHOTO_GROUP_BY_SELECTION"]=2,t[e[3]="YEAR_PHOTO_GROUP_BY_SELECTION"]=3,t})(),e})(l.Select_PhotoGroupBy||{}),l),s)})),define("dropbox/proto/pap_events/photos/select_photo_secondary_menu",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Select_PhotoSecondaryMenu=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.photoActionSelection=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.photoActionSelection&&Object.hasOwnProperty.call(e,"photoActionSelection")&&t.uint32(16).int32(e.photoActionSelection),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Select_PhotoSecondaryMenu;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;case 2:n.photoActionSelection=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Select_PhotoSecondaryMenu"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e.PhotoActionSelection=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_PHOTO_ACTION_SELECTION"]=0,t[e[1]="OPEN_PHOTO_ACTION_SELECTION"]=1,t[e[2]="DOWNLOAD_PHOTO_ACTION_SELECTION"]=2,t[e[3]="MOVE_PHOTO_ACTION_SELECTION"]=3,t[e[4]="COMMENT_PHOTO_ACTION_SELECTION"]=4,t[e[5]="ADD_COMMENTS_PHOTO_ACTION_SELECTION"]=5,t[e[6]="STAR_PHOTO_ACTION_SELECTION"]=6,t[e[7]="UNSTAR_PHOTO_ACTION_SELECTION"]=7,t[e[8]="VERSION_HISTORY_PHOTO_ACTION_SELECTION"]=8,t})(),e})(l.Select_PhotoSecondaryMenu||{}),l),s)})),define("dropbox/proto/pap_events/photos/select_photo_thumbnail",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event","dropbox/proto/pap_events/event_enums"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Select_PhotoThumbnail=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.thumbnailSelectCount=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.thumbnailSelectCount&&Object.hasOwnProperty.call(e,"thumbnailSelectCount")&&t.uint32(16).int64(e.thumbnailSelectCount),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),null!=e.eventState&&Object.hasOwnProperty.call(e,"eventState")&&t.uint32(8816).int32(e.eventState),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Select_PhotoThumbnail;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;case 1102:n.eventState=e.int32();break;case 2:n.thumbnailSelectCount=e.int64();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Select_PhotoThumbnail"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e})(l.Select_PhotoThumbnail||{}),l),s.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t})(),s)})),define("dropbox/proto/pap_events/photos/shown_photos_page",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Shown_PhotosPage=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Shown_PhotosPage;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Shown_PhotosPage"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e})(l.Shown_PhotosPage||{}),l),s)})),define("dropbox/proto/pap_events/photos/star_photo_thumbnail",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Star_PhotoThumbnail=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Star_PhotoThumbnail;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Star_PhotoThumbnail"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e})(l.Star_PhotoThumbnail||{}),l),s)})),define("dropbox/proto/pap_events/photos/unstar_photo_thumbnail",["require","exports","tslib","protobufjs/minimal","dropbox/proto/pap_events/predefined_event"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;const i=(n=o.__importStar(n)).Reader,r=n.Writer,a=(n.util,n.roots.default||(n.roots.default={}));var s,l;t.default=a,t.pap_events=a.pap_events=((s=a.pap_events||{}).photos=((l=s.photos||{}).Unstar_PhotoThumbnail=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=r.create()),null!=e.actionSurface&&Object.hasOwnProperty.call(e,"actionSurface")&&t.uint32(10).string(e.actionSurface),null!=e.eventClass&&Object.hasOwnProperty.call(e,"eventClass")&&t.uint32(8808).int32(e.eventClass),t},e.decode=function(e,t){e instanceof i||(e=i.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.pap_events.photos.Unstar_PhotoThumbnail;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.actionSurface=e.string();break;case 1101:n.eventClass=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.photos.Unstar_PhotoThumbnail"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="PHOTOS"]=0,t})(),e})(l.Unstar_PhotoThumbnail||{}),l),s)})),define("modules/clean/logging/hive/schemas/web-photos_web_events",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebPhotosWebEventLoggingTableRow=void 0;t.WebPhotosWebEventLoggingTableRow=class{constructor(e){this.category="web-photos_web_events",this.user_id=null,this.team_id=null,this.session_id=null,this.anon_ip=null,this.country=null,this.url=null,this.ua_browser_name=null,this.ua_browser_version=null,this.locale_user_selected=null,this.timestamp=e.timestamp,this.event_name=e.event_name,this.event_action=e.event_action,this.event_object=e.event_object,this.action_surface=e.action_surface,this.platform="web",this.device_type=e.device_type,this.browser_lang=e.browser_lang,this.browser_width=e.browser_width,this.browser_height=e.browser_height,this.device_width=e.device_width,this.device_height=e.device_height,this.extras=e.extras,Object.seal(this)}}})),define("modules/clean/react/photos/logging/logging_context",["require","exports","react"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useWebPhotosLogger=t.LoggingProvider=t.LoggingContext=void 0;const n=Object.freeze({logWebPhotosEvent:()=>{}});t.LoggingContext=o.createContext(n),t.LoggingProvider=t.LoggingContext.Provider,t.useWebPhotosLogger=function(){const{logWebPhotosEvent:e}=o.useContext(t.LoggingContext);return e}})),define("modules/clean/react/photos/logging/photos_events_logger",["require","exports","tslib","modules/clean/logging/hive/schemas/web-photos_web_events","modules/clean/loggers/device_type","modules/clean/ts_utils","modules/clean/logging/telemetry","modules/clean/user_survey/user_survey","modules/clean/pap/analytics_client","dropbox/proto/pap_events/photos/shown_photos_page","dropbox/proto/pap_events/photos/open_photo_preview","dropbox/proto/pap_events/photos/scroll_photos_page","dropbox/proto/pap_events/photos/select_photo_action_bar","dropbox/proto/pap_events/photos/select_photo_filter","dropbox/proto/pap_events/photos/select_photo_group_by","dropbox/proto/pap_events/photos/select_photo_secondary_menu","dropbox/proto/pap_events/photos/select_photo_thumbnail","dropbox/proto/pap_events/photos/star_photo_thumbnail","dropbox/proto/pap_events/photos/unstar_photo_thumbnail","dropbox/proto/pap_events/event_enums","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","photos/filter-bar/index"],(function(e,t,o,n,i,r,a,s,l,c,u,d,p,h,_,f,m,g,S,v,T,b){"use strict";var O,E;Object.defineProperty(t,"__esModule",{value:!0}),t.logWebPhotosEvent=t.WebPhotosEvent=t.hiveLogger=void 0,a=o.__importStar(a),t.hiveLogger=new a.HiveLogger,(function(e){e.shownPhotosPage="shown_photos_page",e.scrollPhotosPage="scroll_photos_page",e.selectPhotoThumbnail="select_photo_thumbnail",e.starPhotoThumbnail="star_photo_thumbnail",e.unstarPhotoThumbnail="unstar_photo_thumbnail",e.openPhotoPreview="open_photo_preview",e.openPhotoSecondaryMenu="open_photo_secondary_menu",e.selectPhotoSecondaryMenu="select_photo_secondary_menu",e.selectPhotoActionBar="select_photo_action_bar",e.selectPhotoGroupBy="select_photo_group_by",e.selectPhotoFilter="select_photo_filter",e.openSharingModal="open_sharing_modal",e.sharePhotos="share_photos"})(O=t.WebPhotosEvent||(t.WebPhotosEvent={})),(function(e){e.viewPhotosPage="view_photos_page",e.photosInteraction="photos_interaction"})(E||(E={}));const P={[T.ActionBarActionTypes.MOVE]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.MOVE_PHOTO_ACTION_SELECTION,[T.ActionBarActionTypes.OPEN]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.OPEN_PHOTO_ACTION_SELECTION,[T.ActionBarActionTypes.DOWNLOAD]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.DOWNLOAD_PHOTO_ACTION_SELECTION,[T.ActionBarActionTypes.COMMENT]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.COMMENT_PHOTO_ACTION_SELECTION,[T.ActionBarActionTypes.STAR]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.STAR_PHOTO_ACTION_SELECTION,[T.ActionBarActionTypes.UNSTAR]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.UNSTAR_PHOTO_ACTION_SELECTION,[T.ActionBarActionTypes.VERSION_HISTORY]:f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.VERSION_HISTORY_PHOTO_ACTION_SELECTION},I={[b.PhotoGrouping.DAYS]:_.pap_events.photos.Select_PhotoGroupBy.PhotoGroupBySelection.DAY_PHOTO_GROUP_BY_SELECTION,[b.PhotoGrouping.MONTHS]:_.pap_events.photos.Select_PhotoGroupBy.PhotoGroupBySelection.MONTH_PHOTO_GROUP_BY_SELECTION,[b.PhotoGrouping.YEARS]:_.pap_events.photos.Select_PhotoGroupBy.PhotoGroupBySelection.YEAR_PHOTO_GROUP_BY_SELECTION},y={[b.PhotoFilter.ALL]:h.pap_events.photos.Select_PhotoFilter.PhotoFilterSelection.ALL_PHOTO_FILTER_SELECTION,[b.PhotoFilter.PHOTOS]:h.pap_events.photos.Select_PhotoFilter.PhotoFilterSelection.PHOTOS_PHOTO_FILTER_SELECTION,[b.PhotoFilter.STARRED]:h.pap_events.photos.Select_PhotoFilter.PhotoFilterSelection.STARRED_PHOTO_FILTER_SELECTION,[b.PhotoFilter.VIDEOS]:h.pap_events.photos.Select_PhotoFilter.PhotoFilterSelection.VIDEOS_PHOTO_FILTER_SELECTION},A={[O.scrollPhotosPage]:["scrollDepth"],[O.selectPhotoThumbnail]:["thumbnailSelectCount"],[O.selectPhotoSecondaryMenu]:["secondaryMenuSelection"],[O.selectPhotoActionBar]:["actionBarSelection","itemCount"],[O.selectPhotoGroupBy]:["groupBySelection"],[O.selectPhotoFilter]:["filterSelection"],[O.sharePhotos]:["itemCount"]};function C(e){return e in A}function w(e,t,o){let n;if(o&&C(t)&&e in A[t]){const t=o[e];"string"==typeof t&&(n=t)}return n}t.logWebPhotosEvent=function(e,o){const a=Object.assign(Object.assign({timestamp:Date.now(),event_name:e},(function(e){switch(e){case O.shownPhotosPage:return{event_action:"shown",event_object:"photos_page",action_surface:"web_photos"};case O.scrollPhotosPage:return{event_action:"scroll",event_object:"photos_page",action_surface:"web_photos"};case O.selectPhotoThumbnail:return{event_action:"select",event_object:"photo_thumbnail",action_surface:"web_photos"};case O.starPhotoThumbnail:return{event_action:"star",event_object:"photo_thumbnail",action_surface:"web_photos"};case O.unstarPhotoThumbnail:return{event_action:"unstar",event_object:"photo_thumbnail",action_surface:"web_photos"};case O.openPhotoPreview:return{event_action:"open",event_object:"photo_preview",action_surface:"web_photos"};case O.openPhotoSecondaryMenu:return{event_action:"open",event_object:"photo_secondary_menu",action_surface:"web_photos"};case O.selectPhotoSecondaryMenu:return{event_action:"select",event_object:"photo_secondary_menu",action_surface:"web_photos"};case O.selectPhotoActionBar:return{event_action:"select",event_object:"photo_action_bar",action_surface:"web_photos"};case O.selectPhotoGroupBy:return{event_action:"select",event_object:"photo_group_by",action_surface:"web_photos"};case O.selectPhotoFilter:return{event_action:"select",event_object:"photo_filter",action_surface:"web_photos"};case O.openSharingModal:return{event_action:"open",event_object:"photo_share_modal",action_surface:"web_photos"};case O.sharePhotos:return{event_action:"share",event_object:"photo_thumbnail",action_surface:"web_photos"};default:r.enforceExhaustive(e)}})(e)),{device_type:i.getDeviceType(),browser_lang:window.navigator.language,browser_width:window.innerWidth,browser_height:window.innerHeight,device_width:window.screen.width,device_height:window.screen.height});if(o&&C(e)){a.extras={};for(const t of A[e]){const e=o[t];"string"==typeof e&&(a.extras[t]=e)}}t.hiveLogger.log(new n.WebPhotosWebEventLoggingTableRow(a));const T=(function(e){switch(e){case O.shownPhotosPage:return E.viewPhotosPage;case O.scrollPhotosPage:return null;default:return E.photosInteraction}})(e);T&&s.UserSurvey.trackEvent(T,"photos"),(function(e,t){switch(e){case O.shownPhotosPage:l.logEvent(c.pap_events.photos.Shown_PhotosPage.create({actionSurface:"Web_Photos",eventClass:c.pap_events.photos.Shown_PhotosPage.EventClass.PHOTOS}));break;case O.scrollPhotosPage:l.logEvent(d.pap_events.photos.Scroll_PhotosPage.create(Object.assign(Object.assign({actionSurface:"Web_Photos"},t),{eventClass:d.pap_events.photos.Scroll_PhotosPage.EventClass.PHOTOS})));break;case O.selectPhotoThumbnail:l.logEvent(m.pap_events.photos.Select_PhotoThumbnail.create(Object.assign(Object.assign({actionSurface:"Web_Photos"},t),{eventState:v.pap_events.EventState.START,eventClass:m.pap_events.photos.Select_PhotoThumbnail.EventClass.PHOTOS})));break;case O.starPhotoThumbnail:l.logEvent(g.pap_events.photos.Star_PhotoThumbnail.create({actionSurface:"Web_Photos",eventClass:g.pap_events.photos.Star_PhotoThumbnail.EventClass.PHOTOS}));break;case O.unstarPhotoThumbnail:l.logEvent(S.pap_events.photos.Unstar_PhotoThumbnail.create({actionSurface:"Web_Photos",eventClass:S.pap_events.photos.Unstar_PhotoThumbnail.EventClass.PHOTOS}));break;case O.openPhotoPreview:l.logEvent(u.pap_events.photos.Open_PhotoPreview.create({actionSurface:"Web_Photos",eventClass:u.pap_events.photos.Open_PhotoPreview.EventClass.PHOTOS}));break;case O.openPhotoSecondaryMenu:break;case O.selectPhotoSecondaryMenu:l.logEvent(f.pap_events.photos.Select_PhotoSecondaryMenu.create({actionSurface:"Web_Photos",photoActionSelection:P[w("secondaryMenuSelection",e,t)||""]||f.pap_events.photos.Select_PhotoSecondaryMenu.PhotoActionSelection.UNKNOWN_PHOTO_ACTION_SELECTION,eventClass:f.pap_events.photos.Select_PhotoSecondaryMenu.EventClass.PHOTOS}));break;case O.selectPhotoActionBar:l.logEvent(p.pap_events.photos.Select_PhotoActionBar.create({actionSurface:"Web_Photos",photoActionSelection:P[w("actionBarSelection",e,t)||""]||p.pap_events.photos.Select_PhotoActionBar.PhotoActionSelection.UNKNOWN_PHOTO_ACTION_SELECTION,eventClass:p.pap_events.photos.Select_PhotoActionBar.EventClass.PHOTOS}));break;case O.selectPhotoGroupBy:l.logEvent(_.pap_events.photos.Select_PhotoGroupBy.create({actionSurface:"Web_Photos",photoGroupBySelection:I[w("groupBySelection",e,t)||""]||_.pap_events.photos.Select_PhotoGroupBy.PhotoGroupBySelection.UNKNOWN_PHOTO_GROUP_BY_SELECTION,eventClass:_.pap_events.photos.Select_PhotoGroupBy.EventClass.PHOTOS}));break;case O.selectPhotoFilter:l.logEvent(h.pap_events.photos.Select_PhotoFilter.create({actionSurface:"Web_Photos",photoFilterSelection:y[w("filterSelection",e,t)||""]||h.pap_events.photos.Select_PhotoFilter.PhotoFilterSelection.UNKNOWN_PHOTO_FILTER_SELECTION,eventClass:h.pap_events.photos.Select_PhotoFilter.EventClass.PHOTOS}));break;case O.openSharingModal:case O.sharePhotos:break;default:r.enforceExhaustive(e)}})(e,a.extras)}})),define("modules/clean/react/photos/timeline_grid/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PHOTOS_FILE_VIEWER_ELEMENT_ID=t.WEB_PHOTOS_EXCEPTION_TAG=t.AMP_PHOTOS_LOAD_ITEMS_LATENCY=t.AMP_PHOTOS_NAMESPACE_NAME=void 0,t.AMP_PHOTOS_NAMESPACE_NAME="web_photos",t.AMP_PHOTOS_LOAD_ITEMS_LATENCY="load_items/latency",t.WEB_PHOTOS_EXCEPTION_TAG="web_photos",t.PHOTOS_FILE_VIEWER_ELEMENT_ID="photos-file-viewer-container"})),define("modules/clean/react/photos/timeline_grid/data/actions",["require","exports","tslib","modules/core/exception","api_v2/user_client","modules/clean/active_user","modules/clean/metrics/index","modules/clean/react/home/resource_id_types","modules/clean/react/photos/timeline_grid/constants","modules/clean/react/photos/timeline_grid/data/types","modules/clean/redux/namespaces"],(function(e,t,o,n,i,r,a,s,l,c,u){"use strict";function d({state:e,hasMoreData:t,error:o,apiName:n}){const i={state:e,error:o};return void 0!==t&&(i.hasMoreData=t),{type:c.ActionTypes.SET_API_STATE,payload:{apiStatus:i,apiName:n}}}function p(e){return{type:c.ActionTypes.SET_SHARE_LINK_ACTION,payload:{shareLink:e}}}function h(e){return{type:c.ActionTypes.SET_SHARE_LINK_STATUS_ACTION,payload:{shareLinkStatus:e}}}function _(e){return{type:c.ActionTypes.UPDATE_FAVORITES_ACTION,payload:{update:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateFavorites=t.setShareLinkStatus=t.setShareLink=t.fetchShareLink=t.setUser=t.setVisibleTopSectionIndex=t.setSelection=t.setGridSize=t.setGrouping=t.setFilter=t.removeItems=t.setApiState=t.prewarmPreviewInfo=t.toggleFavorite=t.loadFavorites=t.loadItems=void 0,n=o.__importStar(n),t.loadItems=function e(t,s){return(u,p)=>o.__awaiter(this,void 0,void 0,(function*(){const o=r.mustGetActiveUserId(),p=new i.UserApiV2Client;s||(s=a.getMetricsReporter().createTimer({ns:l.AMP_PHOTOS_NAMESPACE_NAME,name:l.AMP_PHOTOS_LOAD_ITEMS_LATENCY})),u(d({apiName:c.ApiTypes.DELTA,state:c.ApiState.FETCH})),p.ns("photos").rpc("delta",{cursor:t,get_extra_file_metadata:!0,include_thumbnail_url:!0},{subjectUserId:o}).then(t=>{t.entries&&t.entries.length&&u({type:c.ActionTypes.LOAD_ITEMS_ACTION,payload:{items:t.entries}}),u(d({apiName:c.ApiTypes.DELTA,state:c.ApiState.SUCCESS,hasMoreData:t.has_more})),t.has_more?u(e(t.cursor,s)):s&&s.record()}).catch(e=>{u(d({apiName:c.ApiTypes.DELTA,state:c.ApiState.ERROR,error:e})),n.reportException({err:e,severity:n.SEVERITY.NON_CRITICAL,tags:[l.WEB_PHOTOS_EXCEPTION_TAG]})})}))},t.loadFavorites=function(t,n){return(i,r)=>o.__awaiter(this,void 0,void 0,(function*(){const{checkForMissingStarredData:i}=yield new Promise((t,o)=>{e(["modules/clean/react/starred/browse_exports"],t,o)}).then(o.__importStar);i({items:n.toArray(),user:t})}))},t.toggleFavorite=function(t,i){return(r,a)=>o.__awaiter(this,void 0,void 0,(function*(){const d=a()[u.PHOTOS_TIMELINE_NAMESPACE_KEY],p=!!((null==d?void 0:d.favorites)||{})[`${s.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}:${i}`],h=!p;r({type:c.ActionTypes.TOGGLE_FAVORITES_ACTION,payload:{fileId:i,isFavorite:h}});const{StarredActions:f,StarredStore:m}=yield new Promise((t,o)=>{e(["modules/clean/react/starred/browse_exports"],t,o)}).then(o.__importStar);try{yield f.update(t.role,i,s.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID,h),r(_(m.getAllStarredPairStrings()))}catch(e){r({type:c.ActionTypes.TOGGLE_FAVORITES_ACTION,payload:{fileId:i,isFavorite:p}}),n.reportException({err:e,severity:n.SEVERITY.NON_CRITICAL,tags:[l.WEB_PHOTOS_EXCEPTION_TAG]})}}))},t.prewarmPreviewInfo=function(t,n){return(i,r)=>o.__awaiter(this,void 0,void 0,(function*(){const a=r()[u.PHOTOS_TIMELINE_NAMESPACE_KEY],s=(null==a?void 0:a.prewarmedPreviewData)||{},l=t.filter(e=>void 0===s[e.file_id]);(yield new Promise((t,o)=>{e(["modules/clean/react/file_viewer/controller"],t,o)}).then(o.__importStar)).prewarmPreviewData(l,n),i({type:c.ActionTypes.SET_PREWARM_PREVIEW_DATA,payload:{files:l}})}))},t.setApiState=d,t.removeItems=function(e){return{type:c.ActionTypes.REMOVE_ITEMS_ACTION,payload:{fileIds:e}}},t.setFilter=function(e){return{type:c.ActionTypes.SET_FILTER_ACTION,payload:{filter:e}}},t.setGrouping=function(e){return{type:c.ActionTypes.SET_GROUPING_ACTION,payload:{grouping:e}}},t.setGridSize=function(e){return{type:c.ActionTypes.SET_GRID_SIZE_ACTION,payload:{gridSize:e}}},t.setSelection=function(e){return{type:c.ActionTypes.SET_SELECTION_ACTION,payload:{selection:e}}},t.setVisibleTopSectionIndex=function(e){return{type:c.ActionTypes.SET_VISIBLE_TOP_SECTION_INDEX_ACTION,payload:{index:e}}},t.setUser=function(e){return{type:c.ActionTypes.SET_USER_ACTION,payload:{user:e}}},t.fetchShareLink=function(e){return(t,a)=>o.__awaiter(this,void 0,void 0,(function*(){t({type:c.ActionTypes.SET_SHARE_LINK_STATUS_ACTION,payload:{shareLinkStatus:c.ShareLinkStatus.Loading}}),t(d({apiName:c.ApiTypes.SHARE,state:c.ApiState.FETCH}));const o=r.mustGetActiveUserId();(new i.UserApiV2Client).ns("photos").rpc("share",{file_ids:e},{subjectUserId:o}).then(e=>{t(d({apiName:c.ApiTypes.SHARE,state:c.ApiState.SUCCESS})),e.share_link&&(t(p(e.share_link)),t(h(c.ShareLinkStatus.Created)),navigator.clipboard.writeText(e.share_link))}).catch(e=>{t(h(c.ShareLinkStatus.Errored)),t(d({apiName:c.ApiTypes.SHARE,state:c.ApiState.ERROR,error:e})),n.reportException({err:e,severity:n.SEVERITY.NON_CRITICAL,tags:[l.WEB_PHOTOS_EXCEPTION_TAG]})})}))},t.setShareLink=p,t.setShareLinkStatus=h,t.updateFavorites=_})),define("modules/clean/react/photos/timeline_grid/data/reducer",["require","exports","tslib","immutable","modules/clean/react/photos/timeline_grid/data/types","photos/filter-bar/index","modules/clean/ts_utils","modules/clean/react/selection","modules/clean/react/browse/models","modules/clean/react/home/resource_id_types"],(function(e,t,o,n,i,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.photosReducer=t.defaultState=void 0,n=o.__importStar(n);const u={[r.PhotoGrouping.DAYS]:1,[r.PhotoGrouping.MONTHS]:2,[r.PhotoGrouping.YEARS]:3};t.defaultState={items:n.List(),filteredItems:n.List(),sections:{sectionLabels:[],sectionStartIndices:[]},filter:r.PhotoFilter.ALL,grouping:r.PhotoGrouping.MONTHS,gridSize:r.PhotoGridSize.MEDIUM,selection:s.createSelection(),visibleTopSectionIndex:0,context:new l.BrowseContext,favorites:{},shareLink:"",shareLinkStatus:i.ShareLinkStatus.None,favoritesLoaded:!1,apiStatus:{[i.ApiTypes.DELTA]:{state:i.ApiState.DEFAULT,pagesLoaded:0},[i.ApiTypes.SHARE]:{state:i.ApiState.DEFAULT,pagesLoaded:0}},prewarmedPreviewData:{}};const d=(e,t,o)=>{const n=[],i=[];let r=void 0;return e.forEach((e,a)=>{var s;const l=null===(s=e.metadata)||void 0===s?void 0:s.media_metadata;if(l){const e=new Date(l.date_taken||l.date_created);i.length&&p(t,e,i[i.length-1])||(i.push(e),n.push(a),void 0===r&&o&&p(t,e,o)&&(r=i.length-1))}}),{sections:{sectionLabels:i,sectionStartIndices:n},visibleTopSectionIndex:null!=r?r:0}},p=(e,t,o)=>{switch(e){case r.PhotoGrouping.YEARS:return t.getFullYear()===o.getFullYear();case r.PhotoGrouping.MONTHS:return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth();case r.PhotoGrouping.DAYS:return t.getFullYear()===o.getFullYear()&&t.getMonth()===o.getMonth()&&t.getDate()===o.getDate();default:a.throwEnforceExhaustive(e)}},h=(e,t,o)=>{if(o===r.PhotoFilter.ALL)return e;const i=e.filter(e=>{var n,i,a;const s=null!==(a=null===(i=null===(n=e.metadata)||void 0===n?void 0:n.media_metadata.media_type)||void 0===i?void 0:i[".tag"])&&void 0!==a?a:"other";switch(o){case r.PhotoFilter.PHOTOS:return"photo"===s;case r.PhotoFilter.VIDEOS:return"video"===s;case r.PhotoFilter.STARRED:return t[`${c.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}:${e.file_obj_id}`];default:return!0}});return n.List(i)},_=(e,{payload:{grouping:t}})=>{const o=((e,t,o)=>{const n=u[t]-u[o];return Math.min(Math.max(e+n,r.PhotoGridSize.EXTRA_SMALL),r.PhotoGridSize.EXTRA_LARGE)})(e.gridSize,e.grouping,t),n=e.sections.sectionLabels&&e.sections.sectionLabels[e.visibleTopSectionIndex],{sections:i,visibleTopSectionIndex:a}=d(e.filteredItems,t,n);return Object.assign(Object.assign({},e),{sections:i,grouping:t,gridSize:o,visibleTopSectionIndex:a})},f=(e,t)=>{const o=h(e.items,e.favorites,t),n=e.sections.sectionLabels&&e.sections.sectionLabels[e.visibleTopSectionIndex],{sections:i,visibleTopSectionIndex:r}=d(o,e.grouping,n);return Object.assign(Object.assign({},e),{filteredItems:o,sections:i,filter:t,visibleTopSectionIndex:r})};t.photosReducer=function(e=t.defaultState,o){switch(o.type){case i.ActionTypes.LOAD_ITEMS_ACTION:return((e,{payload:{items:t}})=>{const o=e.items.concat(t).sort((e,t)=>{var o,n,i,r;const a=(null===(o=e.metadata)||void 0===o?void 0:o.media_metadata.date_taken)||(null===(n=e.metadata)||void 0===n?void 0:n.media_metadata.date_created)||"";return((null===(i=t.metadata)||void 0===i?void 0:i.media_metadata.date_taken)||(null===(r=t.metadata)||void 0===r?void 0:r.media_metadata.date_created)||"").localeCompare(a)}),n=h(o,e.favorites,e.filter),i=e.sections.sectionLabels&&e.sections.sectionLabels[e.visibleTopSectionIndex],{sections:r,visibleTopSectionIndex:a}=d(n,e.grouping,i);return Object.assign(Object.assign({},e),{items:o,filteredItems:n,sections:r,visibleTopSectionIndex:a})})(e,o);case i.ActionTypes.SET_GROUPING_ACTION:return _(e,o);case i.ActionTypes.SET_GRID_SIZE_ACTION:return((e,{payload:{gridSize:t}})=>Object.assign(Object.assign({},e),{gridSize:t}))(e,o);case i.ActionTypes.SET_SELECTION_ACTION:return((e,{payload:{selection:t}})=>Object.assign(Object.assign({},e),{selection:t}))(e,o);case i.ActionTypes.SET_FILTER_ACTION:return f(e,o.payload.filter);case i.ActionTypes.SET_VISIBLE_TOP_SECTION_INDEX_ACTION:return Object.assign(Object.assign({},e),{visibleTopSectionIndex:o.payload.index});case i.ActionTypes.SET_USER_ACTION:return((e,{payload:{user:t}})=>Object.assign(Object.assign({},e),{user:t}))(e,o);case i.ActionTypes.TOGGLE_FAVORITES_ACTION:return((e,{payload:{fileId:t,isFavorite:o}})=>{const n=Object.assign(Object.assign({},e.favorites),{[`${c.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}:${t}`]:o}),i=Object.assign(Object.assign({},e),{favorites:n});return e.filter===r.PhotoFilter.STARRED?f(i,e.filter):i})(e,o);case i.ActionTypes.REMOVE_ITEMS_ACTION:return((e,{payload:{fileIds:t}})=>{const o=e.items.filter(e=>!t.includes(e.file_obj_id)),n=e.selection.update("selected",e=>e.subtract(t)),i=Object.assign(Object.assign({},e),{items:o,selection:n});return f(i,e.filter)})(e,o);case i.ActionTypes.SET_SHARE_LINK_ACTION:return((e,{payload:{shareLink:t}})=>Object.assign(Object.assign({},e),{shareLink:t}))(e,o);case i.ActionTypes.SET_SHARE_LINK_STATUS_ACTION:return((e,{payload:{shareLinkStatus:t}})=>Object.assign(Object.assign({},e),{shareLinkStatus:t}))(e,o);case i.ActionTypes.UPDATE_FAVORITES_ACTION:return((e,{payload:{update:t}})=>{const o=t.reduce((e,t)=>(e[t]=!0,e),{}),n=Object.assign(Object.assign({},e),{favorites:o,favoritesLoaded:e.favoritesLoaded||t.length>0});return e.filter===r.PhotoFilter.STARRED?f(n,e.filter):n})(e,o);case i.ActionTypes.SET_API_STATE:return((e,{payload:{apiStatus:t,apiName:o}})=>{const n=e.apiStatus[o].pagesLoaded;return Object.assign(Object.assign({},e),{apiStatus:Object.assign(Object.assign({},e.apiStatus),{[o]:Object.assign(Object.assign(Object.assign({},e.apiStatus[o]),t),{pagesLoaded:t.state===i.ApiState.SUCCESS?n+1:n})})})})(e,o);case i.ActionTypes.SET_PREWARM_PREVIEW_DATA:return((e,{payload:{files:t}})=>{const o=t.reduce((e,t)=>(e[t.file_id]=!0,e),{});return Object.assign(Object.assign({},e),{prewarmedPreviewData:Object.assign(Object.assign({},e.prewarmedPreviewData),o)})})(e,o);default:return e}}})),define("modules/clean/react/photos/timeline_grid/data/selectors",["require","exports","tslib","immutable","reselect","modules/clean/redux/namespaces","modules/clean/react/browse/models","modules/clean/react/photos/timeline_grid/data/types","modules/clean/redux/selectors","photos/filter-bar/index"],(function(e,t,o,n,i,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getShowLoadingState=t.getSelectedMediaSize=t.selectedFiles=t.getFilteredFiles=t.getAllFiles=t.getContext=t.getUser=t.getShareLinkStatus=t.getShareLink=t.getVisibleTopSectionIndex=t.getFavoritesLoaded=t.getDeltaApiStatus=t.getFavorites=t.getSelection=t.getGridSize=t.getGrouping=t.getFilter=t.getSections=t.getItems=t.getAllItems=t.getPhotosTimelineState=void 0,n=o.__importStar(n),t.getPhotosTimelineState=e=>l.getStateAtNamespace(e,r.PHOTOS_TIMELINE_NAMESPACE_KEY),t.getAllItems=e=>t.getPhotosTimelineState(e).items,t.getItems=e=>t.getPhotosTimelineState(e).filteredItems,t.getSections=e=>t.getPhotosTimelineState(e).sections,t.getFilter=e=>t.getPhotosTimelineState(e).filter,t.getGrouping=e=>t.getPhotosTimelineState(e).grouping,t.getGridSize=e=>t.getPhotosTimelineState(e).gridSize,t.getSelection=e=>t.getPhotosTimelineState(e).selection,t.getFavorites=e=>t.getPhotosTimelineState(e).favorites,t.getDeltaApiStatus=e=>t.getPhotosTimelineState(e).apiStatus[s.ApiTypes.DELTA],t.getFavoritesLoaded=e=>t.getPhotosTimelineState(e).favoritesLoaded,t.getVisibleTopSectionIndex=e=>t.getPhotosTimelineState(e).visibleTopSectionIndex,t.getShareLink=e=>t.getPhotosTimelineState(e).shareLink,t.getShareLinkStatus=e=>t.getPhotosTimelineState(e).shareLinkStatus,t.getUser=e=>t.getPhotosTimelineState(e).user,t.getContext=e=>t.getPhotosTimelineState(e).context,t.getAllFiles=i.createSelector(t.getAllItems,e=>n.OrderedMap(e.filter(e=>{var t;return!!(null===(t=e.metadata)||void 0===t?void 0:t.extra_file_metadata)&&!!e.file_obj_id}).map(e=>{var t;return[e.file_obj_id,a.File.fromApiV2Object(null===(t=e.metadata)||void 0===t?void 0:t.extra_file_metadata)]}))),t.getFilteredFiles=i.createSelector(t.getAllFiles,t.getItems,(e,t)=>n.List(t.map(t=>e.get((null==t?void 0:t.file_obj_id)||"")).filter(e=>!!e))),t.selectedFiles=i.createSelector(t.getAllFiles,t.getSelection,(e,t)=>u(e,t));const u=(e,t)=>n.OrderedMap(t.selected.toArray().map(t=>[t,e.get(t)]).filter(([e,t])=>!!t));t.getSelectedMediaSize=i.createSelector(t.selectedFiles,e=>{let t=0;return e.forEach(e=>{t+=e.bytes}),t}),t.getShowLoadingState=i.createSelector(t.getDeltaApiStatus,t.getFilter,t.getFavoritesLoaded,(e,t,o)=>{const{pagesLoaded:n,hasMoreData:i}=e,r=!o&&i;return t===c.PhotoFilter.STARRED&&r||0===n})})),define("modules/clean/react/photos/timeline_grid/data/store",["require","exports","modules/clean/react/photos/timeline_grid/data/reducer","modules/clean/redux/store","modules/clean/redux/namespaces"],(function(e,t,o,n,i){"use strict";let r;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForPhotosTimeline=void 0,t.getStoreForPhotosTimeline=()=>(r||(r=n.getStoreAndRegisterReducers({[i.PHOTOS_TIMELINE_NAMESPACE_KEY]:o.photosReducer})),r)})),define("modules/clean/react/photos/timeline_grid/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiTypes=t.ApiState=t.ActionTypes=t.ShareLinkStatus=void 0,(function(e){e.None="NONE",e.Loading="LOADING",e.Created="CREATED",e.Errored="ERRORED"})(t.ShareLinkStatus||(t.ShareLinkStatus={})),(function(e){e.LOAD_ITEMS_ACTION="LOAD_ITEMS_ACTION",e.SET_FILTER_ACTION="SET_FILTER_ACTION",e.SET_GROUPING_ACTION="SET_GROUPING_ACTION",e.SET_GRID_SIZE_ACTION="SET_GRID_SIZE_ACTION",e.SET_SELECTION_ACTION="SET_SELECTION_ACTION",e.SET_VISIBLE_TOP_SECTION_INDEX_ACTION="SET_VISIBLE_TOP_SECTION_INDEX_ACTION",e.SET_USER_ACTION="SET_USER_ACTION",e.TOGGLE_FAVORITES_ACTION="TOGGLE_FAVORITES_ACTION",e.UPDATE_FAVORITES_ACTION="UPDATE_FAVORITES_ACTION",e.REMOVE_ITEMS_ACTION="REMOVE_ITEMS_ACTION",e.SET_SHARE_LINK_ACTION="SET_SHARE_LINK_ACTION",e.SET_SHARE_LINK_STATUS_ACTION="SET_SHARE_LINK_STATUS_ACTION",e.SET_API_STATE="SET_API_STATE",e.SET_PREWARM_PREVIEW_DATA="SET_PREWARM_PREVIEW_DATA"})(t.ActionTypes||(t.ActionTypes={})),(function(e){e.DEFAULT="DEFAULT",e.FETCH="FETCH",e.SUCCESS="SUCCESS",e.ERROR="ERROR"})(t.ApiState||(t.ApiState={})),(function(e){e.DELTA="delta",e.SHARE="share"})(t.ApiTypes||(t.ApiTypes={}))})),define("modules/clean/react/photos/timeline_grid/data/utils",["require","exports"],(function(e,t){"use strict";function o(e){return e<10?`0${e}`:String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.formatMediaDuration=void 0,t.formatMediaDuration=function(e){if(!e||!Number.isFinite(e)||e<=0)return;const t=Math.round(e/1e3),n=t%60,i=Math.floor(t/60),r=i%60,a=Math.floor(i/60);return a?`${a}:${o(r)}:${o(n)}`:`${r}:${o(n)}`}})),define("modules/clean/react/photos/timeline_grid/file_actions",["require","exports","tslib","dig-components/icons/src","modules/clean/downloads","modules/clean/react/action_bar/action_bar_strings","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","modules/clean/react/action_bar/file_actions/portable/delete/delete","modules/clean/react/file_viewer/async_controller","modules/clean/react/file_viewer/toggle_browse_elements_util","modules/clean/react/photos/timeline_grid/constants","modules/constants/python","modules/core/browser","modules/clean/browse_interface","modules/clean/react/action_bar/file_actions/portable/copy","modules/clean/react/action_bar/file_actions/portable/move","modules/clean/react/action_bar/file_actions/portable/delete/snackbars","modules/clean/filepath/filepath"],(function(e,t,o,n,i,r,a,s,l,c,u,d,p,h,_,f,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multipleItemsSelectedActionBarActions=t.singleItemSelectedActionBarActions=t.getActionHandlers=t.handleVersionHistory=t.handleOpen=t.handleMove=t.handleDelete=t.handleDownload=t.handleCopy=t.PHOTOS_SNACKBAR_ID=void 0,i=o.__importStar(i),p=o.__importStar(p),t.PHOTOS_SNACKBAR_ID="web-photos-snackbar-id",t.handleCopy=({user:e,firstFile:t,files:o})=>{const n=o.toArray().map(e=>({fq_path:e.fq_path,is_dir:e.is_dir}));_.portableCopy({currentFQPath:g.parent_dir(t.fq_path),exceptions:{isOverFreeQuota:null,hasExcludedNsIds:null},filesPath:n,source:"photos",user:e,synchronousSingleFileActions:!1,createNewFolderInMoveDialog:!1})},t.handleDownload=({files:e,user:t},o)=>{if(e.size>1){const n=e.toArray().map(e=>e.fq_path);i.get_zip({fq_paths:n,subject_uid:t.id,block_hash:o,parent_path:"/",flat_zip_mode:!0})}else i.get({url:e.first().href})},t.handleDelete=({files:e,user:o},n)=>{const i=e.toArray(),r=i.map(e=>({fq_path:e.fq_path,is_dir:e.is_dir})),a=i.map(e=>e.file_id),l=r.length;s.portableDelete({user:o,filesPath:r,fq_path:e.first().fq_path},{onNetworkRequest:()=>m.deleteSnackBarInProgress(t.PHOTOS_SNACKBAR_ID,l),onSuccess:()=>{n(a),m.deleteCompleteSnackBar(t.PHOTOS_SNACKBAR_ID,l)},onError:e=>m.deleteFailedSnackBar(e,t.PHOTOS_SNACKBAR_ID,l)})},t.handleMove=({user:e,firstFile:t,files:o})=>{const n=o.toArray().map(e=>({fq_path:e.fq_path,is_dir:e.is_dir}));f.portableMove({currentFQPath:g.parent_dir(t.fq_path),exceptions:{isOverFreeQuota:null,hasExcludedNsIds:null},filesPath:n,source:"photos",user:e,synchronousSingleFileActions:!1,createNewFolderInMoveDialog:!1})},t.handleOpen=({user:e,firstFile:t},o)=>{l.asyncOpenPreview({containerId:u.PHOTOS_FILE_VIEWER_ELEMENT_ID,files:[t],indexOfPreviewFile:0,user:e,shouldFocusComment:o,updateBrowserLocation:!1,onFileViewerDidMount:c.hideElementsBehindFileViewer,onFileViewerUnmount:c.showElementsBehindFileViewer,fileViewAction:d.FileViewActionType.CLICK,fileViewOrigin:d.FileViewOriginType.PHOTOS,fileViewTarget:d.FileViewTargetType.PRIVATE})},t.handleVersionHistory=({user:e,firstFile:t})=>{const o=h.getFileHistoryUrl({fqPath:t.fq_path,userId:e.id});p.redirect(o)},t.getActionHandlers=function(e,o,n,i,r,s,l){const c=n.first(),u={user:i,context:o,files:n,firstFile:c};switch(e){case a.ActionBarActionTypes.COMMENT:t.handleOpen(u,!0);break;case a.ActionBarActionTypes.COPY:t.handleCopy(u);break;case a.ActionBarActionTypes.DOWNLOAD:t.handleDownload(u,r);break;case a.ActionBarActionTypes.DELETE:t.handleDelete(u,l);break;case a.ActionBarActionTypes.MOVE:t.handleMove(u);break;case a.ActionBarActionTypes.OPEN:t.handleOpen(u,!1);break;case a.ActionBarActionTypes.STAR:case a.ActionBarActionTypes.UNSTAR:1===n.size&&s(i,c.file_id);break;case a.ActionBarActionTypes.VERSION_HISTORY:t.handleVersionHistory(u)}};const S={actionType:a.ActionBarActionTypes.OPEN,isEnabled:!0,icon:n.OpenLine,text:r.OPEN_ACTION_STRING},v={actionType:a.ActionBarActionTypes.DOWNLOAD,isEnabled:!0,icon:n.DownloadLine,text:r.DOWNLOAD_ACTION_STRING},T={actionType:a.ActionBarActionTypes.MOVE,isEnabled:!0,icon:n.MoveLine,text:r.MOVE_ACTION_STRING},b={actionType:a.ActionBarActionTypes.COPY,isEnabled:!0,icon:n.CopyLine,text:r.COPY_ACTION_STRING},O={actionType:a.ActionBarActionTypes.DELETE,isEnabled:!0,icon:n.DeleteLine,text:r.DELETE_ACTION_STRING},E={actionType:a.ActionBarActionTypes.COMMENT,isEnabled:!0,icon:n.CommentLine,text:r.COMMENT_ACTION_STRING},P={actionType:a.ActionBarActionTypes.STAR,isEnabled:!0,icon:n.StarLine,text:r.STAR_ACTION_STRING},I={actionType:a.ActionBarActionTypes.UNSTAR,isEnabled:!0,icon:n.StarFill,text:r.UNSTAR_ACTION_STRING},y={actionType:a.ActionBarActionTypes.VERSION_HISTORY,isEnabled:!0,icon:n.ClockLine,text:r.VERSION_HISTORY_ACTION_STRING};t.singleItemSelectedActionBarActions=e=>({atTopLevelIfSpace:[S,v,T,b],alwaysInOverflow:[[S,v,T,b,O,E,e?I:P,y]]}),t.multipleItemsSelectedActionBarActions={atTopLevelIfSpace:[v,b,O],alwaysInOverflow:[[v,b,O]]}})),define("modules/clean/react/photos/timeline_grid/photo_header",["require","exports","tslib","react","modules/clean/react/selection","photos/photo-header/index","photos/filter-bar/index"],(function(e,t,o,n,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoHeader=t.PhotoHeaderContext=void 0,n=o.__importStar(n),t.PhotoHeaderContext=n.default.createContext({updateSelection:()=>{},selection:i.createSelection(),sections:{sectionLabels:[],sectionStartIndices:[]},grouping:a.PhotoGrouping.MONTHS,itemIds:[]}),t.PhotoHeader=({label:e,index:o})=>{const{updateSelection:i,grouping:a,selection:l,sections:c,itemIds:u}=n.useContext(t.PhotoHeaderContext),d=c.sectionStartIndices[o],p=c.sectionStartIndices[o+1],h=void 0===p?u.length:p,_=s(l,u,d,h),f=n.useCallback(()=>{_===r.SectionSelection.NONE?i(l.selected.union(u.slice(d,p)).toArray()):i(l.selected.subtract(u.slice(d,p)).toArray())},[o,_,c,l]);return n.default.createElement(r.PhotoSectionHeader,{count:h-d,date:e,format:a,selection:_,onChange:f})},t.PhotoHeader.displayName="PhotoHeader";const s=(e,t,o,n)=>{let i=void 0;for(let a=o;a<n;a++){const o=e.selected.has(t[a]);if(void 0===i)i=o;else if(o!==i)return r.SectionSelection.SOME}return i?r.SectionSelection.ALL:r.SectionSelection.NONE}})),define("modules/clean/react/photos/timeline_grid/photo_tile",["require","exports","tslib","react","modules/clean/react/icon/file_folder_icon","photos/photo-tile/index","modules/clean/react/photos/timeline_grid/data/utils","modules/clean/react/selectable_list","modules/clean/react/selection","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context"],(function(e,t,o,n,i,r,a,s,l,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoTile=t.PhotoTileContext=void 0,n=o.__importStar(n),t.PhotoTileContext=n.default.createContext({selection:l.createSelection(),actions:()=>{},handleDeselect:()=>{},handleSelect:()=>{},handlePreview:()=>{},handleFavorite:()=>{},isFavorite:()=>{},actionHandler:()=>{}}),t.PhotoTile=({item:e,thumbnailSize:o})=>{var l,d,p;const{selection:h,actions:_,handleDeselect:f,handleSelect:m,handlePreview:g,handleFavorite:S,isFavorite:v,actionHandler:T}=n.useContext(t.PhotoTileContext),b=u.useWebPhotosLogger(),O=e.file_obj_id||"",E=(null===(l=e.metadata)||void 0===l?void 0:l.media_metadata.thumbnail)||"",P=v(e.file_obj_id),I=n.useMemo(()=>h.selected.has(O),[h,O]),y=n.useMemo(()=>E&&i.getThumbnailUrlForItem(E,o,1),[E,o]),A=n.useCallback((e,t)=>{switch(e){case r.InteractionEvent.SELECT:I?f(O,t.shiftKey):m(O,t.shiftKey?s.SelectOptions.EXTEND:s.SelectOptions.DEFAULT);break;case r.InteractionEvent.CLICK:g(O);break;case r.InteractionEvent.FAVORITE:S(O)}},[I,f,m,O]),C=_(P),w=n.useCallback(t=>{b(c.WebPhotosEvent.selectPhotoSecondaryMenu,{secondaryMenuSelection:`${t}`}),T(t,e)},[e,T,b]),M=n.useCallback(({isOpen:e})=>{e&&b(c.WebPhotosEvent.openPhotoSecondaryMenu)},[b]);return n.default.createElement(r.PhotoTileMemo,{onUserInteraction:A,thumbnailUrl:y,duration:a.formatMediaDuration(null===(d=e.metadata)||void 0===d?void 0:d.media_metadata.duration),isSelected:I,isStarred:P,actions:C,overFlowActionHandler:w,menuToggleHandler:M,imageName:(null===(p=e.metadata)||void 0===p?void 0:p.file_metadata.name)||""})},t.PhotoTile.displayName="PhotoTile"})),define("modules/clean/react/photos/timeline_grid/photos_action_bar",["require","exports","tslib","react","react-redux","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","modules/clean/react/photos/timeline_grid/data/actions","modules/clean/react/photos/timeline_grid/data/selectors","modules/clean/react/photos/timeline_grid/file_actions","modules/clean/react/photos/timeline_grid/data/types","modules/core/i18n","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context","photos/share-button/index"],(function(e,t,o,n,i,r,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotosActionBar=void 0,n=o.__importDefault(n),s=o.__importStar(s);class _ extends n.default.Component{constructor(){super(...arguments),this.actionHandler={handleAction:e=>{this.context.logWebPhotosEvent(d.WebPhotosEvent.selectPhotoActionBar,{actionBarSelection:`${e.type}`,itemCount:`${this.props.selectedFiles.count()}`}),l.getActionHandlers(e.type,this.props.context,this.props.selectedFiles,this.props.user,this.props.blockHash,this.props.toggleFavorite,this.props.removeItems)}}}render(){const{selectedFiles:e}=this.props;if(0===e.count())return null;const t=1===e.count()?l.singleItemSelectedActionBarActions(this.props.isFavorite(e.first().file_id)):l.multipleItemsSelectedActionBarActions;return n.default.createElement("div",{className:"photos-action-bar"},n.default.createElement(r.ActionBar,{className:"brws-action-toolbar-actionbar",responsive:!0,actionHandler:this.actionHandler,actions:t,intl:u.intl}),this.props.isWebPhotosMultishare&&n.default.createElement(h.ShareButton,{isLoading:this.props.shareLinkStatus===c.ShareLinkStatus.Loading,openShareLinkModal:this.props.openShareLinkModal}))}}_.contextType=p.LoggingContext,_.displayName="PhotosActionBarController";const f=i.connect(e=>({selectedFiles:s.selectedFiles(e),user:s.getUser(e),context:s.getContext(e),shareLinkStatus:s.getShareLinkStatus(e)}),{toggleFavorite:a.toggleFavorite,removeItems:a.removeItems});t.PhotosActionBar=f(_)})),define("modules/clean/react/photos/timeline_grid/tile_grid",["require","exports","tslib","react","photos/loading-tile/index","photos/photo-header/index","photos/virtualized-grid/index","photos/scroll-spy/index","modules/clean/react/selectable_list","modules/clean/react/photos/timeline_grid/photo_tile","modules/clean/react/photos/timeline_grid/photo_header","modules/clean/react/photos/timeline_grid/zoom_levels","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context"],(function(e,t,o,n,i,r,a,s,l,c,u,d,p,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoTileGrid=void 0,n=o.__importStar(n),t.PhotoTileGrid=({items:e,sections:t,gridSize:o,grouping:_,overFlowActions:f,onTTI:m=(()=>{}),onSelectionChange:g,handlePreview:S,handleFavorite:v,selection:T,visibleTopSectionIndex:b,onVisibleTopSectionIndexChange:O,isFavorite:E,overFlowActionHandler:P,isLoading:I,loadingTilesCount:y=35,onGridItemsRendered:A})=>{n.useEffect(m,[]);const C=n.useMemo(()=>e.toArray().map(e=>(null==e?void 0:e.file_obj_id)||""),[e]),[w,M]=n.useState(1),x=n.useRef(),L=n.useCallback(e=>{var t;null===(t=x.current)||void 0===t||t.scrollToSection(e),O(e)},[x.current,O]),N=(function(){const e=h.useWebPhotosLogger(),t=n.useRef(0);return n.useCallback(o=>{const n=Math.floor(o.scrollOffset/window.innerHeight);t.current<n&&(t.current=n,e(p.WebPhotosEvent.scrollPhotosPage,{scrollDepth:`${n}`}))},[e])})(),R={sectionLabels:[new Date],sectionStartIndices:[0]};return n.default.createElement("div",{className:"photo-grid-wrapper"},n.default.createElement(l.SelectableList,{itemIds:C,keyScope:l.SELECTABLE_TILE_GRID_KEY_SCOPE,onSelectionChange:g,selection:T,tilesPerRow:w,sectionStartIndices:t.sectionStartIndices},({handleDeselect:s,handleSelect:l,updateSelection:p})=>n.default.createElement(u.PhotoHeaderContext.Provider,{value:{updateSelection:p,itemIds:C,grouping:_,selection:T,sections:I?R:t}},n.default.createElement(c.PhotoTileContext.Provider,{value:{handleDeselect:s,handleSelect:l,selection:T,handlePreview:S,handleFavorite:v,isFavorite:E,actions:f,actionHandler:P}},n.default.createElement(a.VirtualizedGrid,{items:I?Array(y).fill({}):e.map((e,t)=>Object.assign(Object.assign({},e),{index:t})).toArray(),sections:I?R:t,minimumWidth:d.zoomLevels[o].width,thumbnailSize:d.zoomLevels[o].thumbnailSize,renderHeader:u.PhotoHeader,headerHeight:r.HeaderHeight,renderTile:I?i.LoadingTile:c.PhotoTile,overscanCount:20,tilesPerRow:w,onTilePerRowChange:M,onScroll:N,onScrollSection:O,gridRef:x,onGridItemsRendered:A})))),n.default.createElement(s.TimelineScrollSpy,{items:t.sectionLabels,format:_,selectedIndex:b,onClick:L}))},t.PhotoTileGrid.displayName="PhotoTileGrid"})),define("modules/clean/react/photos/timeline_grid/timeline",["require","exports","tslib","immutable","lodash","react","react-intl","react-redux","classnames","modules/clean/active_user","modules/clean/browse_interface","modules/clean/bug_reporting/routing","modules/clean/pagelet_logger","modules/clean/react/browse/models","modules/clean/react/browse/selection_indicator","modules/clean/react/files_view/file_list_empty_folder_table","modules/clean/react/file_viewer/async_controller","modules/clean/react/file_viewer/toggle_browse_elements_util","modules/clean/react/maestro/layout/search","modules/clean/react/maestro/layout/header","modules/clean/react/photos/timeline_grid/constants","modules/clean/react/photos/timeline_grid/data/actions","modules/clean/react/photos/timeline_grid/data/selectors","modules/clean/react/photos/timeline_grid/data/types","modules/clean/react/photos/timeline_grid/data/store","modules/clean/react/photos/timeline_grid/file_actions","modules/clean/react/photos/timeline_grid/photos_action_bar","modules/clean/react/photos/timeline_grid/tile_grid","modules/clean/web_timing_logger","modules/constants/python","modules/core/i18n","photos/filter-bar/index","photos/share-modal/index","photos/share-snackbar/index","modules/clean/react/photos/logging/photos_events_logger","modules/clean/react/photos/logging/logging_context","modules/core/browser","modules/clean/display_format","modules/clean/react/home/resource_id_types","dropbox/proto/js_init_data/photos_web/photos_web","proto_utils/unpack","modules/clean/react/components/css"],(function(e,t,o,n,i,r,a,s,l,c,u,d,p,h,_,f,m,g,S,v,T,b,O,E,P,I,y,A,C,w,M,x,L,N,R,F,k,z,H,D,j,W){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._PhotosTimeline=t.RootComponent=t.PhotosTimelinePage=void 0,n=o.__importStar(n),r=o.__importDefault(r),l=o.__importDefault(l),C=o.__importStar(C);class G extends r.default.Component{constructor(e){super(e),this.user=c.mustGetActiveUser(),this.handleTTI=()=>{this.context.logWebPhotosEvent(R.WebPhotosEvent.shownPhotosPage),G.pageletLogger.componentReady("PhotosTimeline")},this.handleFilterChange=e=>{this.context.logWebPhotosEvent(R.WebPhotosEvent.selectPhotoFilter,{filterSelection:e}),this.props.setFilter(e)},this.handleGroupingChange=e=>{this.context.logWebPhotosEvent(R.WebPhotosEvent.selectPhotoGroupBy,{groupBySelection:e}),this.props.setGrouping(e)},this.handleGridSizeChange=e=>{this.props.setGridSize(e)},this.handleSelectionChange=e=>{this.context.logWebPhotosEvent(R.WebPhotosEvent.selectPhotoThumbnail,{thumbnailSelectCount:`${e.selected.size}`}),this.props.setSelection(e),this.props.setShareLinkStatus(E.ShareLinkStatus.None),this.props.setShareLink("")},this.getReadableSelectionSizeText=()=>{const e=this.props.selectedMediaSize;return z.format_bytes(e)},this.generateShareLink=()=>{this.closeModal();const e=this.props.selection.selected.toArray();this.context.logWebPhotosEvent(R.WebPhotosEvent.sharePhotos,{itemCount:`${e.length}`}),this.props.fetchShareLink(e)},this.openShareLink=()=>{k.open_tab(this.props.shareLink)},this.openModal=()=>{this.context.logWebPhotosEvent(R.WebPhotosEvent.openSharingModal),this.setState({modalOpen:!0})},this.closeModal=()=>{this.setState({modalOpen:!1})},this.handleFavorite=e=>{this.context.logWebPhotosEvent(this.getFavoriteById(e)?R.WebPhotosEvent.unstarPhotoThumbnail:R.WebPhotosEvent.starPhotoThumbnail),this.props.toggleFavorite(this.user,e)},this.handlePreview=e=>{this.context.logWebPhotosEvent(R.WebPhotosEvent.openPhotoPreview);const{filteredFiles:t}=this.props,o=t.findIndex(t=>t.file_id===e),n=t.toArray();m.asyncOpenPreview({disableHydrateStore:!0,containerId:T.PHOTOS_FILE_VIEWER_ELEMENT_ID,files:n,indexOfPreviewFile:o,user:this.user,updateBrowserLocation:!1,onFileViewerDidMount:g.hideElementsBehindFileViewer,onFileViewerUnmount:()=>{g.showElementsBehindFileViewer()},fileViewAction:w.FileViewActionType.CLICK,fileViewOrigin:w.FileViewOriginType.PHOTOS,fileViewTarget:w.FileViewTargetType.PRIVATE,usePreloadedMetadata:!0})},this.overFlowActionHandler=(e,t)=>{var o;I.getActionHandlers(e,this.props.context,n.List([h.File.fromApiV2Object(null===(o=t.metadata)||void 0===o?void 0:o.extra_file_metadata)]),this.props.user,this.props.blockHash,this.props.toggleFavorite,this.props.removeItems)},this.onGridItemsRendered=i.throttle(e=>{const{overscanStartItem:t,overscanStopItem:o}=e;if(this.props.filteredFiles.size>0&&void 0!==t&&void 0!==o){const e=t.index,n=o.index;this.props.prewarmPreviewInfo(this.props.filteredFiles.toArray().slice(e,n+1),this.user)}},200),this.renderTitle=e=>r.default.createElement("div",{className:"photos-header"},r.default.createElement("div",{className:"photos-title"},r.default.createElement(v.MaestroHeaderTitle,null,M.intl.formatMessage({id:"yLLoZO",defaultMessage:"Photos"}))),r.default.createElement("div",{className:"photos-selection-view-container"},r.default.createElement(_.SelectionIndicator,{responsive:e,selectedFilesCount:this.props.selection.selected.size,rightRailCollapsed:!0,isInFamilyFolder:!1}))),this.renderAppContent=e=>{const{blockHash:t,items:o,sections:n,filter:i,grouping:a,gridSize:s,selection:l,visibleTopSectionIndex:c,shareLinkStatus:p,showLoadingState:h}=this.props,_=this.props.selection.selected.count();let m;return m=this.props.allFiles.count()||h?r.default.createElement(r.default.Fragment,null,r.default.createElement(L.ShareModal,{modalOpen:this.state.modalOpen,numSelectedItems:_,generateShareLink:this.generateShareLink,closeModal:this.closeModal,calculateReadableSelectionSize:this.getReadableSelectionSizeText}),r.default.createElement(y.PhotosActionBar,{blockHash:t,isWebPhotosMultishare:this.props.isWebPhotosMultishare,openShareLinkModal:this.openModal,isFavorite:e=>!!this.getFavoriteById(e)}),r.default.createElement(x.FilterBar,{filter:i,grouping:a,gridSize:s,onFilterChange:this.handleFilterChange,onGroupingChange:this.handleGroupingChange,onSizeChange:this.handleGridSizeChange,compact:!e.isMatchedLarge}),r.default.createElement(A.PhotoTileGrid,{key:"photo-tile-grid",items:o,isFavorite:e=>!!this.getFavoriteById(e),sections:n,gridSize:s,grouping:a,onTTI:this.handleTTI,selection:l,onSelectionChange:this.handleSelectionChange,handlePreview:this.handlePreview,visibleTopSectionIndex:c,onVisibleTopSectionIndexChange:e=>this.props.setVisibleTopSectionIndex(e),handleFavorite:this.handleFavorite,overFlowActions:I.singleItemSelectedActionBarActions,overFlowActionHandler:this.overFlowActionHandler,isLoading:h,onGridItemsRendered:this.onGridItemsRendered}),r.default.createElement(N.ShareSnackbar,{isCreated:p===E.ShareLinkStatus.Created,isErrored:p===E.ShareLinkStatus.Errored,openShareLink:this.openShareLink})):r.default.createElement(f.EmptyFolderTable,{onTTI:this.handleTTI,title:M.intl.formatMessage({id:"LSKEjD",defaultMessage:"You have no photos or videos"}),subtitle:M.intl.formatMessage({id:"/IY+3s",defaultMessage:"Add photos or videos to your Dropbox and they’ll appear here."}),subtitleLink:u.get_browse_root(this.user)}),r.default.createElement(d.RegisterComponentWithBugReporter,{componentId:"web.photos",componentName:"Photos"},r.default.createElement("div",{className:"photos-timeline"},m))},this.state={modalOpen:!1}}componentDidMount(){this.mountFileViewerTarget(),C.log_js_modules_application_code_start(),this.props.setUser(this.user),this.props.loadItems(),new Promise((t,o)=>{e(["modules/clean/react/starred/browse_exports"],t,o)}).then(o.__importStar).then(({StarredStore:e})=>{const t=e.addListener(()=>{this.props.updateFavorites(e.getAllStarredPairStrings())});this.removeStarredStoreListener=()=>{t()}})}componentDidUpdate(e){this.props.allFiles.size!==e.allFiles.size&&this.props.loadFavorites(this.user,this.props.allFiles)}componentWillUnmount(){this.unmountFileViewerTarget(),this.removeStarredStoreListener&&this.removeStarredStoreListener()}mountFileViewerTarget(){let e=document.getElementById(T.PHOTOS_FILE_VIEWER_ELEMENT_ID);e||(e=document.createElement("div"),e.id=T.PHOTOS_FILE_VIEWER_ELEMENT_ID,document.body.prepend(e))}unmountFileViewerTarget(){const e=document.getElementById(T.PHOTOS_FILE_VIEWER_ELEMENT_ID);e&&document.body.removeChild(e)}getFavoriteById(e){return this.props.favorites[`${H.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}:${e}`]}render(){return r.default.createElement(a.RawIntlProvider,{value:M.intl},r.default.createElement(S.SearchChrome,{user:c.mustGetActiveUser(),titleRegion:this.renderTitle,searchBarProps:{searchVariant:"full-page"},embeddedAppRegion:this.renderAppContent,chromeClass:l.default("dig2--enabled","photos-grid-chrome"),useMaestroPortal:!0}))}}t._PhotosTimeline=G,G.pageletLogger=new p.PageletLogger("photos_page",["PhotosTimeline"]),G.contextType=F.LoggingContext,G.displayName="UnconnectedPhotosTimeline";const B=s.connect(e=>({items:O.getItems(e),allFiles:O.getAllFiles(e),sections:O.getSections(e),filter:O.getFilter(e),grouping:O.getGrouping(e),gridSize:O.getGridSize(e),selection:O.getSelection(e),visibleTopSectionIndex:O.getVisibleTopSectionIndex(e),user:O.getUser(e),filteredFiles:O.getFilteredFiles(e),favorites:O.getFavorites(e),context:O.getContext(e),shareLink:O.getShareLink(e),shareLinkStatus:O.getShareLinkStatus(e),selectedMediaSize:O.getSelectedMediaSize(e),showLoadingState:O.getShowLoadingState(e)}),{loadItems:b.loadItems,loadFavorites:b.loadFavorites,removeItems:b.removeItems,setFilter:b.setFilter,setGrouping:b.setGrouping,setGridSize:b.setGridSize,setSelection:b.setSelection,setVisibleTopSectionIndex:b.setVisibleTopSectionIndex,setUser:b.setUser,toggleFavorite:b.toggleFavorite,fetchShareLink:b.fetchShareLink,setShareLink:b.setShareLink,setShareLinkStatus:b.setShareLinkStatus,updateFavorites:b.updateFavorites,prewarmPreviewInfo:b.prewarmPreviewInfo})(G);t.PhotosTimelinePage=W.requireCssWithComponent(B,["/static/css/photos/photos-vflh18qZo.css"]);const U=P.getStoreForPhotosTimeline();t.RootComponent=e=>{const o=j.unpackProto(e.encodedProto,D.photos_web.PhotosTimelinePageProps);return o.webTimingLoggerServerContext&&C.initialize({log_time_to_view:!0,log_time_to_interactive:!0},o.webTimingLoggerServerContext),r.default.createElement(s.Provider,{store:U},r.default.createElement(F.LoggingProvider,{value:{logWebPhotosEvent:R.logWebPhotosEvent}},r.default.createElement(t.PhotosTimelinePage,Object.assign({},o))))}})),define("modules/clean/react/photos/timeline_grid/zoom_levels",["require","exports","photos/filter-bar/index"],(function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.zoomLevels=void 0;t.zoomLevels={[o.PhotoGridSize.EXTRA_SMALL]:{width:80,thumbnailSize:256},[o.PhotoGridSize.SMALL]:{width:100,thumbnailSize:256},[o.PhotoGridSize.MEDIUM]:{width:150,thumbnailSize:256},[o.PhotoGridSize.LARGE]:{width:200,thumbnailSize:512},[o.PhotoGridSize.EXTRA_LARGE]:{width:400,thumbnailSize:512}}})),define("photos/loading-tile/index",["require","exports","tslib","react","dig-components/progress_indicators","react-intl"],(function(e,t,o,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadingTile=void 0,n=o.__importDefault(n),t.LoadingTile=()=>{const{loadingAriaLable:e}={loadingAriaLable:r.useIntl().formatMessage({id:"WaMtfr",defaultMessage:"Loading Photo"})};return n.default.createElement("div",{className:"loading-tile"},n.default.createElement(i.Spinner,{"aria-valuetext":e,size:"xsmall"}))}})),define("photos/share-button/index",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/typography","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareButton=void 0,n=o.__importDefault(n),t.ShareButton=({isLoading:e,openShareLinkModal:t})=>{const{shareButtonText:o,accessText:c}=(function(){const e=i.useIntl();return{shareButtonText:e.formatMessage({id:"0WmBsM",defaultMessage:"Share Link"}),accessText:e.formatMessage({id:"SPOVai",defaultMessage:"Only you have access"})}})();return n.default.createElement(n.default.Fragment,null,n.default.createElement(r.Button,{variant:"outline","data-testid":"ShareButton",withIconLeft:n.default.createElement(s.UIIcon,{src:l.LinkLine}),onClick:()=>{t()},disabled:e,isLoading:e},o),n.default.createElement(a.Text,{tagName:"p",color:"faint"},c))},t.ShareButton.displayName="ShareButton"})),define("photos/share-modal/index",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/modal","dig-components/typography","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareModal=void 0,n=o.__importDefault(n),t.ShareModal=({modalOpen:e,numSelectedItems:t,generateShareLink:o,closeModal:u,calculateReadableSelectionSize:d})=>{const{headerMessage:p,shareText:h,permissionsText:_,cancelButtonText:f,generateLinkButtonText:m}=(function(e){const t=i.useIntl();return{headerMessage:t.formatMessage({id:"FHXjfu",defaultMessage:"{num, plural, one{# item} other{# items}}"},{num:e}),shareText:t.formatMessage({id:"L1WxZI",defaultMessage:"Share a link"}),permissionsText:t.formatMessage({id:"JpIFJJ",defaultMessage:"Anyone with this link can view and download these items"}),cancelButtonText:t.formatMessage({id:"lG6dGA",defaultMessage:"Cancel"}),generateLinkButtonText:t.formatMessage({id:"KPeC3o",defaultMessage:"Copy link"})}})(t),g=e?d():"";return n.default.createElement(a.Modal,{open:e,isCentered:!0,withCloseButton:"Close",onRequestClose:()=>{u()},className:"share-modal"},n.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard",className:"share-modal-header"},n.default.createElement(a.Modal.Title,null,n.default.createElement(l.UIIcon,{src:c.ImageLine})," ",p," ",n.default.createElement(s.Text,{color:"faint"}," ",g))),n.default.createElement(a.Modal.Body,{hasVerticalSpacing:!1,className:"share-modal-body"},n.default.createElement(s.Title,null,h),n.default.createElement(s.Text,{tagName:"p"},_)),n.default.createElement(a.Modal.Footer,{className:"share-modal-footer"},n.default.createElement(r.Button,{variant:"opacity",onClick:()=>{u()}},f),n.default.createElement(r.Button,{variant:"primary",onClick:()=>{o()}},m)))},t.ShareModal.displayName="ShareModal"})),define("photos/share-snackbar/index",["require","exports","tslib","react","react-intl","dig-components/snackbar","dig-components/buttons","dig-components/icons","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareSnackbar=void 0,n=o.__importDefault(n),t.ShareSnackbar=({isCreated:e,isErrored:t,openShareLink:o})=>{const{previewLinkText:c,snackbarMessageText:u}=(function(e,t){const o=i.useIntl();let n="";e?n=o.formatMessage({id:"/n3qOR",defaultMessage:"Share link created and copied to clipboard"}):t&&(n=o.formatMessage({id:"fhpAGc",defaultMessage:"Something went wrong..."}));return{previewLinkText:o.formatMessage({id:"WLtCOz",defaultMessage:"Preview link"}),snackbarMessageText:n}})(e,t);return n.default.createElement(r.Snackbar,{open:e||t},n.default.createElement(r.Snackbar.Message,null,u),e&&n.default.createElement(r.Snackbar.Actions,null,n.default.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:()=>{o()},withIconLeft:n.default.createElement(s.UIIcon,{src:l.OpenLine})},c)))},t.ShareSnackbar.displayName="ShareSnackbar"})),define("photos/virtualized-grid/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRID_GAP=void 0,t.GRID_GAP=4})),define("photos/virtualized-grid/index",["require","exports","tslib","react","react-virtualized-auto-sizer","react-window","photos/virtualized-grid/row","photos/virtualized-grid/constants"],(function(e,t,o,n,i,r,a,s){"use strict";function l({minimumWidth:e,thumbnailSize:t,items:o,sections:i,renderTile:l,renderHeader:u,headerHeight:d,overscanCount:p,tilesPerRow:h,onTilePerRowChange:_,onScroll:f,onScrollSection:m,gridRef:g,height:S,width:v,listRef:T,onGridItemsRendered:b}){const[O,E]=(function(e){var t;const[o,i]=n.useState(0),r=n.useRef(),{offsetWidth:a,clientWidth:s}=null!==(t=r.current)&&void 0!==t?t:{offsetWidth:0,clientWidth:0};return n.useLayoutEffect(()=>{i(a-s)},[e,a,s]),[o,r]})(v),P=Math.max(Math.floor((v-O)/(e+s.GRID_GAP)),1),I=(v-O-s.GRID_GAP*(P-1))/P,{rows:y,sectionIndices:A}=n.useMemo(()=>(function(e,t,o){const n=[],i=[];for(let r=0;r<t.sectionLabels.length;r++){i.push(n.length),n.push({index:r,label:t.sectionLabels[r]});const a=t.sectionStartIndices[r],s=t.sectionStartIndices[r+1],l=void 0===s?e.length:s;for(let t=a;t<l;t+=o){const i=Math.min(l,t+o);n.push(e.slice(t,i))}}return{rows:n,sectionIndices:i}})(o,i,P),[o,i,P]);n.useEffect(()=>{void 0!==_&&P!==h&&_(P)},[_,P,h]),n.useImperativeHandle(g,()=>({scrollToSection:e=>{var t;null===(t=null==T?void 0:T.current)||void 0===t||t.scrollToItem(A[e],"start")}}));const C=n.useCallback(({visibleStartIndex:e,overscanStopIndex:t,overscanStartIndex:o})=>{if(m&&m((function(e,t){for(let o=e+1;o>=0;o--){const e=t[o];if(e&&a.isHeader(e))return e.index}return 0})(e,y)),b){const e=c(o,y),n=(function(e,t){let o;for(let n=e;n>=0;n--){const e=t[n];if(e&&!a.isHeader(e)){o=e;break}}return o})(t,y);b({overscanStartItem:e&&e[0],overscanStopItem:n&&n[(null==n?void 0:n.length)-1]})}},[m,y,b,c]),w={renderTile:l,renderHeader:u,rows:y,tileSize:I,thumbnailSize:t};return n.default.createElement(r.VariableSizeList,{"data-testid":"virtualized-grid",onScroll:f,className:"virtualized-grid",ref:T,outerRef:E,height:S,width:v,overscanCount:p,itemCount:y.length,itemSize:e=>s.GRID_GAP+(a.isHeader(y[e])?d:I),estimatedItemSize:I+s.GRID_GAP+i.sectionLabels.length/y.length*(d-I),itemData:w,onItemsRendered:m?C:void 0},a.RowWrapper)}function c(e,t){let o;for(let n=e;n<t.length;n++){const e=t[n];if(e&&!a.isHeader(e)){o=e;break}}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.VirtualizedGrid=void 0,n=o.__importStar(n),i=o.__importDefault(i),t.VirtualizedGrid=function(e){const t=n.useRef(null),{minimumWidth:o,items:r,sections:a,headerHeight:s}=e;return n.useLayoutEffect(()=>{var e;null===(e=t.current)||void 0===e||e.resetAfterIndex(0,!1)},[o,r.length,a,s]),n.default.createElement(i.default,{onResize:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.resetAfterIndex(0,!0)}},o=>n.default.createElement(l,Object.assign({},o,e,{listRef:t})))}})),define("photos/virtualized-grid/row",["require","exports","tslib","react","react-window","photos/virtualized-grid/tile"],(function(e,t,o,n,i,r){"use strict";function a(e){return!Array.isArray(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.RowWrapperMemo=t.isHeader=t.RowWrapper=void 0,n=o.__importStar(n),t.RowWrapper=({index:e,style:t,data:o})=>{const{renderHeader:i,renderTile:s,rows:l,tileSize:c,thumbnailSize:u}=o,d=l[e];return n.default.createElement("div",{style:t},a(d)?n.default.createElement(i,Object.assign({},d)):d.map((e,t)=>n.default.createElement(r.TileWrapperMemo,{index:t,size:c,key:t},n.default.createElement(s,{item:e,thumbnailSize:u}))))},t.isHeader=a,t.RowWrapperMemo=n.memo(t.RowWrapper,i.areEqual)})),define("photos/virtualized-grid/tile",["require","exports","tslib","react","photos/virtualized-grid/constants"],(function(e,t,o,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TileWrapperMemo=void 0,n=o.__importStar(n);const r=({index:e,size:t,children:o})=>{const r=e*(t+i.GRID_GAP);return n.default.createElement("div",{className:"tile",style:{height:t,width:t,left:r}},o)};r.displayName="TileWrapper",t.TileWrapperMemo=n.memo(r)})),define("photos/filter-bar/index",["require","exports","tslib","react","dig-components/controls","dig-components/menu","dig-components/buttons","photos/slider/index","react-intl"],(function(e,t,o,n,i,r,a,s,l){"use strict";var c,u,d;function p({onSelection:e,selectedValue:t,choices:o,compact:s,className:l}){const c=o=>{o&&o!==t&&e(o)};return s?n.default.createElement(r.Menu.Wrapper,{onSelection:c,className:l},({getContentProps:e,getTriggerProps:i})=>{var s;return n.default.createElement(n.default.Fragment,null,n.default.createElement(a.Button,Object.assign({},i(),{variant:"opacity",withDropdownIcon:!0}),null===(s=o.find(e=>e.value==t))||void 0===s?void 0:s.text),n.default.createElement(r.Menu.Content,Object.assign({},e(),{placement:"bottom-end"}),n.default.createElement(r.Menu.Segment,null,o.map(({value:e,text:o,testid:i})=>n.default.createElement(r.Menu.SelectItem,{key:e,value:e,selected:e===t,"data-testid":i},o)))))}):n.default.createElement(i.SegmentedControl,{selectedValue:t,onSelection:c,className:l},o.map(({value:e,text:t,testid:o})=>n.default.createElement(i.SegmentedControl.Option,{variant:"text",key:e,value:e,"data-testid":o},t)))}Object.defineProperty(t,"__esModule",{value:!0}),t.FilterBar=t.PhotoGridSize=t.PhotoFilter=t.PhotoGrouping=void 0,n=o.__importDefault(n),(c=t.PhotoGrouping||(t.PhotoGrouping={})).YEARS="years",c.MONTHS="months",c.DAYS="days",(u=t.PhotoFilter||(t.PhotoFilter={})).ALL="all",u.PHOTOS="photos",u.VIDEOS="videos",u.STARRED="starred",(d=t.PhotoGridSize||(t.PhotoGridSize={}))[d.EXTRA_SMALL=1]="EXTRA_SMALL",d[d.SMALL=2]="SMALL",d[d.MEDIUM=3]="MEDIUM",d[d.LARGE=4]="LARGE",d[d.EXTRA_LARGE=5]="EXTRA_LARGE",t.FilterBar=({filter:e,grouping:o,gridSize:i,onFilterChange:r,onGroupingChange:a,onSizeChange:c,compact:u})=>{const{filterChoices:d,groupingChoices:h}=(function(){const{allItemsText:e,photosText:o,videosText:n,starredText:i,yearsText:r,monthsText:a,daysText:s}=(function(){const e=l.useIntl();return{allItemsText:e.formatMessage({id:"EZV/rb",defaultMessage:"All Items"}),photosText:e.formatMessage({id:"UIUkU/",defaultMessage:"Photos"}),videosText:e.formatMessage({id:"zJ1b5+",defaultMessage:"Videos"}),starredText:e.formatMessage({id:"IQQznX",defaultMessage:"Starred"}),yearsText:e.formatMessage({id:"rk1sjy",defaultMessage:"Years"}),monthsText:e.formatMessage({id:"Az9n5x",defaultMessage:"Months"}),daysText:e.formatMessage({id:"5GOC/d",defaultMessage:"Days"})}})(),c=[{value:t.PhotoFilter.ALL,text:e},{value:t.PhotoFilter.PHOTOS,text:o},{value:t.PhotoFilter.VIDEOS,text:n},{value:t.PhotoFilter.STARRED,text:i}],u=[{value:t.PhotoGrouping.YEARS,text:r,testid:"grouping-years"},{value:t.PhotoGrouping.MONTHS,text:a,testid:"grouping-months"},{value:t.PhotoGrouping.DAYS,text:s,testid:"grouping-days"}];return{filterChoices:c,groupingChoices:u}})();return n.default.createElement("div",{className:"photos-filter-bar"},n.default.createElement(p,{className:"photos-filter-bar_selection",onSelection:r,selectedValue:e,choices:d,compact:u}),n.default.createElement(p,{className:"photos-filter-bar_selection",onSelection:a,selectedValue:o,choices:h,compact:u}),n.default.createElement(s.ZoomSlider,{min:t.PhotoGridSize.EXTRA_SMALL,max:t.PhotoGridSize.EXTRA_LARGE,value:i,onChange:c}))},t.FilterBar.displayName="FilterBar"})),define("photos/slider/index",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","react-intl","dig-components/icons/src"],(function(e,t,o,n,i,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ZoomSlider=void 0,n=o.__importDefault(n),t.ZoomSlider=function({min:e,max:t,value:o,onChange:l}){const{labelZoomSlider:c,labelZoomIn:u,labelZoomOut:d}=(function(){const e=a.useIntl();return{labelZoomSlider:e.formatMessage({id:"c8/2nC",defaultMessage:"Photo Zoom Slider"}),labelZoomOut:e.formatMessage({id:"bIE1hT",defaultMessage:"Zoom out photos"}),labelZoomIn:e.formatMessage({id:"FOYbuM",defaultMessage:"Zoom in photos"})}})(),p={backgroundSize:`${(o-1)/(t-e)*100}% 100%`};return n.default.createElement("div",{className:"zoom-slider-container"},n.default.createElement(i.IconButton,{"aria-label":d,className:"zoom-slider-button",variant:"opacity",disabled:o==e,onClick:()=>l(o-1),"data-testid":"zoom-out-button"},n.default.createElement(r.UIIcon,{src:s.ZoomOutLine})),n.default.createElement("input",{"aria-label":c,style:p,className:"zoom-slider",type:"range",min:e,max:t,value:o,onChange:e=>l(parseInt(e.target.value,10))}),n.default.createElement(i.IconButton,{"aria-label":u,className:"zoom-slider-button",variant:"opacity",disabled:o==t,onClick:()=>l(o+1),"data-testid":"zoom-in-button"},n.default.createElement(r.UIIcon,{src:s.ZoomInLine})))}})),define("photos/photo-tile/index",["require","exports","tslib","react","react-intl","classnames","dig-components/badges","dig-components/controls","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/index"],(function(e,t,o,n,i,r,a,s,l,c,u,d){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoTileMemo=t.PhotoTile=t.InteractionEvent=void 0,n=o.__importStar(n),r=o.__importDefault(r),(p=t.InteractionEvent||(t.InteractionEvent={})).SELECT="select",p.CLICK="click",p.FAVORITE="favorite",t.PhotoTile=({duration:e,isSelected:o,isStarred:p,onUserInteraction:h,thumbnailUrl:_,actions:f,overFlowActionHandler:m,menuToggleHandler:g,imageName:S})=>{const{addFavoriteAriaLabel:v,removeFavoriteAriaLabel:T,selectAriaLabel:b,unSelectAriaLabel:O,tileVideoAltText:E,tileImageAltText:P}=(function(){const e=i.useIntl();return{addFavoriteAriaLabel:e.formatMessage({id:"H09L3p",defaultMessage:"Add to favorites"}),removeFavoriteAriaLabel:e.formatMessage({id:"W7fGIp",defaultMessage:"Remove from favorites"}),selectAriaLabel:e.formatMessage({id:"h36j1+",defaultMessage:"Select Item"}),unSelectAriaLabel:e.formatMessage({id:"3neLkf",defaultMessage:"Unselect Item"}),tileImageAltText:e.formatMessage({id:"ukB1YT",defaultMessage:"Image"}),tileVideoAltText:e.formatMessage({id:"tOgleF",defaultMessage:"Video"})}})(),I={handleAction:e=>{e.event.stopPropagation(),m(e.type)},handleMenuToggle:()=>{}};return n.default.createElement("div",{className:r.default("photo-tile",{"photo-tile--selected":o}),"data-testid":"photo-tile",onClick:e=>h(t.InteractionEvent.CLICK,e),tabIndex:0},n.default.createElement(s.Checkbox,{className:r.default("tile-checkbox",{"tile-checkbox--selected":o}),checked:o,onClick:e=>{e.stopPropagation(),h(t.InteractionEvent.SELECT,e)},inverse:!0,"aria-label":o?O:b}),n.default.createElement("div",{onClick:e=>e.stopPropagation()},n.default.createElement(d.InlineOverflowMenu,{actions:f,actionHandler:I,className:"photo-tile_overflow-menu",intl:i.useIntl(),size:"small",isMobile:!1,expActionBarRedesignVariant:"OFF",handleOverflowMenuToggle:g,overflowMenuTitle:"",inverse:!0})),n.default.createElement(l.IconButton,{className:r.default("photo-tile_star",{starred:p}),variant:"transparent",onClick:e=>{e.stopPropagation(),h(t.InteractionEvent.FAVORITE,e)},inverse:!0,tabIndex:0,"aria-label":p?T:v},n.default.createElement(c.UIIcon,{src:p?u.StarFill:u.StarLine})),e&&n.default.createElement(a.AccessoryBadge,{className:"duration-badge"},e),n.default.createElement("img",{className:"photo-tile-img",draggable:!1,src:_,alt:`${e?E:P} - ${S}`}))},t.PhotoTile.displayName="PhotoTile",t.PhotoTileMemo=n.memo(t.PhotoTile),t.PhotoTileMemo.displayName="PhotoTileMemo"})),define("photos/photo-header/index",["require","exports","tslib","react","dig-components/controls","dig-components/combinations","dig-components/typography","react-intl","photos/filter-bar/index"],(function(e,t,o,n,i,r,a,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhotoSectionHeader=t.SectionSelection=t.HeaderHeight=void 0,n=o.__importStar(n),t.HeaderHeight=44;const c={[l.PhotoGrouping.DAYS]:{year:"numeric",month:"long",day:"numeric"},[l.PhotoGrouping.MONTHS]:{year:"numeric",month:"long"},[l.PhotoGrouping.YEARS]:{year:"numeric"}};var u;(u=t.SectionSelection||(t.SectionSelection={}))[u.NONE=0]="NONE",u[u.SOME=1]="SOME",u[u.ALL=2]="ALL";const d=({date:e,count:o,format:l,selection:u,onChange:d})=>n.default.createElement("div",{className:"photo-grid_date-header"},n.default.createElement(r.LabelGroup,{withText:n.default.createElement(a.Text,{variant:"label",isBold:!0},n.default.createElement(s.FormattedDate,Object.assign({value:e},c[l]))),withSubtext:n.default.createElement(s.FormattedMessage,{id:"hCjeki",defaultMessage:"{count, plural, one{# item} other{# items}}",values:{count:o}}),direction:"horizontal",withLeftAccessory:n.default.createElement(i.Checkbox,{isIndeterminate:u===t.SectionSelection.SOME,checked:u===t.SectionSelection.ALL,onChange:d})}));d.displayName="PhotoSectionHeader";const p=n.memo(d);t.PhotoSectionHeader=p})),define("photos/scroll-spy/index",["require","exports","tslib","react","dig-components/typography","classnames","photos/filter-bar/index","react-intl"],(function(e,t,o,n,i,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimelineScrollSpy=t.ScrollSpy=void 0,n=o.__importDefault(n),r=o.__importDefault(r);const l={[a.PhotoGrouping.DAYS]:{year:"numeric",month:"short",day:"numeric"},[a.PhotoGrouping.MONTHS]:{year:"numeric",month:"short"},[a.PhotoGrouping.YEARS]:{year:"numeric"}};t.ScrollSpy=({items:e,onClick:t,selectedIndex:o})=>{const a=e.map(()=>({labelRef:n.default.createRef(),lineRef:n.default.createRef()})),s=n.default.createRef();return n.default.useLayoutEffect(()=>{var e,t,n,i,r,l,c,u;if("number"==typeof o&&a.length>o){const{labelRef:d,lineRef:p}=a[o];null===(t=null===(e=p.current)||void 0===e?void 0:e.scrollIntoView)||void 0===t||t.call(e,{behavior:"auto",block:"center"});const h=(null!==(i=null===(n=d.current)||void 0===n?void 0:n.offsetTop)&&void 0!==i?i:0)-(null!==(l=null===(r=a[0].labelRef.current)||void 0===r?void 0:r.offsetTop)&&void 0!==l?l:0);null===(u=null===(c=s.current)||void 0===c?void 0:c.scrollTo)||void 0===u||u.call(c,{top:h})}},[a,s,o]),n.default.createElement("div",{className:"photos-scroll-spy"},n.default.createElement("div",{className:"section-labels--container"},n.default.createElement("div",{className:"section-labels",ref:s},n.default.createElement("div",{className:"section-padder"}),n.default.createElement("ul",{className:"section-labels--list"},e.map((e,s)=>n.default.createElement(i.Text,{tagName:"li",variant:"label",size:"xsmall",color:"faint",className:r.default("label",{selected:o===s}),onClick:()=>{t&&t(s)},key:s,ref:a[s].labelRef},e))),n.default.createElement("div",{className:"section-padder"}))),n.default.createElement("div",{className:"section-lines--container"},n.default.createElement("div",{className:"section-lines","aria-hidden":!0},n.default.createElement("div",{className:"section-padder"}),n.default.createElement("ul",{className:"section-lines--list","aria-hidden":!0},e.map((e,t)=>n.default.createElement("li",{className:r.default("line",{selected:o===t}),key:t,ref:a[t].lineRef}))),n.default.createElement("div",{className:"section-padder"}))))},t.ScrollSpy.displayName="ScrollSpy",t.TimelineScrollSpy=e=>{var{items:i,format:r}=e,a=o.__rest(e,["items","format"]);const c=s.useIntl();return n.default.createElement(t.ScrollSpy,Object.assign({items:i.map(e=>c.formatDate(e,l[r]))},a))},t.TimelineScrollSpy.displayName="TimelineScrollSpy"})),define("prod_assets_web_modules/react-virtualized-auto-sizer",["react"],(function(e){"use strict";var t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=(function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}})(),n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=(function(r){function a(){var e,o,n;t(this,a);for(var r=arguments.length,s=Array(r),l=0;l<r;l++)s[l]=arguments[l];return o=n=i(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(s))),n.state={height:n.props.defaultHeight||0,width:n.props.defaultWidth||0},n._onResize=function(){var e=n.props,t=e.disableHeight,o=e.disableWidth,i=e.onResize;if(n._parentNode){var r=n._parentNode.offsetHeight||0,a=n._parentNode.offsetWidth||0,s=window.getComputedStyle(n._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,c=parseInt(s.paddingRight,10)||0,u=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,p=r-u-d,h=a-l-c;(!t&&n.state.height!==p||!o&&n.state.width!==h)&&(n.setState({height:r-u-d,width:a-l-c}),i({height:r,width:a}))}},n._setRef=function(e){n._autoSizer=e},i(n,o)}return(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(a,r),o(a,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=(function(e){var t;t="undefined"!=typeof window?window:"undefined"!=typeof self?self:global;var o,n,i="undefined"!=typeof document&&document.attachEvent;if(!i){var r=(n=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},function(e){return n(e)}),a=(o=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||t.clearTimeout,function(e){return o(e)}),s=function(e){var t=e.__resizeTriggers__,o=t.firstElementChild,n=t.lastElementChild,i=o.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=o.offsetWidth+1+"px",i.style.height=o.offsetHeight+1+"px",o.scrollLeft=o.scrollWidth,o.scrollTop=o.scrollHeight},l=function(e){if(!(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;s(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=r((function(){(function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height})(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach((function(o){o.call(t,e)})))}))}},c=!1,u="",d="animationstart",p="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),_=document.createElement("fakeelement");if(void 0!==_.style.animationName&&(c=!0),!1===c)for(var f=0;f<p.length;f++)if(void 0!==_.style[p[f]+"AnimationName"]){u="-"+p[f].toLowerCase()+"-",d=h[f],c=!0;break}var m="resizeanim",g="@"+u+"keyframes "+m+" { from { opacity: 0; } to { opacity: 0; } } ",S=u+"animation: 1ms "+m+"; "}return{addResizeListener:function(o,n){if(i)o.attachEvent("onresize",n);else{if(!o.__resizeTriggers__){var r=o.ownerDocument,a=t.getComputedStyle(o);a&&"static"==a.position&&(o.style.position="relative"),(function(t){if(!t.getElementById("detectElementResize")){var o=(g||"")+".resize-triggers { "+(S||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',n=t.head||t.getElementsByTagName("head")[0],i=t.createElement("style");i.id="detectElementResize",i.type="text/css",null!=e&&i.setAttribute("nonce",e),i.styleSheet?i.styleSheet.cssText=o:i.appendChild(t.createTextNode(o)),n.appendChild(i)}})(r),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=r.createElement("div")).className="resize-triggers";var c=r.createElement("div");c.className="expand-trigger",c.appendChild(r.createElement("div"));var u=r.createElement("div");u.className="contract-trigger",o.__resizeTriggers__.appendChild(c),o.__resizeTriggers__.appendChild(u),o.appendChild(o.__resizeTriggers__),s(o),o.addEventListener("scroll",l,!0),d&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName==m&&s(o)},o.__resizeTriggers__.addEventListener(d,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(n)}},removeResizeListener:function(e,t){if(i)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}})(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var t=this.props,o=t.children,i=t.className,r=t.disableHeight,a=t.disableWidth,s=t.style,l=this.state,c=l.height,u=l.width,d={overflow:"visible"},p={},h=!1;return r||(0===c&&(h=!0),d.height=0,p.height=c),a||(0===u&&(h=!0),d.width=0,p.width=u),e.createElement("div",{className:i,ref:this._setRef,style:n({},d,s)},!h&&o(p))}}]),a})(e.PureComponent);return r.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},r})),define("prod_assets_web_modules/react-window",["exports","react"],(function(e,t){"use strict";function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,n(e,t)}function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var a=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function s(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!((n=e[o])===(i=t[o])||a(n)&&a(i)))return!1;var n,i;return!0}function l(e,t){var o;void 0===t&&(t=s);var n,i=[],r=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return r&&o===this&&t(a,i)||(n=e.apply(this,a),r=!0,o=this,i=a),n}}function c(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}var u="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function d(e){cancelAnimationFrame(e.id)}function p(e,t){var o=u(),n={id:requestAnimationFrame((function i(){u()-o>=t?e.call(null):n.id=requestAnimationFrame(i)}))};return n}var h=-1,_=null;function f(e){if(void 0===e&&(e=!1),null===_||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",o.direction="rtl";var n=document.createElement("div"),i=n.style;return i.width="100px",i.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?_="positive-descending":(t.scrollLeft=1,_=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),_}return _}var m=function(e){var t=e.columnIndex;return e.data,e.rowIndex+":"+t};function g(e){var n,a,s=e.getColumnOffset,c=e.getColumnStartIndexForOffset,u=e.getColumnStopIndexForStartIndex,_=e.getColumnWidth,g=e.getEstimatedTotalHeight,v=e.getEstimatedTotalWidth,T=e.getOffsetForColumnAndAlignment,b=e.getOffsetForRowAndAlignment,O=e.getRowHeight,E=e.getRowOffset,P=e.getRowStartIndexForOffset,I=e.getRowStopIndexForStartIndex,y=e.initInstanceProps,A=e.shouldResetStyleCacheOnItemSizeChange,C=e.validateProps;return a=n=(function(e){function n(t){var o;return(o=e.call(this,t)||this)._instanceProps=y(o.props,r(r(o))),o._resetIsScrollingTimeoutId=null,o._outerRef=void 0,o.state={instance:r(r(o)),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof o.props.initialScrollLeft?o.props.initialScrollLeft:0,scrollTop:"number"==typeof o.props.initialScrollTop?o.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},o._callOnItemsRendered=void 0,o._callOnItemsRendered=l((function(e,t,n,i,r,a,s,l){return o.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:n,overscanRowStopIndex:i,visibleColumnStartIndex:r,visibleColumnStopIndex:a,visibleRowStartIndex:s,visibleRowStopIndex:l})})),o._callOnScroll=void 0,o._callOnScroll=l((function(e,t,n,i,r){return o.props.onScroll({horizontalScrollDirection:n,scrollLeft:e,scrollTop:t,verticalScrollDirection:i,scrollUpdateWasRequested:r})})),o._getItemStyle=void 0,o._getItemStyle=function(e,t){var n,i=o.props,r=i.columnWidth,a=i.direction,l=i.rowHeight,c=o._getItemStyleCache(A&&r,A&&a,A&&l),u=e+":"+t;if(c.hasOwnProperty(u))n=c[u];else{var d=s(o.props,t,o._instanceProps),p="rtl"===a;c[u]=n={position:"absolute",left:p?void 0:d,right:p?d:void 0,top:E(o.props,e,o._instanceProps),height:O(o.props,e,o._instanceProps),width:_(o.props,t,o._instanceProps)}}return n},o._getItemStyleCache=void 0,o._getItemStyleCache=l((function(e,t,o){return{}})),o._onScroll=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.clientWidth,r=t.scrollLeft,a=t.scrollTop,s=t.scrollHeight,l=t.scrollWidth;o.setState((function(e){if(e.scrollLeft===r&&e.scrollTop===a)return null;var t=o.props.direction,c=r;if("rtl"===t)switch(f()){case"negative":c=-r;break;case"positive-descending":c=l-i-r}c=Math.max(0,Math.min(c,l-i));var u=Math.max(0,Math.min(a,s-n));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<r?"forward":"backward",scrollLeft:c,scrollTop:u,verticalScrollDirection:e.scrollTop<a?"forward":"backward",scrollUpdateWasRequested:!1}}),o._resetIsScrollingDebounced)},o._outerRefSetter=function(e){var t=o.props.outerRef;o._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},o._resetIsScrollingDebounced=function(){null!==o._resetIsScrollingTimeoutId&&d(o._resetIsScrollingTimeoutId),o._resetIsScrollingTimeoutId=p(o._resetIsScrolling,150)},o._resetIsScrolling=function(){o._resetIsScrollingTimeoutId=null,o.setState({isScrolling:!1},(function(){o._getItemStyleCache(-1)}))},o}i(n,e),n.getDerivedStateFromProps=function(e,t){return S(e,t),C(e),null};var a=n.prototype;return a.scrollTo=function(e){var t=e.scrollLeft,o=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==o&&(o=Math.max(0,o)),this.setState((function(e){return void 0===t&&(t=e.scrollLeft),void 0===o&&(o=e.scrollTop),e.scrollLeft===t&&e.scrollTop===o?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:o,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<o?"forward":"backward"}}),this._resetIsScrollingDebounced)},a.scrollToItem=function(e){var t=e.align,o=void 0===t?"auto":t,n=e.columnIndex,i=e.rowIndex,r=this.props,a=r.columnCount,s=r.height,l=r.rowCount,c=r.width,u=this.state,d=u.scrollLeft,p=u.scrollTop,_=(function(e){if(void 0===e&&(e=!1),-1===h||e){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",document.body.appendChild(t),h=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return h})();void 0!==n&&(n=Math.max(0,Math.min(n,a-1))),void 0!==i&&(i=Math.max(0,Math.min(i,l-1)));var f=g(this.props,this._instanceProps),m=v(this.props,this._instanceProps)>c?_:0,S=f>s?_:0;this.scrollTo({scrollLeft:void 0!==n?T(this.props,n,o,d,this._instanceProps,S):d,scrollTop:void 0!==i?b(this.props,i,o,p,this._instanceProps,m):p})},a.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,o=e.initialScrollTop;if(null!=this._outerRef){var n=this._outerRef;"number"==typeof t&&(n.scrollLeft=t),"number"==typeof o&&(n.scrollTop=o)}this._callPropsCallbacks()},a.componentDidUpdate=function(){var e=this.props.direction,t=this.state,o=t.scrollLeft,n=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var i=this._outerRef;if("rtl"===e)switch(f()){case"negative":i.scrollLeft=-o;break;case"positive-ascending":i.scrollLeft=o;break;default:var r=i.clientWidth,a=i.scrollWidth;i.scrollLeft=a-r-o}else i.scrollLeft=Math.max(0,o);i.scrollTop=Math.max(0,n)}this._callPropsCallbacks()},a.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&d(this._resetIsScrollingTimeoutId)},a.render=function(){var e=this.props,n=e.children,i=e.className,r=e.columnCount,a=e.direction,s=e.height,l=e.innerRef,c=e.innerElementType,u=e.innerTagName,d=e.itemData,p=e.itemKey,h=void 0===p?m:p,_=e.outerElementType,f=e.outerTagName,S=e.rowCount,T=e.style,b=e.useIsScrolling,O=e.width,E=this.state.isScrolling,P=this._getHorizontalRangeToRender(),I=P[0],y=P[1],A=this._getVerticalRangeToRender(),C=A[0],w=A[1],M=[];if(r>0&&S)for(var x=C;x<=w;x++)for(var L=I;L<=y;L++)M.push(t.createElement(n,{columnIndex:L,data:d,isScrolling:b?E:void 0,key:h({columnIndex:L,data:d,rowIndex:x}),rowIndex:x,style:this._getItemStyle(x,L)}));var N=g(this.props,this._instanceProps),R=v(this.props,this._instanceProps);return t.createElement(_||f||"div",{className:i,onScroll:this._onScroll,ref:this._outerRefSetter,style:o({position:"relative",height:s,width:O,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:a},T)},t.createElement(c||u||"div",{children:M,ref:l,style:{height:N,pointerEvents:E?"none":void 0,width:R}}))},a._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,o=e.onItemsRendered,n=e.onScroll,i=e.rowCount;if("function"==typeof o&&t>0&&i>0){var r=this._getHorizontalRangeToRender(),a=r[0],s=r[1],l=r[2],c=r[3],u=this._getVerticalRangeToRender(),d=u[0],p=u[1],h=u[2],_=u[3];this._callOnItemsRendered(a,s,d,p,l,c,h,_)}if("function"==typeof n){var f=this.state,m=f.horizontalScrollDirection,g=f.scrollLeft,S=f.scrollTop,v=f.scrollUpdateWasRequested,T=f.verticalScrollDirection;this._callOnScroll(g,S,m,T,v)}},a._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanColumnCount,n=e.overscanColumnsCount,i=e.overscanCount,r=e.rowCount,a=this.state,s=a.horizontalScrollDirection,l=a.isScrolling,d=a.scrollLeft,p=o||n||i||1;if(0===t||0===r)return[0,0,0,0];var h=c(this.props,d,this._instanceProps),_=u(this.props,h,d,this._instanceProps),f=l&&"backward"!==s?1:Math.max(1,p),m=l&&"forward"!==s?1:Math.max(1,p);return[Math.max(0,h-f),Math.max(0,Math.min(t-1,_+m)),h,_]},a._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,o=e.overscanCount,n=e.overscanRowCount,i=e.overscanRowsCount,r=e.rowCount,a=this.state,s=a.isScrolling,l=a.verticalScrollDirection,c=a.scrollTop,u=n||i||o||1;if(0===t||0===r)return[0,0,0,0];var d=P(this.props,c,this._instanceProps),p=I(this.props,d,c,this._instanceProps),h=s&&"backward"!==l?1:Math.max(1,u),_=s&&"forward"!==l?1:Math.max(1,u);return[Math.max(0,d-h),Math.max(0,Math.min(r-1,p+_)),d,p]},n})(t.PureComponent),n.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},a}var S=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance},v=function(e,t){var o=e.rowCount,n=t.rowMetadataMap,i=t.estimatedRowHeight,r=t.lastMeasuredRowIndex,a=0;if(r>=o&&(r=o-1),r>=0){var s=n[r];a=s.offset+s.size}return a+(o-r-1)*i},T=function(e,t){var o=e.columnCount,n=t.columnMetadataMap,i=t.estimatedColumnWidth,r=t.lastMeasuredColumnIndex,a=0;if(r>=o&&(r=o-1),r>=0){var s=n[r];a=s.offset+s.size}return a+(o-r-1)*i},b=function(e,t,o,n){var i,r,a;if("column"===e?(i=n.columnMetadataMap,r=t.columnWidth,a=n.lastMeasuredColumnIndex):(i=n.rowMetadataMap,r=t.rowHeight,a=n.lastMeasuredRowIndex),o>a){var s=0;if(a>=0){var l=i[a];s=l.offset+l.size}for(var c=a+1;c<=o;c++){var u=r(c);i[c]={offset:s,size:u},s+=u}"column"===e?n.lastMeasuredColumnIndex=o:n.lastMeasuredRowIndex=o}return i[o]},O=function(e,t,o,n){var i,r;return"column"===e?(i=o.columnMetadataMap,r=o.lastMeasuredColumnIndex):(i=o.rowMetadataMap,r=o.lastMeasuredRowIndex),(r>0?i[r].offset:0)>=n?E(e,t,o,r,0,n):P(e,t,o,Math.max(0,r),n)},E=function(e,t,o,n,i,r){for(;i<=n;){var a=i+Math.floor((n-i)/2),s=b(e,t,a,o).offset;if(s===r)return a;s<r?i=a+1:s>r&&(n=a-1)}return i>0?i-1:0},P=function(e,t,o,n,i){for(var r="column"===e?t.columnCount:t.rowCount,a=1;n<r&&b(e,t,n,o).offset<i;)n+=a,a*=2;return E(e,t,o,Math.min(n,r-1),Math.floor(n/2),i)},I=function(e,t,o,n,i,r,a){var s="column"===e?t.width:t.height,l=b(e,t,o,r),c="column"===e?T(t,r):v(t,r),u=Math.max(0,Math.min(c-s,l.offset)),d=Math.max(0,l.offset-s+a+l.size);switch("smart"===n&&(n=i>=d-s&&i<=u+s?"auto":"center"),n){case"start":return u;case"end":return d;case"center":return Math.round(d+(u-d)/2);default:return i>=d&&i<=u?i:d>u||i<d?d:u}},y=g({getColumnOffset:function(e,t,o){return b("column",e,t,o).offset},getColumnStartIndexForOffset:function(e,t,o){return O("column",e,o,t)},getColumnStopIndexForStartIndex:function(e,t,o,n){for(var i=e.columnCount,r=e.width,a=b("column",e,t,n),s=o+r,l=a.offset+a.size,c=t;c<i-1&&l<s;)c++,l+=b("column",e,c,n).size;return c},getColumnWidth:function(e,t,o){return o.columnMetadataMap[t].size},getEstimatedTotalHeight:v,getEstimatedTotalWidth:T,getOffsetForColumnAndAlignment:function(e,t,o,n,i,r){return I("column",e,t,o,n,i,r)},getOffsetForRowAndAlignment:function(e,t,o,n,i,r){return I("row",e,t,o,n,i,r)},getRowOffset:function(e,t,o){return b("row",e,t,o).offset},getRowHeight:function(e,t,o){return o.rowMetadataMap[t].size},getRowStartIndexForOffset:function(e,t,o){return O("row",e,o,t)},getRowStopIndexForStartIndex:function(e,t,o,n){for(var i=e.rowCount,r=e.height,a=b("row",e,t,n),s=o+r,l=a.offset+a.size,c=t;c<i-1&&l<s;)c++,l+=b("row",e,c,n).size;return c},initInstanceProps:function(e,t){var o=e,n={columnMetadataMap:{},estimatedColumnWidth:o.estimatedColumnWidth||50,estimatedRowHeight:o.estimatedRowHeight||50,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return t.resetAfterColumnIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({columnIndex:e,shouldForceUpdate:o})},t.resetAfterRowIndex=function(e,o){void 0===o&&(o=!0),t.resetAfterIndices({rowIndex:e,shouldForceUpdate:o})},t.resetAfterIndices=function(e){var o=e.columnIndex,i=e.rowIndex,r=e.shouldForceUpdate,a=void 0===r||r;"number"==typeof o&&(n.lastMeasuredColumnIndex=Math.min(n.lastMeasuredColumnIndex,o-1)),"number"==typeof i&&(n.lastMeasuredRowIndex=Math.min(n.lastMeasuredRowIndex,i-1)),t._getItemStyleCache(-1),a&&t.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}}),A=function(e,t){return e};function C(e){var n,a,s=e.getItemOffset,c=e.getEstimatedTotalSize,u=e.getItemSize,h=e.getOffsetForIndexAndAlignment,_=e.getStartIndexForOffset,m=e.getStopIndexForStartIndex,g=e.initInstanceProps,S=e.shouldResetStyleCacheOnItemSizeChange,v=e.validateProps;return a=n=(function(e){function n(t){var o;return(o=e.call(this,t)||this)._instanceProps=g(o.props,r(r(o))),o._outerRef=void 0,o._resetIsScrollingTimeoutId=null,o.state={instance:r(r(o)),isScrolling:!1,scrollDirection:"forward",scrollOffset:"number"==typeof o.props.initialScrollOffset?o.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},o._callOnItemsRendered=void 0,o._callOnItemsRendered=l((function(e,t,n,i){return o.props.onItemsRendered({overscanStartIndex:e,overscanStopIndex:t,visibleStartIndex:n,visibleStopIndex:i})})),o._callOnScroll=void 0,o._callOnScroll=l((function(e,t,n){return o.props.onScroll({scrollDirection:e,scrollOffset:t,scrollUpdateWasRequested:n})})),o._getItemStyle=void 0,o._getItemStyle=function(e){var t,n=o.props,i=n.direction,r=n.itemSize,a=n.layout,l=o._getItemStyleCache(S&&r,S&&a,S&&i);if(l.hasOwnProperty(e))t=l[e];else{var c=s(o.props,e,o._instanceProps),d=u(o.props,e,o._instanceProps),p="horizontal"===i||"horizontal"===a,h="rtl"===i,_=p?c:0;l[e]=t={position:"absolute",left:h?void 0:_,right:h?_:void 0,top:p?0:c,height:p?"100%":d,width:p?d:"100%"}}return t},o._getItemStyleCache=void 0,o._getItemStyleCache=l((function(e,t,o){return{}})),o._onScrollHorizontal=function(e){var t=e.currentTarget,n=t.clientWidth,i=t.scrollLeft,r=t.scrollWidth;o.setState((function(e){if(e.scrollOffset===i)return null;var t=o.props.direction,a=i;if("rtl"===t)switch(f()){case"negative":a=-i;break;case"positive-descending":a=r-n-i}return a=Math.max(0,Math.min(a,r-n)),{isScrolling:!0,scrollDirection:e.scrollOffset<i?"forward":"backward",scrollOffset:a,scrollUpdateWasRequested:!1}}),o._resetIsScrollingDebounced)},o._onScrollVertical=function(e){var t=e.currentTarget,n=t.clientHeight,i=t.scrollHeight,r=t.scrollTop;o.setState((function(e){if(e.scrollOffset===r)return null;var t=Math.max(0,Math.min(r,i-n));return{isScrolling:!0,scrollDirection:e.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!1}}),o._resetIsScrollingDebounced)},o._outerRefSetter=function(e){var t=o.props.outerRef;o._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},o._resetIsScrollingDebounced=function(){null!==o._resetIsScrollingTimeoutId&&d(o._resetIsScrollingTimeoutId),o._resetIsScrollingTimeoutId=p(o._resetIsScrolling,150)},o._resetIsScrolling=function(){o._resetIsScrollingTimeoutId=null,o.setState({isScrolling:!1},(function(){o._getItemStyleCache(-1,null)}))},o}i(n,e),n.getDerivedStateFromProps=function(e,t){return w(e,t),v(e),null};var a=n.prototype;return a.scrollTo=function(e){e=Math.max(0,e),this.setState((function(t){return t.scrollOffset===e?null:{scrollDirection:t.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}}),this._resetIsScrollingDebounced)},a.scrollToItem=function(e,t){void 0===t&&(t="auto");var o=this.props.itemCount,n=this.state.scrollOffset;e=Math.max(0,Math.min(e,o-1)),this.scrollTo(h(this.props,e,t,n,this._instanceProps))},a.componentDidMount=function(){var e=this.props,t=e.direction,o=e.initialScrollOffset,n=e.layout;if("number"==typeof o&&null!=this._outerRef){var i=this._outerRef;"horizontal"===t||"horizontal"===n?i.scrollLeft=o:i.scrollTop=o}this._callPropsCallbacks()},a.componentDidUpdate=function(){var e=this.props,t=e.direction,o=e.layout,n=this.state,i=n.scrollOffset;if(n.scrollUpdateWasRequested&&null!=this._outerRef){var r=this._outerRef;if("horizontal"===t||"horizontal"===o)if("rtl"===t)switch(f()){case"negative":r.scrollLeft=-i;break;case"positive-ascending":r.scrollLeft=i;break;default:var a=r.clientWidth,s=r.scrollWidth;r.scrollLeft=s-a-i}else r.scrollLeft=i;else r.scrollTop=i}this._callPropsCallbacks()},a.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&d(this._resetIsScrollingTimeoutId)},a.render=function(){var e=this.props,n=e.children,i=e.className,r=e.direction,a=e.height,s=e.innerRef,l=e.innerElementType,u=e.innerTagName,d=e.itemCount,p=e.itemData,h=e.itemKey,_=void 0===h?A:h,f=e.layout,m=e.outerElementType,g=e.outerTagName,S=e.style,v=e.useIsScrolling,T=e.width,b=this.state.isScrolling,O="horizontal"===r||"horizontal"===f,E=O?this._onScrollHorizontal:this._onScrollVertical,P=this._getRangeToRender(),I=P[0],y=P[1],C=[];if(d>0)for(var w=I;w<=y;w++)C.push(t.createElement(n,{data:p,key:_(w,p),index:w,isScrolling:v?b:void 0,style:this._getItemStyle(w)}));var M=c(this.props,this._instanceProps);return t.createElement(m||g||"div",{className:i,onScroll:E,ref:this._outerRefSetter,style:o({position:"relative",height:a,width:T,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:r},S)},t.createElement(l||u||"div",{children:C,ref:s,style:{height:O?"100%":M,pointerEvents:b?"none":void 0,width:O?M:"100%"}}))},a._callPropsCallbacks=function(){if("function"==typeof this.props.onItemsRendered&&this.props.itemCount>0){var e=this._getRangeToRender(),t=e[0],o=e[1],n=e[2],i=e[3];this._callOnItemsRendered(t,o,n,i)}if("function"==typeof this.props.onScroll){var r=this.state,a=r.scrollDirection,s=r.scrollOffset,l=r.scrollUpdateWasRequested;this._callOnScroll(a,s,l)}},a._getRangeToRender=function(){var e=this.props,t=e.itemCount,o=e.overscanCount,n=this.state,i=n.isScrolling,r=n.scrollDirection,a=n.scrollOffset;if(0===t)return[0,0,0,0];var s=_(this.props,a,this._instanceProps),l=m(this.props,s,a,this._instanceProps),c=i&&"backward"!==r?1:Math.max(1,o),u=i&&"forward"!==r?1:Math.max(1,o);return[Math.max(0,s-c),Math.max(0,Math.min(t-1,l+u)),s,l]},n})(t.PureComponent),n.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},a}var w=function(e,t){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,t.instance},M=function(e,t,o){var n=e.itemSize,i=o.itemMetadataMap,r=o.lastMeasuredIndex;if(t>r){var a=0;if(r>=0){var s=i[r];a=s.offset+s.size}for(var l=r+1;l<=t;l++){var c=n(l);i[l]={offset:a,size:c},a+=c}o.lastMeasuredIndex=t}return i[t]},x=function(e,t,o,n,i){for(;n<=o;){var r=n+Math.floor((o-n)/2),a=M(e,r,t).offset;if(a===i)return r;a<i?n=r+1:a>i&&(o=r-1)}return n>0?n-1:0},L=function(e,t){var o=e.itemCount,n=t.itemMetadataMap,i=t.estimatedItemSize,r=t.lastMeasuredIndex,a=0;if(r>=o&&(r=o-1),r>=0){var s=n[r];a=s.offset+s.size}return a+(o-r-1)*i},N=C({getItemOffset:function(e,t,o){return M(e,t,o).offset},getItemSize:function(e,t,o){return o.itemMetadataMap[t].size},getEstimatedTotalSize:L,getOffsetForIndexAndAlignment:function(e,t,o,n,i){var r=e.direction,a=e.height,s=e.layout,l=e.width,c="horizontal"===r||"horizontal"===s?l:a,u=M(e,t,i),d=L(e,i),p=Math.max(0,Math.min(d-c,u.offset)),h=Math.max(0,u.offset-c+u.size);switch("smart"===o&&(o=n>=h-c&&n<=p+c?"auto":"center"),o){case"start":return p;case"end":return h;case"center":return Math.round(h+(p-h)/2);default:return n>=h&&n<=p?n:n<h?h:p}},getStartIndexForOffset:function(e,t,o){return(function(e,t,o){var n=t.itemMetadataMap,i=t.lastMeasuredIndex;return(i>0?n[i].offset:0)>=o?x(e,t,i,0,o):(function(e,t,o,n){for(var i=e.itemCount,r=1;o<i&&M(e,o,t).offset<n;)o+=r,r*=2;return x(e,t,Math.min(o,i-1),Math.floor(o/2),n)})(e,t,Math.max(0,i),o)})(e,o,t)},getStopIndexForStartIndex:function(e,t,o,n){for(var i=e.direction,r=e.height,a=e.itemCount,s=e.layout,l=e.width,c="horizontal"===i||"horizontal"===s?l:r,u=M(e,t,n),d=o+c,p=u.offset+u.size,h=t;h<a-1&&p<d;)h++,p+=M(e,h,n).size;return h},initInstanceProps:function(e,t){var o={itemMetadataMap:{},estimatedItemSize:e.estimatedItemSize||50,lastMeasuredIndex:-1};return t.resetAfterIndex=function(e,n){void 0===n&&(n=!0),o.lastMeasuredIndex=Math.min(o.lastMeasuredIndex,e-1),t._getItemStyleCache(-1),n&&t.forceUpdate()},o},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.itemSize}}),R=g({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,o,n,i,r){var a=e.columnCount,s=e.columnWidth,l=e.width,c=Math.max(0,a*s-l),u=Math.min(c,t*s),d=Math.max(0,t*s-l+r+s);switch("smart"===o&&(o=n>=d-l&&n<=u+l?"auto":"center"),o){case"start":return u;case"end":return d;case"center":var p=Math.round(d+(u-d)/2);return p<Math.ceil(l/2)?0:p>c+Math.floor(l/2)?c:p;default:return n>=d&&n<=u?n:d>u||n<d?d:u}},getOffsetForRowAndAlignment:function(e,t,o,n,i,r){var a=e.rowHeight,s=e.height,l=e.rowCount,c=Math.max(0,l*a-s),u=Math.min(c,t*a),d=Math.max(0,t*a-s+r+a);switch("smart"===o&&(o=n>=d-s&&n<=u+s?"auto":"center"),o){case"start":return u;case"end":return d;case"center":var p=Math.round(d+(u-d)/2);return p<Math.ceil(s/2)?0:p>c+Math.floor(s/2)?c:p;default:return n>=d&&n<=u?n:d>u||n<d?d:u}},getColumnStartIndexForOffset:function(e,t){var o=e.columnWidth,n=e.columnCount;return Math.max(0,Math.min(n-1,Math.floor(t/o)))},getColumnStopIndexForStartIndex:function(e,t,o){var n=e.columnWidth,i=e.columnCount,r=e.width,a=t*n,s=Math.ceil((r+o-a)/n);return Math.max(0,Math.min(i-1,t+s-1))},getRowStartIndexForOffset:function(e,t){var o=e.rowHeight,n=e.rowCount;return Math.max(0,Math.min(n-1,Math.floor(t/o)))},getRowStopIndexForStartIndex:function(e,t,o){var n=e.rowHeight,i=e.rowCount,r=e.height,a=t*n,s=Math.ceil((r+o-a)/n);return Math.max(0,Math.min(i-1,t+s-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}}),F=C({getItemOffset:function(e,t){return t*e.itemSize},getItemSize:function(e,t){return e.itemSize},getEstimatedTotalSize:function(e){var t=e.itemCount;return e.itemSize*t},getOffsetForIndexAndAlignment:function(e,t,o,n){var i=e.direction,r=e.height,a=e.itemCount,s=e.itemSize,l=e.layout,c=e.width,u="horizontal"===i||"horizontal"===l?c:r,d=Math.max(0,a*s-u),p=Math.min(d,t*s),h=Math.max(0,t*s-u+s);switch("smart"===o&&(o=n>=h-u&&n<=p+u?"auto":"center"),o){case"start":return p;case"end":return h;case"center":var _=Math.round(h+(p-h)/2);return _<Math.ceil(u/2)?0:_>d+Math.floor(u/2)?d:_;default:return n>=h&&n<=p?n:n<h?h:p}},getStartIndexForOffset:function(e,t){var o=e.itemCount,n=e.itemSize;return Math.max(0,Math.min(o-1,Math.floor(t/n)))},getStopIndexForStartIndex:function(e,t,o){var n=e.direction,i=e.height,r=e.itemCount,a=e.itemSize,s=e.layout,l=e.width,c=t*a,u="horizontal"===n||"horizontal"===s?l:i,d=Math.ceil((u+o-c)/a);return Math.max(0,Math.min(r-1,t+d-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});function k(e,t){for(var o in e)if(!(o in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function z(e,t){var o=e.style,n=c(e,["style"]),i=t.style,r=c(t,["style"]);return!k(o,i)&&!k(n,r)}e.FixedSizeGrid=R,e.FixedSizeList=F,e.VariableSizeGrid=y,e.VariableSizeList=N,e.areEqual=z,e.shouldComponentUpdate=function(e,t){return!z(this.props,e)||k(this.state,t)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-photos.min.js-vflL-_qZp.map
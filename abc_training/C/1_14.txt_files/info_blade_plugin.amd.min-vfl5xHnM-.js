define(["require","exports","tslib","react","typescript/component_libraries/files_components/src/blades/info_blade/index","typescript/component_libraries/files_components/src/blades/info_blade/metadata/metadata_row","react-redux","typescript/component_libraries/pro-ui/src/components/branding/branding_block/optional_branding_block","typescript/libraries/file-viewer/src/utils","typescript/component_libraries/flows/src/components/approval-forms/approval_metadata","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/comments2/plugin/types"],(function(e,t,a,i,n,o,l,r,s,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InfoBladePluginBase=t.INFO_BLADE_PLUGIN_ID=void 0,i=a.__importStar(i),t.INFO_BLADE_PLUGIN_ID="info_blade";t.InfoBladePluginBase=class{constructor(e,a,f,u,_,h){this.layerUI={},this.rightRailUI={Sidebar:e=>{var a,f;const u=e.file,_=i.useMemo(()=>{const{fqPath:e,name:t,lastModifiedDate:a,size:i}=u;return{fqPath:e,size:i,name:t,lastModifiedMs:a?new Date(a).getTime():void 0}},[u]),h=i.useMemo(()=>({enabled:!0,openPath:e.navigation.navigateToPath}),[e.navigation.navigateToPath]),I=i.useMemo(()=>{if("loaded"===e.account.state&&e.account.data)return s.getRootName(e.account.data)},[e.account]),m=i.useCallback(e=>{this.context.logUserAction({action:e?"click_show_all_metadata":"click_hide_all_metadata",context:"right_sidebar"})},[]),g=i.useCallback(()=>{this.context.logUserAction({action:"right_rail_approval_status_click",context:"right_sidebar",file_id:u.fileId})},[u]);return i.default.createElement(l.Provider,{store:this.store},i.default.createElement(n.InfoBlade,{intl:this.platform.intl,id:t.INFO_BLADE_PLUGIN_ID},i.default.createElement(r.OptionalBrandingBlock,{sharedLinkInfo:e.sharedLinkInfo,brandingInfo:this.brandingInfo}),i.default.createElement(n.BasicFileMetadata,{file:_,pathBar:h,accountRootName:I}),i.default.createElement(n.SharedLinkMetadata,Object.assign({},e.sharedLinkInfo)),i.default.createElement(n.UploadMetadata,{fileId:u.fileId,sharedLinkURL:null===(a=e.sharedLinkInfo)||void 0===a?void 0:a.url}),this.getApprovalStatus&&i.default.createElement(d.ApprovalMetadata,{fileId:u.fileId,getApprovalStatus:this.getApprovalStatus,onClick:()=>{g(),this.context.getPluginData().navigation.openRightRailPlugin(c.UserActionContext.ApprovalStatus,p.COMMENTS_PLUGIN_ID)},InfoBladeRowComponent:o.InfoBladeMetadataRow}),this.userId&&i.default.createElement(n.FileContentMetadata,{fileId:u.fileId,userId:this.userId,sharedLinkURL:null===(f=e.sharedLinkInfo)||void 0===f?void 0:f.url,onShowMore:m})))},Control:()=>i.default.createElement(n.InfoBladeCollapsedBladeButton,{intl:this.platform.intl,id:t.INFO_BLADE_PLUGIN_ID})},this.lifecycle={},this.platform=e,this.store=a,this.userId=u,this.brandingInfo=_,this.context=f,this.getApprovalStatus=h}}}));
//# sourceMappingURL=info_blade_plugin.amd.min.js-vflCBbNgM.map
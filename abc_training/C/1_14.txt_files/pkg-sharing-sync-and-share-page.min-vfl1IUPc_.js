define("modules/clean/avatar/overflow_count_pill",["require","exports","tslib","react","modules/clean/avatar/style","modules/clean/css","modules/core/i18n"],(function(e,a,n,t,i,r,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),t=n.__importDefault(t),r=n.__importStar(r);class s extends t.default.Component{componentDidMount(){return r.require_css("/static/css/scooter/scooter-scoped-vflpl9JSl.css")}render(){const e=` +${this.props.count} `,a=o.intl.formatMessage({id:"kOMHR0",defaultMessage:"{count, plural, one{{count} more member} other{{count} more members}}"},{count:this.props.count});return null!=this.props.onClick?t.default.createElement("button",{className:i.getClassName(this.props.dimension,["overflow-pill c-avatar--meta u-unbutton"]),onClick:this.props.onClick},t.default.createElement("span",{"aria-hidden":!0},e),t.default.createElement("span",{className:"ax-visually-hidden"},a)):t.default.createElement("div",{className:i.getClassName(this.props.dimension,["overflow-pill c-avatar--meta"])},t.default.createElement("span",{"aria-hidden":!0},e),t.default.createElement("span",{className:"ax-visually-hidden"},a))}}s.displayName="OverflowCountPill",a.default=s})),define("modules/clean/sharing/ui_notifications_util",["require","exports","tslib","react","modules/clean/em_string","modules/clean/react/snackbar","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/views/rich_snackbar/api","modules/clean/sharing/views/rich_snackbar/exp_docsend_snackbar","modules/core/exception","modules/core/browser_detection","modules/core/i18n","modules/core/browser"],(function(e,a,n,t,i,r,o,s,c,l,d,u,f){"use strict";function S(e,a){return r.Snackbar.sync(e,a,"sharing-notification")}function g(e){return u.intl.formatMessage({id:"Fbyffs",defaultMessage:"Shared <st>{folder_name}</st>."},{st:e=>t.default.createElement("strong",null,e),folder_name:i.Emstring.em_snippet(e,o.SNIPPET_SIZES.FILENAME)})}function p(e,a){r.Snackbar.complete(g(e),"sharing-notification",void 0,a)}function h(e,a){const n=m(e);return"editor"===a?u.intl.formatMessage({id:"OlZHQn",defaultMessage:"This link allows editing. Now copy and share it.{br}{copiedUrlDisplay}"},{br:t.default.createElement("br",null),copiedUrlDisplay:n}):u.intl.formatMessage({id:"qkmyRi",defaultMessage:"This link allows viewing. Now copy and share it.{br}{copiedUrlDisplay}"},{br:t.default.createElement("br",null),copiedUrlDisplay:n})}function m(e){const a=e=>{e.preventDefault(),e.currentTarget.select()},n=d.is_supported_mobile_browser();return t.default.createElement("span",{className:"snackbar-title__link-url"},t.default.createElement("input",{readOnly:!0,autoFocus:!n,type:"text","aria-label":u.intl.formatMessage({id:"ExhGkl",defaultMessage:"Shared link URL"}),value:e,onClick:a,onFocus:a}),n&&t.default.createElement("input",{autoFocus:!0,className:"auto-focus-placeholder",value:e,readOnly:!0,type:"text","aria-label":u.intl.formatMessage({id:"ExhGkl",defaultMessage:"Shared link URL"})}))}Object.defineProperty(a,"__esModule",{value:!0}),a.failSnackbarWithHelpCenter=a.formatSuccessMessageForFolder=a.formatMessageForCopyCTASnackbar=a.showDeleteLinkSuccessSnackbar=a.showCopyLinkProgressUnsupportedBrowserSnackbar=a.showCopyLinkProgressSupportedBrowserSnackbar=a.showCopyLinkCatchallSnackbar=a.showCopyLinkEmailNotVerifiedSnackbar=a.showCopyLinkNotFoundSnackbar=a.showCopyLinkNoPermissionSnackbar=a.showCopyLinkErrorSnackbar=a.showCopyLinkCTASnackbar=a.showCopyLinkSuccessSnackbar=a.showInBandShareSuccessDocSendSnackbar=a.showInBandShareSuccessSnackbar=a.sharingNotificationInProgress=a.sharingNotificationSuccess=a.sharingNotificationInfo=a.sharingNotificationError=void 0,t=n.__importDefault(t),l=n.__importStar(l),f=n.__importStar(f),a.sharingNotificationError=function(e){return r.Snackbar.fail(e,"sharing-notification")},a.sharingNotificationInfo=function(e){return r.Snackbar.generic(e,"sharing-notification")},a.sharingNotificationInProgress=S,a.sharingNotificationSuccess=function(e){return r.Snackbar.complete(e,"sharing-notification")},a.formatSuccessMessageForFolder=g,a.failSnackbarWithHelpCenter=function(e,a,n){let i;i=n||u.intl.formatMessage({id:"sGKSF8",defaultMessage:"Learn more"}),r.Snackbar.show(t.default.createElement(r.Snackbar,{actionButtonText:i,closeButtonText:u.intl.formatMessage({id:"0NA7+K",defaultMessage:"Close"}),onActionClick:()=>{f.open_tab(a)},title:e,variant:"fail",id:"sharing-notification"}))},a.showInBandShareSuccessSnackbar=p,a.showInBandShareSuccessDocSendSnackbar=function(e,a){s.getHasUserPreviouslyDismissedRichSnackbar(a).then(n=>{if(n)p(e);else{r.Snackbar.close("sharing-notification");const n=g(e);c.showDocSendSnackbar(e,n,a)}}).catch(a=>{l.reportException({err:new Error(`Error fetching DocSend rich snackbar dismiss metadata: ${a}`),severity:l.SEVERITY.NONCRITICAL,tags:["docsend","feature-discovery","onboarding-activation"]}),p(e)})},a.showCopyLinkSuccessSnackbar=function(e,a,n){const i=(function(e,a){const n=m(e);if("editor"===a)return u.intl.formatMessage({id:"YJc3aM",defaultMessage:"Link copied. Allows editing.{br}{copiedUrlDisplay}"},{br:t.default.createElement("br",null),copiedUrlDisplay:n});return u.intl.formatMessage({id:"EK/q5b",defaultMessage:"Link copied. Allows viewing.{br}{copiedUrlDisplay}"},{br:t.default.createElement("br",null),copiedUrlDisplay:n})})(e,a);r.Snackbar.complete(i,"sharing-notification",void 0,n)},a.showCopyLinkCTASnackbar=function(e,a,n,i){const o=h(e,i);r.Snackbar.show(t.default.createElement(r.Snackbar,{actionButtonText:u.intl.formatMessage({id:"zD9HBn",defaultMessage:"Copy link"}),onActionClick:a,title:o,variant:"complete",timeoutDelayMs:void 0,id:n}))},a.showDeleteLinkSuccessSnackbar=function(e,a,n){r.Snackbar.show(t.default.createElement(r.Snackbar,{actionButtonText:u.intl.formatMessage({id:"eqpbc5",defaultMessage:"Who still has access?"}),closeButtonText:u.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),onActionClick:a,title:e,variant:"complete",timeoutDelayMs:5e3,id:n}))},a.showCopyLinkErrorSnackbar=function(e,a){const n=(function(e,a){const n=m(e);return u.intl.formatMessage({id:"/a2n+f",defaultMessage:"Couldn't copy the link, but we think it was a fluke. Try copying again.{br}{copiedUrlDisplay}"},{br:t.default.createElement("br",null),copiedUrlDisplay:n})})(e);r.Snackbar.failSticky(n,"sharing-notification")},a.showCopyLinkNoPermissionSnackbar=function(){const e=u.intl.formatMessage({id:"Xxcol+",defaultMessage:"Couldn't copy the link. You don't have permission to create a link to this content."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkNotFoundSnackbar=function(){const e=u.intl.formatMessage({id:"edHs1X",defaultMessage:"We can't find this file anymore. Try checking activity or folder history to see what happened."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkEmailNotVerifiedSnackbar=function(){const e=u.intl.formatMessage({id:"ymi0Ig",defaultMessage:"You can't share until you verify your email address."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkCatchallSnackbar=function(){const e=u.intl.formatMessage({id:"Mxewsd",defaultMessage:"Couldn't copy, but it might be a fluke. Try reloading the page or ask us for help."});r.Snackbar.failSticky(e,"sharing-notification")},a.showCopyLinkProgressSupportedBrowserSnackbar=function(){S(u.intl.formatMessage({id:"T1IRKv",defaultMessage:"Getting the link..."}),!0)},a.showCopyLinkProgressUnsupportedBrowserSnackbar=function(){S(u.intl.formatMessage({id:"RZHCuI",defaultMessage:"Getting the link. Copy and share it once itâ€™s ready."}),!0)},a.formatMessageForCopyCTASnackbar=h})),define("modules/clean/sharing/views/rich_snackbar/api",["require","exports","tslib","modules/clean/react/user_metadata/api","api_v2/user_client","modules/core/exception"],(function(e,a,n,t,i,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.getFileId=a.setUserDismissedRichSnackbar=a.getHasUserPreviouslyDismissedRichSnackbar=void 0;a.getHasUserPreviouslyDismissedRichSnackbar=function(e){return n.__awaiter(this,void 0,void 0,(function*(){return(yield t.getUserMetadata(["DOCSEND_HAS_USER_DISMISSED_RICH_SNACKBAR"],e)).DOCSEND_HAS_USER_DISMISSED_RICH_SNACKBAR||!1}))},a.setUserDismissedRichSnackbar=function(e){return n.__awaiter(this,void 0,void 0,(function*(){const a=yield t.setUserMetadata({DOCSEND_HAS_USER_DISMISSED_RICH_SNACKBAR:!0},e);return Boolean(a.DOCSEND_HAS_USER_DISMISSED_RICH_SNACKBAR)}))},a.getFileId=e=>n.__awaiter(void 0,void 0,void 0,(function*(){const{userId:a,filePath:n}=e,t=new i.UserApiV2Client;try{return(yield t.ns("files").rpc("get_metadata",{path:n},{subjectUserId:a})).id}catch(e){return r.reportException({err:new Error("Failed to get file id"),severity:r.SEVERITY.CRITICAL,exc_extra:{e:e},tags:["rich_snackbar","product-growth","post-sharing-eisgn-rich-snackbar"]}),Promise.reject(e)}}))})),define("modules/clean/sharing/views/rich_snackbar/exp_docsend_snackbar",["require","exports","tslib","react","dig-components/icons/src","modules/clean/react/snackbar","modules/clean/react/onboarding/logging/events","modules/clean/react/onboarding/logging/logging","modules/clean/sharing/views/rich_snackbar/api","modules/core/browser","modules/core/exception","modules/core/i18n"],(function(e,a,n,t,i,r,o,s,c,l,d,u){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.showDocSendSnackbar=void 0,t=n.__importDefault(t),l=n.__importStar(l),d=n.__importStar(d);a.showDocSendSnackbar=(e,a,n)=>{const{docSendValueProp:c,tryDocSendCTA:d,remindMeLaterCTA:u}=S();r.Snackbar.show(t.default.createElement(r.Snackbar,{title:a,id:"sharing-notification",variant:"complete",onCloseClick:()=>{f(n),s.OALogger.logToProEvents(o.DocSendRichSnackbarEvents.DOCSEND_SNACKBAR_DISMISS_CLICK,{variant:"V1"})},onShown:()=>{s.OALogger.logToProEvents(o.DocSendRichSnackbarEvents.DOCSEND_SNACKBAR_SHOWN,{variant:"V1"})},richSnackbarProps:{actions:[{name:"try_docsend",icon:i.DropboxDocSendLine,text:d,onClick:e=>{l.unsafe_open_tab("https://www.docsend.com/dropbox-integration/?utm_source=Dropbox%20Referral&utm_medium=Referral&utm_campaign=exp-post-share&signup_source=exp-post-share"),f(n),s.OALogger.logToProEvents(o.DocSendRichSnackbarEvents.DOCSEND_SNACKBAR_TRY_CLICK,{variant:"V1"}),r.Snackbar.close("sharing-notification")}},{name:"remind_me_later",icon:i.EmailLine,text:u,onClick:e=>{s.OALogger.logToProEvents(o.DocSendRichSnackbarEvents.DOCSEND_SNACKBAR_REMIND_LATER_CLICK,{variant:"V1"}),r.Snackbar.close("sharing-notification")}}],helperText:c,clickHandlerArgs:{userId:-1,filePath:e}}}))};const f=e=>{c.setUserDismissedRichSnackbar(e).catch(e=>{d.reportException({err:new Error(`Error saving DocSend rich snackbar dismiss metadata: ${e}`),severity:d.SEVERITY.NONCRITICAL,tags:["docsend","feature-discovery","onboarding-activation"]})})},S=()=>({docSendValueProp:u.intl.formatMessage({id:"mhtOln",defaultMessage:"Send and track business-critical files using DocSend, a Dropbox company."}),tryDocSendCTA:u.intl.formatMessage({id:"a7qcDs",defaultMessage:"Try DocSend"}),remindMeLaterCTA:u.intl.formatMessage({id:"QTrM3U",defaultMessage:"Remind me later"})})})),define("modules/clean/sharing/views/rich_snackbar/exp_esign_snackbar",["require","exports","tslib","react","modules/clean/react/snackbar","modules/core/i18n","modules/clean/analytics","dig-components/icons/src","modules/clean/sharing/views/rich_snackbar/api"],(function(e,a,n,t,i,r,o,s,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.showInBandShareSuccessEsignSnackbar=a.handleSendForSignatureClick=void 0,t=n.__importDefault(t);var l;(function(e){e.ESIGN_SNACKBAR_SHOWN="pg_snackbar_esign_view",e.ESIGN_SNACKBAR_TRY_CLICK="pg_snackbar_esign_click",e.ESIGN_SNACKBAR_DISMISS_CLICK="pg_snackbar_esign_dismiss"})(l||(l={})),a.handleSendForSignatureClick=a=>Promise.all([new Promise((a,n)=>{e(["modules/clean/integrations/hellosign_deep_integration/launcher"],a,n)}).then(n.__importStar),c.getFileId(a)]).then(([{getLauncher:e},n])=>{const{userId:t,filePath:i}=a;o.ProEventsLogger.log(l.ESIGN_SNACKBAR_TRY_CLICK,{user_id:t});const r=e();return r.init({entryPoint:"post_sharing_snackbar",file:{file_id:n,fq_path:i},source:"dropbox-file-hover-overflow-menu-send-for-esign"}),r}).then(e=>(e.launch(),i.Snackbar.close("sharing-notification"),e)),a.showInBandShareSuccessEsignSnackbar=(e,n,c,d,u,f,S)=>{i.Snackbar.close("sharing-notification");const g=f?void 0:r.intl.formatMessage({id:"ACOoAR",defaultMessage:"Did you know you can get this file signed, right in Dropbox?"}),p=r.intl.formatMessage({id:"NAMRb1",defaultMessage:"Send for signature"});i.Snackbar.show(t.default.createElement(i.Snackbar,{title:n,id:"sharing-notification",variant:"complete",onCloseClick:()=>{S(),o.ProEventsLogger.log(l.ESIGN_SNACKBAR_DISMISS_CLICK,{user_id:d})},onShown:()=>{o.ProEventsLogger.log(l.ESIGN_SNACKBAR_SHOWN,{user_id:d})},richSnackbarProps:{actions:[{name:"send_for_signature",icon:s.SignatureLine,text:p,onClick:a.handleSendForSignatureClick}],helperText:g,clickHandlerArgs:{userId:d,filePath:c||e,ns_id:u}},forceDig:!0}))}}));
//# sourceMappingURL=pkg-sharing-sync-and-share-page.min.js-vflC1ktjw.map
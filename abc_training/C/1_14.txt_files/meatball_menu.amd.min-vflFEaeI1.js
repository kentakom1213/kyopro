define(["require","exports","tslib","dig-components/icons/src","dig-components/icons","react","react-intl","typescript/libraries/file-viewer/src/css/mobile_web.css","react-redux","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/config","classnames","dig-components/buttons","typescript/libraries/file-viewer/src/core/data/actions","dig-components/typography","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/core/i18n"],(function(e,t,a,l,i,n,s,r,o,c,d,u,m,f,p,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MeatballMenu=void 0,n=a.__importDefault(n),r=a.__importStar(r),u=a.__importDefault(u),t.MeatballMenu=({sharedLinkInfo:e,size:t,showAuthModal:a,fileViewerId:b,previewKey:M,mobilePluginActions:E})=>{var y,I;const w=null===(y=v.parseActionBarPluginInstance(E))||void 0===y?void 0:y.actionDefinitions,_=w&&(null===(I=w.mobileWeb)||void 0===I?void 0:I.meatballMenuComponents),N=o.useSelector(e=>c.getIsMobileMeatballMenuOpen(e,M,b)),C=s.useIntl(),O=o.useDispatch(),h=t?g.formatBytes(t,C):0,k=o.useSelector(c.getCurrentUser);function x(){O(f.toggleMobileMeatballMenu({isOpen:!1,previewKey:M,fileViewerId:b}))}return n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{onClick:x,className:u.default({[r.meatballMenuOverlay]:N})}),n.default.createElement("div",{className:u.default(r.meatballMenuContainer,{[r.isVisible]:N})},n.default.createElement(m.IconButton,{onClick:x,className:r.meatballMenuDismiss,variant:"transparent"},n.default.createElement(i.UIIcon,{src:l.CloseLine})),n.default.createElement("div",{className:r.metadata},n.default.createElement("div",{className:r.icon}),n.default.createElement("div",null,n.default.createElement(p.Text,{variant:"label",size:"standard",tagName:"p",isBold:!0},null==e?void 0:e.displayName),n.default.createElement(p.Text,{className:r.fileDetails},C.formatMessage({id:"nu8jK0",defaultMessage:"{formatted_size}, file owner: {owner_name}"},{formatted_size:h,owner_name:null==e?void 0:e.ownerName})))),n.default.createElement("div",{className:r.actions},null==_?void 0:_.map(e=>n.default.createElement("div",{className:r.actionRow},e))),!k&&n.default.createElement("div",{className:r.signInButton},n.default.createElement(m.Button,{onClick:function(){null==a||a({mode:d.AuthMode.LOGIN,kind:d.LoginOrRegisterKind.IMMEDIATE,loggingExtra:{source:"mobile_meatball_menu"}})},variant:"opacity"},n.default.createElement(i.UIIcon,{src:l.PersonCircleLine}),n.default.createElement("span",null,C.formatMessage({id:"49n66u",defaultMessage:"Sign in"})))),n.default.createElement("div",{className:r.footer},n.default.createElement("span",{onClick:function(){var e;return null===(e=document.getElementById("consent-iframe").contentWindow)||void 0===e?void 0:e.postMessage({message_type:"OPEN_OPTIONS_DIALOG"},"https://consent.dropbox.com/")}},C.formatMessage({id:"FqzxYC",defaultMessage:"Cookie preferences"})),n.default.createElement(i.UIIcon,{size:"small",src:l.CircleSmallFilledFill}),n.default.createElement("a",{href:"https://dropbox.com/privacy"},C.formatMessage({id:"+1tXlk",defaultMessage:"Privacy and Legal"})))))},t.MeatballMenu.displayName="MeatballMenu"}));
//# sourceMappingURL=meatball_menu.amd.min.js-vflR8fkXi.map
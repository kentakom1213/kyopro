define(["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/layer.css","react-redux","typescript/libraries/file-viewer/src/plugins/index","typescript/libraries/file-viewer/src/comments2/plugin/layer/conductor","typescript/libraries/file-viewer/src/comments2/plugin/layer/highlights","typescript/libraries/file-viewer/src/comments2/plugin/layer/audio_video_layer","typescript/component_libraries/files_components/src/blades/comments/data/types"],(function(e,t,n,i,r,a,o,c,s,l,d){"use strict";function u(e){return e+1}Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationHighlights=t.ImageAnnotationLayer=t.DocAnnotationLayer=t.AnnotationLayer=t.fileViewerPageToComments2Page=void 0,i=n.__importStar(i),r=n.__importStar(r),Object.defineProperty(t,"AnnotationHighlights",{enumerable:!0,get:function(){return s.AnnotationHighlights}}),t.fileViewerPageToComments2Page=u;const p=e=>{var{children:t}=e,a=n.__rest(e,["children"]);return i.createElement("div",{className:r.layer},i.createElement(s.AnnotationHighlights,Object.assign({},a)),i.createElement(c.AnnnotationConductor,Object.assign({},a),t))};function y(e){return null!=e.annotation&&"image"==e.annotation.type}p.displayName="UnconnectedAnnotationLayer";const g=a.connect((e,{file:{fileId:t},context:{fileViewerId:n},sharedLinkInfo:i})=>{const r=e.threads[d.createCommentFileIdentifier(t,null==i?void 0:i.url)]||{},a=Object.values(r).filter(y),o=e.draftAnnotation[n],c=null==o||"image"!==o.type?null:{type:"rnd",regions:[o.region]};return{threads:a,activeThreadId:e.activeThreadID[n],draftAnnotation:c,focusedThreadId:e.focusedThreadID[n],hoverThreadId:e.hoverThreadID[n],annotationState:e.annotationState}})(p);function f(e){return null!=e.annotation&&"document"==e.annotation.type}function m(e,t){const n=u(t);return e.regions.some(e=>e.page===n)}t.ImageAnnotationLayer=g;const h=a.connect((e,{file:{fileId:t},context:{fileViewerId:n},layer:{pageIndex:i},sharedLinkInfo:r})=>{const a=e.threads[d.createCommentFileIdentifier(t,null==r?void 0:r.url)]||{},o=Object.values(a).filter(f).filter(e=>m(e.annotation,i)),c=e.draftAnnotation[n],s=null!=c&&"document"===c.type&&m(c,i)?{type:"rectangle"===c.regionType?"rnd":"highlight",regions:c.regions}:null;return{threads:o,activeThreadId:e.activeThreadID[n],draftAnnotation:s,focusedThreadId:e.focusedThreadID[n],hoverThreadId:e.hoverThreadID[n],annotationState:e.annotationState}})(p);t.DocAnnotationLayer=h;const v=e=>{if(e.previewType===o.PreviewType.Image)return i.createElement(g,Object.assign({},e,{isActive:!0}));if(e.previewType===o.PreviewType.SsrDoc||e.previewType===o.PreviewType.CloudDoc){const{ui:t,layer:n}=e,r=t.currentPageIndex,a=n.pageIndex;return i.createElement(h,Object.assign({},e,{isActive:a===r}))}return e.previewType!==o.PreviewType.Audio&&e.previewType!==o.PreviewType.Video||!e.context.sdkConfig.ax_annotations?i.createElement(i.Fragment,null,e.children):i.createElement(l.AudioVideoAnnotationLayer,Object.assign({},e))};t.AnnotationLayer=v,v.displayName="AnnotationLayer",v.displayName="AnnotationLayer"}));
//# sourceMappingURL=index.amd.min.js-vflu1eFG5.map
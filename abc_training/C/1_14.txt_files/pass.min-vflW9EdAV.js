define(["require","exports","modules/clean/react/pass/beacon_presence_helpers","typescript/libraries/file-viewer/src/pass/types","modules/clean/react/pass/types"],(function(e,n,s,a,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getPresenceBeaconIOClient=void 0;const o=(e,n)=>Object.keys(e).map(e=>({agent:{userId:e},info:{status:n?a.PresenceStatus.viewer:a.PresenceStatus.offline}}));n.getPresenceBeaconIOClient=function(e,n){let a=()=>{};return{subscribe(o,l){var r;const t=n(),c=(null==t?void 0:t.file.file_id)===o?null===(r=null==t?void 0:t.sharedLinkInfo)||void 0===r?void 0:r.url:void 0,u=new i.BeaconFileData(o,c);s.BeaconPresenceHelpers.receiveBeaconData({beaconFileData:u,onUpdate:a,previewSessionId:l,user:e}),s.BeaconPresenceHelpers.transmitBeaconData({prevBeaconFileData:null,beaconFileData:new i.BeaconFileData(o,c),previewSessionId:l,user:e})},unsubscribe(a){var o;const l=n(),r=(null==l?void 0:l.file.file_id)===a?null===(o=null==l?void 0:l.sharedLinkInfo)||void 0===o?void 0:o.url:void 0;s.BeaconPresenceHelpers.shutdown({beaconFileData:new i.BeaconFileData(a,r),user:e,async:!0})},onBeacon(e){a=(n,s,a)=>{const i={events:[...o(n.onlineUniqueUsers,!0),...o(n.offlineUniqueUsers,!1)],fileId:a.fileId};e(i,"snapshot"===n.type)}}}}}));
//# sourceMappingURL=pass.min.js-vfl6He6uM.map
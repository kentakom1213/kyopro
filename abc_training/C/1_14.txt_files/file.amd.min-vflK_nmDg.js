define(["require","exports","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getCurrentSharedLinkInfo=i.getCurrentPreviewKey=i.getCurrentFileId=i.getCurrentUnsupportedFile=i.getCurrentArchiveFile=i.getCurrentAudioVideoFile=i.getCurrentDocFile=i.getCurrentImageFile=void 0;class n extends Error{constructor(e,i){super(`Expected ${e} to be of type ${i}, but it is not`)}}const l=(e,{fileViewerId:i})=>{const{currentFileInfo:t,fileMetadata:r}=e,n=t[i];if(null==n)return null;const{file_id:l,ns_id:a,sj_id:d,url:s}=n;if(null==l||null==a||null==d)return null;const u=r[n.previewKey.serialized];if(null==u)return null;const{file_name:o,file_path:c,file_last_modified_date:f,size:g}=u;return{fileId:l,lastModifiedDate:f,name:o,nsId:a,fqPath:c,sjId:d,url:s,size:g,previewKey:n.previewKey}};i.getCurrentImageFile=(e,{fileViewerId:i})=>{var n;const a=l(e,{fileViewerId:i});if(null==a)return null;const d=e.previewData[a.previewKey.serialized],s=null===(n=t.getFileContentMetadata(e,a.previewKey))||void 0===n?void 0:n.metadata,u="image"===(null==s?void 0:s[".tag"])?s:null,o=r.filterDimensionsFilePreviewUiState(t.getFilePreviewUi(e,{fileViewerId:i},a.previewKey));return Object.assign(Object.assign({},a),{dimensions:(null==d?void 0:d.dimensions)||(null==o?void 0:o.dimensions),contentMetadata:u})},i.getCurrentDocFile=(e,{fileViewerId:i})=>{var a;const d=l(e,{fileViewerId:i});if(null==d)return null;const s=e.rivieraData[d.previewKey.serialized];if(null==s||0===Object.getOwnPropertyNames(s).length)return null;if(!("pages"in s))throw new n("rivieraData","DocPreviewMetadata");const u=null===(a=t.getFileContentMetadata(e,d.previewKey))||void 0===a?void 0:a.metadata,o="ms_office"===(null==u?void 0:u[".tag"])||"pdf"===(null==u?void 0:u[".tag"])?u:null,c=t.getFilePreviewUi(e,{fileViewerId:i},d.previewKey),f=r.filterDocFilePreviewUiState(c);return Object.assign(Object.assign({},d),{pages:s.pages.map(({dimension:[e,i],pageIndex:t})=>({pageIndex:t,dimensions:{width:e,height:i}})),contentMetadata:o,isPasswordProtected:!!(null==f?void 0:f.isPasswordProtected)})},i.getCurrentAudioVideoFile=(e,{fileViewerId:i})=>{var r;const n=l(e,{fileViewerId:i});if(null==n)return null;const a=null===(r=t.getFileContentMetadata(e,n.previewKey))||void 0===r?void 0:r.metadata,d="audio"===(null==a?void 0:a[".tag"])||"video"===(null==a?void 0:a[".tag"])?a:null;return null==d?null:Object.assign(Object.assign({},n),{contentMetadata:d})},i.getCurrentArchiveFile=(e,{fileViewerId:i})=>{const t=l(e,{fileViewerId:i});return null==t?null:Object.assign(Object.assign({},t),{contentMetadata:null})},i.getCurrentUnsupportedFile=(e,{fileViewerId:i})=>{const t=l(e,{fileViewerId:i});return null==t?null:Object.assign(Object.assign({},t),{contentMetadata:null})},i.getCurrentFileId=(e,{fileViewerId:i})=>{const r=t.getCurrentFile(e,i);if(null!=r)return r.file_id},i.getCurrentPreviewKey=(e,{fileViewerId:i})=>{const r=t.getCurrentFile(e,i);if(null!=r)return r.previewKey},i.getCurrentSharedLinkInfo=(e,{fileViewerId:t})=>{const r=i.getCurrentPreviewKey(e,{fileViewerId:t});if(r)return e.sharedLinkInfo[r.serialized]}}));
//# sourceMappingURL=file.amd.min.js-vflYqBPKr.map
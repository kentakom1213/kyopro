define(["require","exports","react","modules/clean/file_actions/strings","modules/clean/react/starred/browse_exports","modules/clean/react/action_bar/action_bar_strings","modules/clean/react/action_bar/file_actions/portable/star/portable_star","modules/clean/react/home/resource_id_types","modules/clean/react/snackbar","modules/clean/react/starred/browse_exports","modules/core/i18n","dig-components/icons/src","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","modules/clean/react/file_viewer/sdk_file_viewer/action_plugins/utils","modules/clean/file_store/utils"],(function(e,r,t,a,s,i,n,l,o,c,d,u,_,S,f){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isStarringEnabled=r.useStarControl=void 0,r.useStarControl=function({getActiveFile:e,user:r,onToggle:S}){const f=e(),m=_.useStabilizedCallback(()=>s.StarredStore.getIsStarred({id:f.file.file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID})),[b,E]=t.useState(m());t.useEffect(()=>{const e=s.StarredStore.addListener(()=>E(m()));return()=>e()},[m]);const p=c.itemNameFromStarrableItem(f.file),g=e=>()=>{const r=e?a.starSnackbarSuccess:a.unstarSnackbarSuccess;o.Snackbar.complete(d.intl.formatMessage(r,{itemName:p}),"star-action");const t={id:f.file.file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID};c.StarredActions.setStarredStatus(t,e)},I=e=>()=>{const r=e?a.starSnackbarError:a.unstarSnackbarError;o.Snackbar.fail(d.intl.formatMessage(r,{itemName:p}))},k=()=>{null==S||S();const e=!b;n.star({userId:r.id,fileId:f.file.file_id,newStarredValue:e},{onSuccess:g(e),onError:I(e)})};return{message:d.intl.formatMessage(b?i.UNSTAR_ACTION_STRING:i.STAR_ACTION_STRING),iconSrc:b?u.StarFill:u.StarLine,handleClick:e=>{e.preventDefault(),e.stopPropagation(),k()},handleKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),k())}}},r.isStarringEnabled=function(e){return S.isLiveFile(e)&&!f.isSharedFile(e)&&!S.isInsideVaultFolder(e)}}));
//# sourceMappingURL=hooks.min.js-vfltbwIiv.map
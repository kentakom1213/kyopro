define(["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/pass.css","classnames","spectrum/facepile/facepile_members","typescript/libraries/file-viewer/src/pass/reducer"],(function(e,t,a,r,i,n,s,l){"use strict";function o(e){return e.split(/\s+/g).slice(0,2).map(e=>e[0]).join("").toLocaleUpperCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.Facepiles=t.timeSince=void 0,r=a.__importStar(r),i=a.__importStar(i),n=a.__importDefault(n);function u(e,t){const a=Date.now()-("number"==typeof e?e:e.getTime());return a>31536e6?t.formatMessage({id:"8w63fP",defaultMessage:"Viewed {number, plural, one {# year ago} other {# years ago}}"},{number:a/31536e6|0}):a>2592e6?t.formatMessage({id:"p+J/9i",defaultMessage:"Viewed {number, plural, one {# month ago} other {# months ago}}"},{number:a/2592e6|0}):a>6048e5?t.formatMessage({id:"Sr+rcm",defaultMessage:"Viewed {number, plural, one {# week ago} other {# weeks ago}}"},{number:a/6048e5|0}):a>864e5?t.formatMessage({id:"zdIfoz",defaultMessage:"Viewed {number, plural, one {# day ago} other {# days ago}}"},{number:a/864e5|0}):a>36e5?t.formatMessage({id:"xs1WyB",defaultMessage:"Viewed {number, plural, one {# hour ago} other {# hours ago}}"},{number:a/36e5|0}):a>6e4?t.formatMessage({id:"oZ87NQ",defaultMessage:"Viewed {number, plural, one {# min ago} other {# mins ago}}"},{number:a/6e4|0}):t.formatMessage({id:"2Sqn0x",defaultMessage:"Viewed just now"})}function m({name:e,ts:t,intl:a,active:n}){return r.createElement("article",{className:i.avatarTooltip},r.createElement("header",null,r.createElement("h3",null,e)),n?a.formatMessage({id:"cSWjTH",defaultMessage:"Viewing now"}):t?u(1e3*t,a):null)}function c(e){return e.startsWith("dbafvid:")}function d({name:{display_name:e},account_id:t,profile_photo_url:a},i){return{active:!0,alt:e,avatarColorSeed:t,initials:o(e),memberKey:t,photoUrl:a||"",tooltipContent:r.createElement(m,{name:e,active:!0,intl:i})}}function p({currentUser:e,viewingUserIds:t,users:a,seenStates:i,fileMembers:n,intl:s}){const l=[d(e,s),...t.filter(t=>t!==e.account_id&&(c(t)||a[t])).slice(0,3).map(e=>c(e)?(function(e,t){const a=t.formatMessage({id:"uxSU4g",defaultMessage:"Guest"});return{active:!0,alt:a,avatarColorSeed:e,initials:o(a),memberKey:e,photoUrl:"",tooltipContent:r.createElement(m,{name:a,active:!0,intl:t})}})(e,s):d(a[e],s))];return l.length<4&&l.push(...i.order.filter(a=>!t.includes(a)&&a!==e.account_id).slice(0,4-l.length).map(e=>(function(e,t,a=!1){const{when_last_seen:i,seen_state_user:{display_name:n,email:s,user_id:l,photo_circle_url:u}}=e;return{active:a,alt:n||s||"",avatarColorSeed:l,initials:o(n),memberKey:l,photoUrl:u||"",tooltipContent:r.createElement(m,{name:n,active:!1,ts:i,intl:t})}})(i.infos[e],s))),l.length<4&&l.push(...n.order.filter(a=>!(a===e.account_id||t.includes(a)||a in i.infos)).slice(0,4-l.length).map(e=>n.users[e]?(function({user:{display_name:e,account_id:t}},a){return{active:!1,alt:e,avatarColorSeed:t,initials:o(e),memberKey:t,photoUrl:"",tooltipContent:r.createElement(m,{name:e,intl:a})}})(n.users[e],s):(function({user:e,invitee:t},a){if(e){const{display_name:t,account_id:i}=e;return{active:!1,alt:t,avatarColorSeed:i,initials:o(t),memberKey:i,photoUrl:"",tooltipContent:r.createElement(m,{name:t,intl:a})}}if("email"===t[".tag"])return{active:!1,alt:t.email,avatarColorSeed:t.email,initials:o(t.email),memberKey:t.email,photoUrl:"",tooltipContent:r.createElement(m,{name:t.email,intl:a})}})(n.invitees[e],s)).filter(e=>!!e)),l}t.timeSince=u,t.Facepiles=e=>{const{seenStates:t=l.DEFAULT_SEEN_STATES,intl:a,className:o,fileMemberCounts:u=l.DEFAULT_FILE_MEMBER_COUNTS,fileMembers:m=l.DEFAULT_FILE_MEMBERS,currentUser:c,users:d,viewingUserIds:f=l.DEFAULT_VIEWING_USER_IDS}=e;let g=0,_=[];c&&(g=(function(e,t,a,r){return e.count+t.order.filter(e=>!(e in a.users||e in a.invitees)).length+r.filter(e=>!(e in t.infos||e in a.users||e in a.invitees)).length})(u,t,m,f),_=p({currentUser:c,viewingUserIds:f,users:d,seenStates:t,fileMembers:m,intl:a}));const h=g-_.length,b=h>99?a.formatMessage({id:"tkBGME",defaultMessage:"99+"}):h>0?h.toString():"";return 1===_.length&&_[0].memberKey===(null==c?void 0:c.account_id)&&f.length<=1?null:r.createElement(s.FacepileMembers,{className:n.default(o,i.facepileMembers),remainderCount:b,avatarSize:32,remainderTooltipProps:{backgroundColor:"#344063",tooltipContent:r.createElement("p",{className:i.remainderTooltip},a.formatMessage({id:"U34Aor",defaultMessage:"{count, plural, one {# other} other {# others}}"},{count:h}))},isRemainderActive:!1,members:_})},t.Facepiles.displayName="Facepiles",t.Facepiles.displayName="Facepiles"}));
//# sourceMappingURL=container.amd.min.js-vflmT_zcg.map
define("modules/clean/form",["require","exports","tslib","modules/clean/deprecated_ajax/ajax_jquery","modules/core/cookies","modules/core/assert","modules/core/i18n"],(function(e,t,r,s,a,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.post_request=t.add_vars=t.submit=void 0,s=r.__importStar(s);const i=n.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."});function l(e){const t={};return Array.from(e.querySelectorAll("input, select, textarea")).forEach(e=>{const r=e.name;if(r){let s;if("checkbox"===e.type)s=e.checked?"True":"";else if("radio"===e.type){if(!e.checked)return;s=e.value}else s=e.value;r in t?("string"==typeof t[r]&&(t[r]=[t[r]]),t[r].push(s)):t[r]=s}}),t}function p(e,t,r=!1){Object.entries(t||{}).forEach(([t,s])=>{var a;if(!0===r){const r=e.querySelector(`input[name="${t}"]`);null===(a=null==r?void 0:r.parentElement)||void 0===a||a.removeChild(r)}const o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name",t),o.setAttribute("value",s),e.appendChild(o)})}t.submit=function(e,t,r,a){return s.FormWebRequest({url:e.getAttribute("action"),data:l(e),skipErrorHandling:!0,success(e,s,a){const[o,n]=Array.from((function(e){if(0!==e.indexOf("err:"))return[!0,e];const t=e.substr(4);try{return[!1,JSON.parse(t)]}catch(e){return[!1,t||i]}})(a.responseText));return o?t(n):r(n)},error:(e,t,s)=>r(i),complete:a})},t.add_vars=p,t.post_request=function(e,t={},r={}){o.assert(null!=e,"post_request missing action");const s=document.createElement("form");s.style.display="none",s.setAttribute("action",e),s.setAttribute("method","POST"),r.target&&s.setAttribute("target",r.target),t.t=a.Cookies.read("__Host-js_csrf"),p(s,t),document.body.appendChild(s),s.submit()}})),define("modules/clean/react/input",["require","exports","tslib","classnames","create-react-class","react","react-dom","prop-types","lodash","jquery","ts-key-enum","modules/clean/react/form_error_mixin","modules/clean/react/sprite","modules/core/cancelable_promise","modules/core/i18n"],(function(e,t,r,s,a,o,n,i,l,p,u,d,c,f,h){"use strict";function m(e,t=!1){const r=function(t){if(e>=t)return"password-input-dot-selected"};let s="password-input-meter";t&&(s="password-input-meter-standalone");const a=o.default.createElement("div",{className:s,ref:"meter"},o.default.createElement("div",{className:`password-input-dot ${r(4)}`}),o.default.createElement("div",{className:`password-input-dot ${r(3)}`}),o.default.createElement("div",{className:`password-input-dot ${r(2)}`}),o.default.createElement("div",{className:`password-input-dot ${r(1)}`}));return t?o.default.createElement("span",{className:"standalone-password-meter-container"},a):a}Object.defineProperty(t,"__esModule",{value:!0}),t.textarea=t.text=t.password=t.password_strength_meter=void 0,s=r.__importDefault(s),a=r.__importDefault(a),o=r.__importDefault(o),n=r.__importStar(n),i=r.__importDefault(i),l=r.__importStar(l),p=r.__importDefault(p),d=r.__importDefault(d),t.password_strength_meter=m;const v=function(t,v){return a.default({displayName:t+"."+v,propTypes:{expandable:i.default.bool,expandedWidthOffset:i.default.number,animationCurve:i.default.string,animationDuration:i.default.number,onCloseClick:i.default.func,defaultValue:i.default.string,value:i.default.string,autofocus:i.default.bool,autoresize:i.default.bool,inline:i.default.bool,className:i.default.string,valueLink:i.default.object,variant:i.default.string,id:i.default.string,label:i.default.string,afterRender:i.default.func,onClick:i.default.func,onFocus:i.default.func,onBlur:i.default.func,onKeyDown:i.default.func,onChange:i.default.func,compatiblePlaceholder:i.default.bool,placeholder:i.default.string,measureStrength:i.default.bool,error:i.default.shape({message_text:i.default.string,message_html:i.default.string}),closeOnBlur:i.default.bool},mixins:[d.default],getDefaultProps:()=>({errorWrapperClassName:"text-input-error-wrapper",expandedWidthOffset:90,expandable:!1,animationCurve:"easeOutSine",animationDuration:300,compatiblePlaceholder:!1}),getInitialState(){return{inputWidth:0,expanded:!1,value:this.props.defaultValue}},zxcvbnPromise:void 0,componentWillMount(){this.props.measureStrength&&(this.zxcvbnPromise=f.makeCancelable(new Promise((t,r)=>{e(["zxcvbn"],t,r)}).then(r.__importStar)),this.zxcvbnPromise.then(({default:e})=>{this.setState({zxcvbn:e})}))},componentWillUnmount(){this.zxcvbnPromise&&this.zxcvbnPromise.cancel()},componentDidMount(){this._renderFinished();const e=n.findDOMNode(this.refs.inputComponent).offsetWidth;return this.setState({inputWidth:e})},componentDidUpdate(){return this._renderFinished()},render(){const e={"text-input-input":!0,autofocus:this.props.autofocus,"password-input":"password"===v},r={"text-input":!0,"text-input-expandable":this.props.expandable,"text-input-inline":this.props.inline,"textarea-input":"textarea"===t};if(r[this.props.variant||"standard"]=!0,null!=this.props.className)for(const e of Array.from(this.props.className.split(/\s/)))r[e]=!0;const a=this.renderErrorIfEnabled();let n=void 0;((null!=this.props.error?this.props.error.message_text:void 0)||null!=(null!=this.props.error?this.props.error.message_html:void 0))&&(n=this.state.errorWrapperIdName);const i=l.omit(this.props,"expandable","expandedWidthOffset","animationCurve","animationDuration","onCloseClick","defaultValue","value","autofocus","autoresize","inline","className","valueLink","variant","id","name","label","afterRender","onClick","onFocus","onBlur","onKeyDown","onChange","compatiblePlaceholder","placeholder","measureStrength","error","error-after","disable-errors","errorWrapperClassName","closeOnBlur"),p=o.default.createElement(t,l.assignIn({id:this.props.id,name:this.props.name,"aria-describedby":n,className:s.default(e),type:v,value:this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value,onChange:this.onChangeInternal,onFocus:this.onFocusInternal,onBlur:this.onBlurInternal,onKeyDown:this.onKeyDownInternal,autoFocus:this.props.autofocus,ref:"inputComponent",placeholder:this.props.placeholder||""},i));return o.default.createElement("div",{className:s.default(r)},this.props["error-after"]?void 0:a,o.default.createElement("div",{className:"text-input-wrapper"},this._renderPasswordStrengthBar(),p,this.props.expandable?o.default.createElement("a",{href:"#",onClick:this.onCloseClick,ref:"closeButton",className:"close-button u-mar-left-xs"},o.default.createElement(c.Sprite,{group:"web",name:"xclose",alt:h.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})})):void 0,this.props.label&&!(this.props.value||(null!=this.props.valueLink?this.props.valueLink.value:void 0)||this.state.value)?o.default.createElement("label",{htmlFor:this.props.id},this.props.label):void 0),this.props["error-after"]?a:void 0)},getValue(){return n.findDOMNode(this.refs.inputComponent).value},setValue(e){return n.findDOMNode(this.refs.inputComponent).value=e,this.setState({value:e})},resizeComponent(){const e=n.findDOMNode(this.refs.inputComponent),t=p.default(e);return t.css("height","1px"),t.css("height",e.scrollHeight+"px")},_renderPasswordStrengthBar(){return this.props.measureStrength?m(this.state.score):null},_renderFinished(){return this.props.autoresize&&this.resizeComponent(),"function"==typeof this.props.afterRender?this.props.afterRender():void 0},onCloseClick(e){if(null!=e&&e.preventDefault(),!this.props.expandable)return void("function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e));const t=p.default(n.findDOMNode(this.refs.closeButton)),r=p.default(n.findDOMNode(this.refs.inputComponent));return t.stop().animate({opacity:0},this.props.animationDuration),r.stop().animate({width:this.state.inputWidth},this.props.animationDuration,this.props.animationCurve),"function"==typeof this.props.onCloseClick&&this.props.onCloseClick(e),this.setState({expanded:!1})},onChangeInternal(e){if("function"==typeof this.props.onChange&&this.props.onChange(e),null!=this.props.value||(this.props.valueLink?this.props.valueLink.requestChange(e.target.value):this.setState({value:e.target.value})),this.props.measureStrength){let t;return t=this.state.zxcvbn&&e.target.value?Math.max(1,this.state.zxcvbn(e.target.value).score):0,this.setState({score:t})}},onFocusInternal(e){if("function"==typeof this.props.onFocus&&this.props.onFocus(e),!1===this.props.expandable)return;const t=p.default(e.target),r=p.default(n.findDOMNode(this.refs.closeButton));let{inputWidth:s}=this.state;0===s&&(s=n.findDOMNode(this.refs.inputComponent).offsetWidth,this.setState({inputWidth:s}));const a=s+this.props.expandedWidthOffset,o=a-parseInt(t.css("padding-right"))+r.width()/2;return r.css({left:o}),t.stop().animate({width:a},this.props.animationDuration,this.props.animationCurve,()=>r.stop().animate({opacity:1},this.props.animationDuration)),this.setState({expanded:!0})},onBlurInternal(e){const t=e.target.value;return!0===this.props.closeOnBlur&&0===t.length&&this.onCloseClick(),"function"==typeof this.props.onBlur?this.props.onBlur(e):void 0},onKeyDownInternal(e){if("function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e),null!=this.state.expanded!=!1)switch(e.key){case u.Key.Escape:return e.target.blur(),this.onCloseClick()}}})};t.password=v("input","password"),t.text=v("input","text"),t.textarea=v("textarea","text")})),define("modules/clean/react/form_error_mixin",["require","exports","tslib","react","prop-types","lodash"],(function(e,t,r,s,a,o){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),s=r.__importDefault(s),a=r.__importDefault(a),o=r.__importStar(o),n={propTypes:{errorWrapperClassName:a.default.string,errorWrapperIdName:a.default.string,"disable-errors":a.default.bool,"error-after":a.default.bool,error:a.default.shape({message_text:a.default.string,message_html:a.default.string})},getInitialState(){return{errorWrapperIdName:this.props.errorWrapperIdName?this.props.errorWrapperIdName:o.uniqueId("error-message")}},renderErrorIfEnabled(){if(!this.props["disable-errors"])return this.renderError()},renderError(){return null!=(null!=this.props.error?this.props.error.message_html:void 0)?s.default.createElement("div",{id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName,dangerouslySetInnerHTML:{__html:this.props.error.message_html}}):s.default.createElement("div",{id:this.state.errorWrapperIdName,className:this.props.errorWrapperClassName},null!=this.props.error?this.props.error.message_text:void 0)}},t.default=n}));
//# sourceMappingURL=pkg-coreui-forms.min.js-vflftQ4XG.map
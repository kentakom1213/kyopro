define(["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/css/preview-html.css","typescript/libraries/file-viewer/src/css/preview-core.css","typescript/libraries/file-viewer/src/preview_html/types","typescript/libraries/file-viewer/src/frame_messenger/frame_messenger_host","typescript/libraries/file-viewer/src/keyboard/index","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/core/utils/index"],(function(e,i,r,t,a,s,l,n,c,o,p,d,v,w,f,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewHTML=void 0,t=r.__importStar(t),a=r.__importDefault(a),l=r.__importStar(l),n=r.__importStar(n);const _={[p.Key.RightArrow]:{altKey:!0,ctrlKey:!0,metaKey:!0},[p.Key.LeftArrow]:{altKey:!0,ctrlKey:!0,metaKey:!0}},m=[".xlsx"];i.PreviewHTML=e=>{const{config:i,dispatch:r,coreFileViewerUiData:p,previewKey:b,fileConfig:C,rootArchiveFileInformation:y,fileViewerId:I,filePreviewUiData:M,fileMetadata:g,intl:T,toolbarPlugins:E,snackbarManagerPluginInstance:S,width:O,responsiveSize:L,isRawHtml:D}=e,N=e.previewMetadata&&e.previewMetadata.preview_url,R=e.fileMetadata&&e.fileMetadata.file_name,h=t.useRef(),A=i=>{var r;if((e=>c.ACTIONS_FROM_CHILD_IFRAME.includes(e.action))(i))switch(i.action){case c.FROM_CHILD_ACTIONS.FAILED:e.onRenderFailed();break;case c.FROM_CHILD_ACTIONS.VIEWER_READY:e.onInteractive(),e.onRenderSucceeded();break;case c.FROM_CHILD_ACTIONS.KEYDOWN_KEYS:null===(r=h.current)||void 0===r||r.postMessageToChildren(c.TO_CHILD_ACTIONS.SEND_KEYDOWN_KEYS,{keycodes:_});break;case c.FROM_CHILD_ACTIONS.KEYDOWN:const t=new KeyboardEvent("keydown",i.parameters);document.dispatchEvent(t);break;case c.FROM_CHILD_ACTIONS.ACTIVE_MOUSE:window.dispatchEvent(new MouseEvent("mousemove"))}},H=t.useRef(null);t.useEffect(()=>{g&&(null===H.current||H.current!==g.file_name)&&m.includes(u.getFileExtension(g.file_name))&&(r(v.triggerDynamicRoutingModalCheck()),H.current=g.file_name)},[r,g]),t.useEffect(()=>{if(!D)return h.current=new o.PreviewFrameMessengerHost([]),h.current.configureChildMessaging("iframe.previewhtml",A,c.ACTIONS_FROM_CHILD_IFRAME),h.current.startListening(),h.current.postMessageToChildren(c.TO_CHILD_ACTIONS.SEND_KEYDOWN_KEYS,{keycodes:[]}),()=>{var e;null===(e=h.current)||void 0===e||e.stopListening()}},[]);const K=w.useStabilizedCallback(()=>{e.onRenderFailed()}),F=w.useStabilizedCallback(()=>{D&&(e.onInteractive(),e.onRenderSucceeded())}),P=w.useStabilizedCallback(()=>{var e;null===(e=h.current)||void 0===e||e.postMessageToChildren(c.TO_CHILD_ACTIONS.PRINT,{context:s.UserActionContext.Toolbar})}),k=(null==C?void 0:C.enable_print)?"allow-modals allow-scripts":"allow-scripts";return t.createElement("div",{className:a.default(l.app,n.app,{[l.ios]:!1})},t.createElement("iframe",{title:R,onError:K,name:"preview-content",src:N,sandbox:k,className:a.default("previewhtml",l.previewContent),onLoad:F}),t.createElement(d.ConfigurableToolbar,{className:n.toolbar,featureConfig:i,rootArchiveFileInformation:y,fileConfig:C,filePreviewUi:M,fileViewerUi:p,fileMetadata:g,previewKey:b,fileViewerId:I,intl:T,dispatch:r,onPrint:P,previewType:D?f.PreviewType.RawHTML:f.PreviewType.HTML,plugins:E,snackbarManagerPluginInstance:S,previewWidth:O,responsiveSize:L}))},i.PreviewHTML.displayName="PreviewHTML",i.PreviewHTML.displayName="PreviewHTML"}));
//# sourceMappingURL=preview_html.amd.min.js-vflRi9dhx.map
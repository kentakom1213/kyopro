define("modules/clean/css",["require","exports","modules/clean/static_urls","modules/core/assert","modules/core/uri","modules/clean/css_cache"],(function(e,t,r,s,i,o){"use strict";function n(e=document){const t=o.getOrCreateCache(e),r=e.querySelectorAll('link[rel="stylesheet"]');for(let e=0;e<r.length;e++){const s=r[e];let o=i.URI.parse(s.href).getPath();0,null==t.already_loaded_css_paths[o]&&(t.loaded_css[o]=Promise.resolve(),t.already_loaded_css_paths[o]="loaded")}}function c(e,t,s,i=document){const n=o.getOrCreateCache(i),c=r.static_url(e);return o.loadCssWithCache(i,n,e,c).then(t,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerCSSForPreload=t.is_loaded=t.require_css_multi=t.require_css=t.css_url=void 0,n(),t.css_url=function(e){return`url("${String(e).replace(/\\/g,"\\\\").replace(/"/g,'\\"')}")`},t.require_css=c,t.require_css_multi=function(e,t,r,s=document){const i=e.map(e=>c(e,void 0,void 0,s));return Promise.all(i).then(t,r)},t.is_loaded=function(e,t=document){const r=o.getOrCreateCache(t);return!!e.every(e=>(s.assert(e.startsWith("/static/"),`invalid static css path: ${e}`),"loaded"===r.already_loaded_css_paths[e]))||(n(t),e.every(e=>"loaded"===r.already_loaded_css_paths[e]))},t.registerCSSForPreload=function(e){}})),define("modules/clean/css_cache",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadCssWithCache=t.getOrCreateCache=void 0,t.getOrCreateCache=function(e){const t=e;return t._cssCache||(t._cssCache={loaded_css:Object.create(null),already_loaded_css_paths:Object.create(null)}),t._cssCache},t.loadCssWithCache=function(e,t,r,s){let i=t.loaded_css[r];return i||(i=new Promise((i,o)=>{const n=e.createElement("link");return n.href=s,n.rel="stylesheet",n.type="text/css",n.crossorigin="anonymous",n.onload=function(){return t.already_loaded_css_paths[r]="loaded",i()},n.onerror=o,e.head.appendChild(n)}),t.loaded_css[r]=i,t.already_loaded_css_paths[r]="downloading"),i}})),define("modules/core/uri",["require","exports","modules/core/assert"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryComponent=t.URI=void 0;const s=/^(?:([^:\/\\?#]+):)?(?:[\/\\]{2}([^\/\\?#]*))?([^?#]*)(?:\?([^#]*))?(?:[#](.*))?$/,i=/^[a-zA-Z][a-zA-Z0-9+.\-]*$/;class o{constructor(e={}){this.dict={},this.add(e)}static parseString(e){if(!e)return{};const t={};return e.split("&").forEach(e=>{if(""!==e){const r=e.split("="),s=o.decode(r[0]),i=o.decode(r.slice(1).join("="));if(t.hasOwnProperty(s)){const e=t[s];let r;r="string"==typeof e?[e]:void 0===e?[]:e,r.push(i),t[s]=r}else t[s]=i}}),t}add(e,t){if("string"==typeof e)t&&(Array.isArray(t)?this.dict[e]=t.map(String):this.dict[e]=String(t));else for(const t in e)if(e.hasOwnProperty(t)){const r=e[t];null!=r&&(Array.isArray(r)?this.dict[t]=r.map(String):this.dict[t]=String(r))}return this}remove(e){return delete this.dict[e],this}replace(e){return this.dict=e,this}toString(){const e=[],t=Object.keys(this.dict).sort();for(const r of t)if(this.dict.hasOwnProperty(r)){const t=this.dict[r];Array.isArray(t)?t.forEach(t=>{e.push(o.encode(r)+"="+o.encode(t))}):e.push(o.encode(r)+"="+o.encode(t))}return e.length?e.join("&"):""}static decode(e){return null==e?"":n.decode(e.replace(/\+/g,"%20"))}static encode(e){return null==e?"":n.encode(e).replace(/%20/g,"+")}}t.QueryComponent=o;class n{constructor(e={}){this.query=new o,this.initFromObject(e)}initFromObject(e){this.setScheme(e.scheme),this.authority=e.authority||"",this.path=e.path||"",this.setQuery(e.query),this.fragment=e.fragment||""}getScheme(){return this.scheme}getAuthority(){return this.authority}getPath(){return this.path}getQuery(){return this.query.dict}getFragment(){return this.fragment}setScheme(e=""){const t=!e||Boolean(e.match(i));return r.assert(t,"Invalid scheme",{exc_extra:{scheme_param:e}}),this.scheme=e,this}setAuthority(e=""){return this.authority=e,this}setPath(e=""){return this.path=e,this}setQuery(e={}){return this.query=new o(e),this}setFragment(e=""){return this.fragment=e,this}updateQuery(e,t){return this.query.add(e,t),this}removeQuery(e){return this.query.remove(e),this}clone(){return new n(this.toObject())}toObject(){return{scheme:this.getScheme(),authority:this.getAuthority(),path:this.getPath(),query:this.getQuery(),fragment:this.getFragment()}}toString(){let e="";this.scheme&&(e+=this.scheme+":"),this.authority&&(e+="//"+n.encode(this.authority,":@[]")),this.path&&(r.assert(!this.authority||!this.path.length||"/"===this.path[0],'Path must start with a "/" if URI is not relative'),e+=n.encode(this.path,"/"));const t=this.query.toString();return t&&(e+="?"+t),this.fragment&&(e+="#"+n.encode(this.fragment,":@[]/&=+?#!")),e}static parse(e){const t=String(e).match(s)||[],[,r,i,c,a,h]=t,u=new n;return u.setScheme(r),u.setAuthority(n.decode(i)),u.setPath(n.decode(c)),u.setQuery(o.parseString(a)),u.setFragment(n.decode(h)),u}static decode(e){return e?decodeURIComponent(e):""}static encode(e,t=""){if(!e)return"";e=encodeURIComponent(e),t+="~";for(const r of t){const t=encodeURIComponent(r);e=e.replace(new RegExp(t,"g"),r)}return e}static encode_parts(e,t="/"){return e.split(t).map(e=>n.encode(e)).join(t)}}t.URI=n,n.Query=o})),define("modules/clean/static_urls",["require","exports","modules/core/assert","modules/core/uri"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.static_url=void 0,t.static_url=function(e){return r.assert(0===e.indexOf("/static/"),`'${e}' is not a /static url`),new s.URI({scheme:"https",authority:"cfl.dropboxstatic.com",path:e}).toString()}}));
//# sourceMappingURL=pkg-core-url-and-css.min.js-vflZBt0F5.map
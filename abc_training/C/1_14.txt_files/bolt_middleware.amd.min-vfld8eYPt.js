define(["require","exports","typescript/component_libraries/files_components/src/blades/comments/data/actions","api_v2/redux/comments2"],(function(e,n,i,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.middleware=void 0;n.middleware=function(e){return({dispatch:n,getState:o})=>(e.onSignal(e=>{e.updatedChannels.filter(e=>"comments2"===e.channelId.appId).map(e=>{const i=o().boltInfo.boltUniqueIdToStream[e.channelId.uniqueId];i&&n(t.listCommentsAction({arg:{include_permissions:!0,stream:i}}))})}),n=>t=>{switch(t.type){case i.Action.BoltSubscribe:e.subscribe(t.payload.map(e=>({channelId:{appId:e.app_id,uniqueId:e.unique_id},revisionInfo:{revision:+e.revision,token:e.token}})));break;case i.Action.BoltUnsubscribe:e.unsubscribe(t.payload.map(e=>({channelId:{appId:e.app_id,uniqueId:e.unique_id},revisionInfo:{revision:+e.revision,token:e.token}})))}return n(t)})}}));
//# sourceMappingURL=bolt_middleware.amd.min.js-vflltfZMH.map
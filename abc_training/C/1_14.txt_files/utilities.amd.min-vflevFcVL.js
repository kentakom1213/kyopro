define(["require","exports","typescript/libraries/comments2/src/components/annotation_instructional_tooltip_pane/utilities"],(function(t,e,i){"use strict";var n;function o(t,e=0,i=1){return Math.min(Math.max(e,t),i)}function h({x:t,y:e,width:i,height:n}){return{x:o(t),y:o(e),width:o(i),height:o(n)}}function r(t,e,i){const n=i?i.x:t.left-e.left,o=i?i.y:t.top-e.top;return h({x:n/e.width,y:o/e.height,width:t.width/e.width,height:t.height/e.height})}function g(t,e){const i=t.x+t.width-e.width,n=t.y+t.height-e.height;return{x:Math.min(i,e.x),y:Math.min(n,e.y),width:e.width,height:e.height}}function a(t,e){const i=t.x+t.width,n=t.y+t.height,h=t.x,r=t.y,g={x:o(e.x,h,i),y:o(e.y,r,n)},a=o(e.x+e.width,h,i),c=o(e.y+e.height,r,n);return{x:g.x,y:g.y,width:a-g.x,height:c-g.y}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOverlayElementPosition=e.isOnDivWithClass=e.isOnImage=e.isOnLink=e.isOnText=e.getSurfaceFromEvt=e.getTextSelectionRange=e.applyEdgeBounding=e.applyEdgeBoundingByDimensions=e.applyEdgeBoundingByPosition=e.createAnnotation=e.createPlacementFromNormalizedRegion=e.createNormalizedRegion=e.createRectangleFromPixelRectangle=e.normalizeRegion=e.normalizeValue=e.toPoint=e.Surface=e.COMPONENT_CLASS_NAME=void 0,e.COMPONENT_CLASS_NAME="sc-annotation-conductor-layer",(n=e.Surface||(e.Surface={}))[n.None=0]="None",n[n.Text=1]="Text",n[n.Link=2]="Link",n[n.Creation=3]="Creation",e.toPoint=function(t){const{top:e,left:i,width:n,height:o}=t.currentTarget.getBoundingClientRect(),{clientX:h,clientY:r}=t,[g,a]=[h-i,r-e];return{x:g/n,y:a/o}},e.normalizeValue=o,e.normalizeRegion=h,e.createRectangleFromPixelRectangle=function(t,e){return r({left:t.x,top:t.y,width:t.width,height:t.height},{left:e.x,top:e.y,width:e.width,height:e.height})},e.createNormalizedRegion=r,e.createPlacementFromNormalizedRegion=function(t,e,i,n){const{x:o,y:h,width:r,height:g}=t;return{x:o*e+((null==n?void 0:n.x)||0),y:h*i+((null==n?void 0:n.y)||0),width:r*e,height:g*i}},e.createAnnotation=function(t,e){return void 0!==e?{type:"document",regionType:e,regions:t}:{type:"image",region:t[0]}},e.applyEdgeBoundingByPosition=g,e.applyEdgeBoundingByDimensions=a;function c(t){const e=t.target.tagName.toUpperCase();return"P"===e||"TEXT"===e}function u(t){return"A"===t.target.tagName}function d(t){return"IMG"===t.target.tagName}function l(t,e){return t.target.classList.contains(e)}e.applyEdgeBounding=function(t,e,i){return(function(t,e){let{x:i,y:n,width:o,height:h}=t;const r=i+o,g=n+h,a=e.x+e.width,c=e.y+e.height;return o<=8&&r+8>a&&(i=r-8,o=8),h<=8&&g+8>c&&(n=g-8,h=8),{x:i,y:n,width:o,height:h}})(i?g(e,t):a(e,t),e)},e.getTextSelectionRange=function(){const t=window.getSelection();if(t)return t.getRangeAt(0)},e.getSurfaceFromEvt=function(t){return u(t)?e.Surface.Link:c(t)?e.Surface.Text:l(t,e.COMPONENT_CLASS_NAME)||l(t,i.COMPONENT_CLASS_NAME)||d(t)?e.Surface.Creation:e.Surface.None},e.isOnText=c,e.isOnLink=u,e.isOnImage=d,e.isOnDivWithClass=l,e.getOverlayElementPosition=function(t,e,i,n,o){const h=r(t,i);let g,a;if(h.y*i.height>=n+o)g=(h.x+h.width/2)*i.width-n/2,a=h.y*i.height-n-o;else if((1-h.x-h.width)*i.width>=n)g=(h.x+h.width)*i.width+o,a=(h.y+h.height/2)*i.height-n/2;else if(h.x*i.width>=n)g=h.x*i.width-n-o,a=(h.y+h.height/2)*i.height-n/2;else if((1-h.y-h.height)*i.height>=n)g=(h.x+h.width/2)*i.width-n/2,a=(h.y+h.height)*i.height+o;else{const t=r(e,i);g=(t.x+t.width/2)*i.width-n/2,a=(t.y+t.height)*i.height+o}return{x:g,y:a}}}));
//# sourceMappingURL=utilities.amd.min.js-vflh2lkJk.map
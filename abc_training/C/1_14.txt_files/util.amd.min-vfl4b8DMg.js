define(["require","exports","tslib","react","classnames","spectrum/positioned_portal/index","spectrum/facepile_tooltip/facepile_tooltip_content","typescript/libraries/comments2/src/components/rich_facepile/types"],(function(t,o,e,i,s,l,r,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.UtilTooltip=void 0,i=e.__importStar(i),s=e.__importDefault(s);class a extends i.PureComponent{constructor(t){super(t),this.tooltipDirection="below",this.hidePortal=()=>{const t=this.portalRef.current;t&&t.hidePortal.call(t)},this.handlePortalMouseout=t=>{const{displayMode:o}=this.props;o===n.DisplayMode.Hover&&this.hasLeftIntoTooltip(t)&&t.stopPropagation()},this.onContentMouseLeave=()=>{this.props.displayMode===n.DisplayMode.Hover&&this.hidePortal()},this.renderContent=()=>{var t,o;const{avatarColor:e,tooltipContent:l,tooltipContentWrapperClassName:n,source:a}=this.props;return null===l?null:i.createElement(r.FacepileTooltipContent,{backgroundColor:e,className:s.default("sc-rich-facepile-tooltip-content-container",n,{"offset-facepile":"fileViewer"===a&&(l.props.colorSeed||(null===(o=null===(t=l.props.children)||void 0===t?void 0:t.props)||void 0===o?void 0:o.colorSeed))}),tooltipContent:l,onMouseLeave:this.onContentMouseLeave})},this.portalRef=i.createRef()}componentDidUpdate({displayMode:t}){const{displayMode:o}=this.props,{current:e}=this.portalRef;e&&o!==t&&(o===n.DisplayMode.ForceShow?(this.hidePortal(),window.setTimeout(()=>e.showPortal.call(e),0)):e.state.isShown&&this.hidePortal())}hasLeftIntoTooltip(t){const o=t.target.getBoundingClientRect(),e=Math.abs(o.top-t.pageY),i=Math.abs(o.bottom-t.pageY),s=Math.abs(o.left-t.pageX),l=Math.abs(o.right-t.pageX);switch(Math.min(e,i,s,l)){case e:return"above"===this.tooltipDirection;case i:return"below"===this.tooltipDirection;case s:return"left"===this.tooltipDirection;case l:default:return"right"===this.tooltipDirection}}render(){const{avatar:t,onTooltipShown:o,onTooltipHidden:e,displayMode:s=n.DisplayMode.Auto}=this.props,r=s===n.DisplayMode.Hover?i.createElement("div",{onMouseLeave:this.handlePortalMouseout},t):t;return i.createElement(l.PositionedPortal,{renderContent:this.renderContent,onDidShow:o,onWillClose:e,isShowInitially:s===n.DisplayMode.ForceShow,positioning:this.tooltipDirection,ref:this.portalRef,showOnMouseMove:s===n.DisplayMode.Auto||s===n.DisplayMode.Hover,closeOnBlur:s===n.DisplayMode.Auto||s===n.DisplayMode.Hover},r)}}o.UtilTooltip=a,a.displayName="UtilTooltip"}));
//# sourceMappingURL=util.amd.min.js-vflk-D-Ky.map
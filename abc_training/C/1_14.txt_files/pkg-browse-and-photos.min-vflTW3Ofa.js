define("modules/clean/flux/action_type",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withActionNamespace=void 0;t.withActionNamespace=function(e,t){const r={},o={};for(const a of Object.keys(t||{})){const s=t[a];if(r[a]=`${e}__${s}`,null!=o[s])throw new Error(`Duplicate action value '${s}'!`);o[s]=!0}return r}})),define("modules/clean/sharing/clean/util/guards",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEither=t.isBoth=t.isObjectOf=t.isArrayOf=t.isObject=t.isArray=t.isUndefined=t.isNull=t.isNumber=t.isString=t.isBoolean=t.isExactly=t.isUnknown=void 0,t.isUnknown=e=>!0,t.isExactly=e=>t=>t===e,t.isBoolean=e=>"boolean"==typeof e,t.isString=e=>"string"==typeof e,t.isNumber=e=>"number"==typeof e,t.isNull=e=>null===e,t.isUndefined=e=>void 0===e,t.isArray=e=>Array.isArray(e),t.isObject=e=>!t.isNull(e)&&!t.isArray(e)&&"object"==typeof e,t.isArrayOf=e=>r=>t.isArray(r)&&r.every(e),t.isObjectOf=e=>r=>t.isObject(r)&&Object.entries(e).every(([e,t])=>t(r[e])),t.isBoth=(e,t)=>r=>e(r)&&t(r),t.isEither=(e,t)=>r=>e(r)||t(r)})),define("modules/clean/sharing/gating_util",["require","exports","modules/constants/sharing"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUserNoCommentEnabled=t.GoldenGate=void 0,t.GoldenGate={hasNewOwnershipModel:e=>Boolean(r.GOLDEN_GATE.HAS_NEW_OWNERSHIP_MODEL[e]),hasContentManagerAndSuperAdmin:e=>Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_AND_SUPER_ADMIN[e]),hasContentManagerCdm:e=>Boolean(r.GOLDEN_GATE.HAS_CONTENT_MANAGER_CDM[e]),hasContentManagerFolderRestore:e=>Boolean(r.GOLDEN_GATE.CAN_RESTORE_FOLDERS_IN_CM[e]),SHARING_TOTAL_LIMIT:r.GOLDEN_GATE.SHARING_TOTAL_LIMIT},t.isUserNoCommentEnabled=function(e){return r.TRUELINK.NO_COMMENT_ENABLED&&!!(null!=e?r.TRUELINK.NO_COMMENT_ENABLED[e.id]:void 0)}})),define("modules/clean/sharing/ui_util",["require","exports","tslib","react","lodash","modules/clean/analytics","api_v2/error","modules/clean/contacts/contact_token_state","modules/clean/filepath/filepath","modules/clean/filetypes","modules/clean/react/icon/icon_helper","modules/clean/sharing/api/types/metadata","modules/clean/sharing/gating_util","modules/constants/trademark","modules/core/i18n","modules/core/format_html","modules/clean/user_survey/user_survey","spectrum-sharing/utils/sharing_constants","modules/clean/sharing/clean/util/guards"],(function(e,t,r,o,a,s,n,i,l,d,u,_,E,c,m,f,M,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackReceiverUserLeapEvent=t.ReceiverUserLeapEvent=t.trackUserLeapEvent=t.SharingUserLeapEvent=t.validateContacts=t.validateContact=t.treeSizeExceededFailSnackbarMsg=t.totalMountsExceededFailSnackbarMsg=t.spectrumFolderIconForMetadata=t.shouldEnforceMemberLimits=t.logTiburonEvent=t.getTreeSizeExceededLinkOnlyMsg=t.getHomeMountsExceededLinkOnlyMsg=t.getTotalMountsExceededLinkOnlyMsg=t.getTotalMountsExceededMountFoldersMsg=t.getTreeSizeExceededMountFoldersMsg=t.getHomeMountsExceededMountFoldersMsg=t.getTotalMountsExceededMsg=t.getTreeSizeExceededMsg=t.getNewFolderPathFromContentName=t.getMountLimitInfo=t.getMemberCountForTokens=t.getHomeMountsExceededMsg=t.getExceededCountInfo=t.getContactSupportMessage=t.genAddMemberErrorMessage=t.isTreeSizeExceededError=t.isHomeMountsExceededError=t.isTotalMountsExceededError=t.SHARE_UI_TYPE=t.SharingExperiments=t.makeMemberSortCmp=t.homeMountsExceededFailSnackbarMsg=t.fileIconForMetadata=t.convertIfHTML=t.CONTACT_ERROR_MESSAGES=t.ContactsErrorLevel=void 0,o=r.__importDefault(o),a=r.__importStar(a),h=r.__importStar(h);t.SharingExperiments={};const S={strong:e=>o.default.createElement("strong",null,e),em:e=>o.default.createElement("em",null,e)};t.SHARE_UI_TYPE={SHARED_FILE:"shared-file",SHARED_FOLDER:"shared-folder",SHARED_LINK:"shared-link",PUBLIC:"public",NO_SHARE:"no-share"};const O={SINGLE_INVALID:m.intl.formatMessage({id:"AwwRIX",defaultMessage:"The email address you entered is invalid."}),SINGLE_OUT_OF_TEAM:m.intl.formatMessage({id:"KCd6Mi",defaultMessage:"You can only share with your team and people your admin has approved."}),SINGLE_TOO_MANY_MEMBERS:m.intl.formatMessage({id:"ZEnulX",defaultMessage:"Can’t share with this many people."}),GENERAL_INVALID:m.intl.formatMessage({id:"85p8vn",defaultMessage:"One or more names or email addresses you entered are invalid."}),GENERAL_OUT_OF_TEAM:m.intl.formatMessage({id:"Dw/7c6",defaultMessage:"Some of these people aren’t on your Dropbox team."}),GENERAL_TOO_MANY_MEMBERS:m.intl.formatMessage({id:"rTaV0v",defaultMessage:"This will put the folder over its {member_limit}-member limit. <a>Learn more.</a>"},{member_limit:E.GoldenGate.SHARING_TOTAL_LIMIT,a:e=>o.default.createElement("a",{href:"/help/9292",target:"_blank",key:"help_center_article"},e)}),NONGROUP_INVITEE:m.intl.formatMessage({id:"XHbTJ8",defaultMessage:"Only groups can be added to team folders."}),NO_PERMISSION:m.intl.formatMessage({id:"O1327M",defaultMessage:"You don’t have permission to share with this person."}),GENERAL_NO_PERMISSION:m.intl.formatMessage({id:"XDLsmJ",defaultMessage:"You don’t have permission to share with some of these people."})};var R;t.CONTACT_ERROR_MESSAGES=O,(function(e){e.Error="error",e.Warn="warn"})(R||(R={})),t.ContactsErrorLevel=R;const A=(e,t)=>(t.displayName()||"").toLowerCase(),T=Math.pow(2,53)-1;t.makeMemberSortCmp=function(e,t,r){const o=r?(e=>function(t,r){const o=r.memberId()===t,a=r instanceof _.GroupMembershipInfo?"0":"1",s=(r.displayName()||"").toLowerCase(),n=null!=r.account_id&&e.has(r.account_id);return`${a}${n&&o?"a":n?"b":null!=r.time_last_seen?`c${(function(e){let t=String(T-Number(e));const r=String(T).length;return t.length<r&&(t=`${Array(r-t.length+1).join("0")}${t}`),t})(r.time_last_seen)}`:"d"}${s}`})(t):A;return function(t,r){const a=o(e.account_id,t),s=o(e.account_id,r);return a<s?-1:a===s?0:1}};const p=function(e,t,r){return!e.is_cdm_member&&(t||r)};t.shouldEnforceMemberLimits=p;t.validateContact=function(e,t,r,o,a,s,n){let l={state:i.ContactTokenState.ok,msg:null};if(a&&!e.group_id)return{state:i.ContactTokenState.invalid,msg:O.NONGROUP_INVITEE};if(p(t,a,s)&&n>E.GoldenGate.SHARING_TOTAL_LIMIT)return{state:i.ContactTokenState.invalid,msg:O.SINGLE_TOO_MANY_MEMBERS};if(e.invalid)l={state:i.ContactTokenState.invalid,msg:O.SINGLE_INVALID};else{if(e.email===t.email)return l;if(null!=r&&t.is_team&&e.dbx_team_id!==r.id&&!e.group_id){const e=O.SINGLE_OUT_OF_TEAM;let t;t="team"===(null!=o?o.member_policy:void 0)||"team"===(null!=o?o.resolved_member_policy:void 0)?i.ContactTokenState.invalid:i.ContactTokenState.warn,l={msg:e,state:t}}}return l};t.validateContacts=function(e,t,r,o,a,s,n){let l=void 0,d=void 0;for(const t of e){const e=r[t.getKey()];if(!e)continue;const{state:o,msg:a}=e;if(o===i.ContactTokenState.invalid){if(l=R.Error,a===O.SINGLE_INVALID){d=O.GENERAL_INVALID;break}a===O.SINGLE_OUT_OF_TEAM&&(d=O.GENERAL_OUT_OF_TEAM),a===O.NONGROUP_INVITEE&&(d=O.NONGROUP_INVITEE),a===O.NO_PERMISSION&&(d=O.GENERAL_NO_PERMISSION)}o===i.ContactTokenState.warn&&a===O.SINGLE_OUT_OF_TEAM&&(l||(l=R.Warn,d=O.GENERAL_OUT_OF_TEAM))}return p(t,a,s)&&e.length>0&&l!==R.Error&&n>E.GoldenGate.SHARING_TOTAL_LIMIT&&(l=R.Error,d=O.GENERAL_TOO_MANY_MEMBERS),{level:l,message:d}};t.logTiburonEvent=(e,t,r,o={})=>{const n=e.extras.origin;s.ShareTibEventLogger.log(t,r,n,a.assignIn(o,{file_id:e.extras.fileId,fq_path:e.displayPath(),ns_id:e.isSharedFolder()?e.sharedFolderId():void 0,modal_session_id:e.extras.modalSessionId}))};const I={access_error:m.intl.formatMessage({id:"N0ZK+y",defaultMessage:"You don’t have access to this content."}),email_unverified:m.intl.formatMessage({id:"YVPxPt",defaultMessage:"You haven’t verified your email. Check your email and try again."}),bad_member:m.intl.formatMessage({id:"0AMMBX",defaultMessage:"You entered an invalid name or email address."}),cant_share_outside_team:m.intl.formatMessage({id:"JoJWle",defaultMessage:"Your team settings don’t allow sharing outside your team."}),too_many_members:m.intl.formatMessage({id:"Zq3Ehi",defaultMessage:"You’re sharing with too many people."}),too_many_pending_invites:m.intl.formatMessage({id:"Zq3Ehi",defaultMessage:"You’re sharing with too many people."}),rate_limit:m.intl.formatMessage({id:"ZXI9uh",defaultMessage:"You’ve hit the limit of invites for today. Try again later."}),insufficient_plan:m.intl.formatMessage({id:"osl3qq",defaultMessage:"You need a Dropbox {trademark_plus} or Business account to do this."},{trademark_plus:c.TRADEMARK_PLUS}),team_folder:m.intl.formatMessage({id:"ehBhap",defaultMessage:"You can’t add members to a team folder. Contact your team admin."}),no_permission:m.intl.formatMessage({id:"5/am2Y",defaultMessage:"You don’t have permission to do this. Contact the owner."})};t.genAddMemberErrorMessage=function(e){return e.message?e.message:e instanceof n.AppError&&e.error&&e.error[".tag"]&&I[e.error[".tag"]]?I[e.error[".tag"]]:m.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})};t.spectrumFolderIconForMetadata=function(e){const t=null!=e.parent_shared_folder_id,r=e.isViewOnly();let o=d.FileTypes.FOLDER;return e.isSharedFolder()?o=d.FileTypes.SHARED_FOLDER:e.is_team_folder&&(o=d.FileTypes.TEAM_SHARED_FOLDER),u.spectrumFolderIcon({fileType:o,isInTeamFolderTree:t,isViewOnly:r})};t.fileIconForMetadata=e=>u.file_icon(e.name,{size:u.ICON_SIZES.LARGE});t.getNewFolderPathFromContentName=function(e,t){return[l.normalize(t),e].join("/")};t.getMemberCountForTokens=function(e){return null==e?0:e.map(e=>e.group_size||1).reduce((e,t)=>e+t,0)};var L,N;t.convertIfHTML=function(e){return e.toHTML?f.legacyFormatHtmlAsReact(e.toHTML(),S):e},(function(e){e.SHARE_SUCCESS="share_success",e.SHARE_MODAL_CLOSE="share_modal_close"})(L||(L={})),t.SharingUserLeapEvent=L,(function(e){e.VIEWED_SHARED_FOLDER="viewed_shared_folder",e.VIEWED_SHARED_FILE="viewed_shared_file",e.VISIT_SHARE_PAGE="visit_share_page"})(N||(N={})),t.ReceiverUserLeapEvent=N;t.trackUserLeapEvent=(e,t)=>{(e=>void 0!==e&&[g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_FACEPILE,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_BUTTON,g.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ROW_OVERFLOW_MENU].indexOf(e)>=0)(t)&&(M.UserSurvey.addAttribute("eventName",e),M.UserSurvey.trackEvent(e,"sharing"))};t.trackReceiverUserLeapEvent=e=>{M.UserSurvey.addAttribute("eventName",e),M.UserSurvey.trackEvent(e,"sharing")};t.getTotalMountsExceededMsg=()=>m.intl.formatMessage({id:"CdLxbe",defaultMessage:"Unable to complete this operation because your Dropbox has too many shared folders."});t.getHomeMountsExceededMsg=()=>m.intl.formatMessage({id:"AMJRvM",defaultMessage:"Unable to complete this operation because your Dropbox has too many shared folders."});t.getTreeSizeExceededMsg=()=>m.intl.formatMessage({id:"SfQyoF",defaultMessage:"Unable to complete this operation because the top level folder has too many shared folders."});t.getTotalMountsExceededMountFoldersMsg=e=>{const t=F(e);return m.intl.formatMessage({id:"9QyNYB",defaultMessage:"We were unable to add this folder because your Dropbox has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.getHomeMountsExceededMountFoldersMsg=e=>{const t=F(e);return m.intl.formatMessage({id:"LBw/3a",defaultMessage:"We were unable to add this folder because your Dropbox has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.getTreeSizeExceededMountFoldersMsg=e=>{const t=F(e);return m.intl.formatMessage({id:"y7kOfm",defaultMessage:"We were unable to add this folder because the top level folder has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.getTotalMountsExceededLinkOnlyMsg=e=>m.intl.formatMessage({id:"jtZljV",defaultMessage:"Only link sharing is available because your Dropbox has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:e});t.getHomeMountsExceededLinkOnlyMsg=e=>m.intl.formatMessage({id:"WibRe+",defaultMessage:"Only link sharing is available because your Dropbox has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:e});t.getTreeSizeExceededLinkOnlyMsg=e=>m.intl.formatMessage({id:"P/0F13",defaultMessage:"Only link sharing is available because the top level folder has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:e});const b=e=>h.isObjectOf({error:h.isObjectOf({".tag":h.isExactly("too_many_mounts"),too_many_mounts:h.isObjectOf({".tag":e})})}),y=b(h.isExactly("total_mounts_exceeded"));t.isTotalMountsExceededError=y;const v=b(h.isExactly("home_mounts_exceeded"));t.isHomeMountsExceededError=v;const C=b(h.isExactly("tree_size_exceeded"));t.isTreeSizeExceededError=C;t.getContactSupportMessage=()=>m.intl.formatMessage({id:"Bcojaq",defaultMessage:"Contact support"});const D=e=>new _.MountLimitInfo({limit:e.error.too_many_mounts.limit,current_count:e.error.too_many_mounts.current_count,new_count:e.error.too_many_mounts.new_count});t.getMountLimitInfo=D;t.homeMountsExceededFailSnackbarMsg=e=>{const t=F(e);return m.intl.formatMessage({id:"wwbpWM",defaultMessage:"Unable to complete this operation because your Dropbox has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.totalMountsExceededFailSnackbarMsg=e=>{const t=F(e);return m.intl.formatMessage({id:"KQAYgx",defaultMessage:"Unable to complete this operation because your Dropbox has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};t.treeSizeExceededFailSnackbarMsg=e=>{const t=F(e);return m.intl.formatMessage({id:"+d3z/S",defaultMessage:"Unable to complete this operation because top level folder has {number, plural, one{1 shared folder} other {{number} shared folders}} over the limit."},{number:t})};const F=e=>{const t=D(e),r=t.limit;return t.current_count-r+1};t.getExceededCountInfo=F})),define("modules/clean/sharing/share_page/action_types",["require","exports","modules/clean/flux/action_type"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharePageActionTypes=void 0;const o=r.withActionNamespace("share-page",{INITIALIZE:"initialize-store",EMAIL_UNVERIFIED:"email-unverified",RECENT_TAB_EMAIL_UNVERIFIED:"recent-tab-email-unverified",SWITCH_TAB:"switch-tab",SWITCH_ROLE:"switch-role",SWITCH_USER:"switch-user",LOAD_PRE_FOLDER_DATA_REQUEST:"load-pre-folder-data-request",LOAD_PRE_FOLDER_DATA_SUCCESS:"load-pre-folder-data-success",LOAD_PRE_FOLDER_DATA_ERROR:"load-pre-folder-data-error",LOAD_FOLDER_DATA_REQUEST:"load-folder-data-request",LOAD_FOLDER_DATA_SUCCESS:"load-folder-data-success",LOAD_FOLDER_DATA_ERROR:"load-folder-data-error",LOAD_PRE_FILE_DATA_REQUEST:"load-pre-file-data-request",LOAD_PRE_FILE_DATA_SUCCESS:"load-pre-file-data-success",LOAD_PRE_FILE_DATA_ERROR:"load-pre-file-data-error",LOAD_FILE_DATA_REQUEST:"load-file-data-request",LOAD_FILE_DATA_SUCCESS:"load-file-data-success",LOAD_FILE_DATA_ERROR:"load-file-data-error",MOUNT_FOLDER_REQUEST:"mount-folder-request",MOUNT_FOLDER_SUCCESS:"mount-folder-success",MOUNT_FOLDER_ERROR:"mount-folder-error",UNMOUNT_FOLDER_REQUEST:"unmount-folder-request",UNMOUNT_FOLDER_SUCCESS:"unmount-folder-success",UNMOUNT_FOLDER_ERROR:"unmount-folder-error",UNSHARE_FOLDER_REQUEST:"unshare-folder-request",UNSHARE_FOLDER_SUCCESS:"unshare-folder-success",UNSHARE_FOLDER_ERROR:"unshare-folder-error",FETCH_TEAM_POLICY_REQUEST:"fetch-team-policy-request",FETCH_TEAM_POLICY_SUCCESS:"fetch-team-policy-success",FETCH_TEAM_POLICY_ERROR:"fetch-team-policy-error",FETCH_FOLDER_POLICY_SUCCESS:"fetch-folder-policy-success",FETCH_METADATA_SUCCESS:"fetch-metadata-success",RELINQUISH_FOLDER_MEMBERSHIP_REQUEST:"relinquish-folder-membership-request",RELINQUISH_FOLDER_MEMBERSHIP_SUCCESS:"relinquish-folder-membership-success",RELINQUISH_FOLDER_MEMBERSHIP_ERROR:"relinquish-folder-membership-error",RELINQUISH_FILE_MEMBERSHIP_REQUEST:"relinquish-file-membership-request",RELINQUISH_FILE_MEMBERSHIP_SUCCESS:"relinquish-file-membership-success",RELINQUISH_FILE_MEMBERSHIP_ERROR:"relinquish-file-membership-error"});t.SharePageActionTypes=o}));
//# sourceMappingURL=pkg-browse-and-photos.min.js-vflTfoAuP.map